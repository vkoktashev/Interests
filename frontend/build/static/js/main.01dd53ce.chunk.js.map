{"version":3,"sources":["routes/CalendarPage/calendar-page.module.sass","settings.ts","services/jwtAuth.js","store/AuthStore.ts","store/PagesStore.ts","routes/HomePage/index.js","routes/HomePage/HomePage.js","http/index.js","services/gameRequests.ts","store/GameStore.ts","shared/StatusButtonGroup/StatusButtonGroup.js","shared/StatusButtonGroup/index.js","shared/Rating/Rating.js","shared/Rating/index.js","shared/FriendsActivity/views/FriendActivity/FriendActivity.js","shared/FriendsActivity/views/FriendActivity/index.js","shared/FriendsActivity/FriendsActivity.js","shared/FriendsActivity/index.js","routes/GamePage/views/TimeToBeat/TimeToBeat.js","routes/GamePage/views/TimeToBeat/index.js","shared/ScoreBlock/ScoreBlock.js","shared/ScoreBlock/index.js","shared/InputNumber/InputNumber.js","shared/InputNumber/index.js","enums/GameStoresEnum.ts","shared/GameStores/GameStores.tsx","shared/GameStores/index.ts","routes/GamePage/index.js","routes/GamePage/GamePage.js","services/movieRequests.js","store/MovieStore.ts","routes/MoviePage/index.js","routes/MoviePage/MoviePage.js","services/showRequests.js","store/ShowStore.ts","shared/DetailEpisodeRow/DetailEpisodeRow.js","shared/DetailEpisodeRow/index.js","routes/ShowPage/views/SeasonBlock/index.js","routes/ShowPage/views/SeasonBlock/SeasonBlock.js","routes/ShowPage/views/SeasonsBlock/index.js","routes/ShowPage/views/SeasonsBlock/SeasonsBlock.js","routes/ShowPage/index.js","routes/ShowPage/ShowPage.js","routes/ShowSeasonPage/index.js","routes/ShowSeasonPage/SeasonPage.js","routes/ShowEpisodePage/index.js","routes/ShowEpisodePage/EpisodePage.js","services/userRequests.ts","store/SearchStore.ts","routes/SearchPage/views/SearchCard/SearchCard.js","routes/SearchPage/views/SearchCard/index.js","routes/SearchPage/views/SearchCardsBlock/SearchCardsBlock.js","routes/SearchPage/views/SearchCardsBlock/index.js","routes/SearchPage/views/GameCards.js","routes/SearchPage/views/MovieCards.js","routes/SearchPage/views/ShowCards.js","shared/CardUser/CardUser.js","shared/CardUser/index.js","shared/FriendBlock/FriendBlock.js","shared/FriendBlock/index.js","routes/SearchPage/views/UserCards.js","shared/CategoriesTab/CategoriesTab.tsx","shared/CategoriesTab/index.js","routes/SearchPage/SearchPage.tsx","routes/SearchPage/index.js","hooks/useScroll.js","routes/ConfirmPage/index.js","routes/ConfirmPage/ConfirmPage.js","routes/ConfirmPasswordPage/index.js","routes/ConfirmPasswordPage/ConfirmPasswordPage.js","store/UserStore.ts","shared/SelectMulti/SelectMulti.js","shared/SelectMulti/index.js","routes/UserPage/views/ItemsBlock/ItemRow/ItemRow.js","hooks/useWindowDimensions.js","routes/UserPage/views/ItemsBlock/ItemBlock/ItemBlock.js","routes/UserPage/views/ItemsBlock/ItemBlock/index.js","routes/UserPage/views/ItemsBlock/GameBlock.js","routes/UserPage/views/ItemsBlock/MovieBlock.js","routes/UserPage/views/UserLogs/LogRow/LogRow.js","routes/UserPage/views/UserLogs/LogsByDay/LogsByDay.js","routes/UserPage/views/UserLogs/UserLogs.js","routes/UserPage/views/UserLogs/index.js","routes/UserPage/views/ItemsBlock/ShowBlock.js","routes/UserPage/views/StatisticsBlock/Colors.js","routes/UserPage/views/StatisticsBlock/GenresChart/GenresChart.js","routes/UserPage/views/StatisticsBlock/YearsChart/YearsChart.js","routes/UserPage/views/StatisticsBlock/ChartBlock/ChartBlock.js","routes/UserPage/views/StatisticsBlock/StatisticsBlock.js","routes/UserPage/views/StatisticsBlock/index.js","routes/UserPage/index.js","routes/UserPage/UserPage.js","store/CurrentUserStore.ts","routes/CalendarPage/views/DayInfo/DayInfo.js","routes/CalendarPage/views/DayInfo/index.js","routes/CalendarPage/views/ReleasesList/ReleasesList.js","routes/CalendarPage/views/ReleasesList/index.js","routes/CalendarPage/CalendarPage.js","routes/CalendarPage/index.js","routes/SettingsPage/index.js","routes/SettingsPage/SettingsPage.js","routes/UnwatchedPage/views/EpisodeRow/EpisodeRow.js","routes/UnwatchedPage/views/EpisodeRow/index.js","routes/UnwatchedPage/views/ShowBlock/ShowBlock.js","routes/UnwatchedPage/views/ShowBlock/index.js","routes/UnwatchedPage/index.js","routes/UnwatchedPage/UnwatchedPage.js","routes/NotFoundPage/wrongPage.png","routes/NotFoundPage/NotFoundPage.js","routes/NotFoundPage/index.js","shared/Button/Button.tsx","shared/Button/index.ts","routes/RandomPage/views/RandomCard/RandomCard.tsx","routes/RandomPage/views/RandomCard/index.ts","routes/RandomPage/RandomPage.tsx","Routes.tsx","shared/app/Navbar/views/SearchInput/index.js","shared/app/Navbar/views/SearchInput/SearchInput.js","shared/app/Navbar/index.js","shared/app/Navbar/Navbar.js","shared/app/Footer/tmdb-logo.svg","shared/app/Footer/Footer.js","shared/app/Footer/index.js","shared/app/Sidebar/index.js","shared/app/Sidebar/Sidebar.js","shared/Modal/Modal.tsx","shared/Modal/index.ts","shared/Modals/LoginForm/LoginForm.tsx","shared/Modals/LoginForm/index.ts","shared/Modals/RegisterForm/index.ts","shared/Modals/RegisterForm/RegisterForm.tsx","shared/Modals/ResetPasswordForm/ResetPasswordForm.tsx","shared/Modals/ResetPasswordForm/index.ts","App.tsx","serviceWorker.js","index.tsx"],"names":["module","exports","BACKEND_URL","GET_TOKEN_URL","REFRESH_TOKEN_URL","REGISTRATE_URL","CONFIRM_URL","RESET_PASSWORD_URL","CONFIRM_PASSWORD_URL","GET_GAME_URL","SEARCH_GAMES_URL","SEARCH_GAMES_FAST_URL","GET_MOVIE_URL","SEARCH_MOVIES_URL","SEARCH_MOVIES_FAST_URL","GET_SHOW_URL","SEARCH_SHOWS_URL","SEARCH_SHOWS_FAST_URL","GET_UNWATCHED_EPISODES_URL","USER_INFO_URL","USER_CALENDAR_URL","SEARCH_USERS_URL","USER_SETTINGS_URL","getToken","username","password","axios","post","urls","res","userData","jwt_decode","data","access","user","id","user_id","email","token","refreshToken","refresh","updateToken","registration","status","confirmation","uid64","patch","resetPassword","put","confirmPassword","Auth","loggedIn","authState","registrateState","confirmEmailState","resetPasswordState","confirmPasswordState","tryAuth","login","auth","then","authSuccess","authFailure","localStorage","setItem","error","resetAuthorization","response","detail","removeItem","register","registerSuccess","registerFailure","result","errors","error2","confirmEmail","confirmEmailSuccess","confirmEmailFailure","resetPasswordSuccess","resetPasswordFailure","confirmPasswordSuccess","confirmPasswordFailure","checkAuth","getItem","checkAuthSuccess","checkAuthFailure","makeAutoObservable","this","AuthStore","PagesStore","LoginFormIsOpen","RegistrateFormIsOpen","ResetPasswordFormIsOpen","saveEpisodesBlockIsOpen","sidebarIsToggled","sidebarIsCollapsed","toggleSidebar","JSON","stringify","collapseSidebar","openLoginForm","closeLoginForm","openRegistrateForm","closeRegistrateForm","openResetPasswordForm","closeResetPasswordForm","setSaveEpisodes","HomePage","observer","props","history","useHistory","className","href","onClick","e","preventDefault","push","api","create","baseURL","interceptors","request","use","config","headers","Authorization","originalRequest","_isRetry","console","log","getGame","get","setGameStatus","gameSlug","user_info","searchGames","query","page","gamesCount","params","page_size","searchGamesFast","getGameUserInfo","slug","defaults","common","Game","game","gameState","userInfo","review","score","spent_time","friendsInfo","userInfoState","setStatusState","setStatusToast","requestGame","gameRequests","requestGameSuccess","requestGameFailure","statusText","requestUserInfo","requestUserInfoSuccess","requestUserInfoFailure","friends_info","setGameStatusSuccess","setGameStatusFailure","setGameReview","toast","autoClose","type","TYPE","INFO","position","setGameReviewSuccess","setGameReviewFailure","update","render","SUCCESS","ERROR","startsWith","GameStore","StatusButtonGroup","statuses","onChangeStatus","userStatus","classnames","map","counter","RatingBlock","Rating","initialRating","readonly","onChange","withEye","start","stop","emptySymbol","concat","n","fullSymbol","title","value","quiet","intToHours","number","FriendActivity","info","window","location","origin","hidden","FriendsActivity","friendInfo","TimeToBeat","hltbInfo","gameplay_main","gameplay_main_extra","gameplay_completionist","gameplay_main_unit","gameplay_main_extra_unit","gameplay_completionist_unit","ScoreBlock","text","getColor","InputNumber","max","min","dataList","parseFloat","event","target","style","width","toString","length","GameStoresEnum","STEAM","FaSteam","PS_STORE","FaPlaystation","EGS","SiEpicgames","ESHOP","SiNintendoswitch","XBOX","FaXbox","GOG","SiGogdotcom","XBOX360","RiXboxLine","APPSTORE","FaAppStoreIos","GOOGLE_PLAY","FaGooglePlay","GameStores","bem","block","renderStoreName","name","stores","compact","join","store","StoreIcon","getIcon","url","GamePage","anyError","useParams","useState","setReview","spentTime","setSpentTime","setUserStatus","userRate","setUserRate","setClearUI","strToFloat","toFixed","cleanStr","indexOf","useEffect","document","backgroundImage","background","active","spinner","src","poster","alt","developers","release_date","genres","platforms","hltb","playtime","metacritic","dangerouslySetInnerHTML","__html","overview","newData","hltbToDatalist","disabled","getMovie","setMovieStatus","searchMovies","searchMoviesFast","getMovieUserInfo","Movie","movie","movieState","requestMovie","movieRequests","requestMovieSuccess","requestMovieFailure","setMovieStatusSuccess","setMovieStatusFailure","setMovieReview","setMovieReviewSuccess","setMovieReviewFailure","MovieStore","MoviePage","backdrop_path","poster_path","original_name","runtime","production_companies","tagline","cast","directors","showArrows","centerMode","centerSlidePercentage","showThumbs","showStatus","showIndicators","videos","video","index","controls","getShow","getShowSeason","showID","seasonNumber","getShowEpisode","episodeNumber","setShowStatus","setShowSeasonStatus","setShowEpisodesStatus","episodesList","searchShows","searchShowsFast","getShowUserInfo","getShowSeasonUserInfo","seasonID","getShowEpisodeUserInfo","episodeID","getUnwatchedEpisodes","Show","show","showState","showSeasons","showSeasonsState","showSeasonsUserInfo","showSeasonsUserInfoState","requestShow","showRequests","requestShowSuccess","requestShowFailure","requestSeason","requestSeasonSuccess","requestSeasonFailure","requestSeasons","requestSeasonsSuccess","requestSeasonsFailure","requestEpisode","requestEpisodeSuccess","requestEpisodeFailure","requestShowUserInfo","requestShowUserInfoSuccess","requestShowUserInfoFailure","requestSeasonUserInfo","requestSeasonUserInfoSuccess","requestSeasonUserInfoFailure","user_watched_show","episodes","episodes_user_info","requestSeasonsUserInfo","requestSeasonsUserInfoSuccess","requestSeasonsUserInfoFailure","requestEpisodeUserInfo","requestEpisodeUserInfoSuccess","requestEpisodeUserInfoFailure","setShowStatusSuccess","setShowStatusFailure","setShowReview","setShowReviewSuccess","setShowReviewFailure","setSeasonStatus","setSeasonReview","setEpisodesStatus","seasonsToUpdate","season","getShowSeasonState","getEpisodesUserInfo","episode","tmdb_id","ShowStore","DetailEpisodeRow","setEpisodeUserStatus","checkAll","userWatchedShow","isChecked","setIsChecked","checked","date","newDate","Date","toLocaleDateString","parseDate","air_date","season_number","episode_number","SeasonBlock","showSeason","computed","showSeasonState","showUserInfo","getEpisodeByID","open","reverse","SeasonsBlock","seasons","anySeasonLoading","sendAllEpisodes","currentValue","cbValue","getElementById","sendEpisodes","ShowPage","first_air_date","last_air_date","episode_run_time","seasons_count","episodes_count","SeasonPage","show_id","chartData","setChartData","tmdb_name","vote_average","Оценка","tmdb_backdrop_path","tmdb_original_name","outline","body","clientHeight","clientWidth","height","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","dataKey","interval","tick","fill","tickLine","domain","tickCount","contentStyle","color","backgroundColor","stroke","fillOpacity","layout","EpisodePage","still_path","getUserInfo","userID","searchUsers","is_following","getUserLog","resultsOnPage","filters","deleteUserLog","logType","logID","delete","getUserFriendsLog","getUserCalendar","getUserSettings","patchUserSettings","settings","Search","games","values","movies","shows","users","hints","gamesState","moviesState","showsState","usersState","searchHints","currentQuery","searchGamesHintsSuccess","searchMoviesHintsSuccess","searchShowsHintsSuccess","searchGamesSuccess","searchGamesFailure","isEnd","nextGames","nextGamesSuccess","nextGamesFailure","searchMoviesSuccess","searchMoviesFailure","results","total_pages","nextMovies","nextMoviesSuccess","nextMoviesFailure","searchShowsSuccess","searchShowsFailure","nextShows","nextShowsSuccess","nextShowsFailure","userRequests","searchUsersSuccess","searchUsersFailure","SearchStore","SearchCard","link","tags","SearchCardsBlock","objects","object","GameCards","useMemo","reduce","newObjects","background_image","released","mas","split","previousValue","genre","slice","tag","platform","MovieCards","ShowCards","CardUser","FriendBlock","UserCards","CategoriesTab","categories","onChangeCategory","activeCategory","children","category","SearchPage","queryText","setQueryText","parentRef","useRef","childRef","callback","options","root","current","rootMargin","threshold","IntersectionObserver","isIntersecting","observe","unobserve","useScroll","fetchItems","setActiveCategory","onSubmit","placeholder","ref","ConfirmPage","search","URLSearchParams","ConfirmPasswordPage","setPassword","passwordConfirm","setPasswordConfirm","htmlFor","User","userLogs","userFriendsLogs","userState","userLogsState","userFriendsLogsState","setUserStatusState","requestUser","requestUserSuccess","requestUserFailure","requestUserLogs","requestLogsSuccess","requestLogsFailure","deleteUserLogSuccess","deleteUserLogFailure","newLogs","filter","requestUserFriendsLogs","requestFriendsLogsSuccess","requestFriendsLogsFailure","setUserStatusSuccess","setUserStatusFailure","is_followed","UserStore","SelectMulti","classNamePrefix","isMulti","ItemRow","fields","display","undefined","find","field","key","getWindowDimensions","innerWidth","innerHeight","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","addEventListener","removeEventListener","ItemBlock","items","setQuery","pageSize","setPageSize","setPage","filteredItems","setFilteredItems","sort","setSort","statusFilters","setStatusFilters","collapse","setCollapse","item","toLowerCase","includes","a","b","field1","field2","isAsc","obj","total","separator","filename","GameBlock","rawg_slug","rawg_name","rawg_backdrop_path","label","MovieBlock","LogRow","showUsername","onDeleteLog","created","toLocaleTimeString","hour","minute","action","actionResult","translateActionType","action_type","action_result","actionType","translateType","parent_name","nameToLink","target_id","actionResultToStr","UserLogs","logs","currentUser","logsByDay","setLogsByDay","i","getDate","getMonth","getFullYear","groupLogsByDay","dayLog","year","month","day","logsType","currentPage","setCurrentPage","setFilters","LogsByDay","count","ShowBlock","COLORS","ChartBlock","Процент","spent_time_percent","test","navigator","userAgent","tickMargin","itemStyle","borderRadius","cursor","entry","Math","angle","YearsChart","maxCount","setMaxCount","newMaxCount","array","Количество","allowDataOverflow","stats","total_spent_time","cx","cy","outerRadius","labelLine","minAngle","verticalAlign","horizontalAlign","StatisticsBlock","marginBottom","GenresChart","years","UserPage","isCurrentUser","useQueryParam","withDefault","StringParam","lastActivity","setLastActivity","last_activity","toLocaleString","is_available","marginRight","followed_users","CurrentUser","calendar","unwatched","calendarState","settingsState","unwatchedState","saveSettingsState","requestCalendar","requestCalendarSuccess","requestCalendarFailure","requestSettings","requestSettingsSuccess","requestSettingsFailure","requestUnwatched","requestUnwatchedSuccess","requestUnwatchedFailure","patchSettings","patchSettingsSuccess","patchSettingsFailure","patchSettingsReset","setTimeout","CurrentUserStore","DayInfo","weekday","rawg_id","tmdb_show","tmdb_season_number","tmdb_episode_number","ReleasesList","myStyle","border","getContentForDay","getIconForDay","remainedDays","days","now","diff","getTime","getUTCDay","parseInt","dateDiff","lineColor","icon","cardHeaderStyle","iconStyle","fontSize","bubbleStyle","marginTop","titleStyle","subtitleStyle","pad","formatDate","CalendarPage","currentDay","setCurrentDay","styles","calendarPage","pageHeader","defaultView","minDetail","locale","minDate","tileContent","view","calendarDay","calendarDayBody","calendarDayGames","calendarDayHidden","calendarDayMovies","calendarDayEpisodes","Object","entries","SettingsPage","gameNotifInput","setGameNotifInput","movieNotifInput","setMovieNotifInput","showNotifInput","setShowNotifInput","privacySelect","setPrivacySelect","success","receive_games_releases","receive_movies_releases","receive_episodes_releases","privacy","DetailedEpisodeRow","EpisodeRow","setShowEpisodeUserStatus","tmdb_release_date","getUserSeasonOpen","localData","onToggle","isOpen","class","UnwatchedPage","NotFoundPage","setAngle","requestAnimationFrame","transform","image","Button","RandomCard","winner","getLink","tmdb_poster_path","rawg_poster_path","categoriesEnum","RandomPage","setWinner","setLoading","useForm","handleSubmit","formState","useCallback","getRoulette","newItems","catch","onLoad","duration","distance","Routes","exact","path","component","React","Component","SearchInput","hint","rawg_release_date","substr","Navbar","toggleIfSmallScreen","Footer","tmdbLogo","Sidebar","toggleSidebarIfSmallScreen","collapsed","iconShape","Modal","toggle","LoginForm","setLogin","onPasswordRecovery","onRegistration","RegisterForm","setEmail","ResetPasswordForm","App","adapter","ReactRouter5Adapter","hideProgressBar","newestOnTop","closeOnClick","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ReactDOM","URL","process","fetch","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.01dd53ce.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"calendarPage\":\"calendar-page_calendarPage__29wv0\",\"pageHeader\":\"calendar-page_pageHeader__1PvOu\",\"calendarDay\":\"calendar-page_calendarDay__1uzIW\",\"calendarDayBody\":\"calendar-page_calendarDayBody__3zbLn\",\"calendarDayGames\":\"calendar-page_calendarDayGames__2Iu3C\",\"calendarDayMovies\":\"calendar-page_calendarDayMovies__4JRvd\",\"calendarDayEpisodes\":\"calendar-page_calendarDayEpisodes__1vctD\",\"calendarDayHidden\":\"calendar-page_calendarDayHidden__2Hjhl\"};","/**Адрес сервера*/\nexport const BACKEND_URL = \"https://xn--e1aahuqhade.space/api/\";\n/**Адрес получения токена */\nexport const GET_TOKEN_URL = BACKEND_URL + \"users/auth/login/\";\n/**Адрес обновления токена */\nexport const REFRESH_TOKEN_URL = BACKEND_URL + \"users/auth/refresh-token/\";\n/**Адрес регистрации */\nexport const REGISTRATE_URL = BACKEND_URL + \"users/auth/signup/\";\n/**Адрес подтверждения почты */\nexport const CONFIRM_URL = BACKEND_URL + \"users/auth/confirm_email/\";\n/**Адрес сброса пароля */\nexport const RESET_PASSWORD_URL = BACKEND_URL + \"users/auth/password_reset/\";\n/**Адрес подтверждения сброса пароля */\nexport const CONFIRM_PASSWORD_URL = BACKEND_URL + \"users/auth/confirm_password_reset/\";\n/**Адрес запроса игры */\nexport const GET_GAME_URL = \"games/game/\";\n/**Адрес поиска игр */\nexport const SEARCH_GAMES_URL = \"games/search/rawg/\";\n/**Адрес быстрого поиска игр */\nexport const SEARCH_GAMES_FAST_URL = \"games/search/\";\n/**Адрес запроса фильма */\nexport const GET_MOVIE_URL = \"movies/movie/\";\n/**Адрес поиска фильмов */\nexport const SEARCH_MOVIES_URL = \"movies/search/tmdb/\";\n/**Адрес быстрого поиска игр */\nexport const SEARCH_MOVIES_FAST_URL = \"movies/search/\";\n/**Адрес запроса сериала */\nexport const GET_SHOW_URL = \"shows/show/\";\n/**Адрес поиска сериалов */\nexport const SEARCH_SHOWS_URL = \"shows/search/tmdb/\";\n/**Адрес быстрого поиска сериалов */\nexport const SEARCH_SHOWS_FAST_URL = \"shows/search/\";\n/**Адрес запроса непросмотренных серий */\nexport const GET_UNWATCHED_EPISODES_URL = \"shows/show/unwatched_episodes/\";\n/**Адрес получения информации о пользователе */\nexport const USER_INFO_URL = \"users/user/\";\n/**Адрес получения календаря релизов пользователя */\nexport const USER_CALENDAR_URL = \"users/user/release_calendar/\";\n/**Адрес поиска пользователей */\nexport const SEARCH_USERS_URL = \"users/search/\";\n/**Адрес сохранения настроек */\nexport const USER_SETTINGS_URL = \"users/user/user_settings/\";\n","import axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport * as urls from \"../settings\";\n\n/**\n * ПОлучение токена авторизации. Токен сохраняется в localStorage\n * @param {string} username Имя пользователя\n * @param {string} password Пароль\n */\nexport async function getToken(username, password) {\n\tconst res = await axios.post(urls.GET_TOKEN_URL, {\n\t\tusername: username,\n\t\tpassword: password,\n\t});\n\n\tlet userData = jwt_decode(res.data.access);\n\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\n\n\treturn { token: res.data.access, refreshToken: res.data.refresh, user: user };\n}\n\n/**\n * Функция обновления токена\n */\nexport async function updateToken(refreshToken) {\n\tconst res = await axios.post(urls.REFRESH_TOKEN_URL, { refresh: refreshToken });\n\tlet userData = jwt_decode(res.data.access);\n\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\n\n\treturn { token: res.data.access, user: user };\n}\n\nexport async function registration(username, email, password) {\n\tconst res = await axios.post(urls.REGISTRATE_URL, {\n\t\tusername: username,\n\t\temail: email,\n\t\tpassword: password,\n\t});\n\tlet data = res.data;\n\tdata.status = res.status;\n\treturn data;\n}\n\nexport async function confirmation(uid64, token) {\n\tconst res = await axios.patch(urls.CONFIRM_URL + \"?uid64=\" + uid64 + \"&token=\" + token);\n\treturn res;\n}\n\nexport async function resetPassword(email) {\n\tconst res = await axios.put(urls.RESET_PASSWORD_URL, { email: email });\n\treturn res;\n}\n\nexport async function confirmPassword(token, password) {\n\tconst res = await axios.patch(urls.CONFIRM_PASSWORD_URL + \"?reset_token=\" + token, { password: password });\n\treturn res;\n}\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as auth from '../services/jwtAuth';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface ICurrentUser {\n\tlogin?: string,\n\tusername?: string,\n\temail?: string,\n\tid?: number | null,\n}\n\ninterface IAuthState {\n\tloggedIn: boolean,\n\tuser: ICurrentUser,\n\tauthState: IPendingState,\n\tregistrateState: IPendingState,\n\tconfirmEmailState: IPendingState,\n\tresetPasswordState: IPendingState,\n\tconfirmPasswordState: IPendingState,\n}\n\nclass Auth implements IAuthState {\n\tloggedIn = false;\n\tuser: ICurrentUser = {\n\t\tusername: '',\n\t\temail: '',\n\t\tid: null,\n\t};\n\tauthState = '';\n\tregistrateState = '';\n\tconfirmEmailState = '';\n\tresetPasswordState = '';\n\tconfirmPasswordState = '';\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\ttryAuth = async (login: string, password: string) => {\n\t\tthis.authState = 'pending';\n\t\tauth.getToken(login, password).then(this.authSuccess, this.authFailure);\n\t};\n\tauthSuccess = (res: {refreshToken: string, token: string, user: ICurrentUser}) => {\n\t\tlocalStorage.setItem('refreshToken', res.refreshToken);\n\t\tlocalStorage.setItem('token', res.token);\n\t\tthis.loggedIn = true;\n\t\tthis.user = res.user;\n\t\tthis.authState = 'done';\n\t};\n\tauthFailure = async (error: any) => {\n\t\tawait this.resetAuthorization();\n\t\tthis.authState = 'error: ' + error.response.data.detail;\n\t};\n\n\tresetAuthorization = async () => {\n\t\tthis.loggedIn = false;\n\t\tthis.user = { username: '', id: null, email: '' };\n\t\tlocalStorage.removeItem('refreshToken');\n\t\tlocalStorage.removeItem('token');\n\t};\n\n\tregister = async (username: string, email: string, password: string) => {\n\t\tthis.registrateState = 'pending';\n\t\tauth.registration(username, email, password).then(this.registerSuccess, this.registerFailure);\n\t};\n\tregisterSuccess = (result: {username: string, email: string}) => {\n\t\tthis.user = { login: result.username, email: result.email };\n\t\tthis.registrateState = 'done';\n\t};\n\tregisterFailure = (error: any) => {\n\t\tlet errors = '';\n\t\tfor (const error2 in error.response.data) {\n\t\t\terrors += error.response.data[error2] + '\\n';\n\t\t}\n\t\tthis.registrateState = 'error: ' + errors;\n\t};\n\n\tconfirmEmail = async (uid64: string, token: string) => {\n\t\tthis.confirmEmailState = 'pending';\n\t\tauth.confirmation(uid64, token).then(this.confirmEmailSuccess, this.confirmEmailFailure);\n\t};\n\tconfirmEmailSuccess = () => {\n\t\tthis.confirmEmailState = 'done';\n\t};\n\tconfirmEmailFailure = (error: any) => {\n\t\tlet errors = '';\n\t\tfor (const error2 in error.response.data) {\n\t\t\terrors += error.response.data[error2] + '\\n';\n\t\t}\n\t\tthis.confirmEmailState = 'error: ' + errors;\n\t};\n\n\tresetPassword = async (email: string) => {\n\t\tthis.resetPasswordState = 'pending';\n\t\tauth.resetPassword(email).then(this.resetPasswordSuccess, this.resetPasswordFailure);\n\t};\n\tresetPasswordSuccess = () => {\n\t\tthis.resetPasswordState = 'done';\n\t};\n\tresetPasswordFailure = (error: string) => {\n\t\tthis.resetPasswordState = 'error: ' + error;\n\t};\n\n\tconfirmPassword = async (token: string, password: string) => {\n\t\tthis.confirmPasswordState = '';\n\t\tauth.confirmPassword(token, password).then(this.confirmPasswordSuccess, this.confirmPasswordFailure);\n\t};\n\tconfirmPasswordSuccess = () => {\n\t\tthis.confirmPasswordState = 'done';\n\t};\n\tconfirmPasswordFailure = (error: any) => {\n\t\tlet errors = '';\n\t\tfor (const error2 in error.response.data) {\n\t\t\terrors += error.response.data[error2] + '\\n';\n\t\t}\n\t\tthis.confirmPasswordState = 'error: ' + errors;\n\t};\n\n\t/**\n\t * Проверка авторизации\n\t */\n\tcheckAuth = async () => {\n\t\tthis.authState = 'pending';\n\t\tauth.updateToken(localStorage.getItem('refreshToken')).then(this.checkAuthSuccess, this.checkAuthFailure);\n\t};\n\tcheckAuthSuccess = (res: {token: string, user: ICurrentUser}) => {\n\t\tlocalStorage.setItem('token', res?.token);\n\t\tthis.loggedIn = true;\n\t\tthis.user = res.user;\n\t\tthis.authState = 'done';\n\t};\n\tcheckAuthFailure = () => {\n\t\tthis.loggedIn = false;\n\t\tthis.user = { username: '', id: null, email: '' };\n\t\tlocalStorage.removeItem('token');\n\t\tthis.authState = 'done';\n\t};\n\n\tget currentUser() {\n\t\treturn this.user;\n\t}\n}\n\nconst AuthStore = new Auth();\n//export default remotedev(AuthStore, { name: 'Auth' });\nexport default AuthStore;\n","import { makeAutoObservable } from \"mobx\";\n//import remotedev from \"mobx-remotedev\";\n\nexport interface IPagesState {\n\tLoginFormIsOpen: boolean;\n\tRegistrateFormIsOpen: boolean;\n\tResetPasswordFormIsOpen: boolean;\n\tsaveEpisodesBlockIsOpen: boolean;\n\tsidebarIsToggled: boolean;\n\tsidebarIsCollapsed: boolean;\n}\n\nclass Pages implements IPagesState{\n\tLoginFormIsOpen = false;\n\tRegistrateFormIsOpen = false;\n\tResetPasswordFormIsOpen = false;\n\tsaveEpisodesBlockIsOpen = false;\n\tsidebarIsToggled = localStorage.getItem(\"sidebarToggled\") === \"true\";\n\tsidebarIsCollapsed = localStorage.getItem(\"sidebarCollapsed\") === \"true\";\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\ttoggleSidebar = async () => {\n\t\tthis.sidebarIsToggled = !this.sidebarIsToggled;\n\t\tif (!this.sidebarIsToggled) this.sidebarIsCollapsed = false;\n\t\tlocalStorage.setItem(\"sidebarToggled\", JSON.stringify(this.sidebarIsToggled));\n\t};\n\n\tcollapseSidebar = async () => {\n\t\tthis.sidebarIsCollapsed = !this.sidebarIsCollapsed;\n\t\tlocalStorage.setItem(\"sidebarCollapsed\", JSON.stringify(this.sidebarIsCollapsed));\n\t};\n\n\topenLoginForm = async () => {\n\t\tthis.LoginFormIsOpen = true;\n\t};\n\n\tcloseLoginForm = async () => {\n\t\tthis.LoginFormIsOpen = false;\n\t};\n\n\topenRegistrateForm = async () => {\n\t\tthis.RegistrateFormIsOpen = true;\n\t};\n\n\tcloseRegistrateForm = async () => {\n\t\tthis.RegistrateFormIsOpen = false;\n\t};\n\n\topenResetPasswordForm = async () => {\n\t\tthis.ResetPasswordFormIsOpen = true;\n\t};\n\n\tcloseResetPasswordForm = async () => {\n\t\tthis.ResetPasswordFormIsOpen = false;\n\t};\n\n\tsetSaveEpisodes = (status: boolean) => (this.saveEpisodesBlockIsOpen = status);\n}\n\nconst PagesStore = new Pages();\n//export default remotedev(PagesStore, { name: \"Pages\" });\nexport default PagesStore;\n","import HomePage from \"./HomePage\";\n\nexport default HomePage;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport AuthStore from '../../store/AuthStore';\nimport PagesStore from '../../store/PagesStore';\nimport \"./home-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst HomePage = observer((props) => {\n\tlet history = useHistory();\n\tconst { user, loggedIn } = AuthStore;\n\tconst { openLoginForm } = PagesStore;\n\n\treturn (\n\t\t<div className='home-page'>\n\t\t\t<div className='home-page__body'>\n\t\t\t\t<h1 className='home-page__header'>Добро пожаловать на Interests!</h1>\n\t\t\t\t<h3 className='home-page__header-secondary'>Что это?</h3>\n\t\t\t\t<p className='home-page__text'>Interests - сайт для отслеживания фильмов, сериалов и видеоигр. </p>\n\t\t\t\t<h3 className='home-page__header-secondary'>Какой функционал у сайта?</h3>\n\t\t\t\t<p className='home-page__text'>Здесь можно вести персональный список интересного вам контента, выставлять ему оценки и писать отзывы, а также отслеживать активность ваших друзей.</p>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tВ{\" \"}\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName='home-page__link'\n\t\t\t\t\t\thref={\"/user/\" + user?.id}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\thistory.push(\"/user/\" + user?.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tпрофиле\n\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\tсобраны все добавленные игры, фильмы и сериалы, а также ваша персональная статистика.\n\t\t\t\t</p>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tC помощью{\" \"}\n\t\t\t\t\t<a className='home-page__link' href='/search/example'>\n\t\t\t\t\t\tпоиска\n\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\tможно найти интересущий вас тайтл или человека.\n\t\t\t\t</p>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tВ{\" \"}\n\t\t\t\t\t<a className='home-page__link' href={\"/calendar/\"}>\n\t\t\t\t\t\tкалендаре\n\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\tотображены все грядущие релизы из вашего списка. Вы можете подписаться на email уведомления о новых релизах в{\" \"}\n\t\t\t\t\t<a className='home-page__link' href={\"/settings/\"}>\n\t\t\t\t\t\tнастройках\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tРаздел{\" \"}\n\t\t\t\t\t<a className='home-page__link' href={\"/unwatched/\"}>\n\t\t\t\t\t\tнепросмотренное\n\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\tпредназначен для отслеживания непрсмотренных серий ваших сериалов.\n\t\t\t\t</p>\n\t\t\t\t<h3 className='home-page__header-secondary'>Что такое статус контента</h3>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tНа странице фильма, сериала или игры есть блок кнопок, состоящий из различных статусов. При выборе любого статуса, кроме \"Не смотрел\" или \"Не играл\", тайтл добавляется к вам в профиль.\n\t\t\t\t</p>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tВ зависимости от статуса, тайтл будет по разному восприниматься системой. Например, тайтлы со статусом \"Буду смотреть\" не учитываются при подсчете статистики. Или сериалы со статусом\n\t\t\t\t\t\"Дропнул\" не будут выводиться в разделах Непросмотренное и Календарь.\n\t\t\t\t</p>\n\t\t\t\t<h3 className='home-page__header-secondary'>Зачем нужна подписка на пользователя</h3>\n\t\t\t\t<p className='home-page__text'>После подписки на пользователя вы будете видеть активность всех своих друзей в разделе Профиль, во вкладке Друзья.</p>\n\t\t\t\t<p className='home-page__text'>На странице любого тайтла будут отображены отзывы ваших друзей, если они оценили его ранее.</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default HomePage;\n","import axios from \"axios\";\nimport {BACKEND_URL, REFRESH_TOKEN_URL} from \"../settings\";\n\nconst api = axios.create({\n\tbaseURL: BACKEND_URL,\n});\n\napi.interceptors.request.use((config) => {\n\tconst token = localStorage.getItem('token')\n\tif (token) {\n\t\tconfig.headers.Authorization = `Bearer ${token}`;\n\t}\n\treturn config;\n});\n\napi.interceptors.response.use(\n\t(config) => {\n\t\treturn config;\n\t},\n\tasync (error) => {\n\t\tconst originalRequest = error.config;\n\t\tif (error.response.status === 401 && error.config && !error.config._isRetry) {\n\t\t\toriginalRequest._isRetry = true;\n\t\t\toriginalRequest.headers['content-type'] = 'application/json';\n\t\t\ttry {\n\t\t\t\tconst response = await axios.post(REFRESH_TOKEN_URL, {\n\t\t\t\t\trefresh: localStorage.getItem(\"refreshToken\"),\n\t\t\t\t});\n\t\t\t\tlocalStorage.setItem(\"token\", response.data.access);\n\t\t\t\treturn api.request(originalRequest);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(\"НЕ АВТОРИЗОВАН\");\n\t\t\t}\n\t\t}\n\t\tthrow error;\n\t}\n);\n\nexport default api;\n","import api from \"../http\";\nimport { GET_GAME_URL, SEARCH_GAMES_URL, SEARCH_GAMES_FAST_URL } from \"../settings\";\n\napi.defaults.headers.common = {\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\n};\n\n/**\n * Запрос к бд, получающий информацию об игре\n * @param {string} id ID игры\n */\nexport async function getGame(id: string) {\n\tconst res = await api.get(GET_GAME_URL + id + \"/\");\n\treturn res.data;\n}\n\n/**\n * Запрос на изменение статуса игры\n * @param {object} user_info Статус игры\n * @param {string} gameSlug Слаг игры\n */\nexport async function setGameStatus(gameSlug: string, user_info: any) {\n\tconst res = await api.put(GET_GAME_URL + gameSlug + \"/\", user_info);\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск игр\n * @param {string} query Поисковый запрос\n * @param {int} page Страница поиска\n */\nexport async function searchGames(query: string, page: number, gamesCount: number) {\n\tconst res = await api.get(SEARCH_GAMES_URL, { params: { query: query, page: page, page_size: gamesCount } });\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск локльных игр\n * @param {string} query Поисковый запрос\n */\nexport async function searchGamesFast(query: string) {\n\tconst res = await api.get(SEARCH_GAMES_FAST_URL, { params: { query: query } });\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию об оценках друзей для игры\n * @param {string} slug slug игры\n * @param {int} page страница\n */\nexport async function getGameUserInfo(slug: string) {\n\tconst res = await api.get(GET_GAME_URL + slug + \"/user_info/\");\n\treturn res.data;\n}\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as gameRequests from '../services/gameRequests';\nimport { toast } from 'react-toastify';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface IGameUserInfo {\n\tstatus: string,\n\treview: string,\n\tscore: number,\n\tspent_time: number,\n}\n\nexport interface IGame {\n\tslug: string,\n\t[key: string]: any,\n}\n\nexport interface IGameState {\n\tgame: IGame,\n\tgameState: IPendingState,\n\tuserInfo: IGameUserInfo,\n\tfriendsInfo: any,\n\tuserInfoState: IPendingState,\n\tsetStatusState: IPendingState,\n\tsetStatusToast: any,\n}\n\nclass Game implements IGameState{\n\tgame: IGame = {slug: ''};\n\tgameState = 'done';\n\n\tuserInfo = { status: '', review: '', score: 0, spent_time: 0 };\n\tfriendsInfo = [];\n\tuserInfoState = 'done';\n\n\tsetStatusState = 'done';\n\tsetStatusToast: any;\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\trequestGame = async (id: string) => {\n\t\tthis.gameState = 'pending';\n\t\tgameRequests.getGame(id).then(this.requestGameSuccess, this.requestGameFailure);\n\t};\n\trequestGameSuccess = (result: IGame) => {\n\t\tthis.game = result;\n\t\tthis.gameState = 'done';\n\t};\n\trequestGameFailure = (error: any) => {\n\t\tthis.gameState = 'error: ' + error.response.statusText;\n\t};\n\n\trequestUserInfo = async (slug: string) => {\n\t\tthis.userInfoState = 'pending';\n\t\tgameRequests.getGameUserInfo(slug).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\n\t};\n\trequestUserInfoSuccess = (result: any) => {\n\t\tthis.userInfo = result.user_info;\n\t\tthis.friendsInfo = result.friends_info;\n\t\tthis.userInfoState = 'done';\n\t};\n\trequestUserInfoFailure = (error: string) => {\n\t\tthis.userInfoState = 'error: ' + error;\n\t};\n\n\tsetGameStatus = async (userInfo: IGameUserInfo) => {\n\t\tthis.setStatusState = 'pending';\n\t\tgameRequests.setGameStatus(this.game.slug, userInfo).then(this.setGameStatusSuccess, this.setGameStatusFailure);\n\t};\n\tsetGameStatusSuccess = () => {\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetGameStatusFailure = (error: string) => {\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tsetGameReview = async (userInfo: IGameUserInfo) => {\n\t\tthis.setStatusState = 'pendingReview';\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\n\t\tgameRequests.setGameStatus(this.game.slug, userInfo).then(this.setGameReviewSuccess, this.setGameReviewFailure);\n\t};\n\tsetGameReviewSuccess = () => {\n\t\ttoast.update(this.setStatusToast, { render: 'Отзыв сохранен!', type: toast.TYPE.SUCCESS, autoClose: 1000 });\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetGameReviewFailure = (error: string) => {\n\t\ttoast.update(this.setStatusToast, { render: 'Ошибка сохранения отзыва!', type: toast.TYPE.ERROR, autoClose: 1000 });\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tget anyError() {\n\t\tif (this.gameState.startsWith('error:')) return this.gameState;\n\t\tif (this.userInfoState.startsWith('error:')) return this.userInfoState;\n\t\treturn null;\n\t}\n}\n\nconst GameStore = new Game();\n//export default remotedev(GameStore, { name: 'Game' });\nexport default GameStore;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport \"./status-button-group.sass\";\n\nfunction StatusButtonGroup({ statuses, onChangeStatus, userStatus, className }) {\n\treturn (\n\t\t<div className={classnames(\"content-statuses\", className)}>\n\t\t\t{statuses.map((status, counter) => (\n\t\t\t\t<button\n\t\t\t\t\tclassName={classnames(\"content-statuses__content-status\", userStatus === status ? \"content-statuses__content-status_active\" : \"\")}\n\t\t\t\t\tkey={status}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tonChangeStatus(status);\n\t\t\t\t\t}}>\n\t\t\t\t\t{status}\n\t\t\t\t</button>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default StatusButtonGroup;\n","import StatusButtonGroup from \"./StatusButtonGroup\";\n\nexport default StatusButtonGroup;\n","import React from \"react\";\nimport { FaStar, FaRegStar, FaEyeSlash, FaEye } from \"react-icons/fa\";\nimport Rating from \"react-rating\";\n\nfunction RatingBlock({ initialRating, readonly, onChange, className, withEye }) {\n\treturn (\n\t\t<Rating\n\t\t\tstart={withEye ? -1 : 0}\n\t\t\tstop={10}\n\t\t\temptySymbol={(withEye ? [<FaEyeSlash />] : []).concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <FaRegStar />))}\n\t\t\tfullSymbol={(withEye ? [<FaEye />] : []).concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <FaStar title={n} />))}\n\t\t\tinitialRating={initialRating}\n\t\t\treadonly={readonly}\n\t\t\tonClick={(value) => {\n\t\t\t\tif (value !== initialRating) {\n\t\t\t\t\tonChange(value);\n\t\t\t\t} else {\n\t\t\t\t\tonChange(0);\n\t\t\t\t}\n\t\t\t}}\n\t\t\tclassName={className}\n\t\t\tquiet\n\t\t/>\n\t);\n}\n\nexport default RatingBlock;\n","import Rating from \"./Rating\";\n\nexport default Rating;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport classnames from \"classnames\";\nimport Rating from '../../../Rating';\nimport \"./friend-activity.sass\";\n\nfunction FriendActivity({ info, className }) {\n\tlet history = useHistory();\n\n\treturn (\n\t\t<div className={classnames(\"friend-activity\", className)}>\n\t\t\t<h5 className='friend-activity__user'>\n\t\t\t\t<a\n\t\t\t\t\thref={window.location.origin + \"/user/\" + info.user.id}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\thistory.push(\"/user/\" + info.user.id);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}}>\n\t\t\t\t\t{info.user.username}\n\t\t\t\t</a>\n\t\t\t</h5>\n\t\t\t<div className='friend-activity__info'>\n\t\t\t\t<Rating initialRating={info.score} className='friend-activity__info-text' readonly={true} />\n\t\t\t\t<p className='friend-activity__info-text'>Статус: {info.status} </p>\n\t\t\t\t<p className='friend-activity__info-text' hidden={!info.spent_time}>\n\t\t\t\t\tВремя проходения: {info.spent_time} {intToHours(info.spent_time)}\n\t\t\t\t</p>\n\t\t\t\t<p className='friend-activity__info-text' hidden={info.review === \"\"}>\n\t\t\t\t\tОтзыв: {info.review}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction intToHours(number) {\n\tif (11 <= number && number <= 14) return \"часов\";\n\telse if (number % 10 === 1) return \"час\";\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\n\telse return \"часов\";\n}\n\nexport default FriendActivity;\n","import FriendActivity from \"./FriendActivity\";\n\nexport default FriendActivity;\n","import React from \"react\";\nimport FriendActivity from \"./views/FriendActivity\";\n\nfunction FriendsActivity({ info }) {\n\treturn (\n\t\t<div className='friends-activity'>\n\t\t\t{info?.map((friendInfo) => (\n\t\t\t\t<FriendActivity info={friendInfo} key={friendInfo.user.id} className='friends-activity__element' />\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default FriendsActivity;\n","import FriendsActivity from \"./FriendsActivity\";\n\nexport default FriendsActivity;\n","import React from \"react\";\nimport { MdAccessTime } from \"react-icons/md\";\nimport \"./time-to-beat.sass\";\n\nfunction TimeToBeat({ hltbInfo }) {\n\tconsole.log({...hltbInfo});\n\tif (\n\t\t!hltbInfo\n\t\t|| (\n\t\t\t!hltbInfo?.gameplay_main\n\t\t\t&& !hltbInfo?.gameplay_main_extra\n\t\t\t&& !hltbInfo?.gameplay_completionist\n\t\t)\n\t) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className='time-to-beat' hidden={!hltbInfo || hltbInfo === \"0 часов\" || (hltbInfo?.gameplay_main < 0 && hltbInfo?.gameplay_main_extra < 0 && hltbInfo?.gameplay_completionist < 0)}>\n\t\t\t<p className='time-to-beat__element'>Время прохождения: </p>\n\t\t\t<div hidden={hltbInfo?.gameplay_main === -1} className='time-to-beat__element'>\n\t\t\t\t<MdAccessTime className='time-to-beat__icon time-to-beat__icon_green' title={\"Главный сюжет\"} />\n\t\t\t\t{hltbInfo?.gameplay_main} {hltbInfo?.gameplay_main_unit}\n\t\t\t</div>\n\t\t\t<div hidden={hltbInfo?.gameplay_main_extra === -1} className='time-to-beat__element'>\n\t\t\t\t<MdAccessTime className='time-to-beat__icon time-to-beat__icon_yellow' title={\"Главный сюжет + побочные задания\"} />\n\t\t\t\t{hltbInfo?.gameplay_main_extra} {hltbInfo?.gameplay_main_extra_unit}\n\t\t\t</div>\n\t\t\t<div hidden={!hltbInfo || hltbInfo?.gameplay_completionist === -1} className='time-to-beat__element'>\n\t\t\t\t<MdAccessTime className='time-to-beat__icon time-to-beat__icon_red' title={\"Полное прохождение\"} />\n\t\t\t\t{hltbInfo?.gameplay_completionist} {hltbInfo?.gameplay_completionist_unit}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default TimeToBeat;\n","import TimeToBeat from \"./TimeToBeat\";\n\nexport default TimeToBeat;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport \"./score-block.sass\";\n\nfunction ScoreBlock({ score, text, className }) {\n\tfunction getColor(score) {\n\t\tswitch (true) {\n\t\t\tcase score >= 80:\n\t\t\t\treturn \"green\";\n\t\t\tcase score >= 60 && score < 80:\n\t\t\t\treturn \"yellow\";\n\t\t\tcase score < 60:\n\t\t\t\treturn \"red\";\n\t\t\tdefault:\n\t\t\t\treturn \"green\";\n\t\t}\n\t}\n\n\tif (!score) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div hidden={!score} className={classnames(\"score-block\", className)}>\n\t\t\t<div className={classnames(\"score-block__body\", \"score-block__body_\" + getColor(score))}>\n\t\t\t\t<p>{score}</p>\n\t\t\t</div>\n\t\t\t<p className='score-block__text'>{text}</p>\n\t\t</div>\n\t);\n}\n\nexport default ScoreBlock;\n","import ScoreBlock from \"./ScoreBlock\";\n\nexport default ScoreBlock;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport \"./input-number.sass\";\n\nfunction InputNumber({ value, max, min, onChange, className, dataList }) {\n\treturn (\n\t\t<div className={classnames(\"input-number\", className)}>\n\t\t\t<button\n\t\t\t\tclassName='input-number__minus'\n\t\t\t\tonClick={() => {\n\t\t\t\t\tif (!min || parseFloat(value) > min + 1) onChange(parseFloat(value) - 1);\n\t\t\t\t}}>\n\t\t\t\t-\n\t\t\t</button>\n\t\t\t<input\n\t\t\t\ttype='number'\n\t\t\t\tvalue={value}\n\t\t\t\tmax={max ? max : \"\"}\n\t\t\t\tmin={min ? min : \"\"}\n\t\t\t\tonChange={(event) => {\n\t\t\t\t\tif ((!min || event.target.value > min) && (!max || event.target.value < max)) onChange(parseFloat(event.target.value));\n\t\t\t\t}}\n\t\t\t\tclassName='input-number__input'\n\t\t\t\tstyle={{ width: `${value.toString().length * 15}px` }}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclassName='input-number__plus'\n\t\t\t\tonClick={() => {\n\t\t\t\t\tif (!max || value < max - 1) onChange(parseFloat(value) + 1);\n\t\t\t\t}}>\n\t\t\t\t+\n\t\t\t</button>\n\t\t\t<div className='input-number__hints'>\n\t\t\t\t{dataList?.map((data, counter) => (\n\t\t\t\t\t<div key={counter} onClick={() => onChange(parseFloat(data))} className='input-number__hint'>\n\t\t\t\t\t\t{data}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default InputNumber;\n","import InputNumber from \"./InputNumber\";\n\nexport default InputNumber;\n","import { FaSteam, FaPlaystation, FaXbox, FaAppStoreIos, FaGooglePlay } from \"react-icons/fa\";\nimport { SiEpicgames, SiNintendoswitch, SiGogdotcom } from \"react-icons/si\";\nimport { RiXboxLine } from \"react-icons/ri\";\n\nexport class GameStoresEnum {\n    static STEAM = 'steam';\n\n    static PS_STORE = 'playstation-store';\n\n    static EGS = 'epic-games';\n\n    static ESHOP = 'nintendo';\n\n    static XBOX = 'xbox-store';\n\n    static XBOX360 = 'xbox360';\n\n    static GOG = 'gog';\n\n    static APPSTORE = 'apple-appstore';\n\n    static GOOGLE_PLAY = 'google-play';\n\n    static getIcon(id: string) {\n        switch (id) {\n            case this.STEAM:\n                return FaSteam;\n            case this.PS_STORE:\n                return FaPlaystation;\n            case this.EGS:\n                return SiEpicgames;\n            case this.ESHOP:\n                return SiNintendoswitch;\n            case this.XBOX:\n                return FaXbox;\n            case this.GOG:\n                return SiGogdotcom;\n            case this.XBOX360:\n                return RiXboxLine;\n            case this.APPSTORE:\n                return FaAppStoreIos;\n            case this.GOOGLE_PLAY:\n                return FaGooglePlay;\n            default:\n                return null;\n        }\n    }\n}\n","import * as React from 'react';\nimport {block} from 'bem-cn';\nimport {compact} from 'lodash';\nimport './GameStores.scss';\nimport {IGameStoreItem} from '../../interfaces/IGameStore';\nimport {GameStoresEnum} from '../../enums/GameStoresEnum';\n\ninterface IGameStoresProps {\n    className?: string,\n    stores: IGameStoreItem[],\n}\n\nfunction GameStores(props: IGameStoresProps) {\n    const bem = block('GameStores');\n\n    const renderStoreName = (props: {name: string}) => (\n        <span>\n            {props.name}\n        </span>\n    )\n\n    const renderStore = (store: IGameStoreItem) => {\n        const StoreIcon = GameStoresEnum.getIcon(store.store.slug) || renderStoreName;\n        return (\n            <a\n                href={store.url}\n                className={bem('store-link')}\n                title={store.store.name}\n            >\n                <StoreIcon\n                    className={bem('store-icon')}\n                    name={store.store.name}\n                />\n            </a>\n        )\n    }\n\n    if (!props.stores || !(props.stores.length > 0)) {\n        return null;\n    }\n\n    return (\n        <div className={compact([bem(), props.className]).join(' ')}>\n            <p className={bem('label')}>\n                Магазины:\n            </p>\n            {\n                props.stores?.map(renderStore)\n            }\n        </div>\n    );\n}\n\nexport default GameStores;\n","import GameStores from './GameStores';\n\nexport default GameStores;\n","import GamePage from \"./GamePage\";\n\nexport default GamePage;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport { toast } from \"react-toastify\";\n\nimport GameStore from '../../store/GameStore';\nimport AuthStore from '../../store/AuthStore';\nimport PagesStore from '../../store/PagesStore';\nimport StatusButtonGroup from '../../shared/StatusButtonGroup';\nimport FriendsActivity from '../../shared/FriendsActivity';\nimport TimeToBeat from './views/TimeToBeat';\nimport ScoreBlock from '../../shared/ScoreBlock';\nimport Rating from '../../shared/Rating';\nimport InputNumber from '../../shared/InputNumber';\n\nimport \"./game-page.sass\";\nimport GameStores from \"../../shared/GameStores\";\n\n/**\n * Основная страница приложения\n */\nconst GamePage = observer((props) => {\n\tconst { game, gameState, requestGame, setGameStatus, setGameReview, userInfo, friendsInfo, userInfoState, requestUserInfo, anyError } = GameStore;\n\tconst { loggedIn } = AuthStore;\n\tconst { openLoginForm } = PagesStore;\n\n\tlet { id } = useParams();\n\tconst [review, setReview] = useState(\"\");\n\tconst [spentTime, setSpentTime] = useState(\"\");\n\tconst [userStatus, setUserStatus] = useState(\"Не играл\");\n\tconst [userRate, setUserRate] = useState(0);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetClearUI();\n\t\t\trequestGame(id);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[id, requestGame]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestUserInfo(id);\n\t\t\telse {\n\t\t\t\tsetClearUI();\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[id, loggedIn]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = game?.name || 'Interests';\n\t}, [game]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (userInfo?.status) {\n\t\t\t\tsetReview(userInfo.review);\n\t\t\t\tsetSpentTime(userInfo.spent_time);\n\t\t\t\tsetUserStatus(userInfo.status);\n\t\t\t\tsetUserRate(userInfo.score);\n\t\t\t} else {\n\t\t\t\tsetClearUI();\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userInfo]\n\t);\n\n\tuseEffect(() => {\n\t\tif (anyError) toast.error(anyError);\n\t}, [anyError]);\n\n\tfunction setClearUI() {\n\t\tsetReview(\"\");\n\t\tsetSpentTime(\"\");\n\t\tsetUserStatus(\"Не играл\");\n\t\tsetUserRate(0);\n\t}\n\n\tfunction strToFloat(text) {\n\t\tif (typeof text === 'number') {\n\t\t\treturn text.toFixed(1);\n\t\t}\n\t\tlet cleanStr = text;\n\t\tif (cleanStr && cleanStr !== -1) {\n\t\t\tif (cleanStr.indexOf(\"½\") + 1) {\n\t\t\t\treturn parseFloat(cleanStr) + 0.5\n\t\t\t} else {\n\t\t\t\treturn parseFloat(cleanStr).toFixed(1);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction hltbToDatalist(hltbInfo) {\n\t\tlet newData = [];\n\t\tif (!(!hltbInfo || hltbInfo === \"0 часов\" || hltbInfo?.gameplay_main === -1)) {\n\t\t\tif (typeof hltbInfo === 'string') {\n\t\t\t\tnewData.push(strToFloat(hltbInfo));\n\t\t\t} else {\n\t\t\t\tnewData.push(strToFloat(hltbInfo?.gameplay_main));\n\t\t\t}\n\t\t}\n\t\tif (hltbInfo?.gameplay_main_extra !== -1) {\n\t\t\tnewData.push(strToFloat(hltbInfo?.gameplay_main_extra));\n\t\t}\n\t\tif (hltbInfo?.gameplay_completionist !== -1) {\n\t\t\tnewData.push(strToFloat(hltbInfo?.gameplay_completionist));\n\t\t}\n\t\treturn newData;\n\t}\n\n\treturn (\n\t\t<div className='game-page'>\n\t\t\t<div style={{ backgroundImage: `url(${game.background})` }} className='game-page__background' />\n\t\t\t<LoadingOverlay active={gameState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='game-page__body'>\n\t\t\t\t\t<div className='game-page__header'>\n\t\t\t\t\t\t<div className='game-page__poster'>\n\t\t\t\t\t\t\t<img src={game.poster} className='img-fluid' alt='' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='game-page__info'>\n\t\t\t\t\t\t\t<h1 className='game-page__info-header'>{game.name}</h1>\n\t\t\t\t\t\t\t<div className='game-page__info-body'>\n\t\t\t\t\t\t\t\t<p>Разработчики: {game.developers}</p>\n\t\t\t\t\t\t\t\t<p>Дата релиза: {game.release_date}</p>\n\t\t\t\t\t\t\t\t<p>Жанр: {game.genres}</p>\n\t\t\t\t\t\t\t\t<p>Платформы: {game.platforms}</p>\n\t\t\t\t\t\t\t\t<TimeToBeat hltbInfo={game.hltb || game.playtime} />\n\t\t\t\t\t\t\t\t<GameStores stores={game.stores} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не играл\")}\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\t\tsetGameStatus({ score: score });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName='game-page__rating'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<StatusButtonGroup\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не играл\", \"Буду играть\", \"Играю\", \"Дропнул\", \"Прошел\"]}\n\t\t\t\t\t\t\t\t\tclassName='game-page__info-statuses'\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ status: status });\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не играл\") {\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t<ScoreBlock\n\t\t\t\t\t\t\t\tscore={game.metacritic}\n\t\t\t\t\t\t\t\ttext='Metascore'\n\t\t\t\t\t\t\t\tclassName='game-page__info-score'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='game-page__overview'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{/* <video width='800' height='450' controls='controls' poster={game.rawg?.clip?.preview} src={game.rawg?.clip?.clip} type='video' /> */}\n\t\t\t\t\t\t\t<h3 className='game-page__overview-header'>Описание</h3>\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: game.overview }} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h3 className='game-page__review-header'>Отзыв</h3>\n\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t<div className='game-page__review-body' hidden={!loggedIn}>\n\t\t\t\t\t\t\t\t<div className='game-page__review'>\n\t\t\t\t\t\t\t\t\tВаш отзыв\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='game-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} />\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className='game-page__review-time'>\n\t\t\t\t\t\t\t\t\tВремя прохождения (часы)\n\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\tclassName='game-page__time-input'\n\t\t\t\t\t\t\t\t\t\tvalue={spentTime}\n\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\tmax={100000}\n\t\t\t\t\t\t\t\t\t\tonChange={(value) => setSpentTime(value)}\n\t\t\t\t\t\t\t\t\t\tdataList={hltbToDatalist(game.hltb)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName='game-page__review-save-button'\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не играл\")}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetGameReview({ review: review, spent_time: spentTime });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t<div className='game-page__friends' hidden={!loggedIn | (friendsInfo?.length < 1)}>\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default GamePage;\n","import api from \"../http\";\nimport { SEARCH_MOVIES_URL, SEARCH_MOVIES_FAST_URL, GET_MOVIE_URL } from \"../settings\";\n\n/**\n * Запрос к бд, получающий информацию о фильме\n * @param {number} id ID фильма\n */\nexport async function getMovie(id) {\n\tconst res = await api.get(GET_MOVIE_URL + id + \"/\");\n\treturn res.data;\n}\n\n/**\n * Запрос на изменение статуса фильма\n * @param {object} user_info Статус фильма\n * @param {string} movieID ID фильма\n */\nexport async function setMovieStatus(id, user_info) {\n\tconst res = await api.put(GET_MOVIE_URL + id + \"/\", user_info);\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск фильмов\n * @param {string} query Поисковый запрос\n * @param {int} page Страница поиска\n */\nexport async function searchMovies(query, page) {\n\tconst res = await api.get(SEARCH_MOVIES_URL, { params: { query: query, page: page } });\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск локальных фильмов\n * @param {string} query Поисковый запрос\n */\nexport async function searchMoviesFast(query) {\n\tconst res = await api.get(SEARCH_MOVIES_FAST_URL, { params: { query: query } });\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию об оценках друзей для фильма\n * @param {number} id id фильма\n */\nexport async function getMovieUserInfo(id) {\n\tconst res = await api.get(GET_MOVIE_URL + id + \"/user_info/\");\n\treturn res.data;\n}\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as movieRequests from '../services/movieRequests';\nimport { toast } from 'react-toastify';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface IMovieUserInfo {\n\tstatus: string,\n\treview: string,\n\tscore: number,\n\tspent_time: number,\n}\n\nexport interface IMovie {\n\tid?: number,\n\t[key: string]: any,\n}\n\nexport interface IMovieState {\n\tmovie: IMovie | undefined,\n\tmovieState: IPendingState,\n\tuserInfo: IMovieUserInfo | undefined,\n\tfriendsInfo: any,\n\tuserInfoState: IPendingState,\n\tsetStatusState: IPendingState,\n\tsetStatusToast: any,\n}\n\nclass Movie implements IMovieState {\n\tmovie: IMovie | undefined;\n\tmovieState = 'done';\n\n\tuserInfo: IMovieUserInfo | undefined;\n\tfriendsInfo = [];\n\tuserInfoState = 'done';\n\n\tsetStatusState = 'done';\n\tsetStatusToast: any;\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\trequestMovie = async (id: number) => {\n\t\tthis.movieState = 'pending';\n\t\tmovieRequests.getMovie(id).then(this.requestMovieSuccess, this.requestMovieFailure);\n\t};\n\trequestMovieSuccess = (result: IMovie) => {\n\t\tthis.movie = result;\n\t\tthis.movieState = 'done';\n\t};\n\trequestMovieFailure = (error: string) => {\n\t\tthis.movieState = 'error: ' + error;\n\t};\n\n\trequestUserInfo = async (id: number) => {\n\t\tthis.userInfoState = 'pending';\n\t\tmovieRequests.getMovieUserInfo(id).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\n\t};\n\trequestUserInfoSuccess = (result: any) => {\n\t\tthis.userInfo = result.user_info;\n\t\tthis.friendsInfo = result.friends_info;\n\t\tthis.userInfoState = 'done';\n\t};\n\trequestUserInfoFailure = (error: string) => {\n\t\tthis.userInfoState = 'error: ' + error;\n\t};\n\n\tsetMovieStatus = async (userInfo: IMovieUserInfo) => {\n\t\tthis.setStatusState = 'pending';\n\t\tmovieRequests.setMovieStatus(this.movie?.id, userInfo).then(this.setMovieStatusSuccess, this.setMovieStatusFailure);\n\t};\n\tsetMovieStatusSuccess = () => {\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetMovieStatusFailure = (error: string) => {\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tsetMovieReview = async (userInfo: IMovieUserInfo) => {\n\t\tthis.setStatusState = 'pendingReview';\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\n\t\tmovieRequests.setMovieStatus(this.movie?.id, userInfo).then(this.setMovieReviewSuccess, this.setMovieReviewFailure);\n\t};\n\tsetMovieReviewSuccess = () => {\n\t\ttoast.update(this.setStatusToast, { render: 'Отзыв сохранен!', type: toast.TYPE.SUCCESS, autoClose: 1000 });\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetMovieReviewFailure = (error: string) => {\n\t\ttoast.update(this.setStatusToast, { render: 'Ошибка сохранения отзыва!', type: toast.TYPE.ERROR, autoClose: 1000 });\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tget anyError() {\n\t\tif (this.movieState.startsWith('error:')) return this.movieState;\n\t\tif (this.userInfoState.startsWith('error:')) return this.userInfoState;\n\t\treturn null;\n\t}\n}\n\nconst MovieStore = new Movie();\n//export default remotedev(MovieStore, { name: 'Movie' });\nexport default MovieStore;\n","import MoviePage from \"./MoviePage\";\n\nexport default MoviePage;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport ReactPlayer from \"react-player/youtube\";\nimport { Carousel } from \"react-responsive-carousel\";\nimport { observer } from \"mobx-react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport { toast } from \"react-toastify\";\n\nimport MovieStore from '../../store/MovieStore';\nimport AuthStore from '../../store/AuthStore';\nimport PagesStore from '../../store/PagesStore';\nimport StatusButtonGroup from '../../shared/StatusButtonGroup';\nimport FriendsActivity from '../../shared/FriendsActivity';\nimport ScoreBlock from '../../shared/ScoreBlock';\nimport Rating from '../../shared/Rating';\n\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\nimport \"./movie-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst MoviePage = observer((props) => {\n\tconst { movie, movieState, requestMovie, setMovieStatus, setMovieReview, userInfo, friendsInfo, userInfoState, requestUserInfo, anyError } = MovieStore;\n\tconst { loggedIn } = AuthStore;\n\tconst { openLoginForm } = PagesStore;\n\n\tlet { id } = useParams();\n\tconst [review, setReview] = useState(\"\");\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\n\tconst [userRate, setUserRate] = useState(0);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetReview(\"\");\n\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\tsetUserRate(0);\n\t\t\trequestMovie(id);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[id, requestMovie]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestUserInfo(id);\n\t\t\telse {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(0);\n\t\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn, id]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = movie?.name || 'Interests';\n\t}, [movie]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (userInfo?.status) {\n\t\t\t\tsetReview(userInfo.review);\n\t\t\t\tsetUserStatus(userInfo.status);\n\t\t\t\tsetUserRate(userInfo.score);\n\t\t\t} else {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(0);\n\t\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userInfo]\n\t);\n\n\tuseEffect(() => {\n\t\tif (anyError) toast.error(anyError);\n\t}, [anyError]);\n\n\tconst renderVideo = (video, index) => (\n\t\t<div className='movie-page__trailer'>\n\t\t\t<ReactPlayer url={video.url} controls key={index} className='movie-page__trailer-player' />\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className='movie-page'>\n\t\t\t<div className='movie-page__background' style={{ backgroundImage: `url(${movie?.backdrop_path})` }} />\n\t\t\t<LoadingOverlay active={movieState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='movie-page__body'>\n\t\t\t\t\t<div className='movie-page__header'>\n\t\t\t\t\t\t<div className='movie-page__poster'>\n\t\t\t\t\t\t\t<img src={movie?.poster_path} className='movie-page__poster-img' alt='' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='movie-page__info'>\n\t\t\t\t\t\t\t<h1 className='movie-page__info-header'>{movie?.name}</h1>\n\t\t\t\t\t\t\t<h5 className='movie-page__info-subheader'>{movie?.original_name}</h5>\n\t\t\t\t\t\t\t<div className='movie-page__info-body'>\n\t\t\t\t\t\t\t\t<p>Дата релиза: {movie?.release_date}</p>\n\t\t\t\t\t\t\t\t<p>Продолжительность (мин): {movie?.runtime}</p>\n\t\t\t\t\t\t\t\t<p>Жанр: {movie?.genres}</p>\n\t\t\t\t\t\t\t\t<p>Компания: {movie?.production_companies}</p>\n\t\t\t\t\t\t\t\t<p>Слоган: {movie?.tagline}</p>\n\t\t\t\t\t\t\t\t<p>В ролях: {movie?.cast}</p>\n\t\t\t\t\t\t\t\t<p>Режиссер: {movie?.directors}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ score: score });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName='movie-page__rating'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<StatusButtonGroup\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Дропнул\", \"Посмотрел\"]}\n\t\t\t\t\t\t\t\t\tclassName='movie-page__info-statuses'\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ status: status });\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t<ScoreBlock score={movie?.score} text='TMDB score' className='movie-page__info-score' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Carousel className='movie-page__trailers' showArrows centerMode centerSlidePercentage={50} showThumbs={false} showStatus={false} showIndicators={false}>\n\t\t\t\t\t\t{movie?.videos?.map(renderVideo)}\n\t\t\t\t\t</Carousel>\n\t\t\t\t\t<div className='movie-page__overview'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 className='game-page__overview-header'>Описание</h3>\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: movie?.overview }} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h3 className='movie-page__review-header'>Отзыв</h3>\n\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t<div className='game-page__review-body' hidden={!loggedIn}>\n\t\t\t\t\t\t\t\t<div className='movie-page__review'>\n\t\t\t\t\t\t\t\t\tВаш отзыв\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='movie-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName='movie-page__review-save-button'\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetMovieReview({ review: review });\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t<div className='movie-page__friends' hidden={!loggedIn || friendsInfo?.length < 1}>\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default MoviePage;\n","import api from \"../http\";\nimport { SEARCH_SHOWS_URL, SEARCH_SHOWS_FAST_URL, GET_SHOW_URL, GET_UNWATCHED_EPISODES_URL } from \"../settings\";\n\n/**\n * Запрос к бд, получающий информацию о сериале\n * @param {number} id ID сериала\n */\nexport async function getShow(id) {\n\tconst res = await api.get(GET_SHOW_URL + id + \"/\");\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию о сезоне сериала\n * @param {number} showID ID сериала\n *  * @param {number} seasonNumber номер сезона\n */\nexport async function getShowSeason(showID, seasonNumber) {\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\");\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию о серии сериала\n * @param {number} showID ID сериала\n * @param {number} seasonNumber номер сезона\n * @param {number} episodeNumber номер эпизода\n */\nexport async function getShowEpisode(showID, seasonNumber, episodeNumber) {\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber + \"/\");\n\treturn res.data;\n}\n\nexport async function setShowStatus(id, user_info) {\n\tconst res = await api.put(GET_SHOW_URL + id + \"/\", user_info);\n\treturn res.data;\n}\n\n/**\n * Запрос на изменение статуса сезона сериала\n * @param {object} user_info Статус сезона сериала\n * @param {number} showID ID сериала\n *  * @param {number} seasonNumber номер сезона\n */\nexport async function setShowSeasonStatus(showID, seasonNumber, user_info) {\n\tconst res = await api.put(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\", user_info);\n\treturn res.data;\n}\n\n/**\n * Запрос на изменение статуса сезона сериала\n * @param {object} episodesList Список объектов эпизодов\n * @param {number} showID ID сериала\n */\nexport async function setShowEpisodesStatus(showID, episodesList) {\n\tconst res = await api.put(GET_SHOW_URL + showID + \"/episodes/\", episodesList);\n\treturn res;\n}\n\n/**\n * Запрос на поиск сериалов\n * @param {string} query Поисковый запрос\n * @param {int} page Страница поиска\n */\nexport async function searchShows(query, page) {\n\tconst res = await api.get(SEARCH_SHOWS_URL, { params: { query: query, page: page } });\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск локальных сериалов\n * @param {string} query Поисковый запрос\n */\nexport async function searchShowsFast(query) {\n\tconst res = await api.get(SEARCH_SHOWS_FAST_URL, { params: { query: query } });\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию об оценках друзей для сериала\n * @param {number} showID id сериала\n */\nexport async function getShowUserInfo(showID) {\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/user_info/\");\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию об оценках друзей для сезона сериала\n * @param {number} showID id сериала\n */\nexport async function getShowSeasonUserInfo(showID, seasonID) {\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/user_info/\");\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию об оценках друзей для эпизода сериала\n * @param {number} showID id сериала\n * @param {int} page страница\n */\nexport async function getShowEpisodeUserInfo(showID, seasonID, episodeID) {\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/episode/\" + episodeID + \"/user_info/\");\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию о сериале\n */\nexport async function getUnwatchedEpisodes() {\n\tconst res = await api.get(GET_UNWATCHED_EPISODES_URL);\n\treturn res.data;\n}\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as showRequests from '../services/showRequests';\nimport { toast } from 'react-toastify';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface IShowUserInfo {\n\tstatus: string,\n\treview: string,\n\tscore: number,\n\tspent_time: number,\n}\n\nexport interface IShow {\n\tid?: number,\n\t[key: string]: any,\n}\n\nexport interface IShowState {\n\tshow: IShow | undefined,\n\tshowState: IPendingState,\n\tuserInfo: IShowUserInfo | undefined,\n\tfriendsInfo: any,\n\tuserInfoState: IPendingState,\n\n\tshowSeasons: any,\n\tshowSeasonsState: {[key: string]: IPendingState},\n\tshowSeasonsUserInfo: any,\n\tshowSeasonsUserInfoState: {[key: string]: IPendingState};\n\n\tsetStatusState: IPendingState,\n\tsetStatusToast: any,\n}\n\nclass Show implements IShowState {\n\tshow: IShow | undefined;\n\tshowState: IPendingState = 'done';\n\tuserInfo: IShowUserInfo | undefined;\n\tfriendsInfo = [];\n\tuserInfoState: IPendingState = 'done';\n\n\tshowSeasons: any = {};\n\tshowSeasonsState: {[key: string]: IPendingState} = {};\n\tshowSeasonsUserInfo: any = {};\n\tshowSeasonsUserInfoState: {[key: string]: IPendingState} = {};\n\n\tsetStatusState: IPendingState = 'done';\n\tsetStatusToast: any;\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\trequestShow = async (id: number) => {\n\t\tthis.showState = 'pending';\n\t\tshowRequests.getShow(id).then(this.requestShowSuccess, this.requestShowFailure);\n\t};\n\trequestShowSuccess = (result: IShow) => {\n\t\tthis.show = result;\n\t\tthis.showState = 'done';\n\t};\n\trequestShowFailure = (error: string) => {\n\t\tthis.showState = 'error: ' + error;\n\t};\n\n\trequestSeason = async (showID: number, seasonNumber: number) => {\n\t\tthis.showState = 'pending';\n\t\tshowRequests.getShowSeason(showID, seasonNumber).then(this.requestSeasonSuccess, this.requestSeasonFailure);\n\t};\n\trequestSeasonSuccess = (result: IShow) => {\n\t\tthis.show = result;\n\t\tthis.showState = 'done';\n\t};\n\trequestSeasonFailure = (error: any) => {\n\t\tthis.showState = 'error: ' + error;\n\t};\n\n\trequestSeasons = async (showID: number, seasonNumber: number) => {\n\t\tthis.showSeasonsState[seasonNumber] = 'pending';\n\t\tthis.showSeasons[seasonNumber] = {};\n\t\tshowRequests.getShowSeason(showID, seasonNumber).then(\n\t\t\t(res) => this.requestSeasonsSuccess(res, seasonNumber),\n\t\t\t(res) => this.requestSeasonsFailure(res, seasonNumber)\n\t\t);\n\t};\n\trequestSeasonsSuccess = (result: IShow, seasonNumber: number) => {\n\t\tthis.showSeasons[seasonNumber] = result;\n\t\tthis.showSeasonsState[seasonNumber] = 'done';\n\t};\n\trequestSeasonsFailure = (error: string, seasonNumber: number) => {\n\t\tthis.showSeasonsState[seasonNumber] = 'error: ' + error;\n\t};\n\n\trequestEpisode = async (showID: number, seasonNumber: number, episodeNumber: number) => {\n\t\tthis.showState = 'pending';\n\t\tshowRequests.getShowEpisode(showID, seasonNumber, episodeNumber).then(this.requestEpisodeSuccess, this.requestEpisodeFailure);\n\t};\n\trequestEpisodeSuccess = (result: IShow) => {\n\t\tthis.show = result;\n\t\tthis.showState = 'done';\n\t};\n\trequestEpisodeFailure = (error: string) => {\n\t\tthis.showState = 'error: ' + error;\n\t};\n\n\trequestShowUserInfo = async (id: number) => {\n\t\tthis.userInfoState = 'pending';\n\t\tshowRequests.getShowUserInfo(id).then(this.requestShowUserInfoSuccess, this.requestShowUserInfoFailure);\n\t};\n\trequestShowUserInfoSuccess = (result: any) => {\n\t\tthis.userInfo = result.user_info;\n\t\tthis.friendsInfo = result.friends_info;\n\t\tthis.userInfoState = 'done';\n\t};\n\trequestShowUserInfoFailure = (error: string) => {\n\t\tthis.userInfoState = 'error: ' + error;\n\t};\n\n\trequestSeasonUserInfo = async (showID: number, seasonID: number) => {\n\t\tthis.userInfoState = 'pending';\n\t\tshowRequests.getShowSeasonUserInfo(showID, seasonID).then(this.requestSeasonUserInfoSuccess, this.requestSeasonUserInfoFailure);\n\t};\n\trequestSeasonUserInfoSuccess = (result: any) => {\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info };\n\t\tthis.friendsInfo = result.friends_info;\n\t\tthis.userInfoState = 'done';\n\t};\n\trequestSeasonUserInfoFailure = (error: string) => {\n\t\tthis.userInfoState = 'error: ' + error;\n\t};\n\n\trequestSeasonsUserInfo = async (showID: number, seasonID: number) => {\n\t\tthis.showSeasonsUserInfo[seasonID] = {};\n\t\tthis.showSeasonsUserInfoState[seasonID] = 'pending';\n\t\tshowRequests.getShowSeasonUserInfo(showID, seasonID).then(\n\t\t\t(res) => this.requestSeasonsUserInfoSuccess(res, seasonID),\n\t\t\t(res) => this.requestSeasonsUserInfoFailure(res, seasonID)\n\t\t);\n\t};\n\trequestSeasonsUserInfoSuccess = (result: any, seasonID: number) => {\n\t\tthis.showSeasonsUserInfoState[seasonID] = 'done';\n\t\tthis.showSeasonsUserInfo[seasonID] = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\n\t};\n\trequestSeasonsUserInfoFailure = (error: string, seasonID: number) => {\n\t\tthis.showSeasonsUserInfoState[seasonID] = 'error: ' + error;\n\t};\n\n\trequestEpisodeUserInfo = async (showID: number, seasonID: number, episodeID: number) => {\n\t\tthis.userInfoState = 'pending';\n\t\tshowRequests.getShowEpisodeUserInfo(showID, seasonID, episodeID).then(this.requestEpisodeUserInfoSuccess, this.requestEpisodeUserInfoFailure);\n\t};\n\trequestEpisodeUserInfoSuccess = (result: any) => {\n\t\tthis.userInfoState = 'done';\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show };\n\t\tthis.friendsInfo = result.friends_info;\n\t};\n\trequestEpisodeUserInfoFailure = (error: string) => {\n\t\tthis.userInfoState = 'error: ' + error;\n\t};\n\n\tsetShowStatus = async (userInfo: IShowUserInfo) => {\n\t\tthis.setStatusState = 'pending';\n\t\tshowRequests.setShowStatus(this.show?.id, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\n\t};\n\tsetShowStatusSuccess = () => {\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetShowStatusFailure = (error: string) => {\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tsetShowReview = async (userInfo: IShowUserInfo) => {\n\t\tthis.setStatusState = 'pendingReview';\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\n\t\tshowRequests.setShowStatus(this.show?.id, userInfo).then(this.setShowReviewSuccess, this.setShowReviewFailure);\n\t};\n\tsetShowReviewSuccess = () => {\n\t\ttoast.update(this.setStatusToast, { render: 'Отзыв сохранен!', type: toast.TYPE.SUCCESS, autoClose: 1000 });\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetShowReviewFailure = (error: string) => {\n\t\ttoast.update(this.setStatusToast, { render: 'Ошибка сохранения отзыва!', type: toast.TYPE.ERROR, autoClose: 1000 });\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tsetSeasonStatus = async (userInfo: IShowUserInfo, showID: number, seasonNumber: number) => {\n\t\tthis.setStatusState = 'pending';\n\t\tshowRequests.setShowSeasonStatus(showID, seasonNumber, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\n\t};\n\tsetSeasonReview = async (userInfo: IShowUserInfo, showID: number, seasonNumber: number) => {\n\t\tthis.setStatusState = 'pendingReview';\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\n\t\tshowRequests.setShowSeasonStatus(showID, seasonNumber, userInfo).then(this.setShowReviewSuccess, this.setShowReviewFailure);\n\t};\n\n\tsetEpisodesStatus = async (episodesList: any, showID: number, seasonsToUpdate = []) => {\n\t\tthis.setStatusState = 'pending';\n\t\tshowRequests.setShowEpisodesStatus(showID, episodesList).then((result) => {\n\t\t\tif (seasonsToUpdate) for (let season in seasonsToUpdate) this.requestSeasonsUserInfo(showID, seasonsToUpdate[season]);\n\t\t\tthis.setShowStatusSuccess();\n\t\t}, this.setShowStatusFailure);\n\t};\n\n\tgetShowSeason = (seasonNumber: number) => {\n\t\treturn this.showSeasons[seasonNumber];\n\t};\n\n\tgetShowSeasonState = (seasonNumber: number) => {\n\t\treturn this.showSeasonsState[seasonNumber];\n\t};\n\n\tgetShowSeasonUserInfo = (seasonNumber: number) => {\n\t\treturn this.showSeasonsUserInfo[seasonNumber];\n\t};\n\n\tgetEpisodesUserInfo = (season: number, id: number) => {\n\t\tfor (let episodeNumber in this.showSeasonsUserInfo[season].episodes) {\n\t\t\tlet episode = this.showSeasonsUserInfo[season].episodes[episodeNumber];\n\t\t\tif (episode.tmdb_id === id) return episode;\n\t\t}\n\t\treturn null;\n\t};\n\n\tget anySeasonLoading() {\n\t\tfor (let season in this.showSeasonsState) if (this.showSeasonsState[season] === 'pending') return true;\n\t\treturn false;\n\t}\n\n\tget anyError() {\n\t\tif (this.showState.startsWith('error:')) return this.showState;\n\t\tif (this.userInfoState.startsWith('error:')) return this.userInfoState;\n\t\tif (this.setStatusState.startsWith('error:')) return this.setStatusState;\n\t\treturn null;\n\t}\n}\n\nconst ShowStore = new Show();\n//export default remotedev(ShowStore, { name: 'Show' });\nexport default ShowStore;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Rating from '../Rating';\n\nimport \"./detail-episode-row.sass\";\n\nfunction DetailEpisodeRow({ episode, showID, setEpisodeUserStatus, loggedIn, userInfo, checkAll, userWatchedShow, setSaveEpisodes }) {\n\tlet history = useHistory();\n\tconst [userRate, setUserRate] = useState(0);\n\tconst [isChecked, setIsChecked] = useState(false);\n\n\tuseEffect(() => {\n\t\tsetUserRate(userInfo?.score);\n\t\tsetIsChecked(userInfo?.score > -1);\n\t}, [userInfo]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (checkAll === -1) {\n\t\t\t\tsetIsChecked(false);\n\t\t\t} else if (checkAll === 1) {\n\t\t\t\tsetIsChecked(true);\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[checkAll]\n\t);\n\n\tfunction parseDate(date) {\n\t\tif (!date) {\n\t\t\treturn 'TBA';\n\t\t}\n\t\tlet newDate = new Date(date).toLocaleDateString(\"ru-RU\");\n\t\tif (newDate !== \"Invalid Date\") {\n\t\t\treturn newDate;\n\t\t}\n\t\treturn 'TBA';\n\t}\n\n\treturn (\n\t\t<div className='detail-episode-row'>\n\t\t\t<input\n\t\t\t\ttype='checkbox'\n\t\t\t\tid={`cbEpisode${episode.id}`}\n\t\t\t\tchecked={isChecked}\n\t\t\t\tonChange={(res) => {\n\t\t\t\t\tsetSaveEpisodes(true);\n\t\t\t\t\tsetIsChecked(res.target.checked);\n\t\t\t\t}}\n\t\t\t\thidden={!loggedIn || !userWatchedShow}\n\t\t\t/>\n\t\t\t<p className='detail-episode-row__date'>{parseDate(episode.air_date)}</p>\n\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='detail-episode-row__rate'>\n\t\t\t\t<Rating\n\t\t\t\t\twithEye={true}\n\t\t\t\t\treadonly={!loggedIn}\n\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\tsetIsChecked(score > -1);\n\t\t\t\t\t\tsetEpisodeUserStatus({ episodes: [{ tmdb_id: episode.id, score: score }] }, showID);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<a\n\t\t\t\tclassName='detail-episode-row__name'\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}\n\t\t\t\ttitle={episode.name}>\n\t\t\t\tСерия {episode.episode_number} - {episode.name}\n\t\t\t</a>\n\t\t</div>\n\t);\n}\n\nexport default DetailEpisodeRow;\n","import DetailEpisodeRow from \"./DetailEpisodeRow\";\n\nexport default DetailEpisodeRow;\n","import SeasonBlock from \"./SeasonBlock\";\n\nexport default SeasonBlock;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport { computed } from \"mobx\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport classnames from \"classnames\";\n\nimport AuthStore from '../../../../store/AuthStore';\nimport ShowStore from '../../../../store/ShowStore';\nimport PagesStore from '../../../../store/PagesStore';\nimport DetailEpisodeRow from '../../../../shared/DetailEpisodeRow';\nimport Rating from '../../../../shared/Rating';\n\nimport \"./season-block.sass\";\n\nconst SeasonBlock = observer(\n\t({\n\t\tshowID,\n\t\tseasonNumber,\n\t\t//onChangeStatus,\n\t\tuserWatchedShow,\n\t\tclassName,\n\t}) => {\n\t\tconst { loggedIn } = AuthStore;\n\t\tconst { openLoginForm, setSaveEpisodes } = PagesStore;\n\t\tconst { requestSeasons, requestSeasonsUserInfo, setEpisodesStatus, setSeasonStatus } = ShowStore;\n\t\tconst showSeason = computed(() => ShowStore.getShowSeason(seasonNumber)).get();\n\t\tconst showSeasonState = computed(() => ShowStore.getShowSeasonState(seasonNumber)).get();\n\t\tconst showUserInfo = computed(() => ShowStore.getShowSeasonUserInfo(seasonNumber)).get();\n\n\t\tlet history = useHistory();\n\t\tconst [isChecked, setIsChecked] = useState(0);\n\t\tconst [userRate, setUserRate] = useState(0);\n\n\t\tuseEffect(\n\t\t\t() => {\n\t\t\t\tsetIsChecked(0);\n\t\t\t\tsetUserRate(0);\n\t\t\t\trequestSeasons(showID, seasonNumber);\n\t\t\t},\n\t\t\t// eslint-disable-next-line\n\t\t\t[showID, seasonNumber, requestSeasons]\n\t\t);\n\n\t\tuseEffect(\n\t\t\t() => {\n\t\t\t\tsetIsChecked(0);\n\t\t\t\tsetUserRate(0);\n\t\t\t\tif (loggedIn) requestSeasonsUserInfo(showID, seasonNumber);\n\t\t\t},\n\t\t\t// eslint-disable-next-line\n\t\t\t[loggedIn, showID, seasonNumber]\n\t\t);\n\n\t\tuseEffect(\n\t\t\t() => {\n\t\t\t\tif (showUserInfo?.score) {\n\t\t\t\t\tsetUserRate(showUserInfo.score);\n\t\t\t\t} else {\n\t\t\t\t\tsetUserRate(0);\n\t\t\t\t}\n\t\t\t},\n\t\t\t// eslint-disable-next-line\n\t\t\t[showUserInfo]\n\t\t);\n\n\t\tfunction getEpisodeByID(episodes, id) {\n\t\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\n\t\t}\n\n\t\treturn (\n\t\t\t<LoadingOverlay active={showSeasonState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div key={showSeason?.id} className={classnames(\"season-block\", className)}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber);\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName='season-block__link'>\n\t\t\t\t\t\t<h5 className='season-block__name'> {showSeason?.name} </h5>\n\t\t\t\t\t</a>\n\t\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='season-block__rate'>\n\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, showID, seasonNumber);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br />\n\t\t\t\t\t<details open={true} className='season-block__episodes'>\n\t\t\t\t\t\t<summary>Развернуть</summary>\n\t\t\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='season-block__check-all'>\n\t\t\t\t\t\t\tВыбрать все&nbsp;\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\tchecked={isChecked > 0}\n\t\t\t\t\t\t\t\tonChange={(res) => {\n\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\n\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ul className='season-block__episodes-ul'>\n\t\t\t\t\t\t\t{showSeason?.episodes\n\t\t\t\t\t\t\t\t?.map((episode, counter) => (\n\t\t\t\t\t\t\t\t\t<li className='season-block__episode' key={counter}>\n\t\t\t\t\t\t\t\t\t\t<DetailEpisodeRow\n\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\n\t\t\t\t\t\t\t\t\t\t\tshowID={showID}\n\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\n\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(showUserInfo?.episodes, episode?.id)}\n\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\n\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\n\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t.reverse()}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</details>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t);\n\t}\n);\n\nexport default SeasonBlock;\n","import SeasonsBlock from \"./SeasonsBlock\";\n\nexport default SeasonsBlock;\n","import React, {useEffect} from \"react\";\nimport { toJS } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nimport ShowStore from '../../../../store/ShowStore';\nimport PagesStore from '../../../../store/PagesStore';\nimport AuthStore from '../../../../store/AuthStore';\nimport SeasonBlock from \"../SeasonBlock\";\n\nimport \"./seasons-block.sass\";\n\nconst SeasonsBlock = observer(({ showID, seasons, userWatchedShow }) => {\n\tconst { showSeasonsUserInfo, showSeasons, setEpisodesStatus, setStatusState, anySeasonLoading } = ShowStore;\n\tconst { saveEpisodesBlockIsOpen, setSaveEpisodes } = PagesStore;\n\tconst { loggedIn } = AuthStore;\n\n\tfunction getEpisodeByID(episodes, id) {\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\n\t}\n\n\tfunction sendEpisodes() {\n\t\tlet episodes = [];\n\t\tlet seasons = [];\n\t\tfor (let season in showSeasons) {\n\t\t\tfor (let episode in showSeasons[season].episodes) {\n\t\t\t\tlet currentValue = getEpisodeByID(showSeasonsUserInfo[season].episodes, showSeasons[season].episodes[episode].id);\n\t\t\t\tlet cbValue = document.getElementById(`cbEpisode${showSeasons[season].episodes[episode].id}`).checked;\n\t\t\t\tlet currentStatus = currentValue?.score > -1;\n\t\t\t\tif (cbValue !== currentStatus) {\n\t\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: cbValue ? 0 : -1 });\n\t\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\n\t\tsetSaveEpisodes(false);\n\t}\n\n\tfunction sendAllEpisodes() {\n\t\tlet episodes = [];\n\t\tlet seasons = [];\n\t\tfor (let season in showSeasons) {\n\t\t\tif (showSeasons[season].name !== \"Спецматериалы\")\n\t\t\t\tfor (let episode in showSeasons[season].episodes) {\n\t\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: 0 });\n\t\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\n\t\t\t\t}\n\t\t}\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\n\t\tsetSaveEpisodes(false);\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tsetSaveEpisodes(false);\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<div className='seasons-block'>\n\t\t\t<LoadingOverlay active={setStatusState === \"pending\"} spinner text='Обновление...'>\n\t\t\t\t<button\n\t\t\t\t\tclassName='seasons-block__all-button'\n\t\t\t\t\thidden={!loggedIn | !userWatchedShow}\n\t\t\t\t\tdisabled={anySeasonLoading}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsendAllEpisodes();\n\t\t\t\t\t}}>\n\t\t\t\t\tПосмотрел весь сериал\n\t\t\t\t</button>\n\t\t\t\t{seasons\n\t\t\t\t\t?.map((season) => <SeasonBlock className='seasons-block__season-block' showID={showID} seasonNumber={season.season_number} key={season.season_number} userWatchedShow={userWatchedShow} />)\n\t\t\t\t\t.reverse()}\n\t\t\t\t<div className='seasons-block__save-episodes-block' hidden={!saveEpisodesBlockIsOpen}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName='seasons-block__save-episodes-button'\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsendEpisodes();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tСохранить\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default SeasonsBlock;\n","import ShowPage from \"./ShowPage\";\n\nexport default ShowPage;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport ReactPlayer from \"react-player/youtube\";\nimport { Carousel } from \"react-responsive-carousel\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport { toast } from \"react-toastify\";\n\nimport AuthStore from '../../store/AuthStore';\nimport PagesStore from '../../store/PagesStore';\nimport ShowStore from '../../store/ShowStore';\nimport Rating from '../../shared/Rating';\nimport StatusButtonGroup from '../../shared/StatusButtonGroup';\nimport FriendsActivity from '../../shared/FriendsActivity';\nimport SeasonsBlock from './views/SeasonsBlock';\nimport ScoreBlock from '../../shared/ScoreBlock';\n\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\nimport \"./show-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst ShowPage = observer((props) => {\n\tconst { loggedIn } = AuthStore;\n\tconst { openLoginForm } = PagesStore;\n\tconst { requestShow, show, showState, setShowStatus, setShowReview, requestShowUserInfo, userInfo, friendsInfo, userInfoState, anyError } = ShowStore;\n\n\tlet { id } = useParams();\n\tconst [review, setReview] = useState(\"\");\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\n\tconst [userRate, setUserRate] = useState(0);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetReview(\"\");\n\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\tsetUserRate(0);\n\t\t\trequestShow(id);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[id, requestShow]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestShowUserInfo(id);\n\t\t\telse {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(0);\n\t\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn, id]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = show?.name || 'Interests';\n\t}, [show]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (userInfo?.status) {\n\t\t\t\tsetReview(userInfo.review);\n\t\t\t\tsetUserStatus(userInfo.status);\n\t\t\t\tsetUserRate(userInfo.score);\n\t\t\t} else {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(0);\n\t\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userInfo]\n\t);\n\n\tuseEffect(() => {\n\t\tif (anyError) toast.error(anyError);\n\t}, [anyError]);\n\n\tconst renderVideo = (video, index) => (\n\t\t<div className='movie-page__trailer' key={video.url}>\n\t\t\t<ReactPlayer url={video.url} controls key={index} className='movie-page__trailer-player' />\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className='show-page'>\n\t\t\t<div className='show-page__background' style={{ backgroundImage: `url(${show?.backdrop_path})` }} />\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='show-page__body'>\n\t\t\t\t\t<div className='show-page__header'>\n\t\t\t\t\t\t<div className='show-page__poster'>\n\t\t\t\t\t\t\t<img src={show?.poster_path} className='show-page__poster-img' alt='' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='show-page__info'>\n\t\t\t\t\t\t\t<h1 className='show-page__info-header'>{show?.name}</h1>\n\t\t\t\t\t\t\t<h5 className='show-page__info-subheader'>{show?.original_name}</h5>\n\t\t\t\t\t\t\t<div className='show-page__info-body'>\n\t\t\t\t\t\t\t\t<p hidden={!show?.genres}>Жанр: {show?.genres}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.production_companies}>Компания: {show?.production_companies}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.first_air_date}>Дата выхода первой серии: {show?.first_air_date}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.last_air_date}>Дата выхода последней серии: {show?.last_air_date}</p>\n\t\t\t\t\t\t\t\t<p hidden={!!show?.episode_run_time}>Продолжительность (мин): {show?.episode_run_time}</p>\n\t\t\t\t\t\t\t\t<p>Количество сезонов: {show?.seasons_count}</p>\n\t\t\t\t\t\t\t\t<p>Количество серий: {show?.episodes_count}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.status}>Статус: {show?.status}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ score: score });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName='show-page__rating'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<StatusButtonGroup\n\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Смотрю\", \"Дропнул\", \"Посмотрел\"]}\n\t\t\t\t\t\t\t\t\tclassName='show-page__info-statuses'\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ status: status });\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t<ScoreBlock score={show?.score} text='TMDB score' className='show-page__info-score' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Carousel className='movie-page__trailers' showArrows centerMode centerSlidePercentage={50} showThumbs={false} showStatus={false} showIndicators={false}>\n\t\t\t\t\t\t{show?.videos?.map(renderVideo)}\n\t\t\t\t\t</Carousel>\n\t\t\t\t\t<div className='show-page__overview'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 className='show-page__overview-header'>Описание</h3>\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show?.overview }} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='show-page__seasons'>\n\t\t\t\t\t\t\t<h3 className='show-page__seasons-header'>Список серий</h3>\n\t\t\t\t\t\t\t<SeasonsBlock showID={show?.id} seasons={show?.seasons} userWatchedShow={userStatus !== \"Не смотрел\"} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='show-page__review' hidden={!loggedIn}>\n\t\t\t\t\t\t\t<h3 className='show-page__review-header'>Отзыв</h3>\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t<div className='show-page__review'>\n\t\t\t\t\t\t\t\t\tВаш отзыв\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' value={review} onChange={(event) => setReview(event.target.value)} className='show-page__review-input' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName='show-page__review-save-button'\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetShowReview({ review: review });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='show-page__friends' hidden={!loggedIn || friendsInfo.length < 1}>\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default ShowPage;\n","import SeasonPage from \"./SeasonPage\";\n\nexport default SeasonPage;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\nimport { toast } from \"react-toastify\";\n\nimport AuthStore from '../../store/AuthStore';\nimport ShowStore from '../../store/ShowStore';\nimport PagesStore from '../../store/PagesStore';\nimport Rating from '../../shared/Rating';\nimport FriendsActivity from '../../shared/FriendsActivity';\nimport DetailEpisodeRow from '../../shared/DetailEpisodeRow';\n\nimport \"./season-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst SeasonPage = observer((props) => {\n\tconst { loggedIn } = AuthStore;\n\tconst { requestSeason, show, showState, setSeasonStatus, setSeasonReview, setEpisodesStatus, requestSeasonUserInfo, userInfo, userInfoState, friendsInfo } = ShowStore;\n\tconst { openLoginForm, setSaveEpisodes, saveEpisodesBlockIsOpen } = PagesStore;\n\n\tlet history = useHistory();\n\tlet { show_id, number } = useParams();\n\tconst [review, setReview] = useState(\"\");\n\tconst [userRate, setUserRate] = useState(0);\n\tconst [chartData, setChartData] = useState([]);\n\tconst [isChecked, setIsChecked] = useState(0);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetReview(\"\");\n\t\t\tsetUserRate(0);\n\t\t\tsetIsChecked(0);\n\t\t\trequestSeason(show_id, number);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[show_id, number, requestSeason]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestSeasonUserInfo(show_id, number);\n\t\t\telse {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(0);\n\t\t\t\tsetIsChecked(0);\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn, show_id, number]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = show?.show?.tmdb_name + \" - \" + show?.name;\n\t}, [show]);\n\n\tuseEffect(() => {\n\t\tsetChartData([]);\n\t\tif (show?.episodes)\n\t\t\tif (show?.episodes.length > 0) {\n\t\t\t\tlet newData = [];\n\t\t\t\tfor (let episode in show?.episodes) {\n\t\t\t\t\tif (show?.episodes[episode].vote_average > 0) newData.push({ name: \"Ep \" + show?.episodes[episode].episode_number, Оценка: show?.episodes[episode].vote_average });\n\t\t\t\t}\n\t\t\t\tsetChartData(newData);\n\t\t\t}\n\t}, [show]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\n\t\t\telse setReview(\"\");\n\n\t\t\tif (userInfo?.score) setUserRate(userInfo.score);\n\t\t\telse setUserRate(0);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userInfo]\n\t);\n\n\tuseEffect(() => {\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\n\t}, [showState]);\n\tuseEffect(() => {\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\n\t}, [userInfoState]);\n\n\tfunction getEpisodeByID(episodes, id) {\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\n\t}\n\n\tfunction sendEpisodes() {\n\t\tlet episodes = [];\n\t\tfor (let episode in userInfo.episodes) {\n\t\t\tlet currentValue = userInfo.episodes[episode];\n\t\t\tlet cbValue = document.getElementById(`cbEpisode${currentValue.tmdb_id}`).checked;\n\t\t\tlet currentStatus = currentValue?.score > -1;\n\t\t\tif (cbValue !== currentStatus) episodes.push({ tmdb_id: currentValue.tmdb_id, score: cbValue ? 0 : -1 });\n\t\t}\n\t\tsetEpisodesStatus({ episodes }, show_id);\n\t\trequestSeasonUserInfo(show_id, number);\n\t\tsetSaveEpisodes(false);\n\t}\n\n\treturn (\n\t\t<div className='season-page'>\n\t\t\t<div className='season-page__background' style={{ backgroundImage: `url(${show?.show?.tmdb_backdrop_path})` }} />\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='season-page__body'>\n\t\t\t\t\t<div className='season-page__header'>\n\t\t\t\t\t\t<div className='season-page__poster'>\n\t\t\t\t\t\t\t<img src={show?.poster_path} className='img-fluid' alt='' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='season-page__info'>\n\t\t\t\t\t\t\t<h1 className='season-page__info-header'>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show?.show?.id}\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show?.show?.tmdb_id);\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{show?.show?.tmdb_name}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{\" - \" + show?.name}\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t<h5 className='season-page__info-subheader'>{show?.show?.tmdb_original_name + \" - Season \" + show?.season_number}</h5>\n\t\t\t\t\t\t\t<div className='season-page__info-body'>\n\t\t\t\t\t\t\t\t<p hidden={!show?.air_date}>Дата выхода: {show?.air_date}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.episodes}>Количество серий: {show?.episodes?.length}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, show_id, show?.season_number);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName='season-page__rating'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className='season-page__review'>\n\t\t\t\t\t\t\t\t\t\tВаш отзыв\n\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='season-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} outline />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName='season-page__review-save-button'\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetSeasonReview({ review: review }, show_id, show?.season_number);\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='season-page__overview'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 className='season-page__overview-header'>Описание</h3>\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show?.overview }} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='season-page__episodes'>\n\t\t\t\t\t\t\t<h3 className='season-page__episodes-header'>Список серий</h3>\n\t\t\t\t\t\t\t<details open={false} className='season-page__episodes-body'>\n\t\t\t\t\t\t\t\t<summary>Развернуть</summary>\n\t\t\t\t\t\t\t\t<div hidden={!loggedIn || !userInfo?.user_watched_show}>\n\t\t\t\t\t\t\t\t\tВыбрать все&nbsp;\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\t\t\tchecked={isChecked > 0}\n\t\t\t\t\t\t\t\t\t\tonChange={(res) => {\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\n\t\t\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ul className='season-page__episodes-ul'>\n\t\t\t\t\t\t\t\t\t{show?.episodes\n\t\t\t\t\t\t\t\t\t\t? show?.episodes.map((episode, counter) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<li className='season-page__episode' key={counter}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DetailEpisodeRow\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowID={show_id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(userInfo?.episodes, episode.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userInfo?.user_watched_show}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t  ))\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t<div hidden={!(chartData.length > 0)}>\n\t\t\t\t\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={200}>\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\n\t\t\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t\t\t<XAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} />\n\t\t\t\t\t\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={chartData.length * 30}>\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }} layout='vertical'>\n\t\t\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t\t\t<YAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} type='category' />\n\t\t\t\t\t\t\t\t\t\t\t<XAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} type='number' />\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='season-page__friends' hidden={friendsInfo.length < 1}>\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t\t<div className='season-page__save-episodes-block' hidden={!saveEpisodesBlockIsOpen}>\n\t\t\t\t<button\n\t\t\t\t\tclassName='season-page__save-episodes-button'\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsendEpisodes();\n\t\t\t\t\t}}>\n\t\t\t\t\tСохранить\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default SeasonPage;\n","import EpisodePage from \"./EpisodePage\";\n\nexport default EpisodePage;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useParams } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport { toast } from \"react-toastify\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nimport AuthStore from '../../store/AuthStore';\nimport ShowStore from '../../store/ShowStore';\nimport PagesStore from '../../store/PagesStore';\nimport Rating from '../../shared/Rating';\nimport FriendsActivity from '../../shared/FriendsActivity';\nimport ScoreBlock from '../../shared/ScoreBlock';\n\nimport \"./episode-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst EpisodePage = observer((props) => {\n\tconst { loggedIn } = AuthStore;\n\tconst { openLoginForm } = PagesStore;\n\tconst { requestEpisode, show, showState, setEpisodesStatus, requestEpisodeUserInfo, userInfo, userInfoState, friendsInfo, setStatusState } = ShowStore;\n\n\tlet history = useHistory();\n\tlet { show_id, season_number, episode_number } = useParams();\n\tconst [review, setReview] = useState(\"\");\n\tconst [userRate, setUserRate] = useState(-1);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetReview(\"\");\n\t\t\tsetUserRate(-1);\n\t\t\trequestEpisode(show_id, season_number, episode_number);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[show_id, season_number, episode_number, requestEpisode]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestEpisodeUserInfo(show_id, season_number, episode_number);\n\t\t\telse {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(-1);\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn, show_id, season_number, episode_number]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = show?.show?.tmdb_name + \" - \" + show?.name;\n\t}, [show]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\n\t\t\telse setReview(\"\");\n\n\t\t\tif (userInfo?.score > -1) setUserRate(userInfo.score);\n\t\t\telse setUserRate(-1);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userInfo]\n\t);\n\n\tuseEffect(() => {\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\n\t}, [showState]);\n\tuseEffect(() => {\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\n\t}, [userInfoState]);\n\tuseEffect(() => {\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\n\t}, [setStatusState]);\n\n\treturn (\n\t\t<div className='episode-page'>\n\t\t\t<div className='episode-page__background' style={{ backgroundImage: `url(${show?.show?.tmdb_backdrop_path})` }} />\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='episode-page__body'>\n\t\t\t\t\t<div className='episode-page__header'>\n\t\t\t\t\t\t<div className='episode-page__poster'>\n\t\t\t\t\t\t\t<img src={show?.still_path} className='img-fluid' alt='' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='episode-page__info'>\n\t\t\t\t\t\t\t<h1 className='episode-page__info-header'>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{show?.show?.tmdb_name}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{\" - \" + show?.name}\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t<h5 className='episode-page__info-subheader'>{show?.show?.tmdb_original_name + \" - Season \" + show?.season_number + \" - Episode \" + show?.episode_number}</h5>\n\t\t\t\t\t\t\t<div className='episode-page__info-body'>\n\t\t\t\t\t\t\t\t<p hidden={!show?.air_date}>Дата выхода: {show?.air_date}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.runtime}>Продолжительность (мин): {show?.runtime}</p>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id + \"/season/\" + season_number}\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id + \"/season/\" + season_number);\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\tСезон: {show?.season_number}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\t\t\t\twithEye={true}\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show?.id, score: score }] }, show_id);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName='episode-page__rating'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className='episode-page__review'>\n\t\t\t\t\t\t\t\t\t\tВаш отзыв\n\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='episode-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} outline />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName='episode-page__review-save-button'\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show?.id, review: review }] }, show_id);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ScoreBlock score={show?.score} text='TMDB score' className='episode-page__info-score' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='episode-page__overview'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3>Описание</h3>\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show?.overview }} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='episode-page__friends' hidden={friendsInfo.length < 1}>\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default EpisodePage;\n","import api from '../http';\nimport { USER_INFO_URL, SEARCH_USERS_URL, USER_CALENDAR_URL, USER_SETTINGS_URL } from '../settings';\n\n/**\n * Запрос к бд, получающий информацию о пользователе\n * @param {string} userID ID пользователя\n */\nexport async function getUserInfo(userID: string | number) {\n\tconst res = await api.get(USER_INFO_URL + userID + '/');\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск пользователей\n * @param {string} query Поисковый запрос\n */\nexport async function searchUsers(query: string) {\n\tconst res = await api.get(SEARCH_USERS_URL, { params: { query: query } });\n\treturn res.data;\n}\n\nexport async function setUserStatus(is_following: boolean, userID: string | number) {\n\tconst res = await api.put(USER_INFO_URL + userID + '/follow/', is_following);\n\treturn res.data;\n}\n\nexport async function getUserLog(\n\tuserID: string | number,\n\tpage: number,\n\tresultsOnPage: number,\n\tquery: string,\n\tfilters: string[],\n) {\n\tconst res = await api.get(USER_INFO_URL + userID + '/log/', { params: { page: page, page_size: resultsOnPage, query: query, filters: filters } });\n\treturn res.data;\n}\n\nexport async function deleteUserLog(userID: string, logType: string, logID: string | number) {\n\tconst res = await api.delete(USER_INFO_URL + userID + '/log/', { data: { type: logType, id: logID } });\n\treturn res;\n}\n\nexport async function getUserFriendsLog(\n\tpage: string | number,\n\tresultsOnPage: number,\n\tquery: string,\n\tfilters: string[],\n) {\n\tconst res = await api.get(USER_INFO_URL + 'friends_log/', { params: { page: page, page_size: resultsOnPage, query: query, filters: filters } });\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий календарь релизов пользователя\n */\nexport async function getUserCalendar() {\n\tconst res = await api.get(USER_CALENDAR_URL);\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий настройки пользователя\n */\nexport async function getUserSettings() {\n\tconst res = await api.get(USER_SETTINGS_URL);\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, изменяющий настройки пользователя\n */\nexport async function patchUserSettings(settings: any) {\n\tconst res = await api.patch(USER_SETTINGS_URL, settings);\n\treturn res.data;\n}\n\nexport async function getRoulette(params: {\n\tcategories: string[],\n\tendedOnly: boolean,\n}) {\n\tconst response = await api.get('users/user/random/', {params: params});\n\treturn response.data;\n}\n","import { makeAutoObservable } from 'mobx';\nimport { toast } from 'react-toastify';\n//import remotedev from 'mobx-remotedev';\nimport * as userRequests from '../services/userRequests';\nimport * as gameRequests from '../services/gameRequests';\nimport * as movieRequests from '../services/movieRequests';\nimport * as showRequests from '../services/showRequests';\nimport {IGame} from './GameStore';\nimport {IMovie} from './MovieStore';\nimport {IShow} from './ShowStore';\nimport {IUser} from './UserStore';\n\ntype IPendingState = 'done' | 'pending' | string;\n\ninterface ISearchResult<Type> {\n\tvalues: Array<Type>,\n\tpage: number,\n\tquery: string,\n\tisEnd?: boolean,\n}\n\ninterface IHints {\n\tgames: Array<any>,\n\tshows: Array<any>,\n\tmovies: Array<any>,\n\tquery: string,\n\tcurrentQuery?: any,\n}\n\nclass Search {\n\tgames: ISearchResult<IGame> = { values: [], page: 1, query: '' };\n\tmovies: ISearchResult<IMovie> = { values: [], page: 1, query: '' };\n\tshows: ISearchResult<IShow> = { values: [], page: 1, query: '' };\n\tusers: ISearchResult<IUser> = { values: [], page: 1, query: '' };\n\thints: IHints = { games: [], shows: [], movies: [], query: '' };\n\tgamesState: IPendingState = 'done';\n\tmoviesState: IPendingState = 'done';\n\tshowsState: IPendingState = 'done';\n\tusersState: IPendingState = 'done';\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\tsearchHints = async (query: string) => {\n\t\tif (this.hints.query !== query) {\n\t\t\tthis.hints.currentQuery = query;\n\t\t\tgameRequests.searchGamesFast(query).then(this.searchGamesHintsSuccess);\n\t\t\tmovieRequests.searchMoviesFast(query).then(this.searchMoviesHintsSuccess);\n\t\t\tshowRequests.searchShowsFast(query).then(this.searchShowsHintsSuccess);\n\t\t}\n\t};\n\tsearchGamesHintsSuccess = (result: Array<any>) => {\n\t\tthis.hints.games = result;\n\t};\n\tsearchMoviesHintsSuccess = (result: Array<any>) => {\n\t\tthis.hints.movies = result;\n\t};\n\tsearchShowsHintsSuccess = (result: Array<any>) => {\n\t\tthis.hints.shows = result;\n\t};\n\n\tsearchGames = async (query: string) => {\n\t\tthis.gamesState = 'pending';\n\t\tgameRequests.searchGames(query, 1, 20).then((res) => this.searchGamesSuccess(res, query), this.searchGamesFailure);\n\t};\n\tsearchGamesSuccess = (result: Array<any>, query: string) => {\n\t\tthis.games = { values: result, page: 1, query, isEnd: result.length < 20 };\n\t\tthis.gamesState = 'done';\n\t};\n\tsearchGamesFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска игр! ${error}`);\n\t\tthis.gamesState = 'error: ' + error;\n\t};\n\tnextGames = async () => {\n\t\tif (this.gamesState === 'pending' || this.games.isEnd) return;\n\t\tthis.gamesState = 'pending';\n\t\tgameRequests.searchGames(this.games.query, this.games.page + 1, 20).then(this.nextGamesSuccess, this.nextGamesFailure);\n\t};\n\tnextGamesSuccess = (result: Array<any>) => {\n\t\tthis.games = { values: [...this.games.values, ...result], page: this.games.page + 1, query: this.games.query, isEnd: result.length < 20 };\n\t\tthis.gamesState = 'done';\n\t};\n\tnextGamesFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска игр! ${error}`);\n\t\tthis.gamesState = 'error: ' + error;\n\t};\n\n\tsearchMovies = async (query: string) => {\n\t\tthis.moviesState = 'pending';\n\t\tmovieRequests.searchMovies(query, 1).then((res) => this.searchMoviesSuccess(res, query), this.searchMoviesFailure);\n\t};\n\tsearchMoviesSuccess = (result: any, query: string) => {\n\t\tthis.movies = { values: result.results, page: 1, query, isEnd: result.page === result.total_pages || result.total_pages === 0 };\n\t\tthis.moviesState = 'done';\n\t};\n\tsearchMoviesFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска фильмов! ${error}`);\n\t\tthis.moviesState = 'error: ' + error;\n\t};\n\tnextMovies = async () => {\n\t\tif (this.moviesState === 'pending' || this.movies.isEnd) return;\n\t\tthis.moviesState = 'pending';\n\t\tmovieRequests.searchMovies(this.movies.query, this.movies.page + 1).then(this.nextMoviesSuccess, this.nextMoviesFailure);\n\t};\n\tnextMoviesSuccess = (result: any) => {\n\t\tthis.movies = { values: [...this.movies.values, ...result?.results], page: this.movies.page + 1, query: this.movies.query, isEnd: result.page === result.total_pages };\n\t\tthis.moviesState = 'done';\n\t};\n\tnextMoviesFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска фильмов! ${error}`);\n\t\tthis.moviesState = 'error: ' + error;\n\t};\n\n\tsearchShows = async (query: string, page?: number) => {\n\t\tthis.showsState = 'pending';\n\t\tshowRequests.searchShows(query, page).then((res) => this.searchShowsSuccess(res, query), this.searchShowsFailure);\n\t};\n\tsearchShowsSuccess = (result: any, query: string) => {\n\t\tthis.shows = { values: result.results, page: 1, query, isEnd: result.page === result.total_pages || result.total_pages === 0 };\n\t\tthis.showsState = 'done';\n\t};\n\tsearchShowsFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска серилов! ${error}`);\n\t\tthis.showsState = 'error: ' + error;\n\t};\n\tnextShows = async () => {\n\t\tif (this.showsState === 'pending' || this.shows.isEnd) return;\n\t\tthis.showsState = 'pending';\n\t\tshowRequests.searchShows(this.shows.query, this.shows.page + 1).then(this.nextShowsSuccess, this.nextShowsFailure);\n\t};\n\tnextShowsSuccess = (result: any) => {\n\t\tthis.shows = { values: [...this.shows.values, ...result.results], page: this.shows.page + 1, query: this.shows.query, isEnd: result.page === result.total_pages };\n\t\tthis.showsState = 'done';\n\t};\n\tnextShowsFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска сериалов! ${error}`);\n\t\tthis.showsState = 'error: ' + error;\n\t};\n\n\tsearchUsers = async (query: string) => {\n\t\tthis.usersState = 'pending';\n\t\tuserRequests.searchUsers(query).then(this.searchUsersSuccess, this.searchUsersFailure);\n\t};\n\tsearchUsersSuccess = (result: any) => {\n\t\tthis.users = { values: result, page: 1, query: '' };\n\t\tthis.usersState = 'done';\n\t};\n\tsearchUsersFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска пользователей! ${error}`);\n\t\tthis.usersState = 'error: ' + error;\n\t};\n}\n\nconst SearchStore = new Search();\n//export default remotedev(SearchStore, { name: 'Search' });\nexport default SearchStore;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport classnames from \"classnames\";\nimport \"./search-card.sass\";\n\nfunction SearchCard({ info, className }) {\n\tlet history = useHistory();\n\n\treturn (\n\t\t<div className={classnames(\"search-card\", className)}>\n\t\t\t<a\n\t\t\t\thref={window.location.origin + info.link}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\thistory.push(info.link);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}\n\t\t\t\ttitle={info.name}>\n\t\t\t\t<div className='search-card__poster' style={{ backgroundImage: info.poster }} />\n\t\t\t\t<div className='search-card__body'>\n\t\t\t\t\t<div className='search-card__name'>\n\t\t\t\t\t\t<h4>{info.name}</h4>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className='search-card__date'>{info.release_date}</p>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t\t<div className='search-card__wrapper'>\n\t\t\t\t<p className='search-card__genres' hidden={!info.genres}>\n\t\t\t\t\tЖанр: {info.genres}\n\t\t\t\t</p>\n\t\t\t\t<p className='search-card__tags' hidden={!info.tags}>\n\t\t\t\t\tТеги: {info.tags}\n\t\t\t\t</p>\n\t\t\t\t<p className='search-card__platfroms' hidden={!info.platforms}>\n\t\t\t\t\tПлатформы: {info.platforms}\n\t\t\t\t</p>\n\t\t\t\t<p className='search-card__overview' hidden={!info.overview}>\n\t\t\t\t\t{info.overview}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default SearchCard;\n","import SearchCard from \"./SearchCard\";\n\nexport default SearchCard;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport SearchCard from \"../SearchCard\";\nimport \"./search-cards.sass\";\n\nfunction SearchCardsBlock({ name, objects, hidden, className }) {\n\treturn (\n\t\t<div hidden={hidden} className={classnames(\"search-cards\", className)}>\n\t\t\t<h3>{name}</h3>\n\t\t\t<div className='search-cards__body'>\n\t\t\t\t<div className='search-cards__cards'>\n\t\t\t\t\t{objects?.map((object) => (\n\t\t\t\t\t\t<SearchCard info={object} key={object.id} className='search-cards__card' />\n\t\t\t\t\t))}\n\t\t\t\t\t{objects?.length < 1 ? `${name} не найдены` : \"\"}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n//onMouseDown={mouseDownHandler}\n\nexport default SearchCardsBlock;\n","import SearchCardsBlock from \"./SearchCardsBlock\";\n\nexport default SearchCardsBlock;\n","import React, { useMemo } from \"react\";\nimport SearchCardsBlock from \"./SearchCardsBlock\";\n\nfunction GameCards({ games, hidden }) {\n\tconst objects = useMemo(\n\t\t() =>\n\t\t\tgames?.reduce((newObjects, game) => {\n\t\t\t\tlet object = {\n\t\t\t\t\tname: game.name,\n\t\t\t\t\tid: game.id,\n\t\t\t\t\tposter: `url(${game.background_image})`,\n\t\t\t\t\tlink: \"/game/\" + game.slug,\n\t\t\t\t\tgenres: \"\",\n\t\t\t\t\ttags: \"\",\n\t\t\t\t\tplatforms: \"\",\n\t\t\t\t};\n\n\t\t\t\tif (game.released) {\n\t\t\t\t\tlet mas = game.released.split(\"-\");\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\n\t\t\t\t\tobject.release_date = newDate;\n\t\t\t\t} else object.release_date = \"\";\n\n\t\t\t\tif (game.genres) {\n\t\t\t\t\tobject.genres = game.genres.reduce((previousValue, genre) => `${previousValue}, ${genre.name}`, \"\").slice(2);\n\t\t\t\t}\n\t\t\t\tif (game.tags) {\n\t\t\t\t\tobject.tags = game.tags\n\t\t\t\t\t\t.reduce((previousValue, tag, index) => {\n\t\t\t\t\t\t\tif (index < 6) return `${previousValue}, ${tag.name}`;\n\t\t\t\t\t\t\treturn previousValue;\n\t\t\t\t\t\t}, \"\")\n\t\t\t\t\t\t.slice(2);\n\t\t\t\t}\n\t\t\t\tif (game.platforms) {\n\t\t\t\t\tobject.platforms = game.platforms.reduce((previousValue, platform) => `${previousValue}, ${platform.platform.name}`, \"\").slice(2);\n\t\t\t\t}\n\n\t\t\t\tif (object) newObjects.push(object);\n\t\t\t\treturn newObjects;\n\t\t\t}, []),\n\t\t[games]\n\t);\n\n\treturn <SearchCardsBlock name='Игры' hidden={hidden} objects={objects} />;\n}\n\nexport default GameCards;\n","import React, { useMemo } from \"react\";\nimport SearchCardsBlock from \"./SearchCardsBlock\";\n\nfunction MovieCards({ movies, hidden }) {\n\tconst objects = useMemo(\n\t\t() =>\n\t\t\tmovies?.reduce((newObjects, movie) => {\n\t\t\t\tlet object = {\n\t\t\t\t\tname: movie.title,\n\t\t\t\t\tid: movie.id,\n\t\t\t\t\tposter: `url(${movie.backdrop_path})`,\n\t\t\t\t\tlink: \"/movie/\" + movie.id,\n\t\t\t\t\toverview: movie.overview,\n\t\t\t\t};\n\n\t\t\t\tif (movie.release_date) {\n\t\t\t\t\tlet mas = movie.release_date.split(\"-\");\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\n\t\t\t\t\tobject.release_date = newDate;\n\t\t\t\t} else object.release_date = \"\";\n\n\t\t\t\tif (object) newObjects.push(object);\n\t\t\t\treturn newObjects;\n\t\t\t}, []),\n\t\t[movies]\n\t);\n\n\treturn <SearchCardsBlock name='Фильмы' hidden={hidden} objects={objects} />;\n}\n\nexport default MovieCards;\n","import React, { useMemo } from \"react\";\nimport SearchCardsBlock from \"./SearchCardsBlock\";\n\nfunction ShowCards({ shows, hidden }) {\n\tconst objects = useMemo(\n\t\t() =>\n\t\t\tshows?.reduce((newObjects, show) => {\n\t\t\t\tlet object = {\n\t\t\t\t\tname: show.name,\n\t\t\t\t\tid: show.id,\n\t\t\t\t\tposter: `url(${show.backdrop_path})`,\n\t\t\t\t\tlink: \"/show/\" + show.id,\n\t\t\t\t\toverview: show.overview,\n\t\t\t\t};\n\n\t\t\t\tif (show.first_air_date) {\n\t\t\t\t\tlet mas = show.first_air_date.split(\"-\");\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\n\t\t\t\t\tobject.release_date = newDate;\n\t\t\t\t} else object.release_date = \"\";\n\n\t\t\t\tif (object) newObjects.push(object);\n\t\t\t\treturn newObjects;\n\t\t\t}, []),\n\t\t[shows]\n\t);\n\n\treturn <SearchCardsBlock name='Сериалы' hidden={hidden} objects={objects} />;\n}\n\nexport default ShowCards;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./card-user.sass\";\n\nfunction CardUser({ user, className }) {\n\tlet history = useHistory();\n\n\treturn (\n\t\t<a\n\t\t\thref={window.location.origin + \"/user/\" + user.id}\n\t\t\tonClick={(e) => {\n\t\t\t\thistory.push(\"/user/\" + user.id);\n\t\t\t\te.preventDefault();\n\t\t\t}}\n\t\t\tclassName={classnames(\"card-user\", className)}>\n\t\t\t<div className='card-user__image' style={{ backgroundImage: `url(${\"https://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }} />\n\t\t\t<div className='card-user__text'>{user.username}</div>\n\t\t</a>\n\t);\n}\n\nexport default CardUser;\n","import CardUser from \"./CardUser\";\n\nexport default CardUser;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport \"./friend-block.sass\";\n\nimport CardUser from '../CardUser';\n\nfunction FriendBlock({ users, className }) {\n\treturn (\n\t\t<div className={classnames(\"friends-block\", className)}>\n\t\t\t{users.map((user) => (\n\t\t\t\t<CardUser user={user} key={user.id} className='friends-block__friend' />\n\t\t\t))}\n\t\t\t{users.length < 1 ? \"Пользователи не найдены\" : \"\"}\n\t\t</div>\n\t);\n}\n\nexport default FriendBlock;\n","import FriendBlock from \"./FriendBlock\";\n\nexport default FriendBlock;\n","import React from \"react\";\nimport FriendBlock from '../../../shared/FriendBlock';\n\nfunction UserCards({ users, hidden }) {\n\treturn (\n\t\t<div hidden={hidden}>\n\t\t\t<h3>Пользователи</h3>\n\t\t\t<FriendBlock users={users} />\n\t\t</div>\n\t);\n}\n\nexport default UserCards;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport \"./categories-tab.sass\";\n\ninterface ICategoriesTabProps {\n\tcategories: Array<string>,\n\tonChangeCategory: (category: string) => void,\n\tactiveCategory: string,\n\thidden?: boolean,\n\tchildren?: any,\n\tclassName?: string,\n}\n\nfunction CategoriesTab({ categories, onChangeCategory, activeCategory, hidden, children, className }: ICategoriesTabProps) {\n\treturn (\n\t\t<div hidden={hidden} className={classnames(\"categories-tabs\", className)}>\n\t\t\t<div className='categories-tabs__body'>\n\t\t\t\t{categories.map((category, counter) => (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={classnames(\"categories-tabs__tab\", activeCategory === category ? \"categories-tabs__tab_active\" : \"\")}\n\t\t\t\t\t\tkey={counter}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tonChangeCategory(category);\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t{category}\n\t\t\t\t\t</button>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className='categories-tabs__content'>{children}</div>\n\t\t</div>\n\t);\n}\n\nexport default CategoriesTab;\n","import CategoriesTab from \"./CategoriesTab\";\n\nexport default CategoriesTab;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { observer } from 'mobx-react';\nimport LoadingOverlay from 'react-loading-overlay-ts';\nimport { FaSearch } from 'react-icons/fa';\nimport SearchStore from '../../store/SearchStore';\nimport GameCards from './views/GameCards';\nimport MovieCards from './views/MovieCards';\nimport ShowCards from './views/ShowCards';\nimport UserCards from './views/UserCards';\nimport CategoriesTab from '../../shared/CategoriesTab';\n\nimport './search-page.sass';\nimport useScroll from '../../hooks/useScroll';\n\n/**\n * Основная страница приложения\n */\nconst SearchPage = observer(() => {\n\tconst store = SearchStore;\n\n\tlet history = useHistory();\n\tlet { query }: any = useParams();\n\tconst [queryText, setQueryText] = useState('');\n\n\tconst parentRef = useRef() as React.MutableRefObject<HTMLInputElement>;\n\tconst childRef = useRef() as React.MutableRefObject<HTMLInputElement>;\n\t// eslint-disable-next-line\n\tconst intersected = useScroll(parentRef, childRef, () => fetchItems());\n\n\tconst [activeCategory, setActiveCategory] = useState('Игры');\n\n\tfunction fetchItems() {\n\t\tif (activeCategory === 'Игры') store.nextGames();\n\t\tif (activeCategory === 'Фильмы') store.nextMovies();\n\t\tif (activeCategory === 'Сериалы') store.nextShows();\n\t}\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (activeCategory === 'Игры') store.searchGames(query);\n\t\t\tif (activeCategory === 'Фильмы') store.searchMovies(query);\n\t\t\tif (activeCategory === 'Сериалы') store.searchShows(query);\n\t\t\tif (activeCategory === 'Пользователи') store.searchUsers(query);\n\t\t\tsetQueryText(query);\n\t\t\tdocument.title = 'Поиск';\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[query, activeCategory]\n\t);\n\n\n\treturn (\n\t\t<div className='search-page'>\n\t\t\t<div className='search-page__body'>\n\t\t\t\t<form\n\t\t\t\t\tclassName='search-page__form'\n\t\t\t\t\tonSubmit={(event) => {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\thistory.push('/search/' + queryText);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}}>\n\t\t\t\t\t<h1>Поиск</h1>\n\t\t\t\t\t<FaSearch className='search-page__name-icon' />\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName='search-page__name-input'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tplaceholder='Найти'\n\t\t\t\t\t\tvalue={queryText}\n\t\t\t\t\t\tonChange={(e) => setQueryText(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t\t<CategoriesTab\n\t\t\t\t\tcategories={['Игры', 'Фильмы', 'Сериалы', 'Пользователи']}\n\t\t\t\t\tactiveCategory={activeCategory}\n\t\t\t\t\tonChangeCategory={(category: string) => {\n\t\t\t\t\t\tsetActiveCategory(category);\n\t\t\t\t\t}}>\n\t\t\t\t\t<div className='search-page__results' ref={parentRef}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t activeCategory === 'Игры' && (\n\t\t\t\t\t\t\t\t<LoadingOverlay active={store.gamesState === 'pending'} spinner text='Ищем игры...'>\n\t\t\t\t\t\t\t\t\t<GameCards games={store.games.values} hidden={activeCategory !== 'Игры'} />\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactiveCategory === 'Фильмы' && (\n\t\t\t\t\t\t\t\t<LoadingOverlay active={store.moviesState === 'pending'} spinner text='Ищем фильмы...'>\n\t\t\t\t\t\t\t\t\t<MovieCards movies={store.movies.values} hidden={activeCategory !== 'Фильмы'} />\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactiveCategory === 'Сериалы' && (\n\t\t\t\t\t\t\t\t<LoadingOverlay active={store.showsState === 'pending'} spinner text='Ищем сериалы...'>\n\t\t\t\t\t\t\t\t\t<ShowCards shows={store.shows.values} hidden={activeCategory !== 'Сериалы'} />\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactiveCategory === 'Пользователи' && (\n\t\t\t\t\t\t\t\t<LoadingOverlay active={store.usersState === 'pending'} spinner text='Ищем пользователей...'>\n\t\t\t\t\t\t\t\t\t<UserCards users={store.users.values} hidden={activeCategory !== 'Пользователи'} />\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t<div ref={childRef} style={{ height: 20 }} />\n\t\t\t\t\t</div>\n\t\t\t\t</CategoriesTab>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default SearchPage;\n","import SearchPage from \"./SearchPage\";\n\nexport default SearchPage;\n","import { useEffect, useRef } from \"react\";\n\nexport default function useScroll(parentRef, childRef, callback) {\n\tconst observer = useRef();\n\n\tuseEffect(() => {\n\t\tconst options = {\n\t\t\troot: parentRef.current,\n\t\t\trootMargin: \"0px\",\n\t\t\tthreshold: 0,\n\t\t};\n\t\tobserver.current = new IntersectionObserver(([target]) => {\n\t\t\tif (target.isIntersecting) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}, options);\n\n\t\tobserver.current.observe(childRef.current);\n\n\t\treturn function () {\n\t\t\t// eslint-disable-next-line\n\t\t\tobserver.current.unobserve(childRef.current);\n\t\t};\n\t\t// eslint-disable-next-line\n\t}, [callback]);\n}\n","import ConfirmPage from \"./ConfirmPage\";\n\nexport default ConfirmPage;\n","import React, { useEffect } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { useHistory } from \"react-router-dom\";\nimport AuthStore from '../../store/AuthStore';\nimport \"./confirm-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst ConfirmPage = observer((props) => {\n\tconst { confirmEmail, confirmEmailState } = AuthStore;\n\tlet history = useHistory();\n\n\tlet search = window.location.search;\n\tlet params = new URLSearchParams(search);\n\tlet uid64 = params.get(\"uid64\");\n\tlet token = params.get(\"token\");\n\n\tuseEffect(\n\t\t() => {\n\t\t\tconfirmEmail(uid64, token);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (confirmEmailState.startsWith(\"error\")) history.push(`/404page`);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[confirmEmailState]\n\t);\n\n\treturn (\n\t\t<div className='confirm-page'>\n\t\t\t<h2 hidden={confirmEmailState !== \"done\"} className='confirm-page__success'>\n\t\t\t\tВаша почта подтверждена!\n\t\t\t</h2>\n\t\t</div>\n\t);\n});\n\nexport default ConfirmPage;\n","import ConfirmPasswordPage from \"./ConfirmPasswordPage\";\n\nexport default ConfirmPasswordPage;\n","import React, {useState} from 'react';\nimport { observer } from 'mobx-react';\nimport AuthStore from '../../store/AuthStore';\nimport './confirm-password-page.sass';\n\n/**\n * Основная страница приложения\n */\nconst ConfirmPasswordPage = observer((props) => {\n\tconst { confirmPassword, confirmPasswordState } = AuthStore;\n\n\tconst [password, setPassword] = useState('');\n\tconst [passwordConfirm, setPasswordConfirm] = useState('');\n\n\tlet search = window.location.search;\n\tlet params = new URLSearchParams(search);\n\tlet token = params.get(\"token\");\n\n\treturn (\n\t\t<div className='confirm-password-page'>\n\t\t\t<div className='confirm-password-page__body'>\n\t\t\t\t<form\n\t\t\t\t\tonSubmit={(event) => {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tconfirmPassword(token, password.value);\n\t\t\t\t\t}}>\n\t\t\t\t\t<h4 className='confirm-password-page__header'>Обновить пароль</h4>\n\t\t\t\t\t<p className='note note-danger confirm-password-page__fail' hidden={!confirmPasswordState.startsWith(\"error:\")}>\n\t\t\t\t\t\t{confirmPasswordState}\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className='note note-success confirm-password-page__success' hidden={confirmPasswordState !== \"done\"}>\n\t\t\t\t\t\tПароль обновлен!\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<label htmlFor='passwordInput'>\n\t\t\t\t\t\tНовый пароль\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tid='passwordInput'\n\t\t\t\t\t\tclassName='confirm-password-page__input'\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\tonChange={setPassword}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor='passwordConfirmInput'>\n\t\t\t\t\t\tПодтверждение пароля\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tid='passwordConfirmInput'\n\t\t\t\t\t\tclassName='confirm-password-page__input'\n\t\t\t\t\t\tvalue={passwordConfirm}\n\t\t\t\t\t\tonChange={setPasswordConfirm}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tclassName='confirm-password-page__button'\n\t\t\t\t\t\tdisabled={(password.value !== passwordConfirm.value) | (password.value.length < 1)}\n\t\t\t\t\t>\n\t\t\t\t\t\tОбновить\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default ConfirmPasswordPage;\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as userRequests from '../services/userRequests';\nimport AuthStore from './AuthStore';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface IUser {\n\t[key: string]: any,\n}\n\nclass User {\n\tuser: IUser = {};\n\tuserLogs: any = {};\n\tuserFriendsLogs: any = { log: [] };\n\tuserState: IPendingState = 'done';\n\tuserLogsState: IPendingState = 'done';\n\tuserFriendsLogsState: IPendingState = 'done';\n\tsetUserStatusState: IPendingState = 'done';\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\tget isCurrentUser() {\n\t\treturn AuthStore.loggedIn && +this.user.id === +(AuthStore.user.id || 0);\n\t}\n\n\trequestUser = async (username: string) => {\n\t\tthis.userState = 'pending';\n\t\tuserRequests.getUserInfo(username).then(this.requestUserSuccess, this.requestUserFailure);\n\t};\n\trequestUserSuccess = (result: IUser) => {\n\t\tthis.user = result;\n\t\tthis.userState = 'done';\n\t};\n\trequestUserFailure = (error: string) => {\n\t\tthis.userState = 'error: ' + error;\n\t};\n\n\trequestUserLogs = async (userID: number, page: number, resultsOnPage: number, query: string, filters: any) => {\n\t\tthis.userLogsState = 'pending';\n\t\tuserRequests.getUserLog(userID, page, resultsOnPage, query, filters).then(this.requestLogsSuccess, this.requestLogsFailure);\n\t};\n\trequestLogsSuccess = (result: any) => {\n\t\tthis.userLogs = result;\n\t\tthis.userLogsState = 'done';\n\t};\n\trequestLogsFailure = (error: any) => {\n\t\tif (error.response.status === 403) this.userLogsState = 'forbidden';\n\t\telse this.userLogsState = 'error: ' + error;\n\t};\n\tdeleteUserLog = async (logType: any, logID: any) => {\n\t\tthis.userLogsState = 'pending';\n\t\tuserRequests.deleteUserLog(this.user.id, logType, logID).then(() => this.deleteUserLogSuccess(logType, logID), this.deleteUserLogFailure);\n\t};\n\tdeleteUserLogSuccess = (logType: any, logID: any) => {\n\t\tlet newLogs = this.userLogs.log.filter((log: any) => {\n\t\t\treturn !(log.id === logID && log.type === logType);\n\t\t});\n\t\tthis.userLogs = { ...this.userLogs, log: newLogs };\n\t\tthis.userLogsState = 'done';\n\t};\n\tdeleteUserLogFailure = (error: any) => {\n\t\tif (error.response.status === 403) this.userLogsState = 'forbidden';\n\t\telse this.userLogsState = 'error: ' + error;\n\t};\n\n\trequestUserFriendsLogs = async (userID: number, page: number, resultsOnPage: number, query: string, filters: any) => {\n\t\tthis.userFriendsLogsState = 'pending';\n\t\tuserRequests.getUserFriendsLog(page, resultsOnPage, query, filters).then(this.requestFriendsLogsSuccess, this.requestFriendsLogsFailure);\n\t};\n\trequestFriendsLogsSuccess = (result: any) => {\n\t\tthis.userFriendsLogs = result;\n\t\tthis.userFriendsLogsState = 'done';\n\t};\n\trequestFriendsLogsFailure = (error: string) => {\n\t\tthis.userFriendsLogsState = 'error: ' + error;\n\t};\n\n\tsetUserStatus = async (is_following: boolean, userID: number | string) => {\n\t\tthis.setUserStatusState = 'pending';\n\t\tuserRequests.setUserStatus(is_following, userID).then(this.setUserStatusSuccess, this.setUserStatusFailure);\n\t};\n\tsetUserStatusSuccess = (result: any) => {\n\t\tthis.user.is_followed = result.is_following;\n\t\tthis.setUserStatusState = 'done';\n\t};\n\tsetUserStatusFailure = (error: string) => {\n\t\tthis.setUserStatusState = 'error: ' + error;\n\t};\n}\n\nconst UserStore = new User();\n//export default remotedev(UserStore, { name: 'User' });\nexport default UserStore;\n","import React from \"react\";\nimport Select from \"react-select\";\nimport \"./select-multi.sass\";\n\nfunction SelectMulti({ placeholder, options, onChange, hidden }) {\n\tif (hidden) return \"\";\n\telse return <Select className='react-select-container' classNamePrefix={\"multiselect\"} isMulti={true} placeholder={placeholder} onChange={onChange} options={options} hidden={hidden} />;\n}\n\nexport default SelectMulti;\n","import SelectMulti from \"./SelectMulti\";\n\nexport default SelectMulti;\n","import React from \"react\";\nimport { FaStar, FaClock } from \"react-icons/fa\";\nimport \"./item-row.sass\";\n\nfunction ItemRow({ data, fields }) {\n\treturn (\n\t\t<div className='item-row'>\n\t\t\t<div className='item-row__review' style={{ display: data.review ? \"block\" : \"none\" }}>\n\t\t\t\tОтзыв\n\t\t\t\t<div className='item-row__review-body'>{data.review}</div>\n\t\t\t</div>\n\t\t\t<div className='item-row__body'>\n\t\t\t\t<div className='item-row__body-left'>\n\t\t\t\t\t<div className='item-row__poster' style={{ backgroundImage: `url(${data.poster})` }} />\n\t\t\t\t\t<div className='item-row__name'>\n\t\t\t\t\t\t<a href={data.link}> {data.name} </a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='item-row__body-right'>\n\t\t\t\t\t<div className='item-row__status-block'>\n\t\t\t\t\t\tстатус\n\t\t\t\t\t\t<div className='item-row__status'>{data.status}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='item-row__score'>\n\t\t\t\t\t\t<div>{data.score}/10</div>\n\t\t\t\t\t\t<FaStar className='item-row__score-icon' />\n\t\t\t\t\t</div>\n\t\t\t\t\t{fields.find((field) => field.key === \"spent_time\") === undefined ? (\n\t\t\t\t\t\t\"\"\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className='item-row__time'>\n\t\t\t\t\t\t\t<div>{data.spent_time}</div>\n\t\t\t\t\t\t\t<FaClock className='item-row__time-icon' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default ItemRow;\n","import { useState, useEffect } from \"react\";\n\nfunction getWindowDimensions() {\n\tconst { innerWidth: width, innerHeight: height } = window;\n\treturn {\n\t\twidth,\n\t\theight,\n\t};\n}\n\nexport default function useWindowDimensions() {\n\tconst [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n\n\tuseEffect(() => {\n\t\tfunction handleResize() {\n\t\t\tsetWindowDimensions(getWindowDimensions());\n\t\t}\n\n\t\twindow.addEventListener(\"resize\", handleResize);\n\t\treturn () => window.removeEventListener(\"resize\", handleResize);\n\t}, []);\n\n\treturn windowDimensions;\n}","import React, { useEffect, useState } from \"react\";\nimport { CSVLink } from \"react-csv\";\nimport { FaAngleDown, FaAngleUp, FaStar, FaClock, FaArrowsAltV } from \"react-icons/fa\";\nimport Pagination from \"rc-pagination\";\n\nimport InputNumber from '../../../../../shared/InputNumber';\nimport SelectMulti from '../../../../../shared/SelectMulti';\nimport ItemRow from \"../ItemRow/ItemRow\";\nimport useWindowDimensions from '../../../../../hooks/useWindowDimensions';\n\nimport \"./item-block.sass\";\n\nfunction ItemBlock({ items, statuses, fields, name }) {\n\tconst [query, setQuery] = useState(\"\");\n\tconst [pageSize, setPageSize] = useState(10);\n\tconst [page, setPage] = useState(1);\n\tconst [filteredItems, setFilteredItems] = useState([]);\n\tconst [sort, setSort] = useState({});\n\tconst [statusFilters, setStatusFilters] = useState([]);\n\tconst [collapse, setCollapse] = useState(true);\n\tconst { width } = useWindowDimensions();\n\n\tconst toggleCollapse = () => {\n\t\tsetCollapse(!collapse);\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetFilteredItems(\n\t\t\t\titems\n\t\t\t\t\t?.filter((item) => item.name.toLowerCase().includes(query.toLowerCase()) && (statusFilters.includes(item.status) || statusFilters.length < 1))\n\t\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t\tlet field1, field2;\n\t\t\t\t\t\tif (sort.type === \"number\") {\n\t\t\t\t\t\t\tfield1 = parseFloat(a[sort.field]);\n\t\t\t\t\t\t\tfield2 = parseFloat(b[sort.field]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfield1 = a[sort.field];\n\t\t\t\t\t\t\tfield2 = b[sort.field];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (field1 > field2) return sort.isAsc ? 1 : -1;\n\t\t\t\t\t\tif (field1 < field2) return sort.isAsc ? -1 : 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[items, query, statusFilters, sort]\n\t);\n\n\treturn (\n\t\t<div className='item-block'>\n\t\t\t<div className='item-block__header'>\n\t\t\t\t<div className='item-block__header-left'>\n\t\t\t\t\t<div className='item-block__header-first-row'>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tplaceholder='Поиск'\n\t\t\t\t\t\t\taria-label='Поиск'\n\t\t\t\t\t\t\tclassName='item-block__search-input'\n\t\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\tsetQuery(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button className='item-block__mobile-expand' onClick={toggleCollapse}>\n\t\t\t\t\t\t\t{collapse ? <FaAngleDown /> : <FaAngleUp />}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='item-block__sort-buttons' hidden={collapse && width <= 515}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='item-block__sort-button'\n\t\t\t\t\t\t\thidden={fields.find((field) => field.key === \"score\") === undefined}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetSort({ field: \"score\", type: \"number\", isAsc: !sort.isAsc });\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<FaStar /> <FaArrowsAltV />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='item-block__sort-button'\n\t\t\t\t\t\t\thidden={fields.find((field) => field.key === \"spent_time\") === undefined}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetSort({ field: \"spent_time\", type: \"number\", isAsc: !sort.isAsc });\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<FaClock /> <FaArrowsAltV />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<SelectMulti\n\t\t\t\t\t\thidden={collapse && width <= 515}\n\t\t\t\t\t\tplaceholder={\"Cтатус\"}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetStatusFilters(e.map((obj) => obj.value));\n\t\t\t\t\t\t}}\n\t\t\t\t\t\toptions={statuses}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='item-block__header-right' hidden={collapse && width <= 515}>\n\t\t\t\t\t<label className='item-block__label'>Записей на странице</label>\n\t\t\t\t\t<InputNumber value={pageSize} max={100} min={1} onChange={(value) => setPageSize(value)} dataList={[5, 10, 25, 50, 100]} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className='item-block__rows'>\n\t\t\t\t{filteredItems?.slice((page - 1) * pageSize, page * pageSize).map((item, counter) => (\n\t\t\t\t\t<ItemRow data={item} fields={fields} key={counter} />\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className='item-block__footer'>\n\t\t\t\t<Pagination\n\t\t\t\t\ttotal={filteredItems?.length}\n\t\t\t\t\tpageSize={pageSize}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetPage(e);\n\t\t\t\t\t}}\n\t\t\t\t\tcurrent={page}\n\t\t\t\t/>\n\t\t\t\t<CSVLink data={items ? items : []} headers={fields} separator={\";\"} filename={`interests ${name}.csv`}>\n\t\t\t\t\tСкачать CSV\n\t\t\t\t</CSVLink>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default ItemBlock;\n","import ItemBlock from \"./ItemBlock\";\n\nexport default ItemBlock;\n","import React from \"react\";\nimport ItemBlock from \"./ItemBlock\";\n\nfunction GameBlock({ games }) {\n\treturn (\n\t\t<ItemBlock\n\t\t\titems={games?.map((game) => {\n\t\t\t\treturn {\n\t\t\t\t\tlink: window.location.origin + \"/game/\" + game.game.rawg_slug,\n\t\t\t\t\tname: game.game.rawg_name,\n\t\t\t\t\tstatus: game.status,\n\t\t\t\t\tscore: game.score,\n\t\t\t\t\treview: game.review,\n\t\t\t\t\tspent_time: parseFloat(game.spent_time),\n\t\t\t\t\tposter: game.game.rawg_backdrop_path,\n\t\t\t\t};\n\t\t\t})}\n\t\t\tstatuses={[\n\t\t\t\t{ value: \"Буду играть\", label: \"Буду играть\" },\n\t\t\t\t{ value: \"Играю\", label: \"Играю\" },\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\n\t\t\t\t{ value: \"Прошел\", label: \"Прошел\" },\n\t\t\t]}\n\t\t\tfields={[\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\n\t\t\t\t{ label: \"Название\", key: \"name\" },\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\n\t\t\t\t{ label: \"Время прохождения\", key: \"spent_time\" },\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\n\t\t\t]}\n\t\t\tname={\"Игры\"}\n\t\t/>\n\t);\n}\n\nexport default GameBlock;\n","import React from \"react\";\nimport ItemBlock from \"./ItemBlock\";\n\nfunction MovieBlock({ movies }) {\n\treturn (\n\t\t<ItemBlock\n\t\t\titems={movies?.map((movie) => {\n\t\t\t\treturn {\n\t\t\t\t\tlink: window.location.origin + \"/movie/\" + movie.movie.tmdb_id,\n\t\t\t\t\tname: movie.movie.tmdb_name,\n\t\t\t\t\tstatus: movie.status,\n\t\t\t\t\tscore: movie.score,\n\t\t\t\t\treview: movie.review,\n\t\t\t\t\tposter: movie.movie.tmdb_backdrop_path,\n\t\t\t\t};\n\t\t\t})}\n\t\t\tstatuses={[\n\t\t\t\t{ value: \"Буду смотреть\", label: \"Буду смотреть\" },\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\n\t\t\t\t{ value: \"Посмотрел\", label: \"Посмотрел\" },\n\t\t\t]}\n\t\t\tfields={[\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\n\t\t\t\t{ label: \"Название\", key: \"name\" },\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\n\t\t\t]}\n\t\t\tname={\"Фильмы\"}\n\t\t/>\n\t);\n}\n\nexport default MovieBlock;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport classnames from \"classnames\";\n\nimport Rating from '../../../../../shared/Rating';\n\nimport \"./log-row.sass\";\n\nfunction LogRow({ log, showUsername, onDeleteLog, className }) {\n\tlet history = useHistory();\n\n\tfunction translateActionType(action, actionResult, logType) {\n\t\tswitch (action) {\n\t\t\tcase \"score\":\n\t\t\t\tswitch (actionResult) {\n\t\t\t\t\tcase \"0\":\n\t\t\t\t\t\tif (logType !== 'episode') {\n\t\t\t\t\t\t\treturn 'оценил(а)';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn \"посмотрел(а)\";\n\t\t\t\t\tcase \"-1\":\n\t\t\t\t\t\treturn \"не смотрела(а)\";\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn \"оценил(а)\";\n\t\t\t\t}\n\t\t\tcase \"status\":\n\t\t\t\treturn \"изменил(а) статус\";\n\t\t\tcase \"review\":\n\t\t\t\treturn \"оставил(а) отзыв на\";\n\t\t\tcase \"spent_time\":\n\t\t\t\treturn \"изменил(а) время прохождения\";\n\t\t\tcase \"episodes\":\n\t\t\t\tif (actionResult > 0) return \"посмотрел(а) \" + actionResult + \" серий\";\n\t\t\t\telse return \"не смотрел(а) \" + actionResult * -1 + \" серий\";\n\t\t\tcase \"is_following\":\n\t\t\t\tif (actionResult === \"True\") return \"подписан(а) на\";\n\t\t\t\telse return \"отписан(а) от\";\n\t\t\tdefault:\n\t\t\t\treturn action;\n\t\t}\n\t}\n\n\tfunction translateType(type, actionType) {\n\t\tswitch (type) {\n\t\t\tcase \"game\":\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"игру\";\n\t\t\t\telse return \"игры\";\n\t\t\tcase \"movie\":\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"фильм\";\n\t\t\t\telse return \"фильма\";\n\t\t\tcase \"show\":\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"сериал\";\n\t\t\t\telse return \"сериала\";\n\t\t\tcase \"season\":\n\t\t\t\treturn \"\";\n\t\t\tcase \"episode\":\n\t\t\t\treturn \"\";\n\t\t\tcase \"user\":\n\t\t\t\treturn \"пользователя\";\n\t\t\tdefault:\n\t\t\t\treturn type;\n\t\t}\n\t}\n\n\tfunction nameToLink(name, type, id) {\n\t\tswitch (type) {\n\t\t\tcase \"game\":\n\t\t\t\treturn (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + id}\n\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thistory.push(\"/game/\" + id);\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</a>\n\t\t\t\t);\n\t\t\tcase \"movie\":\n\t\t\t\treturn (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + id}\n\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + id);\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</a>\n\t\t\t\t);\n\t\t\tcase \"show\":\n\t\t\t\treturn (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id}\n\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thistory.push(\"/show/\" + id);\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</a>\n\t\t\t\t);\n\t\t\tcase \"season\":\n\t\t\t\treturn (\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number}\n\t\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{name.name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\n\t\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{name.parent_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\tcase \"episode\":\n\t\t\t\treturn (\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number}\n\t\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t[s{id.season_number}e{id.episode_number}] серию\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\n\t\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{name.parent_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\tcase \"user\":\n\t\t\t\treturn (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={window.location.origin + \"/user/\" + id}\n\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thistory.push(\"/user/\" + id);\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</a>\n\t\t\t\t);\n\t\t\tdefault:\n\t\t\t\treturn name;\n\t\t}\n\t}\n\n\tfunction userToLink(username, userID) {\n\t\treturn (\n\t\t\t<a\n\t\t\t\thref={window.location.origin + \"/user/\" + userID}\n\t\t\t\tclassName='log-row__link'\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\thistory.push(\"/user/\" + userID);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}>\n\t\t\t\t{username}\n\t\t\t</a>\n\t\t);\n\t}\n\n\tfunction actionResultToStr(actionType, actionResult, target) {\n\t\tswitch (actionType) {\n\t\t\tcase \"score\":\n\t\t\t\tif ((target !== \"episode\") | (actionResult > 0)) return <Rating initialRating={actionResult} readonly={true} />;\n\t\t\t\telse return \"\";\n\t\t\tcase \"status\":\n\t\t\t\treturn '\"' + actionResult + '\"';\n\t\t\tcase \"review\":\n\t\t\t\treturn '\"' + actionResult + '\"';\n\t\t\tcase \"spent_time\":\n\t\t\t\treturn actionResult + \" \" + intToHours(actionResult);\n\t\t\tcase \"episodes\":\n\t\t\t\treturn \"\";\n\t\t\tcase \"is_following\":\n\t\t\t\treturn \"\";\n\t\t\tdefault:\n\t\t\t\treturn actionResult;\n\t\t}\n\t}\n\n\tfunction parseDate(date) {\n\t\tlet newDate = new Date(date);\n\t\tlet options = { hour: \"numeric\", minute: \"numeric\" };\n\t\treturn newDate.toLocaleTimeString(\"ru-RU\", options);\n\t}\n\n\treturn (\n\t\t<div className={classnames(\"log-row\", className)}>\n\t\t\t{parseDate(log.created)}&thinsp;\n\t\t\t{showUsername ? userToLink(log.user, log.user_id) : \"\"}&thinsp;\n\t\t\t{translateActionType(log.action_type, log.action_result, log.type)}&thinsp;\n\t\t\t{translateType(log.type, log.action_type)}&thinsp;\n\t\t\t{nameToLink(log.target, log.type, log.target_id)}\n\t\t\t{(log.type === \"user\") | (log.action_type === \"episodes\") | (log.action_result === \"0\") | (log.action_result === \"-1\") ? \"\" : \":\"}&thinsp;\n\t\t\t{actionResultToStr(log.action_type, log.action_result, log.type)}\n\t\t\t<button\n\t\t\t\tclassName={classnames(\"log-row__delete-button\", showUsername ? \"log-row__delete-button_hidden\" : \"\")}\n\t\t\t\tonClick={(event) => {\n\t\t\t\t\tonDeleteLog(log.type, log.id);\n\t\t\t\t}}>\n\t\t\t\tx\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nfunction intToHours(number) {\n\tif (11 <= number && number <= 14) return \"часов\";\n\telse if (number % 10 === 1) return \"час\";\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\n\telse return \"часов\";\n}\n\nexport default LogRow;\n","import React, { useEffect, useState } from \"react\";\nimport LogRow from \"../LogRow/LogRow\";\nimport \"./logs-by-day.sass\";\n\nfunction UserLogs({ logs, showUsername, currentUser, onDeleteLog }) {\n\tconst [logsByDay, setLogsByDay] = useState([]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetLogsByDay(groupLogsByDay(logs.log));\n\t\t},\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[logs]\n\t);\n\n\tfunction groupLogsByDay(logs) {\n\t\tlet newLogs = [];\n\n\t\tfor (const i in logs) {\n\t\t\tlet date = new Date(logs[i].created);\n\n\t\t\tif (newLogs.length === 0) {\n\t\t\t\tnewLogs.push({\n\t\t\t\t\tdate: date,\n\t\t\t\t\tlogs: [logs[i]],\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tdate.getDate() === newLogs[newLogs.length - 1].date.getDate()\n\t\t\t\t\t&& date.getMonth() === newLogs[newLogs.length - 1].date.getMonth()\n\t\t\t\t\t&& date.getFullYear() === newLogs[newLogs.length - 1].date.getFullYear()\n\t\t\t\t) {\n\t\t\t\t\tnewLogs[newLogs.length - 1].logs.push(logs[i]);\n\t\t\t\t} else {\n\t\t\t\t\tnewLogs.push({\n\t\t\t\t\t\tdate: date,\n\t\t\t\t\t\tlogs: [logs[i]],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\treturn newLogs;\n\t}\n\n\treturn (\n\t\t<div className='logs-by-day'>\n\t\t\t{logsByDay.map((dayLog, counter) => (\n\t\t\t\t<div key={counter} className='logs-by-day__day'>\n\t\t\t\t\t<div className='logs-by-day__date'>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdayLog.date.toLocaleDateString(\"ru-RU\", {\n\t\t\t\t\t\t\t\tyear: dayLog.date.getFullYear() === new Date().getFullYear()\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: \"numeric\",\n\t\t\t\t\t\t\t\tmonth: \"numeric\",\n\t\t\t\t\t\t\t\tday: \"numeric\"\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='logs-by-day__logs'>\n\t\t\t\t\t\t{dayLog.logs.map((log) => (\n\t\t\t\t\t\t\t<LogRow\n\t\t\t\t\t\t\t\tlog={log}\n\t\t\t\t\t\t\t\tshowUsername={showUsername}\n\t\t\t\t\t\t\t\tkey={log.id + log.created}\n\t\t\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t\t\t\tonDeleteLog={onDeleteLog}\n\t\t\t\t\t\t\t\tclassName='logs-by-day__log'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default UserLogs;\n","import React, { useEffect, useState } from \"react\";\nimport Pagination from \"rc-pagination\";\nimport { FaAngleDown, FaAngleUp } from \"react-icons/fa\";\n\nimport SelectMulti from '../../../../shared/SelectMulti';\nimport InputNumber from '../../../../shared/InputNumber';\nimport LogsByDay from \"./LogsByDay/LogsByDay\";\nimport useWindowDimensions from '../../../../hooks/useWindowDimensions';\n\nimport \"./user-logs.sass\";\n\nfunction UserLogs({ userID, logs, showUsername, requestUserLogs, currentUser, onDeleteLog, logsType }) {\n\tconst [currentPage, setCurrentPage] = useState(1);\n\tconst [pageSize, setPageSize] = useState(15);\n\tconst [query, setQuery] = useState(\"\");\n\tconst [filters, setFilters] = useState([]);\n\tconst [collapse, setCollapse] = useState(true);\n\tconst { width } = useWindowDimensions();\n\n\tconst toggleCollapse = () => {\n\t\tsetCollapse(!collapse);\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (logsType === \"user\" || (logsType === \"userFriends\" && currentUser)) requestUserLogs(userID, currentPage, pageSize, query, filters);\n\t\t},\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[userID, currentPage, currentUser, logsType, pageSize, filters]\n\t);\n\n\treturn (\n\t\t<div className='user-logs'>\n\t\t\t<div className='user-logs__header'>\n\t\t\t\t<div className='user-logs__header-left'>\n\t\t\t\t\t<div className='user-logs__header-first-row'>\n\t\t\t\t\t\t<form\n\t\t\t\t\t\t\tonSubmit={(event) => {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\trequestUserLogs(userID, currentPage, pageSize, query, filters);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\tplaceholder='Поиск'\n\t\t\t\t\t\t\t\taria-label='Поиск'\n\t\t\t\t\t\t\t\tclassName='user-logs__search-input'\n\t\t\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\tsetQuery(event.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='user-logs__mobile-expand'\n\t\t\t\t\t\t\tonClick={toggleCollapse}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{collapse\n\t\t\t\t\t\t\t\t? <FaAngleDown />\n\t\t\t\t\t\t\t\t: <FaAngleUp />}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<SelectMulti\n\t\t\t\t\t\tplaceholder={\"Тип логов\"}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetFilters(e.map((obj) => obj.value));\n\t\t\t\t\t\t}}\n\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t{ value: \"game\", label: \"Игры\" },\n\t\t\t\t\t\t\t{ value: \"movie\", label: \"Фильмы\" },\n\t\t\t\t\t\t\t{ value: \"show\", label: \"Сериал\" },\n\t\t\t\t\t\t\t{ value: \"user\", label: \"Пользователи\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\thidden={collapse && width < 748}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className='user-logs__page-size' hidden={collapse && width < 748}>\n\t\t\t\t\t<label className='user-logs__page-size-label'>\n\t\t\t\t\t\tЗаписей на странице\n\t\t\t\t\t</label>\n\t\t\t\t\t<InputNumber\n\t\t\t\t\t\tvalue={pageSize}\n\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\tonChange={(value) => setPageSize(value)}\n\t\t\t\t\t\tdataList={[5, 10, 25, 50, 100]}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<LogsByDay\n\t\t\t\tlogs={logs}\n\t\t\t\tshowUsername={showUsername}\n\t\t\t\tcurrentUser={currentUser}\n\t\t\t\tonDeleteLog={onDeleteLog}\n\t\t\t/>\n\t\t\t<Pagination\n\t\t\t\ttotal={logs.count}\n\t\t\t\tpageSize={pageSize}\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tsetCurrentPage(e);\n\t\t\t\t}}\n\t\t\t\tcurrent={currentPage}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default UserLogs;\n","import UserLogs from \"./UserLogs\";\n\nexport default UserLogs;\n","import React from \"react\";\nimport ItemBlock from \"./ItemBlock\";\n\nfunction ShowBlock({ shows }) {\n\treturn (\n\t\t<ItemBlock\n\t\t\titems={shows?.map((show) => {\n\t\t\t\treturn {\n\t\t\t\t\tlink: window.location.origin + \"/show/\" + show.show.tmdb_id,\n\t\t\t\t\tname: show.show.tmdb_name,\n\t\t\t\t\tstatus: show.status,\n\t\t\t\t\tscore: show.score,\n\t\t\t\t\treview: show.review,\n\t\t\t\t\tposter: show.show.tmdb_backdrop_path,\n\t\t\t\t\tspent_time: show.spent_time,\n\t\t\t\t};\n\t\t\t})}\n\t\t\tstatuses={[\n\t\t\t\t{ value: \"Буду смотреть\", label: \"Буду смотреть\" },\n\t\t\t\t{ value: \"Смотрю\", label: \"Смотрю\" },\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\n\t\t\t\t{ value: \"Посмотрел\", label: \"Посмотрел\" },\n\t\t\t]}\n\t\t\tfields={[\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\n\t\t\t\t{ label: \"Название\", key: \"name\" },\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\n\t\t\t\t{ label: \"Время просмотра\", key: \"spent_time\" },\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\n\t\t\t]}\n\t\t\tname={\"Сериалы\"}\n\t\t/>\n\t);\n}\n\nexport default ShowBlock;\n","export const COLORS = [\n\t\"rgb(43,206,72)\",\n\t\"rgb(240,163,255)\",\n\t\"rgb(0,117,220)\",\n\t\"rgb(153,63,0)\",\n\t\"rgb(76,0,92)\",\n\t\"rgb(225,225,225)\",\n\t\"rgb(0,92,49)\",\n\t\"rgb(255,204,153)\",\n\t\"rgb(128,128,128)\",\n\t\"rgb(148,255,181)\",\n\t\"rgb(143,124,0)\",\n\t\"rgb(157,204,0)\",\n\t\"rgb(194,0,136)\",\n\t\"rgb(0,51,128)\",\n\t\"rgb(255,164,5)\",\n\t\"rgb(255,168,187)\",\n\t\"rgb(66,102,0)\",\n\t\"rgb(255,0,16)\",\n\t\"rgb(94,241,242)\",\n\t\"rgb(0,153,143)\",\n\t\"rgb(224,255,102)\",\n\t\"rgb(116,10,255)\",\n\t\"rgb(153,0,0)\",\n\t\"rgb(255,255,128)\",\n\t\"rgb(255,255,0)\",\n\t\"rgb(255,80,)\",\n];\n","import React, { useState, useEffect } from \"react\";\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\nimport { COLORS } from \"../Colors\";\n\nfunction ChartBlock(props) {\n\tconst [chartData, setChartData] = useState([]);\n\n\tuseEffect(() => {\n\t\tsetChartData([]);\n\t\tif (props.chartData && props.chartData?.length > 0) {\n\t\t\tlet newData = props.chartData?.map((value) => ({ name: value.name, Процент: value.spent_time_percent })).sort((a, b) => b.Процент - a.Процент);\n\t\t\tnewData = newData.slice(0, 12);\n\t\t\tsetChartData(newData);\n\t\t}\n\t}, [props.chartData, setChartData]);\n\n\treturn (\n\t\t<div hidden={props.hidden}>\n\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (\n\t\t\t\t<BarChart width={document.body.clientWidth - 50} height={chartData?.length * 40} data={chartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\n\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\n\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\n\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\n\t\t\t\t\t\tcursor={false}\n\t\t\t\t\t/>\n\t\t\t\t\t<Bar dataKey='Процент'>\n\t\t\t\t\t\t{chartData.map((entry, index) => (\n\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Bar>\n\t\t\t\t</BarChart>\n\t\t\t) : (\n\t\t\t\t<BarChart width={Math.min(chartData?.length * 100, document.body.clientWidth - 50)} height={300} data={chartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\n\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\n\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\n\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\n\t\t\t\t\t\tcursor={false}\n\t\t\t\t\t/>\n\t\t\t\t\t<Bar dataKey='Процент'>\n\t\t\t\t\t\t{chartData?.map((entry, index) => (\n\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Bar>\n\t\t\t\t</BarChart>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default ChartBlock;\n","import React, { useEffect, useState } from \"react\";\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\n\nfunction YearsChart(props) {\n\tconst [chartData, setChartData] = useState([]);\n\tconst [maxCount, setMaxCount] = useState(0);\n\n\tuseEffect(() => {\n\t\tsetChartData([]);\n\t\tif (props.chartData && props.chartData?.length > 0) {\n\t\t\tlet newMaxCount = 0;\n\t\t\tlet newData = props.chartData\n\t\t\t\t?.map((value, index, array) => {\n\t\t\t\t\tif (value.count > maxCount) {\n\t\t\t\t\t\tnewMaxCount = value.count;\n\t\t\t\t\t}\n\t\t\t\t\treturn { name: value.year, Количество: value.count };\n\t\t\t\t})\n\t\t\t\t.sort((a, b) => a.name - b.name);\n\t\t\tsetMaxCount(newMaxCount);\n\t\t\tsetChartData(newData);\n\t\t}\n\t}, [props.chartData, setChartData]);\n\n\treturn (\n\t\t<div hidden={props.hidden}>\n\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? null : (\n\t\t\t\t<ResponsiveContainer width={\"100%\"} height={200}>\n\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\n\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\n\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\n\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\n\t\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t<XAxis dataKey='name' tick={{ fill: \"rgb(238, 238, 238)\" }} allowDataOverflow={false} />\n\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, maxCount + 1]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\n\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\n\t\t\t\t\t\t<Area type='monotone' dataKey='Количество' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\n\t\t\t\t\t</AreaChart>\n\t\t\t\t</ResponsiveContainer>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default YearsChart;\n","import React, { useEffect, useState } from \"react\";\nimport { PieChart, Pie, Legend, Cell, Tooltip } from \"recharts\";\nimport { COLORS } from \"../Colors\";\n\nfunction ChartBlock({ stats }) {\n\tconst [chartData, setChartData] = useState([]);\n\n\tuseEffect(() => {\n\t\tsetChartData([]);\n\t\tif (stats?.games) {\n\t\t\tlet newData = [];\n\t\t\tif (stats?.games?.total_spent_time > 0) newData.push({ name: \"Часов в играх\", value: stats?.games?.total_spent_time });\n\t\t\tif (stats?.movies?.total_spent_time > 0) newData.push({ name: \"Часов в фильмах\", value: stats?.movies?.total_spent_time });\n\t\t\tif (stats?.episodes?.total_spent_time > 0) newData.push({ name: \"Часов в сериалах\", value: stats?.episodes?.total_spent_time });\n\t\t\tsetChartData(newData);\n\t\t}\n\t}, [stats]);\n\n\treturn (\n\t\t<div hidden={chartData.length < 1}>\n\t\t\t<PieChart width={350} height={260} hidden={chartData.length < 1}>\n\t\t\t\t<Pie dataKey='value' data={chartData} cx='50%' cy='50%' outerRadius={80} fill='#8884d8' labelLine={true} label minAngle={5}>\n\t\t\t\t\t{chartData.map((entry, index) => (\n\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\n\t\t\t\t\t))}\n\t\t\t\t</Pie>\n\t\t\t\t<Tooltip\n\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\n\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\n\t\t\t\t\tcursor={false}\n\t\t\t\t/>\n\t\t\t\t<Legend verticalAlign='bottom' horizontalAlign='center' />\n\t\t\t</PieChart>\n\t\t</div>\n\t);\n}\n\nexport default ChartBlock;\n","import React from \"react\";\nimport GenresChart from \"./GenresChart/GenresChart\";\nimport YearsChart from \"./YearsChart/YearsChart\";\nimport ChartBlock from \"./ChartBlock/ChartBlock\";\n\nfunction StatisticsBlock({ stats }) {\n\treturn (\n\t\t<div>\n\t\t\t<ChartBlock stats={stats} />\n\t\t\t<div hidden={!stats?.games}>\n\t\t\t\t<h3>Игры</h3>\n\t\t\t\t<p style={{ marginBottom: \"1rem\" }}>\n\t\t\t\t\tИгр сыграно: {stats?.games?.count}, часов наиграно: {stats?.games?.total_spent_time}\n\t\t\t\t</p>\n\t\t\t\t<p>Популярные жанры:</p>\n\t\t\t\t<GenresChart chartData={stats?.games?.genres} hidden={stats?.games?.genres?.length < 1} />\n\t\t\t\t<p>Пройденные игры по году выпуска:</p>\n\t\t\t\t<YearsChart chartData={stats?.games?.years} hidden={stats?.games?.years?.length < 1} />\n\t\t\t</div>\n\t\t\t<div hidden={!stats?.movies}>\n\t\t\t\t<h3>Фильмы</h3>\n\t\t\t\t<p style={{ marginBottom: \"1rem\" }}>\n\t\t\t\t\tФильмов посмотрено: {stats?.movies?.count}, часов просмотра: {stats?.movies?.total_spent_time}\n\t\t\t\t</p>\n\t\t\t\t<p>Популярные жанры:</p>\n\t\t\t\t<GenresChart chartData={stats?.movies?.genres} hidden={stats?.movies?.genres?.length < 1} />\n\t\t\t\t<p>Просмотренные фильмы по году выпуска:</p>\n\t\t\t\t<YearsChart chartData={stats?.movies?.years} hidden={stats?.movies?.years?.length < 1} />\n\t\t\t</div>\n\t\t\t<div hidden={!stats?.episodes}>\n\t\t\t\t<h3>Сериалы</h3>\n\t\t\t\t<p style={{ marginBottom: \"1rem\" }}>\n\t\t\t\t\tСерий сериалов посмотрено: {stats?.episodes?.count}, часов просмотра: {stats?.episodes?.total_spent_time}\n\t\t\t\t</p>\n\t\t\t\t<GenresChart chartData={stats?.episodes?.genres} hidden={stats?.episodes?.genres?.length < 1} />\n\t\t\t\t<p>Просмотренные сериалы по году выпуска:</p>\n\t\t\t\t<YearsChart chartData={stats?.episodes?.years} hidden={stats?.episodes?.years?.length < 1} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default StatisticsBlock;\n","import StatisticsBlock from \"./StatisticsBlock\";\n\nexport default StatisticsBlock;\n","import UserPage from \"./UserPage\";\n\nexport default UserPage;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport { FaLock } from \"react-icons/fa\";\nimport { useQueryParam, StringParam, withDefault } from \"use-query-params\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nimport AuthStore from '../../store/AuthStore';\nimport UserStore from '../../store/UserStore';\nimport GameBlock from './views/ItemsBlock/GameBlock';\nimport FriendBlock from '../../shared/FriendBlock';\nimport MovieBlock from './views/ItemsBlock/MovieBlock';\nimport UserLogs from './views/UserLogs';\nimport CategoriesTab from '../../shared/CategoriesTab';\nimport ShowBlock from './views/ItemsBlock/ShowBlock';\nimport StatisticsBlock from './views/StatisticsBlock';\n\nimport \"./user-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst UserPage = observer((props) => {\n\tconst { currentUser } = AuthStore;\n\tconst { user, userState, requestUser, setUserStatus, requestUserLogs, userLogs, userLogsState, requestUserFriendsLogs, userFriendsLogs, userFriendsLogsState, deleteUserLog, isCurrentUser } =\n\t\tUserStore;\n\n\tlet { userID } = useParams();\n\tconst [activeCategory, setActiveCategory] = useQueryParam(\"сategory\", withDefault(StringParam, \"Лента\"));\n\tconst [lastActivity, setLastActivity] = useState(\"\");\n\n\tuseEffect(\n\t\t() => {\n\t\t\trequestUser(userID);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userID, requestUser]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = user.username ? \"Профиль \" + user.username : 'Interests';\n\t\tif (user.last_activity) {\n\t\t\tlet date = new Date(user.last_activity);\n\t\t\tlet options = { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", hour: \"numeric\", minute: \"numeric\" };\n\t\t\tsetLastActivity(date.toLocaleString(\"ru-RU\", options));\n\t\t} else setLastActivity(\"\");\n\t}, [user]);\n\n\treturn (\n\t\t<div className='user-page'>\n\t\t\t<LoadingOverlay active={userState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='user-page__body'>\n\t\t\t\t\t<div className='user-page__header'>\n\t\t\t\t\t\t<div className='user-page__user-card'>\n\t\t\t\t\t\t\t<div className='user-page__user-avatar' style={{ backgroundImage: `url(${\"https://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }} />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h2 className='user-page__username'>{user.username}</h2>\n\t\t\t\t\t\t\t\t<div hidden={!user.is_available} className='user-page__last-activity'>\n\t\t\t\t\t\t\t\t\tПоследняя активность {lastActivity}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\thidden={isCurrentUser || !user.is_available}\n\t\t\t\t\t\t\tclassName='user-page__subscribe-button'\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetUserStatus({ is_following: user.is_followed ? false : true }, user.id);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{user.is_followed ? \"Отписаться\" : \"Подписаться\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<CategoriesTab categories={[\"Лента\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Статистика\", \"Друзья\"]} activeCategory={activeCategory} onChangeCategory={setActiveCategory}>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Лента\"}>\n\t\t\t\t\t\t\t<div hidden={!user.is_available}>\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userLogsState === \"pending\" && userState !== \"pending\"} spinner text='Загрузка активности...'>\n\t\t\t\t\t\t\t\t\t<UserLogs\n\t\t\t\t\t\t\t\t\t\tuserID={userID}\n\t\t\t\t\t\t\t\t\t\tlogs={userLogs}\n\t\t\t\t\t\t\t\t\t\trequestUserLogs={requestUserLogs}\n\t\t\t\t\t\t\t\t\t\tcurrentUser={isCurrentUser}\n\t\t\t\t\t\t\t\t\t\tonDeleteLog={deleteUserLog}\n\t\t\t\t\t\t\t\t\t\tlogsType={\"user\"}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<h4 hidden={user.is_available || userState === \"pending\"}>\n\t\t\t\t\t\t\t\t<FaLock style={{ marginRight: \"1rem\" }} />\n\t\t\t\t\t\t\t\tПрофиль скрыт настройками приватности\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Игры\"}>\n\t\t\t\t\t\t\t<GameBlock games={user.games} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Фильмы\"}>\n\t\t\t\t\t\t\t<MovieBlock movies={user.movies} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Сериалы\"}>\n\t\t\t\t\t\t\t<ShowBlock shows={user.shows} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Статистика\"}>\n\t\t\t\t\t\t\t<StatisticsBlock stats={user.stats} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Друзья\"}>\n\t\t\t\t\t\t\t<FriendBlock users={user.followed_users ? user.followed_users : []} />\n\t\t\t\t\t\t\t<div hidden={currentUser.username !== user.username}>\n\t\t\t\t\t\t\t\t<h4 className='user-page__friends-header'>Активность друзей: </h4>\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userFriendsLogsState === \"pending\" && userState !== \"pending\"} spinner text='Загрузка активности...'>\n\t\t\t\t\t\t\t\t\t<UserLogs userID={userID} logs={userFriendsLogs} requestUserLogs={requestUserFriendsLogs} currentUser={isCurrentUser} showUsername={true} logsType={\"userFriends\"} />\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CategoriesTab>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default UserPage;\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as userRequests from '../services/userRequests';\nimport * as showRequests from '../services/showRequests';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface ICalendar {\n\t[key: string]: any,\n}\n\nexport interface ISettings {\n\t[key: string]: any,\n}\n\nexport interface ICurrentUser {\n\tcalendar: ICalendar,\n\tsettings: ISettings,\n\tunwatched: any,\n\tcalendarState: IPendingState,\n\tsettingsState: IPendingState,\n\tunwatchedState: IPendingState,\n\tsaveSettingsState: IPendingState,\n}\n\nclass CurrentUser {\n\tcalendar = {};\n\tsettings = {};\n\tunwatched = [];\n\tcalendarState = 'done';\n\tsettingsState = 'done';\n\tunwatchedState = 'done';\n\tsaveSettingsState = 'done';\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\trequestCalendar = async () => {\n\t\tthis.calendarState = 'pending';\n\t\tuserRequests.getUserCalendar().then(this.requestCalendarSuccess, this.requestCalendarFailure);\n\t};\n\trequestCalendarSuccess = (result: ICalendar) => {\n\t\tthis.calendar = result;\n\t\tthis.calendarState = 'done';\n\t};\n\trequestCalendarFailure = (error: string) => {\n\t\tthis.calendarState = 'error: ' + error;\n\t};\n\n\trequestSettings = async () => {\n\t\tthis.settingsState = 'pending';\n\t\tuserRequests.getUserSettings().then(this.requestSettingsSuccess, this.requestSettingsFailure);\n\t};\n\trequestSettingsSuccess = (result: ISettings) => {\n\t\tthis.settings = result;\n\t\tthis.settingsState = 'done';\n\t};\n\trequestSettingsFailure = (error: string) => {\n\t\tthis.settingsState = 'error: ' + error;\n\t};\n\n\trequestUnwatched = async () => {\n\t\tthis.unwatchedState = 'pending';\n\t\tshowRequests.getUnwatchedEpisodes().then(this.requestUnwatchedSuccess, this.requestUnwatchedFailure);\n\t};\n\trequestUnwatchedSuccess = (result: any) => {\n\t\tthis.unwatched = result;\n\t\tthis.unwatchedState = 'done';\n\t};\n\trequestUnwatchedFailure = (error: string) => {\n\t\tthis.unwatchedState = 'error: ' + error;\n\t};\n\n\tpatchSettings = async (settings: ISettings) => {\n\t\tthis.saveSettingsState = 'pending';\n\t\tuserRequests.patchUserSettings(settings).then(this.patchSettingsSuccess, this.patchSettingsFailure);\n\t};\n\tpatchSettingsReset = () => {\n\t\tthis.saveSettingsState = 'done';\n\t};\n\tpatchSettingsSuccess = (result: ISettings) => {\n\t\tthis.saveSettingsState = 'saved';\n\t\tthis.settings = result;\n\t\tsetTimeout(this.patchSettingsReset, 1000);\n\t};\n\tpatchSettingsFailure = (error: string) => {\n\t\tthis.saveSettingsState = 'error: ' + error;\n\t};\n}\n\nconst CurrentUserStore = new CurrentUser();\n//export default remotedev(CurrentUserStore, { name: 'CurrentUser' });\nexport default CurrentUserStore;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./day-info.sass\";\n\nfunction DayInfo({ day, date }) {\n\tlet history = useHistory();\n\n\treturn (\n\t\t<div className='day-info'>\n\t\t\t<h2 className='day-info__date'>\n\t\t\t\t{date ? date.toLocaleDateString(\"ru-RU\", { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", weekday: \"long\" }) : \"\"}\n\t\t\t</h2>\n\t\t\t<div className='day-info__category' hidden={!(day?.games?.length > 0)}>\n\t\t\t\t<h3 className='day-info__category-header'>Игры</h3>\n\t\t\t\t{day.games?.map((game) => (\n\t\t\t\t\t<div key={game.rawg_id}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName='day-info__link'\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{game.rawg_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className='day-info__category' hidden={!(day?.movies?.length > 0)}>\n\t\t\t\t<h3 className='day-info__category-header'>Фильмы</h3>\n\t\t\t\t{day.movies?.map((movie) => (\n\t\t\t\t\t<div key={movie.tmdb_id}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName='day-info__link'\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{movie.tmdb_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className='day-info__category' hidden={!(day?.episodes?.length > 0)}>\n\t\t\t\t<h3 className='day-info__category-header'>Сериалы</h3>\n\t\t\t\t{day.episodes?.map((episode) => (\n\t\t\t\t\t<div key={episode.tmdb_id}>\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName='day-info__link'\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName='day-info__link'\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default DayInfo;\n","import DayInfo from \"./DayInfo\";\n\nexport default DayInfo;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Timeline, TimelineEvent } from \"react-event-timeline\";\nimport { MdVideogameAsset, MdLocalMovies, MdLiveTv, MdApps } from \"react-icons/md\";\n\nfunction ReleasesList({ calendar }) {\n\tlet history = useHistory();\n\n\tconst myStyle = {\n\t\tbackgroundColor: \"#191A1B\",\n\t\tcolor: \"#F1F1FB\",\n\t\tborder: \"none\",\n\t};\n\n\tfunction getContentForDay(day) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{day.games?.map((game) => (\n\t\t\t\t\t<div key={game.rawg_id}>\n\t\t\t\t\t\tИгра{\" \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{game.rawg_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t\t{day.movies?.map((movie) => (\n\t\t\t\t\t<div key={movie.tmdb_id}>\n\t\t\t\t\t\tФильм{\" \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{movie.tmdb_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t\t{day.episodes?.map((episode) => (\n\t\t\t\t\t<div key={episode.tmdb_id}>\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tfunction getIconForDay(day) {\n\t\tif ((day.games?.length > 0) & !(day.movies?.length > 0) & !(day.episodes?.length > 0)) return <MdVideogameAsset />;\n\t\telse if ((day.movies?.length > 0) & !(day.games?.length > 0) & !(day.episodes?.length > 0)) return <MdLocalMovies />;\n\t\telse if ((day.episodes?.length > 0) & !(day.movies?.length > 0) & !(day.games?.length > 0)) return <MdLiveTv />;\n\t\telse return <MdApps />;\n\t}\n\n\tfunction dateDiff(date) {\n\t\tlet now = new Date();\n\t\tlet time = date.getTime();\n\t\tlet timeNow = now.getTime();\n\t\tlet diff = (time - timeNow) / (24 * 3600 * 1000);\n\t\tif (diff < 1)\n\t\t\tif (now.getUTCDay() === date.getUTCDay()) return 0;\n\t\t\telse return 1;\n\t\treturn parseInt(diff) + 1;\n\t}\n\n\tfunction intToDays(number) {\n\t\tif (11 <= number && number <= 14) return \"дней\";\n\t\telse if (number % 10 === 1) return \"день\";\n\t\telse if (2 <= number % 10 && number % 10 <= 4) return \"дня\";\n\t\telse return \"дней\";\n\t}\n\n\tfunction remainedDays(date) {\n\t\tlet days = dateDiff(date);\n\t\tif (days > 0) return `${days} ${intToDays(days)}`;\n\t\telse return \"сегодня\";\n\t}\n\n\treturn (\n\t\t<Timeline style={myStyle} lineColor='#A6A6AB'>\n\t\t\t{calendar?.map((day) => {\n\t\t\t\tlet date = new Date(day[0]);\n\t\t\t\treturn (\n\t\t\t\t\t<TimelineEvent\n\t\t\t\t\t\ttitle={`${remainedDays(date)}, ${date.toLocaleDateString(\"ru-RU\", {\n\t\t\t\t\t\t\tyear: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\",\n\t\t\t\t\t\t\tmonth: \"long\",\n\t\t\t\t\t\t\tday: \"numeric\",\n\t\t\t\t\t\t\tweekday: \"long\",\n\t\t\t\t\t\t})}`}\n\t\t\t\t\t\tkey={day[0]}\n\t\t\t\t\t\tclassName='timelineEvent'\n\t\t\t\t\t\ticon={getIconForDay(day[1])}\n\t\t\t\t\t\tcardHeaderStyle={myStyle}\n\t\t\t\t\t\ticonStyle={{ ...myStyle, fontSize: \"1.2rem\" }}\n\t\t\t\t\t\tbubbleStyle={myStyle}\n\t\t\t\t\t\tcontentStyle={{ ...myStyle, fontSize: \"1.1rem\", marginTop: \"0.2rem\", marginBottom: \"0.2rem\" }}\n\t\t\t\t\t\ttitleStyle={{ ...myStyle, fontSize: \"1.1rem\" }}\n\t\t\t\t\t\tsubtitleStyle={myStyle}>\n\t\t\t\t\t\t{getContentForDay(day[1])}\n\t\t\t\t\t</TimelineEvent>\n\t\t\t\t);\n\t\t\t})}\n\t\t</Timeline>\n\t);\n}\n\nexport default ReleasesList;\n","import ReleasesList from \"./ReleasesList\";\n\nexport default ReleasesList;\n","import React, { useState, useEffect } from \"react\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport { toast } from \"react-toastify\";\nimport Calendar from \"react-calendar\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nimport CurrentUserStore from '../../store/CurrentUserStore';\nimport AuthStore from '../../store/AuthStore';\nimport DayInfo from \"./views/DayInfo\";\nimport ReleasesList from \"./views/ReleasesList\";\n\nimport \"react-calendar/dist/Calendar.css\";\nimport styles from \"./calendar-page.module.sass\";\nimport \"./react-calendar.sass\";\n\nconst CalendarPage = observer(() => {\n\tconst { loggedIn } = AuthStore;\n\tconst { calendar, calendarState, requestCalendar } = CurrentUserStore;\n\n\tconst [value, onChange] = useState(new Date());\n\tconst [currentDay, setCurrentDay] = useState({});\n\n\tuseEffect(() => {\n\t\tif (loggedIn) {\n\t\t\trequestCalendar();\n\t\t}\n\t}, [loggedIn, requestCalendar]);\n\n\tuseEffect(() => {\n\t\tif (calendarState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${calendarState}`);\n\t}, [calendarState]);\n\n\tuseEffect(() => {\n\t\tif (calendar) {\n\t\t\tif (formatDate(value) in calendar) setCurrentDay(calendar[formatDate(value)]);\n\t\t\telse setCurrentDay({});\n\t\t}\n\t}, [value, calendar]);\n\n\tfunction dateToTile({ date, view }) {\n\t\tif (view === \"month\" && formatDate(date) in calendar) {\n\t\t\tlet day = calendar[formatDate(date)];\n\t\t\treturn (\n\t\t\t\t<div className={styles.calendarDay}>\n\t\t\t\t\t<div className={styles.calendarDayBody}>\n\t\t\t\t\t\t<div className={classnames(styles.calendarDayGames, !day?.games?.length > 0 ? styles.calendarDayHidden : \"\")}>{day?.games?.length}</div>\n\t\t\t\t\t\t<div className={classnames(styles.calendarDayMovies, !day?.movies?.length > 0 ? styles.calendarDayHidden : \"\")}>{day?.movies?.length}</div>\n\t\t\t\t\t\t<div className={classnames(styles.calendarDayEpisodes, !day?.episodes?.length > 0 ? styles.calendarDayHidden : \"\")}>{day?.episodes?.length}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className={styles.calendarPage}>\n\t\t\t<div>\n\t\t\t\t<h1 className={styles.pageHeader}>Календарь релизов</h1>\n\t\t\t\t<LoadingOverlay active={calendarState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? <DayInfo day={currentDay} date={value} /> : \"\"}\n\t\t\t\t\t<Calendar onChange={onChange} value={value} defaultView='month' minDetail='decade' locale='ru-RU' minDate={new Date()} tileContent={dateToTile} />\n\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? \"\" : <DayInfo day={currentDay} date={value} />}\n\t\t\t\t\t<ReleasesList calendar={Object.entries(calendar)} />\n\t\t\t\t</LoadingOverlay>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default CalendarPage;\n\nfunction pad(number) {\n\tif (number < 10) {\n\t\treturn \"0\" + number;\n\t}\n\treturn number;\n}\nfunction formatDate(date) {\n\treturn date.getFullYear() + \"-\" + pad(date.getMonth() + 1) + \"-\" + pad(date.getDate());\n}\n","import CalendarPage from \"./CalendarPage\";\nexport default CalendarPage;\n","import SettingsPage from \"./SettingsPage\";\n\nexport default SettingsPage;\n","import React, { useState, useEffect } from \"react\";\nimport { observer } from \"mobx-react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport { toast } from \"react-toastify\";\n\nimport AuthStore from '../../store/AuthStore';\nimport CurrentUserStore from '../../store/CurrentUserStore';\n\nimport \"./settings-page.sass\";\n\nconst SettingsPage = observer((props) => {\n\tconst { loggedIn, user } = AuthStore;\n\tconst { settings, requestSettings, patchSettings, settingsState, saveSettingsState } = CurrentUserStore;\n\n\tconst [gameNotifInput, setGameNotifInput] = useState(false);\n\tconst [movieNotifInput, setMovieNotifInput] = useState(false);\n\tconst [showNotifInput, setShowNotifInput] = useState(false);\n\tconst [privacySelect, setPrivacySelect] = useState(\"Все\");\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestSettings();\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn]\n\t);\n\n\tuseEffect(() => {\n\t\tif (saveSettingsState === \"saved\") toast.success(\"Настройки сохранены!\");\n\t\tif (saveSettingsState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${saveSettingsState}`);\n\t}, [saveSettingsState]);\n\tuseEffect(() => {\n\t\tif (settingsState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${settingsState}`);\n\t}, [settingsState]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (settings.receive_games_releases) setGameNotifInput(settings.receive_games_releases);\n\t\t\tif (settings.receive_movies_releases) setMovieNotifInput(settings.receive_movies_releases);\n\t\t\tif (settings.receive_episodes_releases) setShowNotifInput(settings.receive_episodes_releases);\n\t\t\tif (settings.privacy) setPrivacySelect(settings.privacy);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[settings]\n\t);\n\n\treturn (\n\t\t<div className='settings-page'>\n\t\t\t<div className='settings-page__body'>\n\t\t\t\t<h1 className='settings-page__header'>Настройки</h1>\n\n\t\t\t\t<LoadingOverlay\n\t\t\t\t\tactive={settingsState === \"pending\"\n\t\t\t\t\t\t|| saveSettingsState === \"pending\"\n\t\t\t\t\t}\n\t\t\t\t\tspinner\n\t\t\t\t\ttext='Загрузка...'\n\t\t\t\t>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 className='settings-page__subheader'>\n\t\t\t\t\t\t\tПодписка на почтовые уведомления:\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName='settings-page__settings-row'\n\t\t\t\t\t\t\tonClick={() => setGameNotifInput(!gameNotifInput)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\tclassName='settings-page__settings-checkbox'\n\t\t\t\t\t\t\t\tchecked={gameNotifInput}\n\t\t\t\t\t\t\t\tonChange={(event) => setGameNotifInput(event.target.checked)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{\" релиз новых игр\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName='settings-page__settings-row'\n\t\t\t\t\t\t\tonClick={() => setMovieNotifInput(!movieNotifInput)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\tclassName='settings-page__settings-checkbox'\n\t\t\t\t\t\t\t\tchecked={movieNotifInput}\n\t\t\t\t\t\t\t\tonChange={(event) => setMovieNotifInput(event.target.checked)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{\" релиз новых фильмов\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName='settings-page__settings-row'\n\t\t\t\t\t\t\tonClick={() => setShowNotifInput(!showNotifInput)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\tclassName='settings-page__settings-checkbox'\n\t\t\t\t\t\t\t\tchecked={showNotifInput}\n\t\t\t\t\t\t\t\tonChange={(event) => setShowNotifInput(event.target.checked)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{\" релиз новых серий сериалов\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className='settings-page__settings-row'>\n\t\t\t\t\t\t\t<label htmlFor='privacySelect'>Кто может видеть мой профиль:</label>\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tid='privacySelect'\n\t\t\t\t\t\t\t\tname='privacySelect'\n\t\t\t\t\t\t\t\tclassName='settings-page__settings-select'\n\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\tsetPrivacySelect(event.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvalue={privacySelect}>\n\t\t\t\t\t\t\t\t<option value='Все'>Все</option>\n\t\t\t\t\t\t\t\t<option value='Никто'>Никто</option>\n\t\t\t\t\t\t\t\t<option value='Друзья'>Мои подписки</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='settings-page__settings-row' hidden={!(settings.privacy !== privacySelect && privacySelect === \"Никто\")}>\n\t\t\t\t\t\t\tВнимание! Полное закрытие профиля удалит вас из подписок других пользователей!\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName='settings-page__save-button'\n\t\t\t\t\t\tdisabled={!loggedIn}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tpatchSettings({ receive_games_releases: gameNotifInput, receive_movies_releases: movieNotifInput, receive_episodes_releases: showNotifInput, privacy: privacySelect });\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tСохранить\n\t\t\t\t\t</button>\n\t\t\t\t</LoadingOverlay>\n\t\t\t\t<p>Ваша почта {user.email}</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default SettingsPage;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Rating from '../../../../shared/Rating';\nimport \"./episode-row.sass\";\n\nfunction DetailedEpisodeRow({ episode, showID, seasonNumber, setShowEpisodeUserStatus, loggedIn }) {\n\tlet history = useHistory();\n\n\tfunction parseDate(date) {\n\t\tlet newDate = new Date(date);\n\t\treturn newDate.toLocaleDateString(\"ru-RU\");\n\t}\n\n\treturn (\n\t\t<div className='episode-row'>\n\t\t\t<p className='episode-row__date'>{parseDate(episode.tmdb_release_date)}</p>\n\t\t\t<div hidden={!loggedIn} className='episode-row__rate'>\n\t\t\t\t<Rating\n\t\t\t\t\twithEye={true}\n\t\t\t\t\treadonly={!loggedIn}\n\t\t\t\t\tinitialRating={-1}\n\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\tsetShowEpisodeUserStatus(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tepisodes: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttmdb_id: episode.tmdb_id,\n\t\t\t\t\t\t\t\t\t\tscore: score,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tshowID\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<a\n\t\t\t\tclassName='episode-row__name'\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}\n\t\t\t\ttitle={episode.tmdb_name}>\n\t\t\t\tСерия {episode.tmdb_episode_number} - {episode.tmdb_name}\n\t\t\t</a>\n\t\t</div>\n\t);\n}\n\nexport default DetailedEpisodeRow;\n","import EpisodeRow from \"./EpisodeRow\";\n\nexport default EpisodeRow;\n","import React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport classnames from \"classnames\";\n\nimport EpisodeRow from \"../EpisodeRow\";\n\nimport \"./show-block.sass\";\n\nfunction ShowBlock({ loggedIn, show, setShowEpisodeUserStatus, className }) {\n\tlet history = useHistory();\n\n\tuseEffect(\n\t\t() => {},\n\t\t// eslint-disable-next-line\n\t\t[show]\n\t);\n\n\tfunction getUserSeasonOpen(showID, seasonNumber) {\n\t\tlet localData = localStorage.getItem(`${showID}_${seasonNumber}`);\n\t\treturn localData ? localData === \"true\" : true;\n\t}\n\n\tfunction setUserSeasonOpen(showID, seasonNumber, isOpen) {\n\t\tlocalStorage.setItem(`${showID}_${seasonNumber}`, isOpen);\n\t}\n\n\treturn (\n\t\t<div className={classnames(\"show-block\", className)}>\n\t\t\t<a\n\t\t\t\thref={window.location.origin + \"/show/\" + show.tmdb_id}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\thistory.push(\"/show/\" + show.tmdb_id);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}>\n\t\t\t\t<h4 className='show-block__name'>{show?.tmdb_name}</h4>\n\t\t\t</a>\n\n\t\t\t{show?.seasons.map((season, counter) => {\n\t\t\t\treturn (\n\t\t\t\t\t<details\n\t\t\t\t\t\topen={getUserSeasonOpen(show.tmdb_id, season.tmdb_season_number)}\n\t\t\t\t\t\tclassName='show-block__season'\n\t\t\t\t\t\tkey={counter}\n\t\t\t\t\t\tonToggle={(e) => setUserSeasonOpen(show.tmdb_id, season.tmdb_season_number, e.target.open)}>\n\t\t\t\t\t\t<summary>{season.tmdb_name}</summary>\n\t\t\t\t\t\t<ul class='show-block__season-ul'>\n\t\t\t\t\t\t\t{season.episodes.map((episode, counter) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li className='show-block__episode' key={counter}>\n\t\t\t\t\t\t\t\t\t\t<EpisodeRow episode={episode} showID={show.tmdb_id} seasonNumber={season.tmdb_season_number} setShowEpisodeUserStatus={setShowEpisodeUserStatus} loggedIn={loggedIn} />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</details>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n}\n\nexport default ShowBlock;\n","import ShowBlock from \"./ShowBlock\";\n\nexport default ShowBlock;\n","import UnwatchedPage from \"./UnwatchedPage\";\n\nexport default UnwatchedPage;\n","import React, { useEffect } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { toast } from \"react-toastify\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nimport AuthStore from '../../store/AuthStore';\nimport CurrentUserStore from '../../store/CurrentUserStore';\nimport ShowStore from '../../store/ShowStore';\nimport ShowBlock from './views/ShowBlock';\n\nimport \"./unwatched-page.sass\";\n\nconst UnwatchedPage = observer((props) => {\n\tconst { loggedIn } = AuthStore;\n\tconst { unwatched, requestUnwatched, unwatchedState } = CurrentUserStore;\n\tconst { setEpisodesStatus } = ShowStore;\n\n\tuseEffect(() => {\n\t\tif (unwatchedState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${unwatchedState}`);\n\t}, [unwatchedState]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestUnwatched();\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn]\n\t);\n\n\treturn (\n\t\t<div className='unwatched-page'>\n\t\t\t<div className='unwatched-page__body'>\n\t\t\t\t<h1 className='unwatched-page__header'>Непросмотренные серии</h1>\n\t\t\t\t<LoadingOverlay active={unwatchedState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t{unwatched.map((show) => (\n\t\t\t\t\t\t<ShowBlock show={show} setShowEpisodeUserStatus={setEpisodesStatus} loggedIn={loggedIn} key={show.id} className='unwatched-page__show-block' />\n\t\t\t\t\t))}\n\t\t\t\t</LoadingOverlay>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default UnwatchedPage;\n","export default __webpack_public_path__ + \"static/media/wrongPage.58faeb13.png\";","import React, { useEffect, useState } from \"react\";\nimport image from \"./wrongPage.png\";\nimport \"./not-found-page.sass\";\n/**\n * Основная страница приложения\n */\nfunction NotFoundPage() {\n\tconst [angle, setAngle] = useState(0);\n\n\tuseEffect(\n\t\t() => {\n\t\t\twindow.requestAnimationFrame(() => setAngle(angle + 1));\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[angle]\n\t);\n\n\treturn (\n\t\t<div className='not-found-page'>\n\t\t\t<div className='not-found-page__body'>\n\t\t\t\t<h1>Страница не найдена!</h1>\n\t\t\t\t<div style={{ transform: `rotate(${angle}deg)` }}>\n\t\t\t\t\t<img src={image} alt='Картинка' className='not-found-page__image' />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default NotFoundPage;\n","import NotFoundPage from \"./NotFoundPage\";\n\nexport default NotFoundPage;\n","import * as React from 'react';\nimport { block } from 'bem-cn';\nimport './Button.scss';\nimport {compact} from 'lodash';\n\ninterface IButtonProps extends React.DetailedHTMLProps<\n    React.ButtonHTMLAttributes<HTMLButtonElement>,\n    HTMLButtonElement\n    > {\n    label?: string,\n}\n\nfunction Button(props: IButtonProps) {\n    const bem = block('Button');\n\n    return (\n        <button\n            className={compact([bem(), props.className]).join(' ')}\n            {...props}\n        >\n            {props.label}\n        </button>\n    );\n}\n\nexport default Button;\n","import Button from './Button';\n\nexport default Button;\n","import * as React from 'react';\nimport {block} from 'bem-cn';\nimport {compact} from 'lodash';\nimport './RandomCard.scss';\nimport {useHistory} from 'react-router-dom';\n\ninterface IRandomCardProps {\n    className?: string,\n    winner: any,\n}\n\nfunction RandomCard(props: IRandomCardProps) {\n    const bem = block('RandomCard');\n    const history = useHistory();\n    const {winner} = props;\n\n    const getLink = (item: any) => {\n        switch (item.type) {\n            case 'game':\n                return `/game/${item.rawg_slug}`;\n            case 'movie':\n                return `/movie/${item.tmdb_id}`;\n            case 'show':\n                return `/show/${item.tmdb_id}`;\n        }\n    }\n\n    return (\n        <div className={compact([bem(), props.className]).join(' ')}>\n            <img\n                src={winner?.tmdb_poster_path || winner?.rawg_poster_path}\n                className={bem('poster')}\n                alt='poster'\n            />\n            <div>\n                <a\n                    href={window.location.origin + getLink(winner)}\n                    onClick={(e) => {\n                        history.push(getLink(winner));\n                        e.preventDefault();\n                    }}\n                    className={bem('link')}\n                >\n                    {winner.tmdb_name || winner.rawg_name}\n                </a>\n            </div>\n        </div>\n    );\n}\n\nexport default RandomCard;\n","import RandomCard from './RandomCard';\n\nexport default RandomCard;\n","import React, {useState, useEffect, useCallback} from 'react';\nimport { observer } from \"mobx-react\";\nimport { block } from 'bem-cn';\nimport { useForm } from 'react-hook-form';\nimport { toast } from \"react-toastify\";\nimport Fade from 'react-reveal/Fade';\n\nimport AuthStore from '../../store/AuthStore';\nimport \"./RandomPage.sass\";\nimport {getRoulette} from '../../services/userRequests';\nimport Button from '../../shared/Button';\nimport RandomCard from './views/RandomCard';\nimport RandomCardLoader from './views/RandomCardLoader';\nconst categoriesEnum = [\n    {id: 'games', label: 'Игры'},\n    {id: 'shows', label: 'Сериалы'},\n    {id: 'movies', label: 'Фильмы'},\n]\n\nconst RandomPage = observer(() => {\n    const { loggedIn, user } = AuthStore;\n    const bem = block('RandomPage')\n    const [winner, setWinner] = useState<null | any>(null);\n    const [isLoading, setLoading] = useState(false);\n    const {\n        register,\n        handleSubmit,\n        formState: { errors },\n    } = useForm();\n\n    const onSubmit = useCallback((values: any) => {\n        if (loggedIn) {\n            setWinner(null);\n            setLoading(true);\n            getRoulette(values)\n                .then(newItems => {\n                    setWinner(newItems[0]);\n                })\n                .catch(e => toast.error(`Ошибка сервера ${e.response.data?.error}`));\n        }\n    }, [loggedIn]);\n\n    return (\n        <div className={bem()}>\n            <form\n                onSubmit={handleSubmit(onSubmit)}\n                className={bem('form')}\n            >\n                <h1 className={bem('header')}>\n                    Рандомайзер\n                </h1>\n                <div>\n                    <div className={bem('label')}>\n                        Категории\n                    </div>\n                    {\n                        categoriesEnum.map((category: any) => (\n                            <div key={category.id}>\n                                <input\n                                    type='checkbox'\n                                    value={category.id}\n                                    id={category.id}\n                                    {...register('categories')}\n                                />\n                                <label htmlFor={category.id}>\n                                    {category.label}\n                                </label>\n                            </div>\n                        ))\n                    }\n                </div>\n                <div>\n                    <input\n                        id='endedOnly'\n                        type='checkbox'\n                        {...register('endedOnly')}\n                    />\n                    <label htmlFor='endedOnly'>\n                        Только завершенные сериалы\n                    </label>\n                </div>\n                <Button\n                    type='submit'\n                    label='Крутануть'\n                />\n            </form>\n            <img\n                src={winner?.tmdb_poster_path || winner?.rawg_poster_path}\n                onLoad={() => setLoading(false)}\n                style={{width: 0, height: 0}}\n            />\n            {\n                winner && (\n                    <Fade right duration={500} distance='50px'>\n                        <RandomCard winner={winner} />\n                    </Fade>\n                )\n            }\n            {/*{*/}\n            {/*    isLoading && (*/}\n            {/*        <RandomCardLoader />*/}\n            {/*    )*/}\n            {/*}*/}\n        </div>\n);\n});\n\nexport default RandomPage;\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport HomePage from './routes/HomePage';\nimport GamePage from './routes/GamePage';\nimport MoviePage from './routes/MoviePage';\nimport ShowPage from './routes/ShowPage';\nimport SeasonPage from './routes/ShowSeasonPage';\nimport EpisodePage from './routes/ShowEpisodePage';\nimport SearchPage from './routes/SearchPage';\nimport ConfirmPage from './routes/ConfirmPage';\nimport ConfirmPasswordPage from './routes/ConfirmPasswordPage';\nimport UserPage from './routes/UserPage';\nimport CalendarPage from './routes/CalendarPage';\nimport SettingsPage from './routes/SettingsPage';\nimport UnwatchedPage from './routes/UnwatchedPage';\nimport NotFoundPage from './routes/NotFoundPage';\nimport RandomPage from './routes/RandomPage/RandomPage';\n\nclass Routes extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Switch>\n\t\t\t\t<Route exact path='/' component={HomePage} />\n\t\t\t\t<Route exact path='/game/:id' component={GamePage} />\n\t\t\t\t<Route exact path='/movie/:id' component={MoviePage} />\n\t\t\t\t<Route exact path='/show/:id' component={ShowPage} />\n\t\t\t\t<Route exact path='/show/:show_id/season/:number' component={SeasonPage} />\n\t\t\t\t<Route exact path='/show/:show_id/season/:season_number/episode/:episode_number' component={EpisodePage} />\n\t\t\t\t<Route exact path='/search/:query' component={SearchPage} />\n\t\t\t\t<Route exact path='/confirm/' component={ConfirmPage} />\n\t\t\t\t<Route exact path='/confirm_password/' component={ConfirmPasswordPage} />\n\t\t\t\t<Route exact path='/user/:userID' component={UserPage} />\n\t\t\t\t<Route exact path='/calendar' component={CalendarPage} />\n\t\t\t\t<Route exact path='/settings' component={SettingsPage} />\n\t\t\t\t<Route exact path='/unwatched' component={UnwatchedPage} />\n\t\t\t\t<Route exact path='/random' component={RandomPage} />\n\t\t\t\t<Route component={NotFoundPage} />\n\t\t\t</Switch>\n\t\t);\n\t}\n}\n//\nexport default Routes;\n","import SearchInput from \"./SearchInput\";\n\nexport default SearchInput;\n","import React, { useState } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { useHistory } from \"react-router-dom\";\nimport { MdVideogameAsset, MdLocalMovies, MdLiveTv } from \"react-icons/md\";\nimport classnames from \"classnames\";\n\nimport SearchStore from '../../../../../store/SearchStore';\n\nimport \"./search-input.sass\";\n\nconst SearchInput = observer(({ onSubmit, className }) => {\n\tconst [query, setQuery] = useState(\"\");\n\tlet history = useHistory();\n\tconst { searchHints, hints } = SearchStore;\n\n\treturn (\n\t\t<form\n\t\t\tonSubmit={(event) => {\n\t\t\t\tonSubmit(event);\n\t\t\t\tsetQuery(\"\");\n\t\t\t}}\n\t\t\tclassName={classnames(\"search-input\", className)}>\n\t\t\t<input\n\t\t\t\ttype='text'\n\t\t\t\tplaceholder='Поиск'\n\t\t\t\taria-label='Поиск'\n\t\t\t\tclassName='search-input__input'\n\t\t\t\tid='searchInput'\n\t\t\t\tvalue={query}\n\t\t\t\tonChange={(event) => {\n\t\t\t\t\tsetQuery(event.target.value);\n\t\t\t\t\tsearchHints(event.target.value);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<div className={classnames(\"search-input__hints\", query === \"\" || !(hints.games.length > 0 || hints.movies.length > 0 || hints.shows.length > 0) ? \"search-input__hints_hidden\" : \"\")}>\n\t\t\t\t<div hidden={!hints.games.length > 0}>\n\t\t\t\t\t<MdVideogameAsset />\n\t\t\t\t\t{hints.games.map((hint, key) => (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + hint.rawg_slug}\n\t\t\t\t\t\t\tclassName='search-input__hint'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + hint.rawg_slug);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tsetQuery(\"\");\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{<img src={hint.rawg_backdrop_path} alt={\"\"} />}\n\t\t\t\t\t\t\t{hint.rawg_name}\n\t\t\t\t\t\t\t<div>{hint?.rawg_release_date?.substr(0, 4)}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div hidden={!hints.movies.length > 0}>\n\t\t\t\t\t<MdLocalMovies />\n\t\t\t\t\t{hints.movies.map((hint, key) => (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + hint.tmdb_id}\n\t\t\t\t\t\t\tclassName='search-input__hint'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + hint.tmdb_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tsetQuery(\"\");\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{<img src={hint.tmdb_backdrop_path} alt={\"\"} />}\n\t\t\t\t\t\t\t{hint.tmdb_name}\n\t\t\t\t\t\t\t<div>{hint?.tmdb_release_date?.substr(0, 4)}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div hidden={!hints.shows.length > 0}>\n\t\t\t\t\t<MdLiveTv />\n\t\t\t\t\t{hints.shows.map((hint, key) => (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + hint.tmdb_id}\n\t\t\t\t\t\t\tclassName='search-input__hint'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + hint.tmdb_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tsetQuery(\"\");\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{<img src={hint.tmdb_backdrop_path} alt={\"\"} />}\n\t\t\t\t\t\t\t{hint.tmdb_name}\n\t\t\t\t\t\t\t<div>{hint?.tmdb_release_date?.substr(0, 4)}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t);\n});\n\nexport default SearchInput;\n","import Navbar from \"./Navbar\";\n\nexport default Navbar;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { observer } from 'mobx-react';\nimport classnames from 'classnames';\nimport { FaBars, FaAngleUp, FaAngleDown, FaUserCircle, FaSignInAlt } from 'react-icons/fa';\n\nimport PagesStore from '../../../store/PagesStore';\nimport AuthStore from '../../../store/AuthStore';\nimport useWindowDimensions from '../../../hooks/useWindowDimensions';\nimport SearchInput from './views/SearchInput';\n\nimport './navbar.sass';\n\nconst Navbar = observer((props) => {\n\tconst { toggleSidebar, openLoginForm } = PagesStore;\n\tconst { width } = useWindowDimensions();\n\tconst { loggedIn, user } = AuthStore;\n\n\tlet history = useHistory();\n\n\tconst [collapse, setCollapse] = useState(true);\n\n\tconst toggleCollapse = () => {\n\t\tsetCollapse(!collapse);\n\t};\n\n\tfunction toggleIfSmallScreen() {\n\t\tif (width <= 600) setCollapse(true);\n\t}\n\n\treturn (\n\t\t<div className='navbar'>\n\t\t\t<div className='navbar__left'>\n\t\t\t\t<FaBars onClick={toggleSidebar} className='navbar__sidebar-button' />\n\t\t\t\t<div onClick={() => history.push('/')} className='navbar__logo'>\n\t\t\t\t\tInterests\n\t\t\t\t</div>\n\t\t\t\t<div onClick={toggleCollapse} className='navbar__collapse-button'>\n\t\t\t\t\t{collapse ? <FaAngleDown /> : <FaAngleUp />}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className={classnames('navbar__center', collapse && width <= 600 ? 'navbar__center_collapsed' : '')}>\n\t\t\t\t<SearchInput\n\t\t\t\t\tonSubmit={(event) => {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\thistory.push('/search/' + document.getElementById('searchInput').value);\n\t\t\t\t\t\ttoggleIfSmallScreen();\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='navbar__search-input'\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={classnames('navbar__right', collapse && width <= 600 ? 'navbar__right_collapsed' : '')}>\n\t\t\t\t<div\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\thistory.push(`/user/${user?.id}`);\n\t\t\t\t\t\ttoggleIfSmallScreen();\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='navbar__user-button'\n\t\t\t\t\thidden={!loggedIn}>\n\t\t\t\t\t<FaUserCircle /> {user?.username}\n\t\t\t\t</div>\n\t\t\t\t<div onClick={openLoginForm} className='navbar__user-button' hidden={loggedIn}>\n\t\t\t\t\t<FaSignInAlt /> Войти\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default Navbar;\n","export default __webpack_public_path__ + \"static/media/tmdb-logo.de1a664e.svg\";","import React from \"react\";\nimport { FaVk, FaDiscord } from \"react-icons/fa\";\nimport classnames from \"classnames\";\nimport \"./footer.sass\";\nimport tmdbLogo from './tmdb-logo.svg';\n\nfunction Footer({ className }) {\n\treturn (\n\t\t<div className={classnames(\"footer\", className)}>\n\t\t\t<div className='footer__body'>\n\t\t\t\t<div>\n\t\t\t\t\t<h2 className='footer__name'>Interests</h2>\n\t\t\t\t\t<p className='footer__email'>info@интерестс.space</p>\n\t\t\t\t\t<p className='footer__date'>\n\t\t\t\t\t\t{`2020-${(new Date()).getFullYear()}`}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div className='footer__social-block'>\n\t\t\t\t\t<p>Следите за нами в социальных сетях, чтобы оставаться в курсе последних событий!</p>\n\t\t\t\t\t<a href='https://vk.com/interests_fun' className='footer__social-link'>\n\t\t\t\t\t\t<FaVk />\n\t\t\t\t\t</a>\n\t\t\t\t\t<a href='https://discord.gg/wXkUF5tKee' className='footer__social-link'>\n\t\t\t\t\t\t<FaDiscord />\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className='footer__social-block'>\n\t\t\t\t\t<p>Сайт был разработан при поддержке</p>\n\t\t\t\t\t<a href='https://rawg.io/' className='footer__rawg-logo'>\n\t\t\t\t\t\tRAWG\n\t\t\t\t\t</a>\n\t\t\t\t\t<a href='https://www.themoviedb.org/'>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName='footer__tmdb-logo'\n\t\t\t\t\t\t\tsrc={tmdbLogo}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Footer;\n","import Footer from \"./Footer\";\n\nexport default Footer;\n","import Sidebar from \"./Sidebar\";\n\nexport default Sidebar;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { observer } from 'mobx-react';\nimport {\n\tFaSignInAlt,\n\tFaUserCircle,\n\tFaUserFriends,\n\tFaCalendar,\n\tFaSignOutAlt,\n\tFaUserPlus,\n\tFaArrowRight,\n\tFaArrowLeft,\n\tFaRandom\n} from 'react-icons/fa';\nimport { MdLiveTv, MdSettings } from 'react-icons/md';\nimport {\n\tProSidebar,\n\tMenu,\n\tMenuItem,\n\t//SubMenu,\n\tSidebarFooter,\n} from 'react-pro-sidebar';\n\nimport AuthStore from '../../../store/AuthStore';\nimport PagesStore from '../../../store/PagesStore';\nimport useWindowDimensions from '../../../hooks/useWindowDimensions';\n\nimport './sidebar.sass';\n//import 'react-pro-sidebar/dist/css/styles.css';\n\n/**\n * Основная страница приложения\n */\nconst Sidebar = observer((props) => {\n\tconst history = useHistory();\n\tconst { width } = useWindowDimensions();\n\n\tconst { loggedIn, user, resetAuthorization } = AuthStore;\n\tconst { sidebarIsCollapsed, sidebarIsToggled, collapseSidebar, toggleSidebar, openLoginForm, openRegistrateForm } = PagesStore;\n\n\tfunction toggleSidebarIfSmallScreen() {\n\t\tif (width < 1780 && width > 1440 && !sidebarIsCollapsed) collapseSidebar();\n\t\tif (width <= 1440) toggleSidebar();\n\t}\n\n\treturn (\n\t\t<ProSidebar className='sidebar' collapsed={sidebarIsCollapsed} hidden={!sidebarIsToggled}>\n\t\t\t<Menu iconShape='round' hidden={!loggedIn}>\n\t\t\t\t<MenuItem icon={<FaUserCircle />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/user/${user?.id}`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/user/${user?.id}`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tПрофиль\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<FaUserFriends />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/user/${user.id}?сategory=Друзья`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/user/${user?.id}?сategory=Друзья`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tДрузья\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\n\t\t\t\t<MenuItem icon={<MdLiveTv />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/unwatched`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/unwatched`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tНепросмотренное\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<FaCalendar />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/calendar`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/calendar`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tКалендарь\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<FaRandom />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/random`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/random`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tРандомайзер\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<MdSettings />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/settings`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/settings`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tНастройки\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<FaSignOutAlt />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tresetAuthorization();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tВыход\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t</Menu>\n\t\t\t<Menu iconShape='round' hidden={loggedIn}>\n\t\t\t\t<MenuItem icon={<FaSignInAlt />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tВойти\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<FaUserPlus />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\topenRegistrateForm();\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tЗарегистрироваться\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t</Menu>\n\t\t\t<SidebarFooter>\n\t\t\t\t<Menu iconShape='round'>\n\t\t\t\t\t<MenuItem icon={sidebarIsCollapsed ? <FaArrowRight /> : <FaArrowLeft />} onClick={collapseSidebar}>\n\t\t\t\t\t\tСвернуть\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</Menu>\n\t\t\t</SidebarFooter>\n\t\t</ProSidebar>\n\t);\n});\n\nexport default Sidebar;\n","import React from \"react\";\nimport classnames from \"classnames\";\n\nimport \"./modal.sass\";\n\ninterface IModalProps {\n\tclassName?: string,\n\tchildren?: any,\n\tisOpen?: boolean,\n\ttoggle?: () => any,\n}\n\nfunction Modal({ className, children, isOpen, toggle }: IModalProps) {\n\treturn (\n\t\t<div className={classnames(\"modal2\", isOpen ? \"modal2_open\" : \"\")}>\n\t\t\t<div className={classnames(\"modal2__backdrop\")} onClick={toggle} />\n\t\t\t<div className={classnames(\"modal2__content\", className)}>{children}</div>\n\t\t</div>\n\t);\n}\n\nexport default Modal;\n","import Modal from \"./Modal\";\n\nexport default Modal;\n","import React, {useEffect, useState} from 'react';\nimport { observer } from 'mobx-react';\n\nimport AuthStore from '../../../store/AuthStore';\nimport PagesStore from '../../../store/PagesStore';\nimport Modal from '../../Modal';\n\nimport './login-form.sass';\n\n/**\n * КОмпонент формы авторизации\n * @param {number} Параметр, при изменении которого компонент открывается\n */\nconst LoginForm = observer(() => {\n\tconst { tryAuth, authState } = AuthStore;\n\tconst { LoginFormIsOpen, closeLoginForm, openResetPasswordForm, openRegistrateForm } = PagesStore;\n\n\tconst [password, setPassword] = useState('');\n\tconst [login, setLogin] = useState('');\n\n\tuseEffect(() => {\n\t\tif (authState === \"done\"){\n\t\t\tcloseLoginForm();\n\t\t}\n\t}, [authState, closeLoginForm]);\n\n\tconst onSubmit = async (event: any) => {\n\t\tevent.preventDefault();\n\t\tawait tryAuth(login, password);\n\t};\n\n\tconst onPasswordRecovery = async () => {\n\t\tawait closeLoginForm();\n\t\tawait openResetPasswordForm();\n\t}\n\n\tconst onRegistration = async () => {\n\t\tawait closeLoginForm();\n\t\tawait openRegistrateForm();\n\t}\n\n\treturn (\n\t\t<Modal isOpen={LoginFormIsOpen} toggle={closeLoginForm} className='login-form'>\n\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t<h2 className='login-form__header'>\n\t\t\t\t\tВойти\n\t\t\t\t</h2>\n\t\t\t\t<p\n\t\t\t\t\tclassName='login-form__fail'\n\t\t\t\t\thidden={!authState.startsWith(\"error:\")}\n\t\t\t\t>\n\t\t\t\t\t{authState}\n\t\t\t\t</p>\n\n\t\t\t\t<label\n\t\t\t\t\thtmlFor='loginInput'\n\t\t\t\t\tclassName='grey-text'\n\t\t\t\t>\n\t\t\t\t\tЛогин\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='text'\n\t\t\t\t\tid='loginInput'\n\t\t\t\t\tclassName='login-form__input'\n\t\t\t\t\tvalue={login}\n\t\t\t\t\tonChange={(e) => setLogin(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<label\n\t\t\t\t\thtmlFor='passwordInput'\n\t\t\t\t\tclassName='grey-text'\n\t\t\t\t>\n\t\t\t\t\tПароль\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='password'\n\t\t\t\t\tid='passwordInput'\n\t\t\t\t\tclassName='login-form__input'\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<div className='text-center mt-4'>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tclassName='login-form__auth-button'\n\t\t\t\t\t>\n\t\t\t\t\t\t{authState !== \"pending\" ? \"Войти\" : \"Загрузка...\"}\n\t\t\t\t\t</button>\n\t\t\t\t\t<label\n\t\t\t\t\t\tclassName='login-form__link-label'\n\t\t\t\t\t\tonClick={onPasswordRecovery}>\n\t\t\t\t\t\tВосстановить пароль\n\t\t\t\t\t</label>\n\t\t\t\t\t<label\n\t\t\t\t\t\tclassName='login-form__link-label'\n\t\t\t\t\t\tonClick={onRegistration}>\n\t\t\t\t\t\tЗарегистрироваться\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n});\n\nexport default LoginForm;\n","import LoginForm from './LoginForm';\n\nexport default LoginForm;\n","import RegisterForm from \"./RegisterForm\";\n\nexport default RegisterForm;\n","import React, {useState} from 'react';\nimport { observer } from 'mobx-react';\nimport classnames from 'classnames';\n\nimport AuthStore from '../../../store/AuthStore';\nimport PagesStore from '../../../store/PagesStore';\nimport Modal from '../../Modal';\n\nimport './register-form.sass';\n\n/**\n * КОмпонент формы авторизации\n * @param {number} Параметр, при изменении которого компонент открывается\n */\nconst RegisterForm = observer(() => {\n\tconst { register, registrateState, user } = AuthStore;\n\tconst { RegistrateFormIsOpen, closeRegistrateForm } = PagesStore;\n\n\tconst [passwordConfirm, setPasswordConfirm] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [email, setEmail] = useState('');\n\tconst [login, setLogin] = useState('');\n\n\tconst onRegistration = () => register(login, email, password);\n\n\treturn (\n\t\t<Modal\n\t\t\tisOpen={RegistrateFormIsOpen}\n\t\t\ttoggle={closeRegistrateForm}\n\t\t\tclassName='register-form'\n\t\t>\n\t\t\t<form>\n\t\t\t\t<p\n\t\t\t\t\tclassName='register-form__fail'\n\t\t\t\t\thidden={!registrateState.startsWith('error:')}\n\t\t\t\t>\n\t\t\t\t\t{registrateState}\n\t\t\t\t</p>\n\t\t\t\t<p\n\t\t\t\t\tclassName='register-form__success'\n\t\t\t\t\thidden={user?.email === ''}\n\t\t\t\t>\n\t\t\t\t\t{user.login}, добро пожаловать! Осталось только подтвердить вашу почту\n\t\t\t\t</p>\n\t\t\t\t<h2 className='register-form__header'>\n\t\t\t\t\tРегистрация\n\t\t\t\t</h2>\n\n\t\t\t\t<label htmlFor='loginInput'>\n\t\t\t\t\tНикнейм\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='text'\n\t\t\t\t\tclassName='register-form__input'\n\t\t\t\t\tvalue={login}\n\t\t\t\t\tonChange={(e) => setLogin(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<label htmlFor='emailInput'>\n\t\t\t\t\tЭлектронная почта\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='email'\n\t\t\t\t\tclassName='register-form__input'\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<label htmlFor='passwordInput'>\n\t\t\t\t\tПароль\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='password'\n\t\t\t\t\tclassName='register-form__input'\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<label htmlFor='passwordConfirmInput'>\n\t\t\t\t\tПодтверждение пароля\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='password'\n\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t'register-form__input',\n\t\t\t\t\t\tpasswordConfirm\n\t\t\t\t\t\t\t? passwordConfirm === password\n\t\t\t\t\t\t\t\t? 'register-form__input_right'\n\t\t\t\t\t\t\t\t: 'register-form__input_wrong'\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t)}\n\t\t\t\t\tvalue={passwordConfirm}\n\t\t\t\t\tonChange={(e) => setPasswordConfirm(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<div className='text-center mt-4'>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\tclassName='register-form__auth-button'\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\tpassword !== passwordConfirm\n\t\t\t\t\t\t\t\t|| login.length < 1\n\t\t\t\t\t\t\t\t|| email.length < 1\n\t\t\t\t\t\t\t\t|| password.length < 1\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={onRegistration}\n\t\t\t\t\t>\n\t\t\t\t\t\t{registrateState !== 'pending' ? 'Зарегистрироваться' : 'Загрузка...'}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n});\n\nexport default RegisterForm;\n","import React, {useState} from 'react';\nimport { observer } from 'mobx-react';\n\nimport AuthStore from '../../../store/AuthStore';\nimport PagesStore from '../../../store/PagesStore';\nimport Modal from '../../Modal';\n\nimport './reset-password-form.sass';\n\n/**\n * КОмпонент формы сброса пароля\n * @param {number} Параметр, при изменении которого компонент открывается\n */\nconst ResetPasswordForm = observer(() => {\n\tconst { resetPassword, resetPasswordState } = AuthStore;\n\tconst { ResetPasswordFormIsOpen, closeResetPasswordForm } = PagesStore;\n\n\tconst [email, setEmail] = useState('');\n\n\tconst onSubmit = async (event: any) => {\n\t\tevent.preventDefault();\n\t\tawait resetPassword(email);\n\t};\n\n\treturn (\n\t\t<Modal isOpen={ResetPasswordFormIsOpen} toggle={closeResetPasswordForm} className='reset-password-form'>\n\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t<h2 className='reset-password-form__header'>\n\t\t\t\t\tСбросить пароль\n\t\t\t\t</h2>\n\t\t\t\t<p\n\t\t\t\t\tclassName='reset-password-form__fail'\n\t\t\t\t\thidden={!resetPasswordState.startsWith('error:')}\n\t\t\t\t>\n\t\t\t\t\t{resetPasswordState}\n\t\t\t\t</p>\n\t\t\t\t<p\n\t\t\t\t\tclassName='reset-password-form__success'\n\t\t\t\t\thidden={resetPasswordState !== 'done'}\n\t\t\t\t>\n\t\t\t\t\tНа вашу почту отправлено письмо\n\t\t\t\t</p>\n\n\t\t\t\t<label htmlFor='emailInput'>\n\t\t\t\t\tПочта\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='text'\n\t\t\t\t\tclassName='reset-password-form__input'\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<button type='submit' className='reset-password-form__button'>\n\t\t\t\t\t{resetPasswordState !== 'pending' ? 'Сбросить' : 'Загрузка...'}\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n});\n\nexport default ResetPasswordForm;\n","import ResetPasswordForm from \"./ResetPasswordForm\";\n\nexport default ResetPasswordForm;\n","import React, { useEffect } from \"react\";\nimport {BrowserRouter} from 'react-router-dom';\nimport { QueryParamProvider } from 'use-query-params';\nimport { observer } from 'mobx-react';\nimport { ToastContainer } from 'react-toastify';\nimport Routes from './Routes';\nimport AuthStore from './store/AuthStore';\nimport Navbar from './shared/app/Navbar';\nimport Footer from './shared/app/Footer';\nimport Sidebar from './shared/app/Sidebar';\nimport LoginForm from './shared/Modals/LoginForm';\nimport RegisterForm from './shared/Modals/RegisterForm';\nimport ResetPasswordForm from './shared/Modals/ResetPasswordForm';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './app.sass';\nimport {ReactRouter5Adapter} from 'use-query-params/adapters/react-router-5';\n\nconst App = observer(() => {\n\tconst { checkAuth } = AuthStore;\n\n\tuseEffect(() => {\n\t\tcheckAuth();\n\t}, [checkAuth]);\n\n\treturn (\n\t\t<div className='app'>\n\t\t\t<div className='app__body'>\n\t\t\t\t<BrowserRouter>\n\t\t\t\t\t<QueryParamProvider adapter={ReactRouter5Adapter}>\n\t\t\t\t\t\t<Navbar />\n\t\t\t\t\t\t<Sidebar />\n\t\t\t\t\t\t<Routes />\n\t\t\t\t\t\t<Footer className='app__footer' />\n\t\t\t\t\t</QueryParamProvider>\n\t\t\t\t</BrowserRouter>\n\t\t\t</div>\n\t\t\t<ToastContainer position='top-center' hideProgressBar newestOnTop closeOnClick autoClose={3000} />\n\t\t\t<LoginForm />\n\t\t\t<RegisterForm />\n\t\t\t<ResetPasswordForm />\n\t\t</div>\n\t);\n});\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === \"localhost\" ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === \"[::1]\" ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener(\"load\", () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\"New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { \"Service-Worker\": \"script\" },\n\t})\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get(\"content-type\");\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\"No internet connection found. App is running in offline mode.\");\n\t\t});\n}\n\nexport function unregister() {\n\tif (\"serviceWorker\" in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t\t.then((registration) => {\n\t\t\t\tregistration.unregister();\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error.message);\n\t\t\t});\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\nserviceWorker.register();\n"],"sourceRoot":""}