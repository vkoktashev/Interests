{"version":3,"sources":["components/HomePage.js","store/reducers.js","settings.js","services/jwtAuth.js","services/requests.js","store/actions.js","store/actionTypes.js","components/Common/StatusButtonGroup.js","components/GamePage.js","components/MoviePage.js","components/SearchPage/CardGame.js","components/SearchPage/CardMovie.js","components/Common/CardUser.js","components/Common/CategoriesTab.js","components/SearchPage/SearchPage.js","components/LoginForm.js","components/RegistrationForm.js","components/ConfirmPage.js","components/UserPage/GameBlock.js","components/UserPage/FriendBlock.js","components/UserPage/MovieBlock.js","components/UserPage/LogRow.js","components/UserPage/UserLogBlock.js","components/UserPage/UserPage.js","components/Navbar.js","Routes.js","App.js","serviceWorker.js","index.js"],"names":["HomePage","initialState","Map","auth","loggedIn","user","username","email","id","content","game","rawg","name","background_image","background_image_additional","developers","hltb","game_image_url","user_info","status","review","score","spent_time","movie","tmdb","title","poster_path","searchContent","games","movies","users","userPageContent","stats","userLogs","log","userFriendsLogs","openedPages","LoginForm","RegistrateForm","errors","registrate","gameRequest","movieRequest","userPage","isLoading","contentGame","contentMovie","searchGames","searchMovies","searchUsers","userPageLogs","userPageFriendsLogs","getLoggedIn","state","get","getContentGame","getContentMovie","getSearchContentGames","getSearchContentMovies","getSearchContentUsers","getAuthError","getRegistrateError","getGameRequestError","getUser","getLoginForm","getRegistrateForm","getIsLoadingContentGame","getIsLoadingContentMovie","getIsLoadingSearchGames","getIsLoadingSearchMovies","getIsLoadingSearchUsers","getIsLoadingUserPageContent","getUserPageContent","getUserPageLogs","getUserPageFriendsLogs","BACKEND_URL","GET_TOKEN_URL","REFRESH_TOKEN_URL","REGISTRATE_URL","CONFIRM_URL","GET_GAME_URL","GET_MOVIE_URL","USER_INFO_URL","axiosConfig","headers","getToken","password","a","axios","post","res","userData","jwt_decode","data","access","user_id","token","refreshToken","refresh","console","updateToken","registration","response","confirmation","uid64","patch","getGame","AuthStr","getMovie","setGameStatus","gameSlug","put","setMovieStatus","query","page","params","getUserInfo","userID","setUserStatus","is_following","getUserLog","resultsOnPage","page_size","getUserFriendsLog","checkAuthorization","dispatch","localStorage","getItem","Date","now","type","setItem","resetAuthorization","removeItem","defaults","common","StatusButtonGroup","statuses","activeColor","onChangeStatus","userStatus","useState","activeStatus","setActiveStatus","useEffect","map","className","key","style","backgroundColor","onClick","connect","selectors","requestError","gameIsLoading","requestGame","Requests","then","result","toast","error","actions","openLoginForm","isOpen","getState","slug","useParams","genres","setGenres","metascoreBlock","setMetascoreBlock","setReview","spentTime","setSpentTime","setDevelopers","date","setDate","gameplay_main_extra","gameplay_main","gameplay_comletionist","hltbInfo","setHtlbInfo","newGenres","i","length","metacritic","playtime","gameplay_completionist","newDevelopers","released","mas","split","newDate","document","backgroundImage","active","spinner","text","md","size","src","alt","marginBottom","display","hidden","far","icon","gameplay_main_unit","gameplay_main_extra_unit","gameplay_completionist_unit","stop","emptySymbol","fontSize","fullSymbol","n","initialRating","readonly","onChange","marginTop","paddingTop","dangerouslySetInnerHTML","__html","description","paddingLeft","label","value","event","target","outline","disabled","getElementById","movieIsLoading","requestMovie","companies","setCompanies","cast","setCast","director","setDirector","vote_average","production_companies","newCompanies","newCast","crew","newDirector","job","backdrop_path","release_date","runtime","tagline","overview","CardGame","history","useHistory","setName","newName","substr","href","window","location","origin","e","push","preventDefault","CardMovie","CardUser","CategoriesTab","categories","onChangeCategory","activeCategory","setActiveCategory","category","color","height","borderColor","gamesIsLoading","moviesIsLoading","usersIsLoading","searchGame","searchMovie","results","queryText","setQueryText","gamesCards","setGamesCards","moviesCards","setMoviesCards","usersCards","setUsersCards","onSubmit","placeholder","aria-label","authError","closeForm","logIn","login","toggle","centered","htmlFor","registrateArror","confirmEmailRequest","success","search","URLSearchParams","GameBlock","gameColumns","field","sort","columns","rows","gameTableData","setGameTableData","rawg_slug","rawg_name","name2","games_count","games_total_spent_time","striped","bordered","small","info","barReverse","noBottomColumns","noRecordsFoundLabel","paginationLabel","entriesLabel","searchLabel","FriendBlock","MovieBlock","movieColumns","movieTableData","setMovieTableData","tmdb_id","tmdb_name","movies_count","movies_total_spent_time","LogRow","showUsername","created","toLocaleTimeString","action","actionResult","translateActionType","action_type","action_result","actionType","translateType","nameToLink","target_id","number","actionResultToStr","UserLogBlock","logs","onChangePage","logsByDay","setLogsByDay","currentPage","setCurrentPage","newLogs","getDay","groupLogsByDay","dayLog","toLocaleDateString","has_next_page","userIsLoading","userInfo","currentUserInfo","getUserLogs","getUserFriendsLogs","is_followed","pageNumber","followed_users","onLoginClick","onLogoutClick","onRegistrationClick","dark","expand","fixed","left","right","to","nav","caret","Routes","exact","path","component","GamePage","MoviePage","SearchPage","ConfirmPage","UserPage","render","position","hideProgressBar","newestOnTop","closeOnClick","React","Component","onLoad","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","setIn","applyMiddleware","thunk","ReactDOM","URL","process","addEventListener","fetch","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.172dc4e0.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\n\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction HomePage () \r\n{\r\n    return (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Страница ещё не готова</h1>\r\n\t\t\t</div>\r\n    \t);\r\n}\r\n\r\nexport default HomePage;","import * as types from './actionTypes';\r\nimport { Map } from 'immutable';\r\n\r\n// Создаем reducer с начальным состоянием.\r\nconst initialState = Map(\r\n    {\r\n        auth: { loggedIn: false },\r\n        user: { username:\"\", email:\"\", id: null },\r\n        content: { \r\n            game: {\r\n                rawg: {\r\n                    name: \"\",\r\n                    background_image: \"\",\r\n                    background_image_additional: \"\",\r\n                    developers: [{}],\r\n                },\r\n                hltb:{\r\n                    game_image_url: \"\"\r\n                },\r\n                user_info:{\r\n                    status: null,\r\n                    review: \"\",\r\n                    score: 0,\r\n                    spent_time: 0\r\n                }\r\n            },\r\n            movie: {\r\n                tmdb: {\r\n                    title: \"\",\r\n                    poster_path: \"\",\r\n                    developers: [{}],\r\n                },\r\n                user_info:{\r\n                    status: null,\r\n                    review: \"\",\r\n                    score: 0,\r\n                    spent_time: 0\r\n                }\r\n            } \r\n        },\r\n        searchContent: {\r\n            games: [],\r\n            movies: [],\r\n            users: []\r\n        },\r\n        userPageContent: {\r\n            user: {\r\n                stats: {}\r\n            },\r\n            userLogs: {log: []},\r\n            userFriendsLogs: {log: []},\r\n        },\r\n        openedPages: { LoginForm: false, RegistrateForm: false },\r\n        errors: {auth: false, registrate: false, gameRequest: false, movieRequest: false, userPage: false },\r\n        isLoading: {contentGame: false, contentMovie: false, searchGames: false, searchMovies: false, userPageContent: false, searchUsers: false, userPageLogs: false, userPageFriendsLogs: false}\r\n    }\r\n);\r\n\r\nexport default function reducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case types.SET_USER:\r\n        return state.setIn(['user'], action.user);\r\n    case types.SET_AUTH:\r\n        return state.setIn(['auth'], action.auth);\r\n\r\n    case types.SET_CONTENT_GAME:\r\n        return state.setIn(['content', 'game'], action.game);\r\n    case types.SET_CONTENT_MOVIE:\r\n        return state.setIn(['content', 'movie'], action.movie);\r\n\r\n    case types.SET_SEARCH_CONTENT_GAMES:\r\n        return state.setIn(['searchContent', 'games'], action.games);\r\n    case types.SET_SEARCH_CONTENT_MOVIES:\r\n        return state.setIn(['searchContent', 'movies'], action.movies);\r\n    case types.SET_SEARCH_CONTENT_USERS:\r\n        return state.setIn(['searchContent', 'users'], action.users);\r\n\r\n    case types.SET_CONTENT_GAME_USERINFO:\r\n        return state.setIn(['content', 'game', 'user_info'], action.user_info);\r\n    case types.SET_CONTENT_GAME_USERINFO_STATUS:\r\n        return state.setIn(['content', 'game', 'user_info', 'status'], action.status)\r\n    case types.SET_CONTENT_GAME_USERINFO_SCORE:\r\n        return state.setIn(['content', 'game', 'user_info', 'score'], action.score)\r\n\r\n    case types.SET_CONTENT_MOVIE_USERINFO:\r\n        return state.setIn(['content', 'movie', 'user_info'], action.user_info);\r\n\r\n    case types.SET_USER_PAGE_CONTENT:\r\n        return state.setIn(['userPageContent', 'user'], action.content);\r\n    case types.SET_USER_PAGE_FOLLOWING:\r\n        return state.setIn(['userPageContent', 'user', 'is_followed'], action.is_following);\r\n    case types.SET_USER_PAGE_LOGs:\r\n        return state.setIn(['userPageContent', 'userLogs'], action.logs);\r\n    case types.SET_USER_PAGE_FRIENDS_LOGS:\r\n        return state.setIn(['userPageContent', 'userFriendsLogs'], action.logs);\r\n\r\n    case types.SET_LOGINFORM:\r\n        return state.setIn(['openedPages', 'LoginForm'], action.isOpen);\r\n    case types.SET_REGISTRATEFORM:\r\n        return state.setIn(['openedPages', 'RegistrateForm'], action.isOpen);\r\n\r\n    case types.AUTH_ERROR:\r\n        return state.setIn(['errors', 'auth'], action.error);\r\n    case types.REGISTRATE_ERROR:\r\n        return state.setIn(['errors', 'registrate'], action.error);\r\n    case types.GAME_REQUEST_ERROR:\r\n        return state.setIn(['errors', 'gameRequest'], action.error);\r\n    case types.MOVIE_REQUEST_ERROR:\r\n        return state.setIn(['errors', 'movieRequest'], action.error);\r\n    case types.USER_PAGE_ERROR:\r\n        return state.setIn(['errors', 'userPage'], action.error);\r\n\r\n    case types.SET_IS_LOADING_CONTENT_GAME:\r\n        return state.setIn(['isLoading', 'contentGame'], action.isLoading);\r\n    case types.SET_IS_LOADING_CONTENT_MOVIE:\r\n        return state.setIn(['isLoading', 'contentMovie'], action.isLoading);\r\n    case types.SET_IS_LOADING_SEARCH_GAMES:\r\n        return state.setIn(['isLoading', 'searchGames'], action.isLoading);\r\n    case types.SET_IS_LOADING_SEARCH_MOVIES:\r\n        return state.setIn(['isLoading', 'searchMovies'], action.isLoading);\r\n    case types.SET_IS_LOADING_USER_PAGE_CONTENT:\r\n        return state.setIn(['isLoading', 'userPageContent'], action.isLoading);\r\n    case types.SET_IS_LOADING_USER_PAGE_LOGS:\r\n        return state.setIn(['isLoading', 'userPageLogs'], action.isLoading);\r\n    case types.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS:\r\n        return state.setIn(['isLoading', 'userPageFriendsLogs'], action.isLoading);\r\n    case types.SET_IS_LOADING_SEARCH_USERS:\r\n        return state.setIn(['isLoading', 'searchUsers'], action.isLoading);\r\n    default:\r\n        return state;\r\n  }\r\n}\r\n\r\nexport function getLoggedIn(state) {\r\n    return state.get('auth').loggedIn;\r\n}\r\n\r\nexport function getAuth(state) {\r\n    return state.get('auth');\r\n}\r\n\r\nexport function getContentGame(state) {\r\n    return state.get('content').game;\r\n}\r\n\r\nexport function getContentMovie(state) {\r\n    return state.get('content').movie;\r\n}\r\n\r\nexport function getSearchContentGames(state) {\r\n    return state.get('searchContent').games;\r\n}\r\n\r\nexport function getSearchContentMovies(state) {\r\n    return state.get('searchContent').movies;\r\n}\r\n\r\nexport function getSearchContentUsers(state) {\r\n    return state.get('searchContent').users;\r\n}\r\n\r\nexport function getAuthError(state) {\r\n    return state.get('errors').auth;\r\n}\r\n\r\nexport function getRegistrateError(state) {\r\n    return state.get('errors').registrate;\r\n}\r\n\r\nexport function getGameRequestError(state) {\r\n    return state.get('errors').gameRequest;\r\n}\r\n\r\nexport function getMovieRequestError(state) {\r\n    return state.get('errors').movieRequest;\r\n}\r\n\r\nexport function getUserPageError(state) {\r\n    return state.get('errors').userPage;\r\n}\r\n\r\nexport function getUser(state) {\r\n    return state.get('user');\r\n}\r\n\r\nexport function getLoginForm(state) {\r\n    return state.get('openedPages').LoginForm;\r\n}\r\n\r\nexport function getRegistrateForm(state) {\r\n    return state.get('openedPages').RegistrateForm;\r\n}\r\n\r\nexport function getIsLoadingContentGame(state) {\r\n    return state.get('isLoading').contentGame;\r\n}\r\n\r\nexport function getIsLoadingContentMovie(state) {\r\n    return state.get('isLoading').contentMovie;\r\n}\r\n\r\nexport function getIsLoadingSearchGames(state) {\r\n    return state.get('isLoading').searchGames;\r\n}\r\n\r\nexport function getIsLoadingSearchMovies(state) {\r\n    return state.get('isLoading').searchMovies;\r\n}\r\n\r\nexport function getIsLoadingSearchUsers(state) {\r\n    return state.get('isLoading').searchUsers;\r\n}\r\n\r\nexport function getIsLoadingSearchAll(state) {\r\n    return (state.get('isLoading').searchUsers || state.get('isLoading').searchMovies || state.get('isLoading').searchGames);\r\n}\r\n\r\nexport function getIsLoadingUserPageContent(state) {\r\n    return state.get('isLoading').userPageContent;\r\n}\r\n\r\nexport function getIsLoadingUserPageLogs(state) {\r\n    return state.get('isLoading').userPageLogs;\r\n}\r\n\r\nexport function getIsLoadingUserPageFriendsLogs(state) {\r\n    return state.get('isLoading').userPageFriendsLogs;\r\n}\r\n\r\nexport function getUserPageContent(state){\r\n    return state.get('userPageContent').user;\r\n}\r\n\r\nexport function getUserPageLogs(state){\r\n    return state.get('userPageContent').userLogs;\r\n}\r\n\r\nexport function getUserPageFriendsLogs(state){\r\n    return state.get('userPageContent').userFriendsLogs;\r\n}","/** Время жизни токена в миллисекундах, после истечения которого будет запрошен новый токен*/\r\nexport const TOKEN_LIFETIME = 86000000; \r\n/**Адрес сервера*/\r\nexport const BACKEND_URL = \"http://35.193.124.214:8001/\";\r\n/**Адрес получения токена */\r\nexport const GET_TOKEN_URL = BACKEND_URL + \"users/auth/login/\"; \r\n/**Адрес обновления токена */\r\nexport const REFRESH_TOKEN_URL = BACKEND_URL + \"users/auth/refresh-token/\";\r\n/**Адрес регистрации */\r\nexport const REGISTRATE_URL = BACKEND_URL + \"users/auth/signup/\";\r\n/**Адрес подтверждения почты */\r\nexport const CONFIRM_URL = BACKEND_URL + \"users/auth/confirmation/\";\r\n/**Адрес запроса игры */\r\nexport const GET_GAME_URL = BACKEND_URL + \"games/game/\";\r\n/**Адрес поиска игр */\r\nexport const SEARCH_GAMES_URL = BACKEND_URL + \"games/search/\";\r\n/**Адрес запроса фильма */\r\nexport const GET_MOVIE_URL = BACKEND_URL + \"movies/movie/\";\r\n/**Адрес поиска фильмов */\r\nexport const SEARCH_MOVIES_URL = BACKEND_URL + \"movies/search/\";\r\n/**Адрес получения информации о пользователе */\r\nexport const USER_INFO_URL = BACKEND_URL + \"users/user/\";\r\n/**Адрес поиска пользователей */\r\nexport const SEARCH_USERS_URL = BACKEND_URL + \"users/search/\"; \r\n","import axios from \"axios\";\r\nimport jwt_decode from 'jwt-decode';\r\nimport {GET_TOKEN_URL, REFRESH_TOKEN_URL, REGISTRATE_URL, CONFIRM_URL} from '../settings';\r\n\r\nlet axiosConfig = {\r\n    headers: {\r\n        'Content-Type': 'application/json;charset=UTF-8'\r\n    }\r\n};\r\n\r\n/**\r\n * ПОлучение токена авторизации. Токен сохраняется в localStorage\r\n * @param {string} username Имя пользователя\r\n * @param {string} password Пароль \r\n */\r\nexport async function getToken(username, password){\r\n    try{\r\n        const res = await axios.post(GET_TOKEN_URL, {\r\n                    username: username,\r\n                    password: password \r\n                }, axiosConfig);\r\n\r\n        let userData = jwt_decode(res.data.access);\r\n        let user = {username: userData.username, id: userData.user_id, email: userData.email}\r\n\r\n        return {token: res.data.access, refreshToken: res.data.refresh, user: user};\r\n    }catch(e){\r\n        console.log(\"axios error: \" + e);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Функция обновления токена\r\n */\r\nexport async function updateToken(refreshToken){\r\n    if (typeof refreshToken !== 'undefined' & refreshToken != null)\r\n        try{\r\n            const res = await axios.post(REFRESH_TOKEN_URL, {\r\n                        refresh: refreshToken\r\n                    }, axiosConfig);\r\n                    \r\n            let userData = jwt_decode(res.data.access);\r\n            let user = {username: userData.username, id: userData.user_id, email: userData.email};\r\n\r\n            return {token: res.data.access, user: user};\r\n        }catch(e){\r\n            console.log(\"exios error: \" + e);\r\n            return null;\r\n        }\r\n    return null;\r\n}\r\n\r\nexport async function registration(username, email, password) {\r\n   try{\r\n        const res = await axios.post(REGISTRATE_URL, \r\n            {  username: username,\r\n                email: email, \r\n                password: password \r\n            }, axiosConfig);\r\n        let data = res.data;\t\r\n        return data;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e.response);\r\n        return e.response;\r\n    }\r\n}\r\n\r\nexport async function confirmation(uid64, token) {\r\n    try{\r\n        console.log(uid64);\r\n        console.log(token);\r\n        const res = await axios.patch(CONFIRM_URL, \r\n             {  \r\n                uid64: uid64,\r\n                token: token\r\n             }, \r\n             axiosConfig);\r\n        let data = res.data;\t\r\n        return data;\r\n     }catch(e){\r\n         console.log(\"AXIOS ERROR: \", e.response);\r\n         return e.response;\r\n     }\r\n }\r\n","import axios from \"axios\";\r\nimport {GET_GAME_URL, SEARCH_GAMES_URL, USER_INFO_URL, SEARCH_MOVIES_URL, GET_MOVIE_URL, SEARCH_USERS_URL} from \"../settings\";\r\n\r\nlet axiosConfig = {\r\n    headers: {\r\n        'Content-Type': 'application/json;charset=UTF-8'\r\n    }\r\n};\r\n\r\naxios.defaults.headers.common = {\r\n    \"Content-Type\": \"application/json\"\r\n  }\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об игре\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID игры  \r\n * @returns {object} Информация об игре\r\n */\r\nexport async function getGame(token, id) {\r\n    let data;\r\n    try{\r\n        if (token){\r\n            var AuthStr = 'Bearer ' + token;\r\n            const res = await axios.get(GET_GAME_URL + id + \"/\", { 'headers': { 'Authorization': AuthStr } });\r\n            data = res.data;\r\n        }else{\r\n            const res = await axios.get(GET_GAME_URL + id + \"/\", axiosConfig);\r\n            data = res.data;\r\n        }\r\n        return data;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о фильме\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID фильма  \r\n * @returns {object} Информация о фильме\r\n */\r\nexport async function getMovie(token, id) {\r\n    let data;\r\n    try{\r\n        if (token){\r\n            var AuthStr = 'Bearer ' + token;\r\n            const res = await axios.get(GET_MOVIE_URL + id + \"/\", { 'headers': { 'Authorization': AuthStr } });\r\n            data = res.data;\r\n        }else{\r\n            const res = await axios.get(GET_MOVIE_URL + id + \"/\", axiosConfig);\r\n            data = res.data;\r\n        }\r\n        return data;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса игры\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус игры\r\n * @param {string} gameSlug Слаг игры\r\n */\r\nexport async function setGameStatus(token, gameSlug, user_info){\r\n    try{\r\n        var AuthStr = 'Bearer ' + token;\r\n        console.log(user_info);\r\n        const res = await axios.put(GET_GAME_URL + gameSlug + \"/\", \r\n            user_info, { headers: { 'Authorization': AuthStr } });\r\n        console.log(res); \r\n        \r\n        if (res.status === 204 || res.status === 200 || res.status === 201)\r\n            return res.data;\r\n        else return null;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса фильма\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус фильма\r\n * @param {string} movieID ID фильма\r\n */\r\nexport async function setMovieStatus(token, id, user_info){\r\n    try{\r\n        var AuthStr = 'Bearer ' + token;\r\n        console.log(user_info);\r\n        const res = await axios.put(GET_MOVIE_URL + id + \"/\", \r\n            user_info, { headers: { 'Authorization': AuthStr } });\r\n        console.log(res); \r\n        \r\n        if (res.status === 204 || res.status === 200 || res.status === 201)\r\n            return res.data;\r\n        else return null;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса игры\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Объект статуса игры\r\n * @param {string} gameSlug Слаг игры\r\n \r\nexport async function patchGameStatus(token, gameSlug, user_info){\r\n    try{\r\n        var AuthStr = 'Bearer ' + token;\r\n        const res = await axios.patch(GET_GAME_URL + gameSlug + \"/\", \r\n        {status: user_info.status, score: user_info.score, review: user_info.review, spent_time: user_info.spent_time }, { 'headers': { 'Authorization': AuthStr } });\r\n        console.log(res.data);\r\n        if (res.status === 204 || res.status === 201|| res.status === 200)\r\n            return res.data;\r\n        else return null;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}*/\r\n\r\n\r\n/**\r\n * Запрос на поиск игр\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchGames(query, page){\r\n    try{\r\n        const res = await axios.get(SEARCH_GAMES_URL, { params : {query: query, page: page} }, \r\n            { 'headers': { 'Content-Type': 'application/json;charset=UTF-8' } });\r\n        return res.data;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Запрос на поиск фильмов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchMovies(query, page){\r\n    try{\r\n        const res = await axios.get(SEARCH_MOVIES_URL, { params : {query: query, page: page} }, \r\n            { 'headers': { 'Content-Type': 'application/json;charset=UTF-8' } });\r\n            console.log(res);\r\n        return res.data;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Запрос на поиск пользователей\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchUsers(query){\r\n    try{\r\n        const res = await axios.get(SEARCH_USERS_URL, { params : {query: query} }, \r\n            { 'headers': { 'Content-Type': 'application/json;charset=UTF-8' } });\r\n            console.log(res);\r\n        return res.data;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об игре\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID игры  \r\n * @returns {object} Информация об игре\r\n */\r\nexport async function getUserInfo(token, userID) {\r\n    let data;\r\n    try{\r\n        if (token){\r\n            var AuthStr = 'Bearer ' + token;\r\n            const res = await axios.get(USER_INFO_URL + userID + \"/\", { 'headers': { 'Authorization': AuthStr } });\r\n            data = res.data;\r\n        }else{\r\n            const res = await axios.get(USER_INFO_URL + userID + \"/\", axiosConfig);\r\n            data = res.data;\r\n        }\r\n        return data;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса пользовтеля (добавить в друзья и тд)\r\n * @param {string} token Токен доступа\r\n * @param {boolean} is_following Статус фильма\r\n * @param {string} userID ID пользовтеля\r\n */\r\nexport async function setUserStatus(token, is_following, userID){\r\n    try{\r\n        var AuthStr = 'Bearer ' + token;\r\n        const res = await axios.put(USER_INFO_URL + userID + \"/follow/\", \r\n            is_following, { headers: { 'Authorization': AuthStr } });\r\n        console.log(res); \r\n        \r\n        if (res.status === 204 || res.status === 200 || res.status === 201)\r\n            return res.data;\r\n        else return null;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {string} page страница \r\n * @param {int} resultsOnPage количество результатов на странице \r\n */\r\nexport async function getUserLog(token, userID, page, resultsOnPage) {\r\n    let data;\r\n    try{\r\n        if (token){\r\n            var AuthStr = 'Bearer ' + token;\r\n            const res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params : { page: page, page_size: resultsOnPage } }, { 'headers': { 'Authorization': AuthStr } });\r\n            data = res.data;\r\n        }else{\r\n            const res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params : { page: page, page_size: resultsOnPage } }, axiosConfig);\r\n            data = res.data;\r\n        }\r\n        return data;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог друзей пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {int} page страница\r\n * @param {int} resultsOnPage количество результатов на странице \r\n */\r\nexport async function getUserFriendsLog(token, userID, page, resultsOnPage) {\r\n    let data;\r\n    try{\r\n        if (token){\r\n            var AuthStr = 'Bearer ' + token;\r\n            const res = await axios.get(USER_INFO_URL + userID + \"/friends_log/\", { params : { page: page, page_size: resultsOnPage } }, { 'headers': { 'Authorization': AuthStr } });\r\n            data = res.data;\r\n        }else{\r\n            const res = await axios.get(USER_INFO_URL + userID + \"/friends_log/\", { params : { page: page, page_size: resultsOnPage } }, axiosConfig);\r\n            data = res.data;\r\n        }\r\n        return data;\r\n    }catch(e){\r\n        console.log(\"AXIOS ERROR: \", e);\r\n        return null;\r\n    }\r\n}","import * as actionTypes from './actionTypes';\r\nimport * as selectors from './reducers';\r\nimport {getToken, updateToken, registration, confirmation} from \"../services/jwtAuth\";\r\nimport {TOKEN_LIFETIME} from \"../settings\";\r\nimport * as Requests from \"../services/requests\";\r\nimport { toast } from \"react-toastify\";\r\nimport jwt_decode from 'jwt-decode';\r\n\r\nexport function tryAuth(login, password) {\r\n    return async(dispatch) => {\r\n        dispatch({\r\n            type: actionTypes.AUTH_ERROR,\r\n            error: false \r\n        });\r\n\r\n      try {\r\n        const res = await getToken(login, password);\r\n        if (res !== null){\r\n            localStorage.setItem('refreshToken', res.refreshToken);\r\n            localStorage.setItem('token', res.token);\r\n            localStorage.setItem('tokenTime', Date.now());\r\n            dispatch({\r\n                type: actionTypes.SET_AUTH,\r\n                auth: { loggedIn: true }, \r\n            });\r\n            dispatch({\r\n                type: actionTypes.SET_USER,\r\n                user: res.user, \r\n            });\r\n            dispatch({\r\n                type: actionTypes.SET_LOGINFORM,\r\n                isOpen: false \r\n            });\r\n        }else{\r\n            dispatch({\r\n                type: actionTypes.AUTH_ERROR,\r\n                error: true \r\n            });\r\n        }\r\n            \r\n      }catch (error) {\r\n        console.error(error);\r\n        dispatch({\r\n            type: actionTypes.AUTH_ERROR,\r\n            error: true \r\n        });\r\n      }\r\n    };\r\n}\r\n\r\nexport function checkAuthorization(){\r\n    return async(dispatch) => {\r\n        if (localStorage.getItem('token') === null | Date.now() - localStorage.getItem('tokenTime') > TOKEN_LIFETIME){\r\n            const res = await updateToken(localStorage.getItem(\"refreshToken\"));\r\n            if (res !== null){\r\n                dispatch({\r\n                    type: actionTypes.SET_AUTH,\r\n                    auth: { loggedIn: true }, \r\n                });\r\n                dispatch({\r\n                    type: actionTypes.SET_USER,\r\n                    user: res.user, \r\n                });\r\n                localStorage.setItem('token', res.token);\r\n                localStorage.setItem('tokenTime', Date.now());\r\n                return true;\r\n            }else{\r\n                //toast.warn(\"Произошла ошибка авторизации. Зайдите ещё раз\");\r\n                dispatch(resetAuthorization());\r\n                return false;\r\n            } \r\n        }else{\r\n            let userData = jwt_decode(localStorage.getItem('token'));\r\n            let user = {username: userData.username, id: userData.user_id, email: userData.email};\r\n            dispatch({\r\n                type: actionTypes.SET_USER,\r\n                user: user, \r\n            });\r\n            dispatch({\r\n                type: actionTypes.SET_AUTH,\r\n                auth: { loggedIn: true }, \r\n            });\r\n            return true;\r\n        }\r\n            \r\n    }\r\n}\r\n\r\nexport function resetAuthorization(){\r\n    return async(dispatch) => {\r\n        localStorage.removeItem('refreshToken');\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('tokenTime');\r\n        dispatch({\r\n            type: actionTypes.SET_AUTH,\r\n            auth: { loggedIn: false }, \r\n        });\r\n        dispatch({\r\n            type: actionTypes.SET_USER,\r\n            user: { username:\"\", id: null, email:\"\" }, \r\n        });\r\n    }\r\n}\r\n\r\nexport function registrationRequest(username, email, password){\r\n    return async(dispatch) => {\r\n        registration(username, email, password).then((result) => {\r\n            console.log(result);\r\n            if (result.status !== 400){\r\n                dispatch({\r\n                    type: actionTypes.SET_USER,\r\n                    user: { login: result.username, email: result.email }, \r\n                });\r\n                dispatch({\r\n                    type: actionTypes.REGISTRATE_ERROR,\r\n                    error: false \r\n                });\r\n            }\r\n            else{\r\n                for (let error in result.data)\r\n                    toast.error(result.data[error][0]);\r\n                   \r\n                dispatch({\r\n                    type: actionTypes.REGISTRATE_ERROR,\r\n                    error: true \r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function confirmEmailRequest(uid64, token){\r\n    return async() => {\r\n        confirmation(uid64, token).then((result) => {\r\n            console.log(result);\r\n            if (result.status !== 400){\r\n                toast.success(\"Почта подтверждена!\");\r\n            }\r\n            else{\r\n                toast.error(result.data);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function requestGame(id){\r\n    return async(dispatch) => {\r\n        dispatch({\r\n            type: actionTypes.SET_IS_LOADING_CONTENT_GAME,\r\n            isLoading: true\r\n        });\r\n        Requests.getGame(localStorage.getItem('token'), id).then((result) => {\r\n            if (result != null){\r\n                dispatch({\r\n                    type: actionTypes.SET_CONTENT_GAME,\r\n                    game: result, \r\n                });\r\n                dispatch({\r\n                    type: actionTypes.SET_IS_LOADING_CONTENT_GAME,\r\n                    isLoading: false\r\n                });\r\n            }\r\n            else{\r\n                toast.error(\"Игра не найдена!\");\r\n                dispatch({\r\n                    type: actionTypes.GAME_REQUEST_ERROR,\r\n                    error: true \r\n                });\r\n                dispatch({\r\n                    type: actionTypes.SET_IS_LOADING_CONTENT_GAME,\r\n                    isLoading: false\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function requestMovie(id){\r\n    return async(dispatch) => {\r\n        dispatch({\r\n            type: actionTypes.SET_IS_LOADING_CONTENT_MOVIE,\r\n            isLoading: true\r\n        });\r\n        Requests.getMovie(localStorage.getItem('token'), id).then((result) => {\r\n            console.log(result);\r\n            if (result != null){\r\n                dispatch({\r\n                    type: actionTypes.SET_CONTENT_MOVIE,\r\n                    movie: result, \r\n                });\r\n                dispatch({\r\n                    type: actionTypes.SET_IS_LOADING_CONTENT_MOVIE,\r\n                    isLoading: false\r\n                });\r\n            }\r\n            else{\r\n                toast.error(\"Фильм не найден!\");\r\n                dispatch({\r\n                    type: actionTypes.MOVIE_REQUEST_ERROR,\r\n                    error: true \r\n                });\r\n                dispatch({\r\n                    type: actionTypes.SET_IS_LOADING_CONTENT_MOVIE,\r\n                    isLoading: false\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function setGameStatus(user_info){\r\n    return async(dispatch, getState) => {\r\n        if (await dispatch(checkAuthorization())){\r\n            Requests.setGameStatus(localStorage.getItem('token'), selectors.getContentGame(getState()).rawg.slug, user_info).then((result) => {\r\n                if (!result){\r\n                    toast.error(\"Ошибка обновления статуса\")\r\n                }\r\n                else{\r\n                    dispatch({\r\n                        type: actionTypes.SET_CONTENT_GAME_USERINFO,\r\n                        user_info: result\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n/*export function patchGameStatus(user_info){\r\n    return async(dispatch, getState) => {\r\n        if (await dispatch(checkAuthorization())){\r\n            Requests.patchGameStatus(localStorage.getItem('token'), selectors.getContentGame(getState()).rawg.slug, user_info).then((result) => {\r\n                console.log(result)\r\n                if (!result){\r\n                    toast.error(\"Ошибка обновления статуса\")\r\n                }\r\n                else{\r\n                    dispatch({\r\n                        type: actionTypes.SET_CONTENT_GAME_USERINFO,\r\n                        user_info: result\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n}*/\r\n\r\nexport function requestUserPageContent(username){\r\n    return async(dispatch) => {\r\n        dispatch({\r\n            type: actionTypes.SET_IS_LOADING_USER_PAGE_CONTENT,\r\n            isLoading: true\r\n        });\r\n        Requests.getUserInfo(localStorage.getItem('token'), username).then((result) => {\r\n            if (result != null){\r\n                dispatch({\r\n                    type: actionTypes.SET_USER_PAGE_CONTENT,\r\n                    content: result, \r\n                });\r\n                dispatch({\r\n                    type: actionTypes.SET_IS_LOADING_USER_PAGE_CONTENT,\r\n                    isLoading: false\r\n                });\r\n            }\r\n            else{\r\n                toast.error(\"Профиль не найден!\");\r\n                dispatch({\r\n                    type: actionTypes.USER_PAGE_ERROR,\r\n                    error: true \r\n                });\r\n                dispatch({\r\n                    type: actionTypes.SET_IS_LOADING_USER_PAGE_CONTENT,\r\n                    isLoading: false\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function requestUserPageLogs(userID, page, resultsOnPage){\r\n    return async(dispatch) => {\r\n        dispatch({\r\n            type: actionTypes.SET_IS_LOADING_USER_PAGE_LOGS,\r\n            isLoading: true\r\n        });\r\n        Requests.getUserLog(localStorage.getItem('token'), userID, page, resultsOnPage).then((result) => {\r\n            if (result != null){\r\n                dispatch({\r\n                    type: actionTypes.SET_USER_PAGE_LOGs,\r\n                    logs: result, \r\n                });\r\n                dispatch({\r\n                    type: actionTypes.SET_IS_LOADING_USER_PAGE_LOGS,\r\n                    isLoading: false\r\n                });\r\n            }\r\n            else{\r\n                toast.error(\"Ошибка загрузки логов!\");\r\n                dispatch({\r\n                    type: actionTypes.SET_IS_LOADING_USER_PAGE_LOGS,\r\n                    isLoading: false\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function requestUserPageFriendsLogs(userID, page, resultsOnPage){\r\n    return async(dispatch) => {\r\n        dispatch({\r\n            type: actionTypes.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS,\r\n            isLoading: true\r\n        });\r\n        Requests.getUserFriendsLog(localStorage.getItem('token'), userID, page, resultsOnPage).then((result) => {\r\n            if (result != null){\r\n                dispatch({\r\n                    type: actionTypes.SET_USER_PAGE_FRIENDS_LOGS,\r\n                    logs: result, \r\n                });\r\n                dispatch({\r\n                    type: actionTypes.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS,\r\n                    isLoading: false\r\n                });\r\n            }\r\n            else{\r\n                toast.error(\"Ошибка загрузки логов!\");\r\n                dispatch({\r\n                    type: actionTypes.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS,\r\n                    isLoading: false\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function searchGames(query, page){\r\n    return async(dispatch) => {\r\n        dispatch({\r\n            type: actionTypes.SET_IS_LOADING_SEARCH_GAMES,\r\n            isLoading: true\r\n        });\r\n        Requests.searchGames(query, page).then((result) => {\r\n            if (!result){\r\n                toast.error(\"Ошибка поиска\")\r\n            }\r\n            else{\r\n                dispatch({\r\n                    type: actionTypes.SET_SEARCH_CONTENT_GAMES,\r\n                    games: result, \r\n                });\r\n            }\r\n            dispatch({\r\n                type: actionTypes.SET_IS_LOADING_SEARCH_GAMES,\r\n                isLoading: false\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport function searchMovies(query, page){\r\n    return async(dispatch) => {\r\n        dispatch({\r\n            type: actionTypes.SET_IS_LOADING_SEARCH_MOVIES,\r\n            isLoading: true\r\n        });\r\n        Requests.searchMovies(query, page).then((result) => {\r\n            if (!result){\r\n                toast.error(\"Ошибка поиска\")\r\n            }\r\n            else{\r\n                dispatch({\r\n                    type: actionTypes.SET_SEARCH_CONTENT_MOVIES,\r\n                    movies: result.results, \r\n                });\r\n            }\r\n            dispatch({\r\n                type: actionTypes.SET_IS_LOADING_SEARCH_MOVIES,\r\n                isLoading: false\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport function setMovieStatus(user_info){\r\n    return async(dispatch, getState) => {\r\n        if (await dispatch(checkAuthorization())){\r\n            Requests.setMovieStatus(localStorage.getItem('token'), selectors.getContentMovie(getState()).tmdb.id, user_info).then((result) => {\r\n                if (!result){\r\n                    toast.error(\"Ошибка обновления статуса\")\r\n                }\r\n                else{\r\n                    dispatch({\r\n                        type: actionTypes.SET_CONTENT_MOVIE_USERINFO,\r\n                        user_info: result\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport function searchUsers(query){\r\n    return async(dispatch) => {\r\n        dispatch({\r\n            type: actionTypes.SET_IS_LOADING_SEARCH_USERS,\r\n            isLoading: true\r\n        });\r\n        Requests.searchUsers(query).then((result) => {\r\n            if (!result){\r\n                toast.error(\"Ошибка поиска\")\r\n            }\r\n            else{\r\n                dispatch({\r\n                    type: actionTypes.SET_SEARCH_CONTENT_USERS,\r\n                    users: result, \r\n                });\r\n            }\r\n            dispatch({\r\n                type: actionTypes.SET_IS_LOADING_SEARCH_USERS,\r\n                isLoading: false\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport function setUserStatus(is_following, userID){\r\n    return async(dispatch) => {\r\n        if (await dispatch(checkAuthorization())){\r\n            Requests.setUserStatus(localStorage.getItem('token'), is_following, userID).then((result) => {\r\n                if (!result){\r\n                    toast.error(\"Ошибка обновления статуса\")\r\n                }\r\n                else{\r\n                    dispatch({\r\n                        type: actionTypes.SET_USER_PAGE_FOLLOWING,\r\n                        is_following: result.is_following\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport function setUser(user) {\r\n    return({ type: actionTypes.SET_USER, user: user });\r\n}\r\n\r\nexport function openLoginForm() {\r\n    return({ type: actionTypes.SET_LOGINFORM, isOpen: true  });\r\n}\r\n\r\nexport function closeLoginForm() {\r\n    return({ type: actionTypes.SET_LOGINFORM, isOpen: false  });\r\n}\r\n\r\nexport function openRegistrateForm() {\r\n    return({ type: actionTypes.SET_REGISTRATEFORM, isOpen: true  });\r\n}\r\n\r\nexport function closeRegistrateForm() {\r\n    return({ type: actionTypes.SET_REGISTRATEFORM, isOpen: false  });\r\n}","export const SET_USER = 'SET_USER';\r\nexport const SET_AUTH = \"SET_AUTH\";\r\nexport const SET_LOGINFORM = \"SET_LOGINFORM\";\r\nexport const SET_REGISTRATEFORM = \"SET_REGISTRATEFORM\";\r\nexport const SET_CONTENT_GAME = \"SET_CONTENT_GAME\";\r\nexport const SET_CONTENT_MOVIE = \"SET_CONTENT_MOVIE\";\r\nexport const AUTH_ERROR = \"AUTH_ERROR\";\r\nexport const REGISTRATE_ERROR = \"REGISTRATE_ERROR\";\r\nexport const GAME_REQUEST_ERROR = \"GAME_REQUEST_ERROR\";\r\nexport const MOVIE_REQUEST_ERROR = \"MOVIE_REQUEST_ERROR\";\r\nexport const USER_PAGE_ERROR = \"USER_PAGE_ERROR\";\r\nexport const SET_CONTENT_GAME_USERINFO = \"SET_CONTENT_GAME_USERINFO\";\r\nexport const SET_CONTENT_GAME_USERINFO_STATUS = \"SET_CONTENT_GAME_USERINFO_STATUS\";\r\nexport const SET_CONTENT_GAME_USERINFO_SCORE = \"SET_CONTENT_GAME_USERINFO_SCORE\";\r\nexport const SET_CONTENT_GAME_USERINFO_REVIEW = \"SET_CONTENT_GAME_USERINFO_REVIEW\";\r\nexport const SET_CONTENT_MOVIE_USERINFO = \"SET_CONTENT_MOVIE_USERINFO\";\r\nexport const SET_SEARCH_CONTENT_GAMES = \"SET_SEARCH_CONTENT_GAMES\";\r\nexport const SET_SEARCH_CONTENT_MOVIES = \"SET_SEARCH_CONTENT_MOVIES\";\r\nexport const SET_SEARCH_CONTENT_USERS = \"SET_SEARCH_CONTENT_USERS\";\r\nexport const SET_IS_LOADING_CONTENT_GAME = \"SET_IS_LOADING_CONTENT_GAME\";\r\nexport const SET_IS_LOADING_CONTENT_MOVIE = \"SET_IS_LOADING_CONTENT_MOVIE\";\r\nexport const SET_IS_LOADING_SEARCH_GAMES = \"SET_IS_LOADING_SEARCH_GAMES\";\r\nexport const SET_IS_LOADING_SEARCH_MOVIES = \"SET_IS_LOADING_SEARCH_MOVIES\";\r\nexport const SET_IS_LOADING_SEARCH_USERS = \"SET_IS_LOADING_SEARCH_USERS\";\r\nexport const SET_IS_LOADING_USER_PAGE_CONTENT = \"SET_IS_LOADING_USER_PAGE_CONTENT\";\r\nexport const SET_IS_LOADING_USER_PAGE_LOGS = \"SET_IS_LOADING_USER_PAGE_LOGS\";\r\nexport const SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS = \"SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS\";\r\nexport const SET_USER_PAGE_CONTENT = \"SET_USER_PAGE_CONTENT\";\r\nexport const SET_USER_PAGE_FOLLOWING = \"SET_USER_PAGE_FOLLOWING\";\r\nexport const SET_USER_PAGE_LOGs = \"SET_USER_PAGE_LOGs\";\r\nexport const SET_USER_PAGE_FRIENDS_LOGS = \"SET_USER_PAGE_FRIENDS_LOGS\";\r\n","import React, {useState, useEffect} from \"react\";\r\nimport './style.css';\r\n\r\nfunction StatusButtonGroup( {statuses, activeColor, onChangeStatus, userStatus} ) {\r\n    const [activeStatus, setActiveStatus] = useState('');\r\n\r\n    useEffect(() =>{\r\n            setActiveStatus(userStatus?userStatus:statuses[0]);\r\n        },\r\n        [statuses, userStatus]\r\n    );\r\n\r\n    return(\r\n        <div>\r\n            {statuses.map((status) => <button className={'contentStatuses'} \r\n                                            key={status}\r\n                                            style={{backgroundColor: (activeStatus === status?activeColor:'#000000')}}\r\n                                            onClick={()=>{ \r\n                                                if (onChangeStatus(status)){\r\n                                                    setActiveStatus(status);\r\n                                                }\r\n                                            }}>\r\n                                            {status}\r\n                                        </button>) }\r\n        </div>  \r\n    )\r\n}\r\n\r\nexport default StatusButtonGroup;\r\n","import React, {\r\n    useEffect,\r\n    useState\r\n} from \"react\";\r\nimport {\r\n    useParams\r\n} from \"react-router-dom\";\r\nimport {\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBContainer,\r\n    MDBIcon,\r\n    MDBInput\r\n} from \"mdbreact\";\r\nimport LoadingOverlay from 'react-loading-overlay';\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from 'react-redux'; \r\nimport * as selectors from '../store/reducers';\r\nimport * as actions from '../store/actions';\r\nimport StatusButtonGroup from \"./Common/StatusButtonGroup\";\r\n\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction GamePage ( {requestGame, game, requestError, loggedIn, openLoginForm, setGameStatus, gameIsLoading\r\n    } ) {\r\n    let { id } = useParams();\r\n    const [genres, setGenres] = useState(\"\");\r\n    const [metascoreBlock, setMetascoreBlock] = useState(\"\");\r\n    const [review, setReview] = useState(\"\");\r\n    const [spentTime, setSpentTime] = useState(0);\r\n    const [developers, setDevelopers] = useState(\"\");\r\n    const [date, setDate] = useState(\"\");\r\n    const [hltbInfo, setHtlbInfo] = useState({gameplay_main_extra: -1, gameplay_main: -1, gameplay_comletionist: -1});\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            requestGame(id);\r\n        },\r\n        // eslint-disable-next-line\r\n\t\t[id, requestGame, loggedIn]\r\n    );\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            if (game.rawg.genres){\r\n                let newGenres = \"\"\r\n                for (let i = 0; i < game.rawg.genres.length; i++){\r\n                    newGenres += game.rawg.genres[i].name;\r\n                    if (i !== game.rawg.genres.length - 1)\r\n                        newGenres += \", \";\r\n                }\r\n                 setGenres(newGenres);   \r\n            }\r\n\r\n            if (game.rawg.metacritic){\r\n                setMetascoreBlock(\r\n                    <div>\r\n                        <div className=\"metacritic\">\r\n                            <p>{game.rawg.metacritic}</p>\r\n                        </div>\r\n                        <p className=\"metacriticText\">Metascore</p>\r\n                    </div>\r\n                );\r\n            }else{\r\n                setMetascoreBlock(\"\");\r\n            }\r\n\r\n            if (game.hltb){\r\n                setHtlbInfo(game.hltb);\r\n            }else if (game.rawg.playtime){\r\n                setHtlbInfo({gameplay_main_extra: game.rawg.playtime, gameplay_main: -1, gameplay_completionist: -1});\r\n            }else{\r\n                setHtlbInfo({gameplay_main_extra: -1, gameplay_main: -1, gameplay_completionist: -1});\r\n            }\r\n\r\n            if (game.user_info){\r\n                setReview(game.user_info.review);\r\n                setSpentTime(game.user_info.spent_time);\r\n            }\r\n\r\n            if (game.rawg.developers){\r\n                let newDevelopers = \"\"\r\n                for (let i = 0; i < game.rawg.developers.length; i++){\r\n                    newDevelopers += game.rawg.developers[i].name;\r\n                    if (i !== game.rawg.developers.length - 1)\r\n                    newDevelopers += \", \";\r\n                }\r\n                setDevelopers(newDevelopers);   \r\n            }\r\n\r\n            if (game.rawg.released){\r\n                let mas = game.rawg.released.split(\"-\");\r\n                let newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n                setDate(newDate);\r\n            }else\r\n                setDate(\"\");\r\n\r\n            document.title = game.rawg.name;\r\n\t\t},\r\n\t\t[game]\r\n    );\r\n    \r\n    return (\r\n            <div>\r\n\t\t\t<div className=\"bg\" style={{backgroundImage: `url(${game.rawg.background_image_additional?game.rawg.background_image_additional:game.rawg.background_image})`}}/>\r\n                <LoadingOverlay\r\n                    active={gameIsLoading}\r\n                    spinner\r\n                    text='Загрузка...'\r\n                    >\r\n                <MDBContainer>\r\n                    <MDBRow>\r\n                        <MDBCol md=\"0.5\"></MDBCol>\r\n                        <MDBCol className=\"gameContentPage\"> \r\n                            <MDBContainer>\r\n                                <MDBRow className=\"gameContentHeader rounded-top\" >\r\n                                    <MDBCol size=\"5\">\r\n                                        <img src={game.rawg.background_image} className=\"img-fluid\" alt=\"\"/>\r\n                                    </MDBCol>\r\n                                    <MDBCol size=\"6\">\r\n                                        <h1>{game.rawg.name}</h1>\r\n                                        <p style={{marginBottom: \"2px\"}}>Разработчики: {developers}</p>\r\n                                        <p style={{marginBottom: \"2px\"}}>Дата релиза: {date}</p>\r\n                                        <p style={{marginBottom: \"2px\"}}>Жанр: {genres}</p>\r\n                                        <p style={{marginBottom: \"4px\", display: \"inline\"}} >Время прохождения: </p>\r\n                                            <div hidden={hltbInfo.gameplay_main < 0} style={{display: \"inline\"}}>\r\n                                                <MDBIcon far icon=\"clock\" className=\"light-green-text\" title={\"Главный сюжет\"}/><span className=\"hs\"/>{hltbInfo.gameplay_main} {hltbInfo.gameplay_main_unit}<span className=\"hs\"/>\r\n                                            </div> <p style={{display: \"inline\"}} > </p>\r\n                                            <div hidden={hltbInfo.gameplay_main_extra < 0} style={{display: \"inline\"}}>\r\n                                                <MDBIcon far icon=\"clock\" className=\"yellow-text\" title={\"Главный сюжет + побочные задания\"}/><span className=\"hs\"/>{hltbInfo.gameplay_main_extra} {hltbInfo.gameplay_main_extra_unit}<span className=\"hs\"/> \r\n                                            </div> <p style={{display: \"inline\"}} > </p>\r\n                                            <div hidden={hltbInfo.gameplay_completionist < 0} style={{display: \"inline\"}}>\r\n                                                <MDBIcon far icon=\"clock\" className=\"red-text\" title={\"Полное прохождение\"}/><span className=\"hs\"/>{hltbInfo.gameplay_completionist} {hltbInfo.gameplay_completionist_unit}\r\n                                            </div>\r\n                                        <br/>\r\n                                        <Rating stop={10}\r\n                                            emptySymbol={<MDBIcon far icon=\"star\" size=\"1x\" style={{fontSize: \"25px\"}}/>}\r\n                                            fullSymbol={[1,2,3,4,5,6,7,8,9,10].map(n => <MDBIcon icon=\"star\" size=\"1x\" style={{fontSize: \"25px\"}} title={n}/>)}\r\n                                            initialRating={game.user_info?game.user_info.score:0}\r\n                                            readonly={!loggedIn | (!game.user_info)}\r\n                                            onChange={(score) => {\r\n                                                if (!loggedIn){\r\n                                                    openLoginForm();\r\n                                                }else{\r\n                                                    setGameStatus({score: score });\r\n                                                }}\r\n                                            }\r\n                                            style={{marginTop: \"20px\", marginBottom: \"10px\"}}\r\n                                        /> <br/>\r\n                                        <StatusButtonGroup\r\n                                            statuses={['Не играл', 'Буду играть', 'Играю', 'Дропнул', 'Прошел']}\r\n                                            activeColor='#4527a0' \r\n                                            userStatus={game.user_info?game.user_info.status:'Не играл'}\r\n                                            onChangeStatus={(status) => {\r\n                                                if (!loggedIn){\r\n                                                    openLoginForm();\r\n                                                }else{\r\n                                                   setGameStatus({ status: status });\r\n                                                }\r\n                                            }}\r\n                                            />\r\n                                    </MDBCol>\r\n                                    <MDBCol size=\"1\">\r\n                                        { metascoreBlock }\r\n                                    </MDBCol>\r\n                                </MDBRow> \r\n                                <MDBRow className=\"gameContentBody\"> \r\n                                    <MDBCol >\r\n                                        <h3 style={{paddingTop: \"15px\"}}>Описание</h3>\r\n                                        <div dangerouslySetInnerHTML={{__html: game.rawg.description}} />\r\n                                    </MDBCol>\r\n                                </MDBRow>\r\n                                <MDBRow>\r\n                                <MDBCol size=\"6\" style={{paddingLeft: \"20px\"}}>\r\n                                    <h3 style={{paddingTop: \"10px\"}}>Отзывы</h3>\r\n                                        \r\n                                        <MDBInput \r\n                                            type=\"textarea\" \r\n                                            id=\"reviewInput\"\r\n                                            label=\"Ваш отзыв\" \r\n                                            value={review}\r\n                                            onChange={(event) =>setReview(event.target.value)}\r\n                                            outline\r\n                                        />\r\n                                        <MDBInput\r\n                                            type=\"number\"\r\n                                            id=\"spentTimeInput\"\r\n                                            label=\"Время прохождения (часы)\" \r\n                                            value={spentTime}\r\n                                            onChange={(event) =>setSpentTime(event.target.value)}\r\n                                        />\r\n                                        <button \r\n                                            className={'savePreviewButton'} \r\n                                            disabled={!loggedIn | (!game.user_info)}\r\n                                            onClick={() => {\r\n                                                    if (!loggedIn){\r\n                                                        openLoginForm();\r\n                                                    }else{\r\n                                                        setGameStatus({   review: document.getElementById('reviewInput').value, spent_time: document.getElementById('spentTimeInput').value });\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                            >\r\n                                            Сохранить\r\n                                        </button>\r\n                                    </MDBCol>\r\n                                </MDBRow>\r\n                            </MDBContainer>\r\n                        </MDBCol>\r\n                        <MDBCol md=\"0.5\"></MDBCol>\r\n                    </MDBRow>\r\n                 </MDBContainer>\r\n                 </LoadingOverlay>\r\n\t\t\t</div>\r\n    \t);\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    loggedIn: selectors.getLoggedIn(state),\r\n    requestError: selectors.getGameRequestError(state),\r\n    game: selectors.getContentGame(state),\r\n    gameIsLoading: selectors.getIsLoadingContentGame(state)\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestGame: (id) => {\r\n            dispatch(actions.requestGame(id));\r\n        },\r\n        openLoginForm: () => {\r\n            dispatch(actions.openLoginForm());\r\n        },\r\n        /*patchGameStatus: (user_info) => {\r\n            dispatch(actions.patchGameStatus(user_info));\r\n        },*/\r\n        setGameStatus: (status) => {\r\n            dispatch(actions.setGameStatus(status));\r\n        }\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GamePage);\r\n","import React, {\r\n    useEffect,\r\n    useState\r\n} from \"react\";\r\nimport {\r\n    useParams\r\n} from \"react-router-dom\";\r\nimport {\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBContainer,\r\n    MDBIcon,\r\n    MDBInput\r\n} from \"mdbreact\";\r\nimport LoadingOverlay from 'react-loading-overlay';\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from 'react-redux'; \r\nimport * as selectors from '../store/reducers';\r\nimport * as actions from '../store/actions';\r\nimport StatusButtonGroup from \"./Common/StatusButtonGroup\";\r\n\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction MoviePage ( {requestMovie, movie, loggedIn, movieIsLoading, setMovieStatus, openLoginForm\r\n    } ) {\r\n    let { id } = useParams();\r\n    const [metascoreBlock, setMetascoreBlock] = useState(\"\");\r\n    const [genres, setGenres] = useState(\"\");\r\n    const [companies, setCompanies] = useState(\"\");\r\n    const [cast, setCast] = useState(\"\");\r\n    const [director, setDirector] = useState(\"\");\r\n    const [review, setReview] = useState(\"\");\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            requestMovie(id);\r\n        },\r\n        // eslint-disable-next-line\r\n\t\t[id, requestMovie, loggedIn]\r\n    );\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            if (movie.tmdb.vote_average){\r\n                setMetascoreBlock(\r\n                    <div>\r\n                        <div className=\"metacritic\">\r\n                            <p>{movie.tmdb.vote_average * 10}</p>\r\n                        </div>\r\n                        <p className=\"metacriticText\">TMDB score</p>\r\n                    </div>\r\n                );\r\n            }else{\r\n                setMetascoreBlock(\"\");\r\n            }\r\n\r\n            if (movie.tmdb.genres){\r\n                let newGenres = \"\"\r\n                for (let i = 0; i < movie.tmdb.genres.length; i++){\r\n                    newGenres += movie.tmdb.genres[i].name;\r\n                    if (i !== movie.tmdb.genres.length - 1)\r\n                        newGenres += \", \";\r\n                }\r\n                setGenres(newGenres);   \r\n            }\r\n\r\n            if (movie.tmdb.production_companies){\r\n                let newCompanies = \"\"\r\n                for (let i = 0; i < movie.tmdb.production_companies.length; i++){\r\n                    newCompanies += movie.tmdb.production_companies[i].name;\r\n                    if (i !== movie.tmdb.production_companies.length - 1)\r\n                        newCompanies += \", \";\r\n                }\r\n                setCompanies(newCompanies);   \r\n            }\r\n\r\n            if (movie.tmdb.cast){\r\n                let newCast = \"\";\r\n                let length = movie.tmdb.cast.length>5?5:movie.tmdb.cast.length;\r\n                for (let i = 0; i < length; i++){\r\n                    newCast += movie.tmdb.cast[i].name;\r\n                    if (i !== length - 1)\r\n                        newCast += \", \";\r\n                }\r\n                setCast(newCast);   \r\n            }\r\n\r\n            if (movie.tmdb.crew){\r\n                let newDirector = \"\"\r\n                for (let i = 0; i < movie.tmdb.crew.length; i++){\r\n                    if (movie.tmdb.crew[i].job === \"Director\"){\r\n                        newDirector = movie.tmdb.crew[i].name;\r\n                        break;\r\n                    }\r\n                }\r\n                setDirector(newDirector);   \r\n            }\r\n\r\n            if (movie.user_info){\r\n                setReview(movie.user_info.review);\r\n            }\r\n\r\n            document.title = movie.tmdb.title;\r\n\t\t},\r\n\t\t[movie]\r\n    );\r\n    \r\n    return (\r\n            <div>\r\n\t\t\t<div className=\"bg\" style={{backgroundImage: `url(${ 'http://image.tmdb.org/t/p/w1920_and_h800_multi_faces' + movie.tmdb.backdrop_path})`}}/>\r\n                <LoadingOverlay\r\n                    active={movieIsLoading}\r\n                    spinner\r\n                    text='Загрузка...'\r\n                    >\r\n                <MDBContainer>\r\n                    <MDBRow>\r\n                        <MDBCol md=\"0.5\"></MDBCol>\r\n                        <MDBCol className=\"movieContentPage\"> \r\n                            <MDBContainer>\r\n                                <MDBRow className=\"movieContentHeader rounded-top\" >\r\n                                    <MDBCol size=\"5\">\r\n                                        <img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + movie.tmdb.poster_path} className=\"img-fluid\" alt=\"\"/>\r\n                                    </MDBCol>\r\n                                    <MDBCol size=\"6\">\r\n                                        <h1>{movie.tmdb.title}</h1>\r\n                                        <p style={{marginBottom: \"2px\"}}>Дата релиза: {movie.tmdb.release_date}</p>\r\n                                        <p style={{marginBottom: \"2px\"}}>Продолжительность (мин): {movie.tmdb.runtime}</p>\r\n                                        <p style={{marginBottom: \"2px\"}}>Жанр: {genres}</p>\r\n                                        <p style={{marginBottom: \"2px\"}}>Компания: {companies}</p>\r\n                                        <p style={{marginBottom: \"2px\"}}>Слоган: {movie.tmdb.tagline}</p>\r\n                                        <p style={{marginBottom: \"2px\"}}>В ролях: {cast}</p>\r\n                                        <p style={{marginBottom: \"2px\"}}>Режиссер: {director}</p>\r\n                                        <br/>\r\n                                        <Rating stop={10}\r\n                                            emptySymbol={<MDBIcon far icon=\"star\" size=\"1x\" style={{fontSize: \"25px\"}}/>}\r\n                                            fullSymbol={[1,2,3,4,5,6,7,8,9,10].map(n => <MDBIcon icon=\"star\" size=\"1x\" style={{fontSize: \"25px\"}} title={n}/>)}\r\n                                            initialRating={movie.user_info?movie.user_info.score:0}\r\n                                            readonly={!loggedIn | (!movie.user_info)}\r\n                                            onChange={(score) => {\r\n                                                if (!loggedIn){\r\n                                                    openLoginForm();\r\n                                                }else{\r\n                                                    setMovieStatus({score: score });\r\n                                                }}\r\n                                            }\r\n                                        /> <br/>\r\n                                        <StatusButtonGroup loggedIn={loggedIn} \r\n                                            statuses={['Не смотрел', 'Буду смотреть', 'Дропнул', 'Посмотрел']}\r\n                                            activeColor='#4527a0' \r\n                                            userStatus={movie.user_info?movie.user_info.status:'Не смотрел'}\r\n                                            onChangeStatus={(status) => {\r\n                                                if (!loggedIn){\r\n                                                    openLoginForm();\r\n                                                }else{\r\n                                                   setMovieStatus({ status: status });\r\n                                                }\r\n                                            }}/>\r\n                                    </MDBCol>\r\n                                    <MDBCol size=\"1\">\r\n                                        { metascoreBlock }\r\n                                    </MDBCol>\r\n                                </MDBRow> \r\n                                <MDBRow className=\"movieContentBody\"> \r\n                                    <MDBCol >\r\n                                        <h3 style={{paddingTop: \"15px\"}}>Описание</h3>\r\n                                        <div dangerouslySetInnerHTML={{__html: movie.tmdb.overview}} />\r\n                                    </MDBCol>\r\n                                </MDBRow>\r\n                                <MDBCol size=\"6\" style={{paddingLeft: \"20px\"}}>\r\n                                    <h3 style={{paddingTop: \"10px\"}}>Отзывы</h3>\r\n                                        \r\n                                        <MDBInput \r\n                                            type=\"textarea\" \r\n                                            id=\"reviewInput\"\r\n                                            label=\"Ваш отзыв\" \r\n                                            value={review}\r\n                                            onChange={(event) =>setReview(event.target.value)}\r\n                                            outline\r\n                                        />\r\n                                        <button \r\n                                            className={'savePreviewButton'} \r\n                                            disabled={!loggedIn | (!movie.user_info)}\r\n                                            onClick={() => {\r\n                                                    if (!loggedIn){\r\n                                                        openLoginForm();\r\n                                                    }else{\r\n                                                        setMovieStatus({   review: document.getElementById('reviewInput').value });\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                            >\r\n                                            Сохранить\r\n                                        </button>\r\n                                    </MDBCol>\r\n                            </MDBContainer>\r\n                        </MDBCol>\r\n                        <MDBCol md=\"0.5\"></MDBCol>\r\n                    </MDBRow>\r\n                 </MDBContainer>\r\n                 </LoadingOverlay>\r\n\t\t\t</div>\r\n    \t);\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    loggedIn: selectors.getLoggedIn(state),\r\n    requestError: selectors.getGameRequestError(state),\r\n    movie: selectors.getContentMovie(state),\r\n    movieIsLoading: selectors.getIsLoadingContentMovie(state)\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestMovie: (id) => {\r\n            dispatch(actions.requestMovie(id));\r\n        },\r\n        openLoginForm: () => {\r\n            dispatch(actions.openLoginForm());\r\n        },\r\n        setMovieStatus: (status) => {\r\n            dispatch(actions.setMovieStatus(status));\r\n        }\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MoviePage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n    useHistory\r\n  } from \"react-router-dom\";\r\n\r\n\r\nfunction CardGame( {game} ) {\r\n    let history = useHistory();\r\n    const [date, setDate] = useState(\"\");\r\n    const [name, setName] = useState(\"\");\r\n\r\n    useEffect(() =>{\r\n            if (game.released){\r\n                let mas = game.released.split(\"-\");\r\n                let newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n                setDate(newDate);\r\n            }else\r\n                setDate(\"\");\r\n\r\n            if (game.name.length > 55){\r\n                let newName = game.name.substr(0, 55) + \"...\";\r\n                setName(newName);\r\n            }else\r\n                setName(game.name);\r\n        },\r\n        [game]\r\n    );\r\n\r\n    /*const mouseDownHandler = ( event ) => {\r\n        if( event.button === 1 ) {\r\n            console.log(window.location.origin + '/game/' + game.slug );\r\n\r\n        }\r\n      }*/\r\n\r\n    return(\r\n        <div className=\"searchCardGame\" >\r\n            <div className=\"searchCardGameImage\" style={{backgroundImage: `url(${game.background_image})`}}> </div>\r\n            <div className=\"searchCardGameText\">\r\n                <a href={window.location.origin + '/game/' + game.slug} \r\n                    onClick={(e) => { history.push('/game/' + game.slug); e.preventDefault();}}>\r\n                        <h4 >{name}</h4>\r\n                </a>\r\n                <p>{date}</p>\r\n            </div>\r\n        </div> \r\n    )\r\n}\r\n//onMouseDown={mouseDownHandler} \r\n\r\nexport default CardGame;\r\n","import React, { useEffect, useState} from \"react\";\r\nimport {\r\n    useHistory\r\n  } from \"react-router-dom\";\r\n\r\nfunction CardMovie ( {movie} ) {\r\n    let history = useHistory();\r\n\r\n    const [date, setDate] = useState(\"\");\r\n    const [name, setName] = useState(\"\");\r\n\r\n    useEffect(() =>{\r\n            if (movie.release_date){\r\n                let mas = movie.release_date.split(\"-\");\r\n                let newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n                setDate(newDate);\r\n            }else\r\n                setDate(\"\");\r\n\r\n            if (movie.title.length > 55){\r\n                let newName = movie.title.substr(0, 55) + \"...\";\r\n                setName(newName);\r\n            }else\r\n                setName(movie.title);\r\n        },\r\n        [movie]\r\n    );\r\n\r\n    return(\r\n        <div className=\"searchCardMovie\" >\r\n            <div className=\"searchCardMovieImage\" style={{backgroundImage: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + movie.poster_path})`}}> </div>\r\n            <div className=\"searchCardMovieText\">\r\n                <a href={window.location.origin + '/movie/' + movie.id} \r\n                    onClick={(e) => { history.push('/movie/' + movie.id); e.preventDefault();}}>\r\n                        <h4 >{name}</h4>\r\n                </a>\r\n                <p>{date}</p>\r\n            </div>\r\n        </div> \r\n    )\r\n}\r\n\r\nexport default CardMovie;\r\n","import React, { useEffect} from \"react\";\r\nimport {\r\n    useHistory\r\n  } from \"react-router-dom\";\r\n\r\nfunction CardUser ( {user} ) {\r\n    let history = useHistory();\r\n\r\n    useEffect(() =>{\r\n            \r\n        },\r\n        [user]\r\n    );\r\n\r\n    return(\r\n        <div className=\"cardUser\" >\r\n            <div className=\"cardUserImage\" style={{backgroundImage: `url(${'http://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png'})`}}> </div>\r\n            <div className=\"cardUserText\">\r\n                <a href={window.location.origin + '/user/' + user.id} \r\n                    onClick={(e) => { history.push('/user/' + user.id); e.preventDefault();}}>\r\n                        <h4 >{user.username}</h4>\r\n                </a>\r\n            </div>\r\n        </div> \r\n    )\r\n}\r\n\r\nexport default CardUser;\r\n","import React, {useState} from \"react\";\r\nimport './style.css';\r\n\r\nfunction CategoriesTab( {categories, activeColor, onChangeCategory} ) {\r\n    const [activeCategory, setActiveCategory] = useState(categories[0]);\r\n\r\n    return(\r\n        <div>\r\n            {categories.map((category) => <button className={'categoriesTab'} \r\n                                            key={category}\r\n                                            style={{color: (activeCategory === category?activeColor:'#000000')}}\r\n                                            onClick={()=>{ \r\n                                                setActiveCategory(category);\r\n                                                onChangeCategory(category);\r\n                                            }}>\r\n                                            {category}\r\n                                        </button>) }\r\n            <br/>\r\n`           <hr style={{ color: activeColor, backgroundColor: '#6C0AAB', height: 2.5,  borderColor : '#6C0AAB', marginTop: \"-16px\", marginBottom: \"-10px\" }}/>`\r\n        </div>  \r\n    )\r\n}\r\n\r\nexport default CategoriesTab;\r\n","import React, {\r\n    useEffect,\r\n    useState\r\n} from \"react\";\r\nimport {\r\n    useParams,\r\n    useHistory\r\n} from \"react-router-dom\";\r\nimport {\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBContainer,\r\n    MDBIcon,\r\n    MDBFormInline\r\n} from \"mdbreact\";\r\nimport './style.css';\r\n\r\nimport LoadingOverlay from 'react-loading-overlay';\r\n\r\nimport CardGame from './CardGame';\r\nimport CardMovie from './CardMovie';\r\nimport CardUser from '../Common/CardUser';\r\nimport CategoriesTab from '../Common/CategoriesTab';\r\n\r\nimport { connect } from 'react-redux'; \r\nimport * as selectors from '../../store/reducers';\r\nimport * as actions from '../../store/actions';\r\n\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction SearchPage ( { loggedIn, openLoginForm, gamesIsLoading, moviesIsLoading, usersIsLoading, searchGame, games, searchMovie, movies, searchUsers, users } ) {\r\n    let history = useHistory();\r\n    let { query } = useParams();\r\n    const [queryText, setQueryText] = useState(\"\");\r\n    const [gamesCards, setGamesCards] = useState(\"\");\r\n    const [moviesCards, setMoviesCards] = useState(\"\");\r\n    const [usersCards, setUsersCards] = useState(\"\");\r\n\r\n    const [activeCategory, setActiveCategory] = useState(\"Всё\");\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            searchGame(query, 1);\r\n            searchMovie(query, 1);\r\n            searchUsers(query);\r\n            setQueryText(query);\r\n            document.title = 'Поиск';\r\n\t\t},\r\n\t\t[query, searchGame, searchMovie, searchUsers]\r\n    );\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            setGamesCards(<div className=\"searchCardsGroup\">{games.map(game => <CardGame game={game} key={game.id}/>)}</div>);\r\n\t\t},\r\n\t\t[games]\r\n    );\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            setMoviesCards(<div className=\"searchCardsGroup\">{movies.map(movie => <CardMovie movie={movie} key={movie.id}/>)}</div>);\r\n\t\t},\r\n\t\t[movies]\r\n    );\r\n\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            setUsersCards(<div className=\"searchCardsGroup\">{users.map(user => <CardUser user={user} key={user.username}/>)}</div>);\r\n\t\t},\r\n\t\t[users]\r\n    );\r\n    \r\n    return (\r\n            <div>\r\n\t\t\t<div className=\"bg searchBG\"/> \r\n                <MDBContainer>\r\n                    <MDBRow>\r\n                        <MDBCol md=\"0.5\"></MDBCol>\r\n                        <MDBCol className=\"searchPage\"> \r\n                            <h1>Поиск</h1>\r\n                            <MDBFormInline className=\"md-form\"\r\n                                onSubmit={ (event) => {event.preventDefault(); history.push('/search/' + document.getElementById('searchInput2').value); return false; }}>\r\n                                <MDBIcon icon=\"search\" />\r\n                                <input \r\n                                    className=\"form-control form-control-sm ml-3 w-50\" \r\n                                    type=\"text\" \r\n                                    placeholder=\"Найти\" \r\n                                    aria-label=\"Search\" \r\n                                    id=\"searchInput2\" \r\n                                    value={queryText} \r\n                                    onChange={(event) =>setQueryText(event.target.value)}/>\r\n                            </MDBFormInline>\r\n\r\n                            <h1>Результаты поиска</h1>\r\n                                <CategoriesTab\r\n                                    categories={['Всё', 'Игры', 'Фильмы', 'Пользователи']}\r\n                                    activeColor='#4527a0' \r\n                                    onChangeCategory={(category) => {\r\n                                        setActiveCategory(category);\r\n                                    }}/>\r\n\r\n                                <LoadingOverlay\r\n                                    active={gamesIsLoading}\r\n                                    spinner\r\n                                    text='Ищем игры...'\r\n                                    >\r\n                                    <div hidden={activeCategory!=='Всё' && activeCategory!=='Игры'}>\r\n                                        <h3>Игры</h3>\r\n                                        {gamesCards}\r\n                                    </div>\r\n                                </LoadingOverlay>\r\n\r\n                                <LoadingOverlay\r\n                                    active={moviesIsLoading}\r\n                                    spinner\r\n                                    text='Ищем фильмы...'\r\n                                    >\r\n                                    <div hidden={activeCategory!=='Всё' && activeCategory!=='Фильмы'}>\r\n                                        <h3>Фильмы</h3>\r\n                                        {moviesCards}\r\n                                    </div>       \r\n                                </LoadingOverlay>\r\n                                \r\n                                <LoadingOverlay\r\n                                    active={usersIsLoading}\r\n                                    spinner\r\n                                    text='Ищем пользователей...'\r\n                                    >\r\n                                    <div hidden={activeCategory!=='Всё' && activeCategory!=='Пользователи'}>\r\n                                        <h3>Пользователи</h3>\r\n                                        {usersCards}\r\n                                    </div>    \r\n                                </LoadingOverlay>\r\n                                \r\n                        </MDBCol>\r\n                        <MDBCol md=\"0.5\"></MDBCol>\r\n                    </MDBRow>\r\n                 </MDBContainer>\r\n\t\t\t</div>\r\n    \t);\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    loggedIn: selectors.getLoggedIn(state),\r\n    gamesIsLoading: selectors.getIsLoadingSearchGames(state),\r\n    moviesIsLoading: selectors.getIsLoadingSearchMovies(state),\r\n    usersIsLoading: selectors.getIsLoadingSearchUsers(state),\r\n    games: selectors.getSearchContentGames(state),\r\n    movies: selectors.getSearchContentMovies(state),\r\n    users: selectors.getSearchContentUsers(state)\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n        openLoginForm: () => {\r\n            dispatch(actions.openLoginForm());\r\n        },\r\n        searchGame: (query, page) => {\r\n            dispatch(actions.searchGames(query, page));\r\n        },\r\n        searchMovie: (query, page) => {\r\n            dispatch(actions.searchMovies(query, page));\r\n        },\r\n        searchUsers: (query) => {\r\n            dispatch(actions.searchUsers(query));\r\n        }\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchPage);\r\n","import React from \"react\";\r\nimport {\r\n\tMDBModal, \r\n\tMDBModalBody,\r\n\tMDBContainer,\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBBtn\r\n} from \"mdbreact\";\r\nimport { connect } from 'react-redux'; \r\nimport * as actions from '../store/actions';\r\nimport * as selectors from '../store/reducers';\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается \r\n */\r\nfunction LoginForm( {isOpen, closeForm, logIn, authError} ) {\r\n\treturn (\r\n        <MDBModal isOpen={isOpen} toggle={closeForm} size=\"sm\" centered>\r\n\t    <MDBModalBody>\r\n\t      <MDBContainer>\r\n\t        <MDBRow>\r\n\t          <MDBCol>\r\n\t            <form onSubmit={(event) => {event.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tlogIn(document.getElementById(\"loginInput\").value,\r\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\"passwordInput\").value)}}>\r\n\t              <p className=\"h4 text-center mb-4\">Войти</p>\r\n\t\t\t\t  <p className=\"note note-danger\" hidden={!authError} >Неверный логин или пароль!</p>\r\n\t              <label htmlFor=\"loginInput\" className=\"grey-text\">\r\n\t                Логин\r\n\t              </label>\r\n\t              <input type=\"text\" id=\"loginInput\" className=\"form-control\" />\r\n\t              <br />\r\n\t              <label htmlFor=\"passwordInput\" className=\"grey-text\">\r\n\t                Пароль\r\n\t              </label>\r\n\t              <input type=\"password\" id=\"passwordInput\" className=\"form-control\" />\r\n\t              <div className=\"text-center mt-4\">\r\n\t\t\t\t\t<MDBBtn style={{color: \"white\", backgroundColor: \"#6C0AAB\"}} type=\"submit\">\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</MDBBtn>\r\n\t              </div>\r\n\t            </form>\r\n\t          </MDBCol>\r\n\t        </MDBRow>\r\n\t      </MDBContainer>\r\n\t    </MDBModalBody>\r\n      </MDBModal>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tisOpen: selectors.getLoginForm(state),\r\n\tauthError: selectors.getAuthError(state)\r\n  });\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tcloseForm: () => {\r\n\t\t\tdispatch(actions.closeLoginForm());\r\n\t\t},\r\n\t\tlogIn: (login, password) => {\r\n\t\t\tdispatch(actions.tryAuth(login, password));\r\n\t\t},\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\r\n","import React from \"react\";\r\nimport {\r\n\tMDBModal, \r\n\tMDBModalBody,\r\n\tMDBContainer,\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBBtn\r\n} from \"mdbreact\";\r\nimport { connect } from 'react-redux'; \r\nimport * as actions from '../store/actions';\r\nimport * as selectors from '../store/reducers';\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается \r\n */\r\nfunction RegistrationForm( {isOpen, closeForm, registrate, registrateArror, user} ) {\r\n\treturn (\r\n        <MDBModal isOpen={isOpen} toggle={closeForm} size=\"sm\" centered>\r\n\t    <MDBModalBody>\r\n\t      <MDBContainer>\r\n\t        <MDBRow>\r\n\t          <MDBCol>\r\n\t            <form>\r\n\t              <p className=\"h4 text-center mb-4\">Регистрация</p>\r\n\t\t\t\t  <p className=\"note note-danger\" hidden={!registrateArror} >Ошибка регистрации!</p>\r\n                  <p className=\"note note-success\" hidden={user.email===\"\"} >{user.login}, добро пожаловать! Осталось только подтвердить вашу почту: {user.email}</p>\r\n\t              <label htmlFor=\"loginInput\" className=\"grey-text\">\r\n\t                Никнейм\r\n\t              </label>\r\n\t              <input type=\"text\" id=\"loginInput\" className=\"form-control\" />\r\n\t              <br />\r\n                  <label htmlFor=\"emailInput\" className=\"grey-text\">\r\n\t                Электронная почта\r\n\t              </label>\r\n\t              <input type=\"email\" id=\"emailInput\" className=\"form-control\" />\r\n\t              <br />\r\n\t              <label htmlFor=\"passwordInput\" className=\"grey-text\">\r\n\t                Пароль\r\n\t              </label>\r\n\t              <input type=\"password\" id=\"passwordInput\" className=\"form-control\" />\r\n\t              <div className=\"text-center mt-4\">\r\n                    <MDBBtn style={{color: \"white\", backgroundColor: \"#6C0AAB\"}} type=\"button\" onClick={() => registrate(document.getElementById(\"loginInput\").value,\r\n                                                                                                                        document.getElementById(\"emailInput\").value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    document.getElementById(\"passwordInput\").value)}>\r\n\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t</MDBBtn>\r\n\t              </div>\r\n\t            </form>\r\n\t          </MDBCol>\r\n\t        </MDBRow>\r\n\t      </MDBContainer>\r\n\t    </MDBModalBody>\r\n      </MDBModal>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tisOpen: selectors.getRegistrateForm(state),\r\n    registrateArror: selectors.getRegistrateError(state),\r\n    user: selectors.getUser(state)\r\n  });\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tcloseForm: () => {\r\n\t\t\tdispatch(actions.closeRegistrateForm());\r\n\t\t},\r\n\t\tregistrate: (login, email, password) => {\r\n\t\t\tdispatch(actions.registrationRequest(login, email, password));\r\n\t\t},\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RegistrationForm);\r\n","import React, {\r\n    useEffect\r\n} from \"react\";\r\nimport { connect } from 'react-redux'; \r\nimport * as selectors from '../store/reducers';\r\nimport * as actions from '../store/actions';\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ConfirmPage ( {confirmEmailRequest} ) \r\n{\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet uid64 = params.get('uid64');\r\n\tlet token = params.get('token');\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tconfirmEmailRequest(uid64, token);\r\n\t\t},\r\n\t\t[confirmEmailRequest, token, uid64]\r\n\t);\r\n\t\r\n    return (\r\n\t\t\t<div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n    \t);\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    loggedIn: selectors.getLoggedIn(state)\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n        confirmEmailRequest: (uid64, token) => {\r\n            dispatch(actions.confirmEmailRequest(uid64, token));\r\n        }\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmPage);","import React, { useEffect, useState} from \"react\";\r\n\r\nimport {\r\n    MDBDataTable\r\n} from \"mdbreact\";\r\n\r\nfunction GameBlock ( {games, stats} ) {\r\n\r\n    const gameColumns = [\r\n        {\r\n          label: 'Название',\r\n          field: 'name',\r\n          sort: 'disabled'\r\n        },\r\n        {\r\n          label: 'Статус',\r\n          field: 'status',\r\n          sort: 'asc'\r\n        },\r\n        {\r\n          label: 'Оценка',\r\n          field: 'score',\r\n          sort: 'asc'\r\n        },\r\n        {\r\n          label: 'Отзыв',\r\n          field: 'review',\r\n          sort: 'asc'\r\n        },\r\n        {\r\n          label: 'Время прохождения',\r\n          field: 'spent_time',\r\n          sort: 'asc'\r\n        }\r\n      ];\r\n\r\n    const [gameTableData, setGameTableData] = useState({\r\n        columns: gameColumns,\r\n        rows: [\r\n        ]\r\n    });\r\n\r\n    useEffect(() =>{\r\n            if (games)\r\n            {\r\n                setGameTableData({\r\n                    columns: gameColumns,\r\n                    rows: games.map((game) => {\r\n                        return {\r\n                                name: <a className=\"logRow\" href={window.location.origin + '/game/' + game.game.rawg_slug}>{game.game.rawg_name}</a>,\r\n                                name2: game.game.rawg_name,\r\n                                status: game.status,\r\n                                score: game.score,\r\n                                review: game.review,\r\n                                spent_time: game.spent_time,\r\n                                /*clickEvent: (e) => {\r\n                                    //window.open('/game/' + game.game.rawg_slug);\r\n                                    history.push('/game/' + game.game.rawg_slug);\r\n                                }*/\r\n                            }      \r\n                    })\r\n                });\r\n            }\r\n        },\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n        [games]\r\n    );\r\n\r\n    return(\r\n        <div>\r\n            <p>Игр сыграно: {stats.games_count}, часов наиграно: {stats.games_total_spent_time}</p>  \r\n            <MDBDataTable\r\n                striped\r\n                bordered\r\n                small\r\n                data={gameTableData}\r\n                info={false}\r\n                barReverse={true}\r\n                noBottomColumns={true}\r\n                noRecordsFoundLabel=\"Ничего не найдено!\"\r\n                paginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n                entriesLabel=\"Показывать игр на странице\"\r\n                searchLabel='Поиск'\r\n                />\r\n        </div>  \r\n    )\r\n}\r\n\r\nexport default GameBlock;\r\n","import React from \"react\";\r\n\r\nimport CardUser from '../Common/CardUser';\r\n\r\nfunction FriendBlock ( {users} ) {\r\n\r\n    return(\r\n        <div className=\"friendsBlock\">\r\n            { users.map((user) => <CardUser user={user} key={user.id}/>) }\r\n        </div>  \r\n    )\r\n}\r\n\r\nexport default FriendBlock;\r\n","import React, { useEffect, useState} from \"react\";\r\n\r\nimport {\r\n    MDBDataTable\r\n} from \"mdbreact\";\r\n\r\nfunction MovieBlock ( {movies, stats} ) {\r\n\r\n    const movieColumns = [\r\n      {\r\n        label: 'Название',\r\n        field: 'name',\r\n        sort: 'disabled'\r\n      },\r\n      {\r\n        label: 'Статус',\r\n        field: 'status',\r\n        sort: 'asc'\r\n      },\r\n      {\r\n        label: 'Оценка',\r\n        field: 'score',\r\n        sort: 'asc'\r\n      },\r\n      {\r\n        label: 'Отзыв',\r\n        field: 'review',\r\n        sort: 'asc'\r\n      }\r\n    ];\r\n\r\n  const [movieTableData, setMovieTableData] = useState({\r\n      columns: movieColumns,\r\n      rows: [\r\n      ]\r\n  });\r\n\r\n    useEffect(() =>{\r\n            if (movies)\r\n            {\r\n              setMovieTableData({\r\n                columns: movieColumns,\r\n                rows: movies.map((movie) => {\r\n                    return {\r\n                            name: <a className=\"logRow\" href={window.location.origin + '/movie/' + movie.movie.tmdb_id}>{movie.movie.tmdb_name}</a>,\r\n                            name2: movie.movie.tmdb_name,\r\n                            status: movie.status,\r\n                            score: movie.score,\r\n                            review: movie.review,\r\n                            /*clickEvent: (e) => {\r\n                                //window.open('/game/' + game.game.rawg_slug);\r\n                                history.push('/movie/' + movie.movie.tmdb_id)\r\n                            }*/\r\n                        }      \r\n                  })\r\n              });\r\n            }\r\n        },\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n        [movies]\r\n    );\r\n\r\n    return(\r\n        <div>\r\n            <p>Фильмов посмотрено: {stats.movies_count}, часов просмотра: {stats.movies_total_spent_time}</p>  \r\n            <MDBDataTable\r\n                striped\r\n                bordered\r\n                small\r\n                data={movieTableData}\r\n                info={false}\r\n                barReverse={true}\r\n                noBottomColumns={true}\r\n                noRecordsFoundLabel=\"Ничего не найдено!\"\r\n                paginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n                entriesLabel=\"Показывать фильмов на странице\"\r\n                searchLabel='Поиск'\r\n                />\r\n        </div>  \r\n    )\r\n}\r\n\r\nexport default MovieBlock;\r\n","import React, { useEffect} from \"react\";\r\nimport {\r\n    useHistory\r\n  } from \"react-router-dom\";\r\nimport './style.css';\r\nimport Rating from \"react-rating\";\r\nimport {\r\n    MDBIcon\r\n} from \"mdbreact\";\r\n\r\nfunction LogRow ( {log, showUsername} ) {\r\n    let history = useHistory();\r\n\r\n    useEffect(() =>{\r\n            \r\n        },\r\n        [log]\r\n    );\r\n\r\n    function translateActionType(action, actionResult){\r\n        switch (action) {\r\n            case 'score':\r\n                return 'оценил(а)';\r\n            case 'status':\r\n                return 'изменил(а) статус';\r\n            case 'review':\r\n                return 'оставил(а) отзыв на';\r\n            case 'spent_time':\r\n                return 'изменил(а) время прохождения';\r\n            case 'is_following':\r\n                if (actionResult)\r\n                    return 'подписан(а) на';\r\n                else\r\n                    return 'отписан(а) от';\r\n            default:\r\n                return action;\r\n        }\r\n    }\r\n\r\n    function translateType(type, actionType){\r\n        switch (type) {\r\n            case 'game':\r\n                if (actionType === 'score' || actionType === 'review')\r\n                    return 'игру';\r\n                else\r\n                    return 'игры';\r\n            case 'movie':\r\n                if (actionType === 'score' || actionType === 'review')\r\n                    return 'фильм';\r\n                else\r\n                    return 'фильма';\r\n            case 'user':\r\n                return 'пользователя';\r\n            default:\r\n                return type;\r\n        }\r\n    }\r\n\r\n    function nameToLink(name, type, id){\r\n        switch (type){\r\n            case 'game':\r\n                return  <a href={window.location.origin + '/game/' + id} \r\n                            className=\"logLink\"\r\n                            onClick={(e) => { history.push('/game/' + id); e.preventDefault();}}>\r\n                                {name}\r\n                        </a>;\r\n            case 'movie':\r\n                return  <a href={window.location.origin + '/movie/' + id} \r\n                            className=\"logLink\"\r\n                            onClick={(e) => { history.push('/movie/' + id); e.preventDefault();}}>\r\n                                {name}\r\n                        </a>;\r\n            case 'user':\r\n                return  <a href={window.location.origin + '/user/' + id} \r\n                            className=\"logLink\"\r\n                            onClick={(e) => { history.push('/user/' + id); e.preventDefault();}}>\r\n                                {name}\r\n                        </a>;\r\n            default:\r\n                return name;\r\n        }\r\n    }\r\n\r\n    function userToLink(username, userID){\r\n            return  <a href={window.location.origin + '/user/' + userID} \r\n                        className=\"logLink\"\r\n                        onClick={(e) => { history.push('/user/' + userID); e.preventDefault();}}>\r\n                            {username}\r\n                    </a>;\r\n    }\r\n\r\n    function actionResultToStr(actionType, actionResult){\r\n        switch (actionType){\r\n            case 'score':\r\n                return  <Rating stop={10}\r\n                            emptySymbol={<MDBIcon far icon=\"star\" size=\"1x\"/>}\r\n                            fullSymbol={[1,2,3,4,5,6,7,8,9,10].map(n => <MDBIcon icon=\"star\" size=\"1x\" title={n}/>)}\r\n                            initialRating={actionResult}\r\n                            readonly={true}\r\n                        />\r\n            case 'status':\r\n                return '\"' + actionResult + '\"';\r\n            case 'review':\r\n                return '\"' + actionResult + '\"';\r\n            case 'spent_time':\r\n                return actionResult + ' ' + intToHours(actionResult);\r\n            case 'is_following':\r\n                return '';\r\n            default:\r\n                return actionResult;\r\n        }\r\n    }\r\n\r\n    function parseDate(date){\r\n        let newDate = new Date(date);\r\n        return newDate.toLocaleTimeString(\"ru-RU\");\r\n    }\r\n\r\n    return(\r\n            <p className=\"logRow\">{parseDate(log.created)} {showUsername?userToLink(log.user, log.user_id):''} {translateActionType(log.action_type, log.action_result)} {translateType(log.type, log.action_type)} {nameToLink(log.target, log.type, log.target_id)}{log.type==='user'?'':':'} {actionResultToStr(log.action_type, log.action_result)}</p>\r\n    )\r\n}\r\n\r\nfunction intToHours(number){\r\n    if (11 <= number && number <= 14)\r\n        return 'часов'\r\n    else if (number % 10 === 1)\r\n        return 'час'\r\n    else if (2 <= number % 10 && number % 10 <= 4)\r\n        return 'часа'\r\n    else\r\n        return 'часов'\r\n}\r\n\r\nexport default LogRow;","import React, { useEffect, useState} from \"react\";\r\nimport {\r\n    MDBIcon\r\n} from \"mdbreact\";\r\nimport './style.css';\r\nimport LogRow from './LogRow';\r\n\r\nfunction UserLogBlock ( {logs, showUsername, onChangePage} ) {\r\n    const [logsByDay, setLogsByDay] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n\r\n    useEffect(() =>{\r\n            setLogsByDay(groupLogsByDay(logs.log));\r\n        },\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n        [logs]\r\n    );\r\n\r\n    function groupLogsByDay(logs){\r\n        let newLogs = [];\r\n\r\n        for (let i in logs){\r\n            let date = new Date(logs[i].created);\r\n\r\n            if (newLogs.length === 0)\r\n                newLogs.push({\r\n                    date: date,\r\n                    logs: [logs[i]]\r\n                });\r\n            else if (date.getDay() === newLogs[newLogs.length - 1].date.getDay())\r\n                newLogs[newLogs.length - 1].logs.push(logs[i]);\r\n            else\r\n                newLogs.push({\r\n                    date: date,\r\n                    logs: [logs[i]]\r\n                });\r\n        }\r\n        return newLogs;\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            { \r\n                logsByDay.map((dayLog) => \r\n                    <div key={dayLog.logs[0].id} className=\"logDay\">\r\n                        <h5 className='logDate'>\r\n                            {dayLog.date.toLocaleDateString(\"ru-RU\")}\r\n                        </h5>\r\n                        <div className='logRows'>\r\n                            { dayLog.logs.map((log) => <LogRow log={log} showUsername={showUsername} key={log.id}/>) }\r\n                        </div>\r\n                    </div>\r\n                )  \r\n            } \r\n            <button \r\n                className=\"logPaginationButton\" \r\n                disabled={!logs.has_next_page}\r\n                onClick={() => {\r\n                        if (logs.has_next_page){\r\n                            onChangePage(currentPage+1);\r\n                            setCurrentPage(currentPage+1);\r\n                        } \r\n                    }}\r\n                >\r\n                <MDBIcon icon=\"arrow-down\" />\r\n            </button> \r\n\r\n            <button \r\n                className=\"logPaginationButton\" \r\n                disabled={currentPage===1}\r\n                onClick={() => {\r\n                        if (currentPage>1){\r\n                            onChangePage(currentPage-1);\r\n                            setCurrentPage(currentPage-1);\r\n                        } \r\n                    }}\r\n                >\r\n                <MDBIcon icon=\"arrow-up\" />\r\n            </button>\r\n        </div>  \r\n    )\r\n}\r\n\r\nexport default UserLogBlock;\r\n","import React, {\r\n    useEffect,\r\n    useState\r\n} from \"react\";\r\nimport {\r\n    useParams\r\n} from \"react-router-dom\";\r\nimport {\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBContainer\r\n} from \"mdbreact\";\r\nimport './style.css';\r\n\r\nimport { connect } from 'react-redux'; \r\nimport * as selectors from '../../store/reducers';\r\nimport * as actions from '../../store/actions';\r\n\r\nimport LoadingOverlay from 'react-loading-overlay';\r\nimport GameBlock from './GameBlock';\r\nimport FriendBlock from './FriendBlock';\r\nimport MovieBlock from './MovieBlock';\r\nimport UserLogBlock from './UserLogBlock';\r\nimport CategoriesTab from '../Common/CategoriesTab';\r\n\r\nconst LOG_ROWS_COUNT = 15; \r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction UserPage ( { userIsLoading, getUserInfo, userInfo, currentUserInfo, setUserStatus, getUserLogs, userLogs, getUserFriendsLogs, userFriendsLogs}) \r\n{ \r\n    let { userID } = useParams();\r\n    const [activeCategory, setActiveCategory] = useState(\"Профиль\");\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            getUserInfo(userID);\r\n            getUserLogs(userID, 1, LOG_ROWS_COUNT);\r\n            getUserFriendsLogs(userID, 1, LOG_ROWS_COUNT);\r\n\t\t},\r\n\t\t[userID, getUserInfo, getUserLogs, getUserFriendsLogs]\r\n    );\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            document.title = 'Профиль ' + userInfo.username;\r\n\t\t},\r\n\t\t[userInfo]\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"bg searchBG\"/> \r\n            <LoadingOverlay\r\n                active={userIsLoading}\r\n                spinner\r\n                text='Загрузка...'\r\n                >\r\n            <MDBContainer>\r\n                <MDBRow>\r\n                    <MDBCol md=\"0.5\"></MDBCol>\r\n                    <MDBCol className=\"searchPage\"> \r\n                        <h1>Информация о пользователе {userInfo.username}</h1>\r\n                        <button \r\n                            hidden={currentUserInfo.username === userInfo.username}\r\n                            className='addFriendButton'\r\n                            onClick={ () => {\r\n                                setUserStatus({is_following: userInfo.is_followed?false:true}, userInfo.id);\r\n                            }}>\r\n                            {userInfo.is_followed?'Отписаться':'Подписаться'}\r\n                        </button>\r\n                        <CategoriesTab\r\n                            categories={['Профиль', 'Игры', 'Фильмы', 'Друзья']}\r\n                            activeColor='#4527a0' \r\n                            onChangeCategory={(category) => { setActiveCategory(category) }}/>\r\n\r\n                            <div hidden={activeCategory!=='Профиль'}>\r\n                                <h4>Моя активность: </h4>\r\n                                <UserLogBlock logs={userLogs} onChangePage={(pageNumber) => getUserLogs(userID, pageNumber, LOG_ROWS_COUNT)}/>\r\n                            </div>\r\n                            <div hidden={activeCategory!=='Игры'}>\r\n                                <GameBlock games={userInfo.games} stats={userInfo.stats} />\r\n                            </div>\r\n                            <div hidden={activeCategory!=='Фильмы'}>\r\n                                <MovieBlock movies={userInfo.movies} stats={userInfo.stats} />\r\n                            </div>\r\n                            <div hidden={activeCategory!=='Друзья'}>\r\n                                <FriendBlock users={userInfo.followed_users?userInfo.followed_users:[]} />\r\n                                <h4>Активность друзей: </h4>\r\n                                <UserLogBlock logs={userFriendsLogs} onChangePage={(pageNumber) => getUserFriendsLogs(userID, pageNumber, LOG_ROWS_COUNT)} showUsername={true}/>\r\n                            </div>\r\n                    </MDBCol>\r\n                    <MDBCol md=\"0.5\"></MDBCol>\r\n                </MDBRow>\r\n            </MDBContainer>\r\n            </LoadingOverlay>\r\n        </div>\r\n    \t);\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    loggedIn: selectors.getLoggedIn(state),\r\n    userIsLoading: selectors.getIsLoadingUserPageContent(state),\r\n    userInfo: selectors.getUserPageContent(state),\r\n    userLogs: selectors.getUserPageLogs(state),\r\n    userFriendsLogs: selectors.getUserPageFriendsLogs(state),\r\n    currentUserInfo: selectors.getUser(state)\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n        openLoginForm: () => {\r\n            dispatch(actions.openLoginForm());\r\n        },\r\n        getUserInfo: (user_id) => {\r\n            dispatch(actions.requestUserPageContent(user_id));\r\n        },\r\n        setUserStatus: (is_following, userID) => {\r\n            dispatch(actions.setUserStatus(is_following, userID));\r\n        },\r\n        getUserLogs: (userID, page, resultsOnPage) => {\r\n            dispatch(actions.requestUserPageLogs(userID, page, resultsOnPage));\r\n        },\r\n        getUserFriendsLogs: (userID, page, resultsOnPage) => {\r\n            dispatch(actions.requestUserPageFriendsLogs(userID, page, resultsOnPage));\r\n        },\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserPage);","import React from \"react\";\r\nimport {\r\n    useHistory\r\n  } from \"react-router-dom\";\r\n\r\nimport {\r\n\tMDBNavbar,\r\n    MDBNavItem,\r\n    MDBNavbarBrand,\r\n    MDBNavbarNav,\r\n    MDBNavLink,\r\n    MDBIcon,\r\n    MDBFormInline,\r\n    MDBDropdown,\r\n    MDBDropdownItem,\r\n    MDBDropdownMenu,\r\n    MDBDropdownToggle\r\n} from \"mdbreact\";\r\n\r\nimport { connect } from 'react-redux'; \r\nimport * as selectors from '../store/reducers';\r\nimport * as actions from '../store/actions';\r\n\r\nfunction Navbar( {loggedIn, onLoginClick, onLogoutClick, onRegistrationClick, user} ) {\r\n    let history = useHistory();\r\n\r\n    return(\r\n            <MDBNavbar style={{ backgroundColor: \"#4527a0\" }} dark expand=\"md\" fixed=\"top\">\r\n            <MDBNavbarBrand>\r\n                <strong className=\"white-text\">Interests</strong>\r\n            </MDBNavbarBrand>\r\n            <MDBNavbarNav left>\r\n                \r\n            </MDBNavbarNav>\r\n\r\n            <MDBNavbarNav right>\r\n                <MDBNavItem>\r\n                    <MDBFormInline onSubmit={ (event) => {event.preventDefault(); history.push('/search/' + document.getElementById('searchInput').value); return false; }}>\r\n                        <div className=\"md-form my-0\">\r\n                        <input className=\"form-control mr-sm-2\" type=\"text\" placeholder=\"Найти\" aria-label=\"Найти\"\r\n                            id=\"searchInput\"/>\r\n                        </div>\r\n                    </MDBFormInline>\r\n                </MDBNavItem>\r\n\r\n                <MDBNavItem className=\"font-weight-bold\" hidden={loggedIn}>\r\n                    <MDBNavLink to=\"#\" onClick={onLoginClick} >\r\n                        <MDBIcon icon=\"sign-in-alt\" /> Войти\r\n                    </MDBNavLink>\r\n                </MDBNavItem>\r\n                <MDBNavItem className=\"font-weight-bold\" hidden={loggedIn}>\r\n                    <MDBNavLink to=\"#\" onClick={onRegistrationClick} >\r\n                        <MDBIcon icon=\"user-plus\" /> Зарегистрироваться\r\n                    </MDBNavLink>\r\n                </MDBNavItem>\r\n                <MDBNavItem hidden={!loggedIn} className=\"font-weight-bold\">\r\n                    <MDBDropdown>\r\n                        <MDBDropdownToggle nav caret>\r\n                        <span className=\"mr-2\">{user.username}</span>\r\n                        </MDBDropdownToggle>\r\n                        <MDBDropdownMenu>\r\n                        <MDBDropdownItem href={\"/user/\"+user.id}>Профиль</MDBDropdownItem>\r\n                        <MDBDropdownItem onClick={ onLogoutClick }>\r\n                            <MDBIcon icon=\"sign-out-alt\"/> Выйти\r\n                        </MDBDropdownItem>\r\n                        </MDBDropdownMenu>\r\n                    </MDBDropdown>\r\n                </MDBNavItem>\r\n            </MDBNavbarNav>\r\n        </MDBNavbar>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    loggedIn: selectors.getLoggedIn(state),\r\n    user: selectors.getUser(state)\r\n});\r\n\r\n  const mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonLoginClick: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n        },\r\n        onLogoutClick: () =>{\r\n            dispatch(actions.resetAuthorization());\r\n        },\r\n        onRegistrationClick: () =>{\r\n            dispatch(actions.openRegistrateForm());\r\n        }\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar);\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport HomePage from \"./components/HomePage\";\r\nimport GamePage from \"./components/GamePage\";\r\nimport MoviePage from \"./components/MoviePage\";\r\nimport SearchPage from \"./components/SearchPage/SearchPage\";\r\nimport LoginForm from \"./components/LoginForm\";\r\nimport RegistrationForm from \"./components/RegistrationForm\";\r\nimport ConfirmPage from \"./components/ConfirmPage\";\r\nimport UserPage from \"./components/UserPage/UserPage\";\r\nimport Navbar from \"./components/Navbar\";\r\n\r\nclass Routes extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Navbar/>\r\n        <div className=\"navbar\"></div>\r\n        <Switch>\r\n            <Route exact path=\"/\" component={HomePage} />\r\n            <Route exact path=\"/game/:id\" component={GamePage} />\r\n            <Route exact path=\"/movie/:id\" component={MoviePage} />\r\n            <Route exact path=\"/search/:query\" component={SearchPage} />\r\n            <Route exact path=\"/confirm/\" component={ConfirmPage} />\r\n            <Route exact path=\"/user/:userID\" component={UserPage} />\r\n            <Route render={function () { return <h1>Not Found</h1>; }} />\r\n        </Switch>\r\n      <ToastContainer position=\"top-center\" hideProgressBar newestOnTop closeOnClick/>\r\n      <LoginForm/>\r\n      <RegistrationForm/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Routes;","import React, {useEffect} from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { connect } from 'react-redux'; \r\nimport Routes from \"./Routes\";\r\nimport * as actions from \"./store/actions\";\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nfunction App({onLoad}) {\r\n\r\n  useEffect(\r\n    () => {\r\n        onLoad();\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    []\r\n  );\r\n\r\n  return (\r\n    <Router>\r\n      <div className=\"flyout\">\r\n        <main>\r\n          <Routes />\r\n        </main>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n    onLoad: () => {\r\n      dispatch(actions.checkAuthorization());\r\n\t\t},\r\n\t}\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\nimport \"mdbreact/dist/css/mdb.css\";\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport { createStore, \r\n  applyMiddleware, \r\n  //combineReducers,\r\n   compose } from 'redux';\r\nimport { Provider } from \"react-redux\";\r\nimport thunk from 'redux-thunk';\r\nimport reducer from './store/reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducer, composeEnhancers(applyMiddleware(thunk) ) );\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n      <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n\r\nexport default store;\r\n\r\n"],"sourceRoot":""}