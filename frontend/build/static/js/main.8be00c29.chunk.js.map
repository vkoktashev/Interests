{"version":3,"sources":["settings.js","services/jwtAuth.js","store/AuthStore.js","components/HomePage.js","services/gameRequests.js","store/GameStore.js","store/PagesStore.js","components/Common/StatusButtonGroup.js","components/Common/FriendsActivityRow.js","components/Common/FriendsActivity.js","components/Game/TimeToBeat.js","components/Common/ScoreBlock.js","components/Common/Rating.js","components/Game/GamePage.js","services/movieRequests.js","store/MovieStore.js","components/Movie/MoviePage.js","services/showRequests.js","store/ShowStore.js","components/Show/DetailedEpisodeRow.js","components/Show/SeasonBlock.js","components/Show/SeasonsBlock.js","components/Show/ShowPage.js","components/Show/SeasonPage.js","components/Show/EpisodePage.js","services/userRequests.js","store/SearchStore.js","components/Search/Blocks/Cards/CardGame.js","components/Search/Blocks/GamesBlock.js","components/Search/Blocks/Cards/CardMovie.js","components/Search/Blocks/MoviesBlock.js","components/Search/Blocks/Cards/CardShow.js","components/Search/Blocks/ShowsBlock.js","components/Common/CardUser.js","components/Search/Blocks/UsersBlock.js","components/Common/CategoriesTab.js","components/Search/SearchPage.js","components/Modals/LoginForm.js","components/Modals/RegistrationForm.js","components/Modals/ResetPasswordForm.js","components/ConfirmPage.js","components/ConfirmPasswordPage.js","store/UserStore.js","components/UserPage/Colors.js","components/UserPage/GameBlock.js","components/UserPage/FriendBlock.js","components/UserPage/MovieBlock.js","components/UserPage/LogRow.js","components/UserPage/UserLogBlock.js","components/UserPage/ShowBlock.js","components/UserPage/ChartBlock.js","components/UserPage/UserPage.js","components/Navbar.js","store/CurrentUserStore.js","components/Calendar/DayInfo.js","components/Calendar/ReleasesList.js","components/Calendar/CalendarPage.js","components/Settings/SettingsCheckbox.js","components/Settings/SettingsPage.js","components/Unwatched/EpisodeRow.js","components/Unwatched/ShowBlock.js","components/Unwatched/UnwatchedPage.js","components/NotFoundPage.js","Routes.js","App.js","serviceWorker.js","index.js"],"names":["BACKEND_URL","GET_TOKEN_URL","REFRESH_TOKEN_URL","REGISTRATE_URL","CONFIRM_URL","RESET_PASSWORD_URL","CONFIRM_PASSWORD_URL","USER_SETTINGS_URL","GET_GAME_URL","SEARCH_GAMES_URL","GET_MOVIE_URL","SEARCH_MOVIES_URL","GET_SHOW_URL","SEARCH_SHOWS_URL","GET_UNWATCHED_EPISODES_URL","USER_INFO_URL","USER_CALENDAR_URL","SEARCH_USERS_URL","axiosConfig","headers","getToken","username","password","a","axios","post","urls","res","userData","jwt_decode","data","access","user","id","user_id","email","token","refreshToken","refresh","updateToken","console","log","registration","status","confirmation","uid64","patch","resetPassword","put","confirmPassword","AuthStore","loggedIn","authState","registrateState","confirmEmailState","resetPasswordState","confirmPasswordState","tryAuth","login","auth","then","authSuccess","authFailure","localStorage","setItem","Date","now","error","response","detail","checkAuthorization","getItem","resetAuthorization","removeItem","register","registerSuccess","registerFailure","result","errors","error2","confirmEmail","confirmEmailSuccess","confirmEmailFailure","resetPasswordSuccess","resetPasswordFailure","confirmPasswordSuccess","confirmPasswordFailure","makeAutoObservable","this","HomePage","observer","props","className","style","marginTop","marginLeft","href","fontWeight","src","alt","getGame","AuthStr","get","Authorization","setGameStatus","gameSlug","user_info","searchGames","query","page","gamesCount","params","page_size","getGameUserInfo","slug","defaults","common","GameStore","game","gameState","userInfo","review","score","spent_time","friendsInfo","userInfoState","setStatusState","requestGame","gameRequests","requestGameSuccess","requestGameFailure","statusText","requestUserInfo","requestUserInfoSuccess","requestUserInfoFailure","friends_info","setGameStatusSuccess","setGameStatusFailure","PagesStore","LoginFormIsOpen","RegistrateFormIsOpen","ResetPasswordFormIsOpen","saveEpisodesBlockIsOpen","openLoginForm","closeLoginForm","openRegistrateForm","closeRegistrateForm","openResetPasswordForm","closeResetPasswordForm","setSaveEpisodes","StatusButtonGroup","statuses","activeColor","onChangeStatus","userStatus","map","backgroundColor","onClick","intToHours","number","FriendsActivityRow","info","history","useHistory","window","location","origin","e","push","preventDefault","stop","emptySymbol","far","icon","size","fullSymbol","n","title","initialRating","readonly","hidden","FriendsActivity","friendInfo","TimeToBeat","hltbInfo","gameplay_main","gameplay_main_extra","gameplay_completionist","display","gameplay_main_unit","gameplay_main_extra_unit","gameplay_completionist_unit","ScoreBlock","text","getColor","RatingBlock","onChange","fontSize","marginBottom","GamePage","useParams","useState","setReview","spentTime","setSpentTime","setUserStatus","userRate","setUserRate","setClearUI","strToFloat","str","indexOf","parseFloat","useEffect","document","name","startsWith","toast","backgroundImage","background","active","spinner","poster","developers","release_date","genres","platforms","hltb","Rating","metacritic","dangerouslySetInnerHTML","__html","overview","paddingTop","type","label","value","event","target","outline","list","getTimeToBeatDatalist","disabled","length","getMovie","setMovieStatus","searchMovies","getMovieUserInfo","MovieStore","movie","tmdb","poster_path","movieState","requestMovie","movieRequests","requestMovieSuccess","requestMovieFailure","setMovieStatusSuccess","setMovieStatusFailure","MoviePage","backdrop_path","original_name","runtime","production_companies","tagline","cast","directors","getShow","getShowSeason","showID","seasonNumber","getShowEpisode","episodeNumber","setShowStatus","setShowSeasonStatus","setShowEpisodesStatus","episodesList","searchShows","getShowUserInfo","getShowSeasonUserInfo","seasonID","getShowEpisodeUserInfo","episodeID","getUnwatchedEpisodes","ShowStore","show","showState","showSeasons","showSeasonsState","showSeasonsUserInfo","showSeasonsUserInfoState","requestShow","showRequests","requestShowSuccess","requestShowFailure","requestSeason","requestSeasonSuccess","requestSeasonFailure","requestSeasons","requestSeasonsSuccess","requestSeasonsFailure","requestEpisode","requestEpisodeSuccess","requestEpisodeFailure","requestShowUserInfo","requestShowUserInfoSuccess","requestShowUserInfoFailure","requestSeasonUserInfo","runInAction","requestSeasonUserInfoSuccess","requestSeasonUserInfoFailure","user_watched_show","episodes","episodes_user_info","requestSeasonsUserInfo","requestSeasonsUserInfoSuccess","requestSeasonsUserInfoFailure","requestEpisodeUserInfo","requestEpisodeUserInfoSuccess","requestEpisodeUserInfoFailure","setShowStatusSuccess","setShowStatusFailure","setSeasonStatus","setEpisodesStatus","seasonsToUpdate","season","getShowSeasonState","getEpisodesUserInfo","episode","tmdb_id","DetailedEpisodeRow","date","setEpisodeUserStatus","checkAll","userWatchedShow","isChecked","setIsChecked","checked","air_date","toLocaleDateString","start","concat","season_number","episode_number","SeasonBlock","showSeason","computed","showSeasonState","showUserInfo","getEpisodeByID","open","counter","reverse","SeasonsBlock","seasons","anySeasonLoading","sendAllEpisodes","currentValue","cbValue","getElementById","sendEpisodes","ShowPage","companies","first_date","last_date","episode_runtime","episode_run_time","seasons_count","episodes_count","show_status","SeasonPage","show_id","chartData","setChartData","tmdb_name","newData","vote_average","Оценка","tmdb_backdrop_path","tmdb_original_name","body","clientHeight","clientWidth","width","height","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","dataKey","interval","tick","fill","tickLine","domain","tickCount","contentStyle","color","stroke","fillOpacity","layout","EpisodePage","still_path","getUserInfo","userID","searchUsers","is_following","getUserLog","resultsOnPage","getUserFriendsLog","getUserCalendar","getUserSettings","patchUserSettings","settings","SearchStore","games","movies","shows","users","gamesState","moviesState","showsState","usersState","searchGamesSuccess","searchGamesFailure","searchMoviesSuccess","searchMoviesFailure","results","searchShowsSuccess","searchShowsFailure","userRequests","searchUsersSuccess","searchUsersFailure","CardGame","setDate","released","mas","split","newDate","background_image","GamesBlock","gamesPage","onPaginate","CardMovie","MoviesBlock","moviesPage","CardShow","first_air_date","ShowsBlock","showsPage","CardUser","UsersBlock","CategoriesTab","categories","onChangeCategory","activeCategory","category","SearchPage","queryText","setQueryText","setGamesPage","setMoviesPage","setShowsPage","setActiveCategory","md","onSubmit","placeholder","aria-label","LoginForm","setPassword","setLogin","isOpen","toggle","centered","htmlFor","RegistrationForm","passwordConfirm","setPasswordConfirm","setEmail","outlineColor","ResetPasswordForm","ConfirmPage","search","URLSearchParams","ConfirmPasswordPage","UserStore","stats","userLogs","userFriendsLogs","userState","userLogsState","userFriendsLogsState","setUserStatusState","requestUser","requestUserSuccess","requestUserFailure","requestUserLogs","requestLogsSuccess","requestLogsFailure","requestUserFriendsLogs","requestFriendsLogsSuccess","requestFriendsLogsFailure","setUserStatusSuccess","setUserStatusFailure","is_followed","COLORS","GameBlock","gameChartData","setGameChartData","gameColumns","field","sort","columns","rows","gameTableData","setGameTableData","rawg_slug","rawg_name","name2","genre","spent_time_percent","Процент","b","count","total_spent_time","striped","bordered","small","barReverse","noBottomColumns","noRecordsFoundLabel","paginationLabel","entriesLabel","searchLabel","responsive","test","navigator","userAgent","tickMargin","itemStyle","borderRadius","cursor","entry","index","Math","min","angle","FriendBlock","MovieBlock","movieChartData","setMovieChartData","movieColumns","movieTableData","setMovieTableData","LogRow","showUsername","created","toLocaleTimeString","action","actionResult","translateActionType","action_type","action_result","actionType","translateType","parent_name","nameToLink","target_id","actionResultToStr","UserLogBlock","logs","onChangePage","logsByDay","setLogsByDay","currentPage","setCurrentPage","newLogs","i","getDay","groupLogsByDay","dayLog","has_next_page","ShowBlock","showChartData","setShowChartData","showColumns","showTableData","setShowTableData","ChartBlock","cx","cy","outerRadius","labelLine","minAngle","verticalAlign","horizontalAlign","UserPage","currentUser","lastActivity","setLastActivity","last_activity","toLocaleString","pageNumber","followed_users","Navbar","newCollapseID","collapseID","setCollapseID","dark","expand","fixed","navbar","to","nav","caret","CurrentUserStore","calendar","unwatched","calendarState","settingsState","unwatchedState","saveSettingsState","requestCalendar","requestCalendarSuccess","requestCalendarFailure","requestSettings","requestSettingsSuccess","requestSettingsFailure","requestUnwatched","requestUnwatchedSuccess","requestUnwatchedFailure","patchSettings","patchSettingsSuccess","patchSettingsFailure","patchSettingsReset","setTimeout","DayInfo","day","year","getFullYear","undefined","month","weekday","rawg_id","tmdb_show","tmdb_season_number","tmdb_episode_number","ReleasesList","myStyle","border","getContentForDay","getIconForDay","remainedDays","days","time","getTime","timeNow","parseInt","dateDiff","lineColor","cardHeaderStyle","iconStyle","bubbleStyle","titleStyle","subtitleStyle","CalendarPage","currentDay","setCurrentDay","formatDate","defaultView","minDetail","locale","minDate","tileContent","activeStartDate","view","Object","entries","pad","getMonth","getDate","SettingsCheckbox","SettingsPage","gameNotifInput","setGameNotifInput","movieNotifInput","setMovieNotifInput","showNotifInput","setShowNotifInput","success","receive_games_releases","receive_movies_releases","receive_episodes_releases","setShowEpisodeUserStatus","tmdb_release_date","getUserSeasonOpen","localData","onToggle","EpisodeRow","UnwatchedPage","NotFoundPage","setAngle","transform","maxWidth","Routes","exact","path","component","position","hideProgressBar","newestOnTop","closeOnClick","autoClose","React","Component","App","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","ReactDOM","render","URL","process","addEventListener","fetch","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.8be00c29.chunk.js","sourcesContent":["/** Время жизни токена в миллисекундах, после истечения которого будет запрошен новый токен*/\r\nexport const TOKEN_LIFETIME = 290000;\r\n/**Адрес сервера*/\r\nexport const BACKEND_URL = \"http://35.193.124.214:8001/\";\r\n/**Адрес получения токена */\r\nexport const GET_TOKEN_URL = BACKEND_URL + \"users/auth/login/\";\r\n/**Адрес обновления токена */\r\nexport const REFRESH_TOKEN_URL = BACKEND_URL + \"users/auth/refresh-token/\";\r\n/**Адрес регистрации */\r\nexport const REGISTRATE_URL = BACKEND_URL + \"users/auth/signup/\";\r\n/**Адрес подтверждения почты */\r\nexport const CONFIRM_URL = BACKEND_URL + \"users/auth/confirm_email/\";\r\n/**Адрес сброса пароля */\r\nexport const RESET_PASSWORD_URL = BACKEND_URL + \"users/auth/password_reset/\";\r\n/**Адрес подтверждения сброса пароля */\r\nexport const CONFIRM_PASSWORD_URL = BACKEND_URL + \"users/auth/confirm_password_reset/\";\r\n/**Адрес сохранения настроек */\r\nexport const USER_SETTINGS_URL = BACKEND_URL + \"users/user/user_settings/\";\r\n/**Адрес запроса игры */\r\nexport const GET_GAME_URL = BACKEND_URL + \"games/game/\";\r\n/**Адрес поиска игр */\r\nexport const SEARCH_GAMES_URL = BACKEND_URL + \"games/search/\";\r\n/**Адрес запроса фильма */\r\nexport const GET_MOVIE_URL = BACKEND_URL + \"movies/movie/\";\r\n/**Адрес поиска фильмов */\r\nexport const SEARCH_MOVIES_URL = BACKEND_URL + \"movies/search/\";\r\n/**Адрес запроса сериала */\r\nexport const GET_SHOW_URL = BACKEND_URL + \"shows/show/\";\r\n/**Адрес поиска сериалов */\r\nexport const SEARCH_SHOWS_URL = BACKEND_URL + \"shows/search/\";\r\n/**Адрес запроса непросмотренных серий */\r\nexport const GET_UNWATCHED_EPISODES_URL = BACKEND_URL + \"shows/show/unwatched_episodes/\";\r\n/**Адрес получения информации о пользователе */\r\nexport const USER_INFO_URL = BACKEND_URL + \"users/user/\";\r\n/**Адрес получения календаря релизов пользователя */\r\nexport const USER_CALENDAR_URL = BACKEND_URL + \"users/user/release_calendar/\";\r\n/**Адрес поиска пользователей */\r\nexport const SEARCH_USERS_URL = BACKEND_URL + \"users/search/\";\r\n","import axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport * as urls from \"../settings\";\r\n\r\nlet axiosConfig = {\r\n\theaders: {\r\n\t\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n\t},\r\n};\r\n\r\n/**\r\n * ПОлучение токена авторизации. Токен сохраняется в localStorage\r\n * @param {string} username Имя пользователя\r\n * @param {string} password Пароль\r\n */\r\nexport async function getToken(username, password) {\r\n\tconst res = await axios.post(\r\n\t\turls.GET_TOKEN_URL,\r\n\t\t{\r\n\t\t\tusername: username,\r\n\t\t\tpassword: password,\r\n\t\t},\r\n\t\taxiosConfig\r\n\t);\r\n\r\n\tlet userData = jwt_decode(res.data.access);\r\n\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\treturn { token: res.data.access, refreshToken: res.data.refresh, user: user };\r\n}\r\n\r\n/**\r\n * Функция обновления токена\r\n */\r\nexport async function updateToken(refreshToken) {\r\n\tif ((typeof refreshToken !== \"undefined\") & (refreshToken != null)) {\r\n\t\ttry {\r\n\t\t\tconst res = await axios.post(urls.REFRESH_TOKEN_URL, { refresh: refreshToken }, axiosConfig);\r\n\t\t\tlet userData = jwt_decode(res.data.access);\r\n\t\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\t\t\treturn { token: res.data.access, user: user };\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(\"axios error: \" + e);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nexport async function registration(username, email, password) {\r\n\tconst res = await axios.post(\r\n\t\turls.REGISTRATE_URL,\r\n\t\t{\r\n\t\t\tusername: username,\r\n\t\t\temail: email,\r\n\t\t\tpassword: password,\r\n\t\t},\r\n\t\taxiosConfig\r\n\t);\r\n\tlet data = res.data;\r\n\tdata.status = res.status;\r\n\treturn data;\r\n}\r\n\r\nexport async function confirmation(uid64, token) {\r\n\tconst res = await axios.patch(urls.CONFIRM_URL + \"?uid64=\" + uid64 + \"&token=\" + token);\r\n\treturn res;\r\n}\r\n\r\nexport async function resetPassword(email) {\r\n\tconst res = await axios.put(urls.RESET_PASSWORD_URL, { email: email }, axiosConfig);\r\n\treturn res;\r\n}\r\n\r\nexport async function confirmPassword(token, password) {\r\n\tconst res = await axios.patch(urls.CONFIRM_PASSWORD_URL + \"?reset_token=\" + token, { password: password }, axiosConfig);\r\n\treturn res;\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport * as auth from \"../services/jwtAuth\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { TOKEN_LIFETIME } from \"../settings\";\r\n\r\nclass Auth {\r\n\tloggedIn = false;\r\n\tuser = {\r\n\t\tusername: \"\",\r\n\t\temail: \"\",\r\n\t\tid: null,\r\n\t};\r\n\tauthState = \"\";\r\n\tregistrateState = \"\";\r\n\tconfirmEmailState = \"\";\r\n\tresetPasswordState = \"\";\r\n\tconfirmPasswordState = \"\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\ttryAuth = async (login, password) => {\r\n\t\tthis.authState = \"pending\";\r\n\t\tauth.getToken(login, password).then(this.authSuccess, this.authFailure);\r\n\t};\r\n\tauthSuccess = (res) => {\r\n\t\tlocalStorage.setItem(\"refreshToken\", res.refreshToken);\r\n\t\tlocalStorage.setItem(\"token\", res.token);\r\n\t\tlocalStorage.setItem(\"tokenTime\", Date.now());\r\n\t\tthis.loggedIn = true;\r\n\t\tthis.user = res.user;\r\n\t\tthis.authState = \"done\";\r\n\t};\r\n\tauthFailure = (error) => {\r\n\t\tthis.authState = \"error: \" + error.response.data.detail;\r\n\t};\r\n\r\n\tcheckAuthorization = async () => {\r\n\t\tif ((localStorage.getItem(\"token\") === null) | (Date.now() - localStorage.getItem(\"tokenTime\") > TOKEN_LIFETIME)) {\r\n\t\t\tconst res = await auth.updateToken(localStorage.getItem(\"refreshToken\"));\r\n\t\t\tif (res !== null) {\r\n\t\t\t\tlocalStorage.setItem(\"token\", res.token);\r\n\t\t\t\tlocalStorage.setItem(\"tokenTime\", Date.now());\r\n\t\t\t\tthis.loggedIn = true;\r\n\t\t\t\tthis.user = res.user;\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.resetAuthorization();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet userData = jwt_decode(localStorage.getItem(\"token\"));\r\n\t\t\tthis.user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\t\t\tthis.loggedIn = true;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\r\n\tresetAuthorization = async () => {\r\n\t\tthis.loggedIn = false;\r\n\t\tthis.user = { username: \"\", id: null, email: \"\" };\r\n\t\tlocalStorage.removeItem(\"refreshToken\");\r\n\t\tlocalStorage.removeItem(\"token\");\r\n\t\tlocalStorage.removeItem(\"tokenTime\");\r\n\t};\r\n\r\n\tregister = async (username, email, password) => {\r\n\t\tthis.registrateState = \"pending\";\r\n\t\tauth.registration(username, email, password).then(this.registerSuccess, this.registerFailure);\r\n\t};\r\n\tregisterSuccess = (result) => {\r\n\t\tthis.user = { login: result.username, email: result.email };\r\n\t\tthis.registrateState = \"done\";\r\n\t};\r\n\tregisterFailure = (error) => {\r\n\t\tlet errors = \"\";\r\n\t\tfor (let error2 in error.response.data) errors += error.response.data[error2] + \"\\n\";\r\n\t\tthis.registrateState = \"error: \" + errors;\r\n\t};\r\n\r\n\tconfirmEmail = async (uid64, token) => {\r\n\t\tthis.confirmEmailState = \"pending\";\r\n\t\tauth.confirmation(uid64, token).then(this.confirmEmailSuccess, this.confirmEmailFailure);\r\n\t};\r\n\tconfirmEmailSuccess = (result) => {\r\n\t\tthis.confirmEmailState = \"done\";\r\n\t};\r\n\tconfirmEmailFailure = (error) => {\r\n\t\tlet errors = \"\";\r\n\t\tfor (let error2 in error.response.data) errors += error.response.data[error2] + \"\\n\";\r\n\t\tthis.confirmEmailState = \"error: \" + errors;\r\n\t};\r\n\r\n\tresetPassword = async (email) => {\r\n\t\tthis.resetPasswordState = \"pending\";\r\n\t\tauth.resetPassword(email).then(this.resetPasswordSuccess, this.resetPasswordFailure);\r\n\t};\r\n\tresetPasswordSuccess = (result) => {\r\n\t\tthis.resetPasswordState = \"done\";\r\n\t};\r\n\tresetPasswordFailure = (error) => {\r\n\t\tthis.resetPasswordState = \"error: \" + error;\r\n\t};\r\n\r\n\tconfirmPassword = async (token, password) => {\r\n\t\tthis.confirmPasswordState = \"\";\r\n\t\tauth.confirmPassword(token, password).then(this.confirmPasswordSuccess, this.confirmPasswordFailure);\r\n\t};\r\n\tconfirmPasswordSuccess = (result) => {\r\n\t\tthis.confirmPasswordState = \"done\";\r\n\t};\r\n\tconfirmPasswordFailure = (error) => {\r\n\t\tlet errors = \"\";\r\n\t\tfor (let error2 in error.response.data) errors += error.response.data[error2] + \"\\n\";\r\n\t\tthis.confirmPasswordState = \"error: \" + errors;\r\n\t};\r\n\r\n\tget currentUser() {\r\n\t\treturn this.user;\r\n\t}\r\n}\r\n\r\nconst AuthStore = new Auth();\r\n//export default remotedev(AuthStore, { name: \"Auth\" });\r\nexport default AuthStore;\r\n","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../store/AuthStore\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst HomePage = observer((props) => {\r\n\tconst { user } = AuthStore;\r\n\r\n\treturn (\r\n\t\t<div className='bg'>\r\n\t\t\t<h2 style={{ marginTop: \"70px\", marginLeft: \"30px\" }}>Добро пожаловать на Interests!</h2>\r\n\t\t\t<h4 style={{ marginLeft: \"30px\" }}>\r\n\t\t\t\tГлавная страница ещё не готова, однако можно воспользоваться{\" \"}\r\n\t\t\t\t<a href='/search/example' style={{ fontWeight: \"600\" }}>\r\n\t\t\t\t\tпоиском\r\n\t\t\t\t</a>{\" \"}\r\n\t\t\t\tили проверить свой{\" \"}\r\n\t\t\t\t<a href={\"/user/\" + user.id} style={{ fontWeight: \"600\" }}>\r\n\t\t\t\t\tпрофиль\r\n\t\t\t\t</a>\r\n\t\t\t\t, если вы уже зарегистрированы\r\n\t\t\t</h4>\r\n\t\t\t<img src='images/logo192.png' style={{ marginLeft: \"20px\" }} alt='Картинка' />\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default HomePage;\r\n","import axios from \"axios\";\r\nimport { GET_GAME_URL, SEARCH_GAMES_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об игре\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID игры\r\n * @returns {object} Информация об игре\r\n */\r\nexport async function getGame(token, id) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_GAME_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(GET_GAME_URL + id + \"/\");\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса игры\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус игры\r\n * @param {string} gameSlug Слаг игры\r\n */\r\nexport async function setGameStatus(token, gameSlug, user_info) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\r\n\tconst res = await axios.put(GET_GAME_URL + gameSlug + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск игр\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchGames(query, page, gamesCount) {\r\n\tconst res = await axios.get(SEARCH_GAMES_URL, { params: { query: query, page: page, page_size: gamesCount } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для игры\r\n * @param {string} slug slug игры\r\n * @param {int} page страница\r\n */\r\nexport async function getGameUserInfo(token, slug) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_GAME_URL + slug + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\treturn res.data;\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport AuthStore from \"./AuthStore\";\r\nimport * as gameRequests from \"../services/gameRequests\";\r\n\r\nclass Game {\r\n\tgame = {};\r\n\tgameState = \"done\";\r\n\r\n\tuserInfo = { status: null, review: \"\", score: 0, spent_time: 0 };\r\n\tfriendsInfo = [];\r\n\tuserInfoState = \"done\";\r\n\r\n\tsetStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestGame = async (id) => {\r\n\t\tthis.gameState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tgameRequests.getGame(localStorage.getItem(\"token\"), id).then(this.requestGameSuccess, this.requestGameFailure);\r\n\t};\r\n\trequestGameSuccess = (result) => {\r\n\t\tthis.game = result;\r\n\t\tthis.gameState = \"done\";\r\n\t};\r\n\trequestGameFailure = (error) => {\r\n\t\tconsole.log(error.response.statusText);\r\n\t\tthis.gameState = \"error: \" + error.response.statusText;\r\n\t};\r\n\r\n\trequestUserInfo = async (slug) => {\r\n\t\tthis.userInfoState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tgameRequests.getGameUserInfo(localStorage.getItem(\"token\"), slug).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\r\n\t};\r\n\trequestUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetGameStatus = async (userInfo) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\tthis.setStatusState = \"pending\";\r\n\t\t\tgameRequests.setGameStatus(localStorage.getItem(\"token\"), this.game.slug, userInfo).then(this.setGameStatusSuccess, this.setGameStatusFailure);\r\n\t\t}\r\n\t};\r\n\tsetGameStatusSuccess = (result) => {\r\n\t\tthis.setStatusState = \"done\";\r\n\t};\r\n\tsetGameStatusFailure = (error) => {\r\n\t\tthis.setStatusState = \"error: \" + error;\r\n\t};\r\n}\r\n\r\nconst GameStore = new Game();\r\n//export default remotedev(GameStore, { name: \"Game\" });\r\nexport default GameStore;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\n\r\nclass Pages {\r\n\tLoginFormIsOpen = false;\r\n\tRegistrateFormIsOpen = false;\r\n\tResetPasswordFormIsOpen = false;\r\n\tsaveEpisodesBlockIsOpen = false;\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\topenLoginForm = async () => {\r\n\t\tthis.LoginFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseLoginForm = async () => {\r\n\t\tthis.LoginFormIsOpen = false;\r\n\t};\r\n\r\n\topenRegistrateForm = async () => {\r\n\t\tthis.RegistrateFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseRegistrateForm = async () => {\r\n\t\tthis.RegistrateFormIsOpen = false;\r\n\t};\r\n\r\n\topenResetPasswordForm = async () => {\r\n\t\tthis.ResetPasswordFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseResetPasswordForm = async () => {\r\n\t\tthis.ResetPasswordFormIsOpen = false;\r\n\t};\r\n\r\n\tsetSaveEpisodes = (status) => (this.saveEpisodesBlockIsOpen = status);\r\n}\r\n\r\nconst PagesStore = new Pages();\r\n//export default remotedev(PagesStore, { name: \"Pages\" });\r\nexport default PagesStore;\r\n","import React from \"react\";\r\n\r\nfunction StatusButtonGroup({ statuses, activeColor, onChangeStatus, userStatus }) {\r\n\treturn (\r\n\t\t<div className='contentStatuses'>\r\n\t\t\t{statuses.map((status) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={\"contentStatus\"}\r\n\t\t\t\t\tkey={status}\r\n\t\t\t\t\tstyle={{ backgroundColor: userStatus === status ? activeColor : \"#000000\" }}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonChangeStatus(status);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{status}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default StatusButtonGroup;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction FriendsActivityRow({ info }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className='fActivityBlock'>\r\n\t\t\t<h5 className='fActivityUser'>\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={window.location.origin + \"/user/\" + info.user.id}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\thistory.push(\"/user/\" + info.user.id);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{info.user.username}\r\n\t\t\t\t</a>\r\n\t\t\t</h5>\r\n\t\t\t<div className='fActivityInfo'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t\tinitialRating={info.score}\r\n\t\t\t\t\tclassName='fActivityInfoText'\r\n\t\t\t\t\treadonly={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<p className='fActivityInfoText'>Статус: {info.status} </p>\r\n\t\t\t\t<p className='fActivityInfoText' hidden={!info.spent_time}>\r\n\t\t\t\t\tВремя проходения: {info.spent_time} {intToHours(info.spent_time)}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='fActivityInfoText' hidden={info.review === \"\"}>\r\n\t\t\t\t\tОтзыв: {info.review}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default FriendsActivityRow;\r\n","import React from \"react\";\r\nimport FriendsActivityRow from \"./FriendsActivityRow\";\r\n\r\nfunction FriendsActivity({ info }) {\r\n\treturn <div className='friendsBlock'>{typeof info !== \"undefined\" ? info?.map((friendInfo) => <FriendsActivityRow info={friendInfo} key={friendInfo.user.id} />) : \"\"}</div>;\r\n}\r\n\r\nexport default FriendsActivity;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction TimeToBeat({ hltbInfo }) {\r\n\treturn (\r\n\t\t<div hidden={!hltbInfo || (hltbInfo?.gameplay_main < 0) & (hltbInfo?.gameplay_main_extra < 0) & (hltbInfo?.gameplay_completionist < 0)}>\r\n\t\t\t<p style={{ display: \"inline\" }}>Время прохождения: </p>\r\n\t\t\t<div hidden={hltbInfo?.gameplay_main < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='light-green-text' title={\"Главный сюжет\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo?.gameplay_main} {hltbInfo?.gameplay_main_unit}\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t</div>{\" \"}\r\n\t\t\t<p style={{ display: \"inline\" }}> </p>\r\n\t\t\t<div hidden={hltbInfo?.gameplay_main_extra < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='yellow-text' title={\"Главный сюжет + побочные задания\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo?.gameplay_main_extra} {hltbInfo?.gameplay_main_extra_unit}\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t</div>{\" \"}\r\n\t\t\t<p style={{ display: \"inline\" }}> </p>\r\n\t\t\t<div hidden={hltbInfo?.gameplay_completionist < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='red-text' title={\"Полное прохождение\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo?.gameplay_completionist} {hltbInfo?.gameplay_completionist_unit}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TimeToBeat;\r\n","import React from \"react\";\r\n\r\nfunction ScoreBlock({ score, text, className }) {\r\n\tfunction getColor(score) {\r\n\t\tswitch (true) {\r\n\t\t\tcase score >= 80:\r\n\t\t\t\treturn \"green\";\r\n\t\t\tcase score >= 60 && score < 80:\r\n\t\t\t\treturn \"yellow\";\r\n\t\t\tcase score < 60:\r\n\t\t\t\treturn \"red\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"green\";\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div hidden={!score} className={className}>\r\n\t\t\t<div className={\"metacritic \" + getColor(score)}>\r\n\t\t\t\t<p>{score}</p>\r\n\t\t\t</div>\r\n\t\t\t<p className='metacriticText'>{text}</p>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ScoreBlock;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nimport Rating from \"react-rating\";\r\n\r\nfunction RatingBlock({ initialRating, readonly, onChange, size }) {\r\n\treturn (\r\n\t\t<Rating\r\n\t\t\tstop={10}\r\n\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: size }} />}\r\n\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: size }} title={n} />\r\n\t\t\t))}\r\n\t\t\tinitialRating={initialRating}\r\n\t\t\treadonly={readonly}\r\n\t\t\tonChange={onChange}\r\n\t\t\tstyle={{ marginBottom: \"10px\" }}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default RatingBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport GameStore from \"../../store/GameStore\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport TimeToBeat from \"./TimeToBeat\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\nimport Rating from \"../Common/Rating\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst GamePage = observer((props) => {\r\n\tconst { game, gameState, requestGame, setGameStatus, userInfo, friendsInfo, userInfoState, requestUserInfo, setStatusState } = GameStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [spentTime, setSpentTime] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не играл\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClearUI();\r\n\t\t\trequestGame(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestGame]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, loggedIn]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = game.name;\r\n\t}, [game]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetSpentTime(userInfo.spent_time);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (gameState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${gameState}`);\r\n\t}, [gameState]);\r\n\tuseEffect(() => {\r\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\r\n\t}, [userInfoState]);\r\n\tuseEffect(() => {\r\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\r\n\t}, [setStatusState]);\r\n\r\n\tfunction setClearUI() {\r\n\t\tsetReview(\"\");\r\n\t\tsetSpentTime(\"\");\r\n\t\tsetUserStatus(\"Не играл\");\r\n\t\tsetUserRate(0);\r\n\t}\r\n\r\n\tfunction getTimeToBeatDatalist() {\r\n\t\tif (game.hltb) {\r\n\t\t\treturn (\r\n\t\t\t\t<datalist id='timesList'>\r\n\t\t\t\t\t<option value={strToFloat(game.hltb?.gameplay_main_extra)} className='testil' />\r\n\t\t\t\t\t<option value={strToFloat(game.hltb?.gameplay_main)} />\r\n\t\t\t\t\t<option value={strToFloat(game.hltb?.gameplay_completionist)} />\r\n\t\t\t\t</datalist>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction strToFloat(str) {\r\n\t\tif (str & (str !== -1))\r\n\t\t\tif (str.indexOf(\"½\") + 1) return parseFloat(str) + 0.5;\r\n\t\t\telse return parseFloat(str);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${game.background})` }} />\r\n\t\t\t<LoadingOverlay active={gameState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='contentPage'>\r\n\t\t\t\t\t<div className='contentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock widePoster'>\r\n\t\t\t\t\t\t\t<img src={game.poster} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='infoBlock tightInfo'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{game.name}</h1>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p>Разработчики: {game.developers}</p>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {game.release_date}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {game.genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Платформы: {game.platforms}</p>\r\n\t\t\t\t\t\t\t\t<TimeToBeat hltbInfo={game.hltb} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\tsetGameStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize='1.5rem'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не играл\", \"Буду играть\", \"Играю\", \"Дропнул\", \"Прошел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не играл\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={game.metacritic} text='Metascore' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{/* <video width='800' height='450' controls='controls' poster={game.rawg?.clip?.preview} src={game.rawg?.clip?.clip} type='video' /> */}\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: game.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='reviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\tid='spentTimeInput'\r\n\t\t\t\t\t\t\t\t\tlabel='Время прохождения (часы)'\r\n\t\t\t\t\t\t\t\t\tlist='timesList'\r\n\t\t\t\t\t\t\t\t\tvalue={spentTime}\r\n\t\t\t\t\t\t\t\t\tonChange={(event) => setSpentTime(event.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{getTimeToBeatDatalist()}\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"saveReviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ review: review, spent_time: spentTime });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='friendsBlock' hidden={!loggedIn | (friendsInfo?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default GamePage;\r\n","import axios from \"axios\";\r\nimport { SEARCH_MOVIES_URL, GET_MOVIE_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о фильме\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID фильма\r\n * @returns {object} Информация о фильме\r\n */\r\nexport async function getMovie(token, id) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/\");\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса фильма\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус фильма\r\n * @param {string} movieID ID фильма\r\n */\r\nexport async function setMovieStatus(token, id, user_info) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.put(GET_MOVIE_URL + id + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск фильмов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchMovies(query, page) {\r\n\tconst res = await axios.get(SEARCH_MOVIES_URL, { params: { query: query, page: page } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для фильма\r\n * @param {string} id id фильма\r\n */\r\nexport async function getMovieUserInfo(token, id) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_MOVIE_URL + id + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport AuthStore from \"./AuthStore\";\r\nimport * as movieRequests from \"../services/movieRequests\";\r\n\r\nclass Movie {\r\n\tmovie = { tmdb: { title: \"\", poster_path: \"\", developers: [{}] } };\r\n\tmovieState = \"done\";\r\n\r\n\tuserInfo = { status: null, review: \"\", score: 0, friends_info: [] };\r\n\tfriendsInfo = [];\r\n\tuserInfoState = \"done\";\r\n\r\n\tsetStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestMovie = async (id) => {\r\n\t\tthis.movieState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tmovieRequests.getMovie(localStorage.getItem(\"token\"), id).then(this.requestMovieSuccess, this.requestMovieFailure);\r\n\t};\r\n\trequestMovieSuccess = (result) => {\r\n\t\tthis.movie = result;\r\n\t\tconsole.log(result);\r\n\t\tthis.movieState = \"done\";\r\n\t};\r\n\trequestMovieFailure = (error) => {\r\n\t\tthis.movieState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUserInfo = async (id) => {\r\n\t\tthis.userInfoState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tmovieRequests.getMovieUserInfo(localStorage.getItem(\"token\"), id).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\r\n\t};\r\n\trequestUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetMovieStatus = async (userInfo) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\tthis.setStatusState = \"pending\";\r\n\t\t\tmovieRequests.setMovieStatus(localStorage.getItem(\"token\"), this.movie.id, userInfo).then(this.setMovieStatusSuccess, this.setMovieStatusFailure);\r\n\t\t}\r\n\t};\r\n\tsetMovieStatusSuccess = (result) => {\r\n\t\tthis.setStatusState = \"done\";\r\n\t};\r\n\tsetMovieStatusFailure = (error) => {\r\n\t\tthis.setStatusState = \"error: \" + error;\r\n\t};\r\n}\r\n\r\nconst MovieStore = new Movie();\r\n//export default remotedev(MovieStore, { name: \"Movie\" });\r\nexport default MovieStore;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport MovieStore from \"../../store/MovieStore\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\nimport Rating from \"../Common/Rating\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst MoviePage = observer((props) => {\r\n\tconst { movie, movieState, requestMovie, setMovieStatus, userInfo, friendsInfo, userInfoState, requestUserInfo, setStatusState } = MovieStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestMovie(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestMovie]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = movie.name;\r\n\t}, [movie]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (movieState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${movieState}`);\r\n\t}, [movieState]);\r\n\tuseEffect(() => {\r\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\r\n\t}, [userInfoState]);\r\n\tuseEffect(() => {\r\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\r\n\t}, [setStatusState]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${movie.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='contentPage'>\r\n\t\t\t\t\t<div className='contentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock tightPoster'>\r\n\t\t\t\t\t\t\t<img src={movie.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='infoBlock wideInfo'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{movie.name}</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{movie.original_name}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {movie.release_date}</p>\r\n\t\t\t\t\t\t\t\t<p>Продолжительность (мин): {movie.runtime}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {movie.genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Компания: {movie.production_companies}</p>\r\n\t\t\t\t\t\t\t\t<p>Слоган: {movie.tagline}</p>\r\n\t\t\t\t\t\t\t\t<p>В ролях: {movie.cast}</p>\r\n\t\t\t\t\t\t\t\t<p>Режиссер: {movie.directors}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize='1.5rem'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={movie.score} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: movie.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='reviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"saveReviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ review: review });\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='friendsBlock' hidden={!loggedIn | (friendsInfo?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default MoviePage;\r\n","import axios from \"axios\";\r\nimport { SEARCH_SHOWS_URL, GET_SHOW_URL, GET_UNWATCHED_EPISODES_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сериале\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID сериала\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShow(token, id) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(GET_SHOW_URL + id + \"/\");\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сезоне сериала\r\n * @param {string} token Токен доступа\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowSeason(token, showID, seasonNumber) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber, { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber);\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о серии сериала\r\n * @param {string} token Токен доступа\r\n * @param {string} showID ID сериала\r\n * @param {string} seasonNumber номер сезона\r\n * @param {string} episodeNumber номер эпизода\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowEpisode(token, showID, seasonNumber, episodeNumber) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber, { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber);\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус сериала\r\n * @param {string} id ID сериала\r\n */\r\nexport async function setShowStatus(token, id, user_info) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.put(GET_SHOW_URL + id + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус сезона сериала\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n */\r\nexport async function setShowSeasonStatus(token, showID, seasonNumber, user_info) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.put(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} episodesList Список объектов эпизодов\r\n * @param {string} showID ID сериала\r\n */\r\nexport async function setShowEpisodesStatus(token, showID, episodesList) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.put(GET_SHOW_URL + showID + \"/episodes/\", episodesList, { headers: { Authorization: AuthStr } });\r\n\treturn res;\r\n}\r\n\r\n/**\r\n * Запрос на поиск сериалов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchShows(query, page) {\r\n\tconst res = await axios.get(SEARCH_SHOWS_URL, { params: { query: query, page: page } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowUserInfo(token, showID) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_SHOW_URL + showID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сезона сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowSeasonUserInfo(token, showID, seasonID) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для эпизода сериала\r\n * @param {string} showID id сериала\r\n * @param {int} page страница\r\n */\r\nexport async function getShowEpisodeUserInfo(token, showID, seasonID, episodeID) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/episode/\" + episodeID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сериале\r\n * @param {string} token Токен доступа\r\n * @returns {Array} Список эпизодов\r\n */\r\nexport async function getUnwatchedEpisodes(token) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_UNWATCHED_EPISODES_URL, { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n","import { makeAutoObservable, runInAction } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport AuthStore from \"./AuthStore\";\r\nimport * as showRequests from \"../services/showRequests\";\r\n\r\nclass Show {\r\n\tshow = {};\r\n\tshowState = \"done\";\r\n\tuserInfo = { status: null, review: \"\", score: 0 };\r\n\tfriendsInfo = [];\r\n\tuserInfoState = \"done\";\r\n\r\n\tshowSeasons = {};\r\n\tshowSeasonsState = {};\r\n\tshowSeasonsUserInfo = {};\r\n\tshowSeasonsUserInfoState = {};\r\n\r\n\tsetStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestShow = async (id) => {\r\n\t\tthis.showState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tshowRequests.getShow(localStorage.getItem(\"token\"), id).then(this.requestShowSuccess, this.requestShowFailure);\r\n\t};\r\n\trequestShowSuccess = (result) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = \"done\";\r\n\t};\r\n\trequestShowFailure = (error) => {\r\n\t\tthis.showState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeason = async (showID, seasonNumber) => {\r\n\t\tthis.showState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tshowRequests.getShowSeason(localStorage.getItem(\"token\"), showID, seasonNumber).then(this.requestSeasonSuccess, this.requestSeasonFailure);\r\n\t};\r\n\trequestSeasonSuccess = (result) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = \"done\";\r\n\t};\r\n\trequestSeasonFailure = (error) => {\r\n\t\tthis.showState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeasons = async (showID, seasonNumber) => {\r\n\t\tthis.showSeasonsState[seasonNumber] = \"pending\";\r\n\t\tthis.showSeasons[seasonNumber] = {};\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tshowRequests.getShowSeason(localStorage.getItem(\"token\"), showID, seasonNumber).then(\r\n\t\t\t(res) => this.requestSeasonsSuccess(res, seasonNumber),\r\n\t\t\t(res) => this.requestSeasonsFailure(res, seasonNumber)\r\n\t\t);\r\n\t};\r\n\trequestSeasonsSuccess = (result, seasonNumber) => {\r\n\t\tthis.showSeasons[seasonNumber] = result;\r\n\t\tthis.showSeasonsState[seasonNumber] = \"done\";\r\n\t};\r\n\trequestSeasonsFailure = (error, seasonNumber) => {\r\n\t\tthis.showSeasonsState[seasonNumber] = \"error: \" + error;\r\n\t};\r\n\r\n\trequestEpisode = async (showID, seasonNumber, episodeNumber) => {\r\n\t\tthis.showState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tshowRequests.getShowEpisode(localStorage.getItem(\"token\"), showID, seasonNumber, episodeNumber).then(this.requestEpisodeSuccess, this.requestEpisodeFailure);\r\n\t};\r\n\trequestEpisodeSuccess = (result) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = \"done\";\r\n\t};\r\n\trequestEpisodeFailure = (error) => {\r\n\t\tthis.showState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestShowUserInfo = async (id) => {\r\n\t\tthis.userInfoState = \"pending\";\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\tshowRequests.getShowUserInfo(localStorage.getItem(\"token\"), id).then(this.requestShowUserInfoSuccess, this.requestShowUserInfoFailure);\r\n\t\t}\r\n\t};\r\n\trequestShowUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestShowUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeasonUserInfo = async (showID, seasonID) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\trunInAction(() => (this.userInfoState = \"pending\"));\r\n\t\t\tshowRequests.getShowSeasonUserInfo(localStorage.getItem(\"token\"), showID, seasonID).then(this.requestSeasonUserInfoSuccess, this.requestSeasonUserInfoFailure);\r\n\t\t}\r\n\t};\r\n\trequestSeasonUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info };\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestSeasonUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeasonsUserInfo = async (showID, seasonID) => {\r\n\t\tthis.showSeasonsUserInfo[seasonID] = {};\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\trunInAction(() => (this.showSeasonsUserInfoState[seasonID] = \"pending\"));\r\n\t\t\tshowRequests.getShowSeasonUserInfo(localStorage.getItem(\"token\"), showID, seasonID).then(\r\n\t\t\t\t(res) => this.requestSeasonsUserInfoSuccess(res, seasonID),\r\n\t\t\t\t(res) => this.requestSeasonsUserInfoFailure(res, seasonID)\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\trequestSeasonsUserInfoSuccess = (result, seasonID) => {\r\n\t\tthis.showSeasonsUserInfoState[seasonID] = \"done\";\r\n\t\tthis.showSeasonsUserInfo[seasonID] = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\r\n\t};\r\n\trequestSeasonsUserInfoFailure = (error, seasonID) => {\r\n\t\tthis.showSeasonsUserInfoState[seasonID] = \"error: \" + error;\r\n\t};\r\n\r\n\trequestEpisodeUserInfo = async (showID, seasonID, episodeID) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\trunInAction(() => (this.userInfoState = \"pending\"));\r\n\t\t\tshowRequests.getShowEpisodeUserInfo(localStorage.getItem(\"token\"), showID, seasonID, episodeID).then(this.requestEpisodeUserInfoSuccess, this.requestEpisodeUserInfoFailure);\r\n\t\t}\r\n\t};\r\n\trequestEpisodeUserInfoSuccess = (result) => {\r\n\t\tthis.userInfoState = \"done\";\r\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show };\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t};\r\n\trequestEpisodeUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetShowStatus = async (userInfo) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\tthis.setStatusState = \"pending\";\r\n\t\t\tshowRequests.setShowStatus(localStorage.getItem(\"token\"), this.show.id, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\r\n\t\t}\r\n\t};\r\n\tsetShowStatusSuccess = (result) => {\r\n\t\tthis.setStatusState = \"done\";\r\n\t};\r\n\tsetShowStatusFailure = (error) => {\r\n\t\tthis.setStatusState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetSeasonStatus = async (userInfo, showID, seasonNumber) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\trunInAction(() => (this.setStatusState = \"pending\"));\r\n\t\t\tshowRequests.setShowSeasonStatus(localStorage.getItem(\"token\"), showID, seasonNumber, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\r\n\t\t}\r\n\t};\r\n\r\n\tsetEpisodesStatus = async (episodesList, showID, seasonsToUpdate = []) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\trunInAction(() => (this.setStatusState = \"pending\"));\r\n\t\t\tshowRequests.setShowEpisodesStatus(localStorage.getItem(\"token\"), showID, episodesList).then((result) => {\r\n\t\t\t\tif (seasonsToUpdate) for (let season in seasonsToUpdate) this.requestSeasonsUserInfo(showID, seasonsToUpdate[season]);\r\n\t\t\t\tthis.setShowStatusSuccess();\r\n\t\t\t}, this.setShowStatusFailure);\r\n\t\t}\r\n\t};\r\n\r\n\tgetShowSeason = (seasonNumber) => {\r\n\t\treturn this.showSeasons[seasonNumber];\r\n\t};\r\n\r\n\tgetShowSeasonState = (seasonNumber) => {\r\n\t\treturn this.showSeasonsState[seasonNumber];\r\n\t};\r\n\r\n\tgetShowSeasonUserInfo = (seasonNumber) => {\r\n\t\treturn this.showSeasonsUserInfo[seasonNumber];\r\n\t};\r\n\r\n\tgetEpisodesUserInfo = (season, id) => {\r\n\t\tfor (let episodeNumber in this.showSeasonsUserInfo[season].episodes) {\r\n\t\t\tlet episode = this.showSeasonsUserInfo[season].episodes[episodeNumber];\r\n\t\t\tif (episode.tmdb_id === id) return episode;\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tget anySeasonLoading() {\r\n\t\tfor (let season in this.showSeasonsState) if (this.showSeasonsState[season] === \"pending\") return true;\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nconst ShowStore = new Show();\r\n//export default remotedev(ShowStore, { name: \"Show\" });\r\nexport default ShowStore;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction DetailedEpisodeRow({ episode, showID, setEpisodeUserStatus, loggedIn, userInfo, checkAll, userWatchedShow, setSaveEpisodes }) {\r\n\tlet history = useHistory();\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [isChecked, setIsChecked] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUserRate(userInfo?.score);\r\n\t\tsetIsChecked(userInfo?.score > -1);\r\n\t}, [userInfo]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (checkAll === -1) {\r\n\t\t\t\tsetIsChecked(false);\r\n\t\t\t} else if (checkAll === 1) {\r\n\t\t\t\tsetIsChecked(true);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[checkAll]\r\n\t);\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleDateString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='episodeRow detailRow'>\r\n\t\t\t<div className='episodeRowCheckDate'>\r\n\t\t\t\t<div className='episodeRowCheck' hidden={!loggedIn || !userWatchedShow}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\tid={`cbEpisode${episode.id}`}\r\n\t\t\t\t\t\tchecked={isChecked}\r\n\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\t\t\tsetIsChecked(res.target.checked);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className='episodeRowDate'>{parseDate(episode.air_date)}</p>\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='episodeRowRate'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstart={-1}\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' />))}\r\n\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' title={n} />))}\r\n\t\t\t\t\treadonly={!loggedIn}\r\n\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\tsetIsChecked(score > -1);\r\n\t\t\t\t\t\tsetEpisodeUserStatus({ episodes: [{ tmdb_id: episode.id, score: score }] }, showID);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<a\r\n\t\t\t\tclassName='episodeRowName detailRow'\r\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={episode.name}>\r\n\t\t\t\tСерия {episode.episode_number} - {episode.name}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailedEpisodeRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport { computed } from \"mobx\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport DetailedEpisodeRow from \"./DetailedEpisodeRow\";\r\nimport Rating from \"react-rating\";\r\n\r\nconst SeasonBlock = observer(\r\n\t({\r\n\t\tshowID,\r\n\t\tseasonNumber,\r\n\t\t//onChangeStatus,\r\n\t\tuserWatchedShow,\r\n\t}) => {\r\n\t\tconst { loggedIn } = AuthStore;\r\n\t\tconst { openLoginForm, setSaveEpisodes } = PagesStore;\r\n\t\tconst { requestSeasons, requestSeasonsUserInfo, setEpisodesStatus, setSeasonStatus } = ShowStore;\r\n\t\tconst showSeason = computed(() => ShowStore.getShowSeason(seasonNumber)).get();\r\n\t\tconst showSeasonState = computed(() => ShowStore.getShowSeasonState(seasonNumber)).get();\r\n\t\tconst showUserInfo = computed(() => ShowStore.getShowSeasonUserInfo(seasonNumber)).get();\r\n\r\n\t\tlet history = useHistory();\r\n\t\tconst [isChecked, setIsChecked] = useState(0);\r\n\t\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\trequestSeasons(showID, seasonNumber);\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[showID, seasonNumber, requestSeasons]\r\n\t\t);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tif (loggedIn) requestSeasonsUserInfo(showID, seasonNumber);\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[loggedIn, showID, seasonNumber]\r\n\t\t);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tif (showUserInfo?.score) {\r\n\t\t\t\t\tsetUserRate(showUserInfo.score);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[showUserInfo]\r\n\t\t);\r\n\r\n\t\tfunction getEpisodeByID(episodes, id) {\r\n\t\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<LoadingOverlay active={showSeasonState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div key={showSeason?.id} className='seasonBlock'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName='name'>\r\n\t\t\t\t\t\t<h5> {showSeason?.name} </h5>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='name'>\r\n\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, showID, seasonNumber);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<details open={true} className='episodeRows'>\r\n\t\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t\t<div style={{ marginLeft: \"5px\" }} hidden={!loggedIn || !userWatchedShow}>\r\n\t\t\t\t\t\t\tВыбрать все&nbsp;\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\tchecked={isChecked > 0}\r\n\t\t\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t{showSeason?.episodes\r\n\t\t\t\t\t\t\t\t?.map((episode, counter) => (\r\n\t\t\t\t\t\t\t\t\t<li className='episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t<DetailedEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\tshowID={showID}\r\n\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(showUserInfo?.episodes, episode?.id)}\r\n\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\r\n\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\r\n\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\r\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t.reverse()}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</details>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nexport default SeasonBlock;\r\n","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\n\r\nimport SeasonBlock from \"./SeasonBlock\";\r\n\r\nconst SeasonsBlock = observer(({ showID, seasons, userWatchedShow }) => {\r\n\tconst { showSeasonsUserInfo, showSeasons, setEpisodesStatus, setStatusState, anySeasonLoading } = ShowStore;\r\n\tconst { saveEpisodesBlockIsOpen, setSaveEpisodes } = PagesStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\r\n\tfunction getEpisodeByID(episodes, id) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t}\r\n\r\n\tfunction sendEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tlet seasons = [];\r\n\t\tfor (let season in showSeasons) {\r\n\t\t\tfor (let episode in showSeasons[season].episodes) {\r\n\t\t\t\tlet currentValue = getEpisodeByID(showSeasonsUserInfo[season].episodes, showSeasons[season].episodes[episode].id);\r\n\t\t\t\tlet cbValue = document.getElementById(`cbEpisode${showSeasons[season].episodes[episode].id}`).checked;\r\n\t\t\t\tlet currentStatus = currentValue?.score > -1;\r\n\t\t\t\tif (cbValue !== currentStatus) {\r\n\t\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: cbValue ? 0 : -1 });\r\n\t\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\tfunction sendAllEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tlet seasons = [];\r\n\t\tfor (let season in showSeasons) {\r\n\t\t\tfor (let episode in showSeasons[season].episodes) {\r\n\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: 0 });\r\n\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<LoadingOverlay active={setStatusState === \"pending\"} spinner text='Обновление...'>\r\n\t\t\t<button\r\n\t\t\t\tclassName={\"checkAllEpisodesButton\"}\r\n\t\t\t\thidden={!loggedIn | !userWatchedShow}\r\n\t\t\t\tdisabled={anySeasonLoading}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsendAllEpisodes();\r\n\t\t\t\t}}>\r\n\t\t\t\tПосмотрел весь сериал\r\n\t\t\t</button>\r\n\t\t\t{seasons?.map((season) => <SeasonBlock showID={showID} seasonNumber={season.season_number} key={season.season_number} userWatchedShow={userWatchedShow} />).reverse()}\r\n\t\t\t<div className='saveEpisodesHeader' hidden={!saveEpisodesBlockIsOpen}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='saveEpisodesButton'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsendEpisodes();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tСохранить\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</LoadingOverlay>\r\n\t);\r\n});\r\n\r\nexport default SeasonsBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\n\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport SeasonsBlock from \"./SeasonsBlock\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ShowPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\tconst { requestShow, show, showState, setShowStatus, requestShowUserInfo, userInfo, friendsInfo, userInfoState, setStatusState } = ShowStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShow(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestShow]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\r\n\t}, [showState]);\r\n\tuseEffect(() => {\r\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\r\n\t}, [userInfoState]);\r\n\tuseEffect(() => {\r\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\r\n\t}, [setStatusState]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${show.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='contentPage'>\r\n\t\t\t\t\t<div className='contentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock tightPoster'>\r\n\t\t\t\t\t\t\t<img src={show.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='infoBlock wideInfo'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{show.name}</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{show.original_name}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.genres}>Жанр: {show.genres}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.companies}>Компания: {show.companies}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.first_date}>Дата выхода первой серии: {show.first_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.last_date}>Дата выхода последней серии: {show.last_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={show.episode_runtime === null}>Продолжительность (мин): {show.episode_run_time}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество сезонов: {show.seasons_count}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество серий: {show.episodes_count}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.show_status}>Статус: {show.show_status}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Смотрю\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={show.score} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showSeasonsBody'>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Список серий</h3>\r\n\t\t\t\t\t\t\t<SeasonsBlock showID={show.id} seasons={show.seasons} userWatchedShow={userStatus !== \"Не смотрел\"} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='reviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"saveReviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ review: document.getElementById(\"reviewInput\").value });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='friendsBlock' hidden={friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ShowPage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport DetailedEpisodeRow from \"./DetailedEpisodeRow\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst SeasonPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { requestSeason, show, showState, setSeasonStatus, setEpisodesStatus, requestSeasonUserInfo, userInfo, userInfoState, friendsInfo, setStatusState } = ShowStore;\r\n\tconst { openLoginForm, setSaveEpisodes, saveEpisodesBlockIsOpen } = PagesStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { show_id, number } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [chartData, setChartData] = useState([]);\r\n\tconst [isChecked, setIsChecked] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\tsetIsChecked(0);\r\n\t\t\trequestSeason(show_id, number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, number, requestSeason]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestSeasonUserInfo(show_id, number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.show?.tmdb_name + \" - \" + show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (show.episodes)\r\n\t\t\tif (show.episodes.length > 0) {\r\n\t\t\t\tlet newData = [];\r\n\t\t\t\tfor (let episode in show.episodes) {\r\n\t\t\t\t\tif (show.episodes[episode].vote_average > 0) newData.push({ name: \"Ep \" + show.episodes[episode].episode_number, Оценка: show.episodes[episode].vote_average });\r\n\t\t\t\t}\r\n\t\t\t\tsetChartData(newData);\r\n\t\t\t}\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (userInfo?.score) setUserRate(userInfo.score);\r\n\t\t\telse setUserRate(0);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\r\n\t}, [showState]);\r\n\tuseEffect(() => {\r\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\r\n\t}, [userInfoState]);\r\n\tuseEffect(() => {\r\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\r\n\t}, [setStatusState]);\r\n\r\n\tfunction getEpisodeByID(episodes, id) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t}\r\n\r\n\tfunction sendEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tfor (let episode in userInfo.episodes) {\r\n\t\t\tlet currentValue = userInfo.episodes[episode];\r\n\t\t\tlet cbValue = document.getElementById(`cbEpisode${currentValue.tmdb_id}`).checked;\r\n\t\t\tlet currentStatus = currentValue?.score > -1;\r\n\t\t\tif (cbValue !== currentStatus) episodes.push({ tmdb_id: currentValue.tmdb_id, score: cbValue ? 0 : -1 });\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, show_id);\r\n\t\trequestSeasonUserInfo(show_id, number);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${show.show?.tmdb_backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='contentPage'>\r\n\t\t\t\t\t<div className='contentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock tightPoster'>\r\n\t\t\t\t\t\t\t<img src={show.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='infoBlock wideInfo'>\r\n\t\t\t\t\t\t\t<h1 className='header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show.show?.id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show.show?.tmdb_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{show.show?.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + show.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{show.show?.tmdb_original_name + \" - Season \" + show.season_number}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.air_date}>Дата выхода: {show.air_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.episodes}>Количество серий: {show.episodes?.length}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, show_id, show.season_number);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName={\"saveReviewButton\"}\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSeasonStatus({ review: document.getElementById(\"reviewInput\").value }, show_id, show.season_number);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showSeasonsBody'>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Список серий</h3>\r\n\t\t\t\t\t\t\t<details open={false} className='episodeRows' style={{ marginBottom: \"15px\" }}>\r\n\t\t\t\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t\t\t\t<div style={{ marginLeft: \"5px\" }} hidden={!loggedIn || !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t\tВыбрать все&nbsp;\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\t\tchecked={isChecked > 0}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t{show.episodes\r\n\t\t\t\t\t\t\t\t\t\t? show.episodes.map((episode, counter) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li className='episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DetailedEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowID={show_id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(userInfo.episodes, episode.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</details>\r\n\t\t\t\t\t\t\t<div hidden={!(chartData.length > 0)}>\r\n\t\t\t\t\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={200}>\r\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t<XAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={chartData.length * 30}>\r\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }} layout='vertical'>\r\n\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t<YAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} type='category' />\r\n\t\t\t\t\t\t\t\t\t\t\t<XAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} type='number' />\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='friendsBlock' hidden={friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t\t<div className='saveEpisodesHeader' hidden={!saveEpisodesBlockIsOpen}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='saveEpisodesButton'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsendEpisodes();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tСохранить\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SeasonPage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst EpisodePage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\tconst { requestEpisode, show, showState, setEpisodesStatus, requestEpisodeUserInfo, userInfo, userInfoState, friendsInfo, setStatusState } = ShowStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { show_id, season_number, episode_number } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(-1);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(-1);\r\n\t\t\trequestEpisode(show_id, season_number, episode_number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, season_number, episode_number, requestEpisode]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestEpisodeUserInfo(show_id, season_number, episode_number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(-1);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, season_number, episode_number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.show?.tmdb_name + \" - \" + show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (userInfo?.score) setUserRate(userInfo.score);\r\n\t\t\telse setUserRate(-1);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\r\n\t}, [showState]);\r\n\tuseEffect(() => {\r\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\r\n\t}, [userInfoState]);\r\n\tuseEffect(() => {\r\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\r\n\t}, [setStatusState]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${show.show?.tmdb_backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='contentPage'>\r\n\t\t\t\t\t<div className='contentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock widePoster'>\r\n\t\t\t\t\t\t\t<img src={show.still_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='infoBlock tightInfo'>\r\n\t\t\t\t\t\t\t<h1 className='header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{show.show?.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + show.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{show.show?.tmdb_original_name + \" - Season \" + show.season_number + \" - Episode \" + show.episode_number}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.air_date}>Дата выхода: {show.air_date}</p>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id + \"/season/\" + season_number}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id + \"/season/\" + season_number);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСезон: {show.season_number}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tstart={-1}\r\n\t\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat(\r\n\t\t\t\t\t\t\t\t\t\t\t[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />)\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat(\r\n\t\t\t\t\t\t\t\t\t\t\t[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />)\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show.id, score: score }] }, show_id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName={\"saveReviewButton\"}\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show.id, review: review }] }, show_id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<ScoreBlock score={show.score} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='friendsBlock' hidden={friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default EpisodePage;\r\n","import axios from \"axios\";\r\nimport { USER_INFO_URL, SEARCH_USERS_URL, USER_CALENDAR_URL, USER_SETTINGS_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о пользователе\r\n * @param {string} token Токен доступа\r\n * @param {string} userID ID пользователя\r\n * @returns {object} Информация о пользователе\r\n */\r\nexport async function getUserInfo(token, userID) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/\");\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск пользователей\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchUsers(query) {\r\n\tconst res = await axios.get(SEARCH_USERS_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса пользовтеля (добавить в друзья и тд)\r\n * @param {string} token Токен доступа\r\n * @param {boolean} is_following Статус фильма\r\n * @param {string} userID ID пользовтеля\r\n */\r\nexport async function setUserStatus(token, is_following, userID) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.put(USER_INFO_URL + userID + \"/follow/\", is_following, { headers: { Authorization: AuthStr } });\r\n\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\telse return null;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {string} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserLog(token, userID, page, resultsOnPage) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage } }, { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage } });\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог друзей пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {int} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserFriendsLog(token, userID, page, resultsOnPage) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(USER_INFO_URL + userID + \"/friends_log/\", { params: { page: page, page_size: resultsOnPage }, headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий календарь релизов пользователя\r\n */\r\nexport async function getUserCalendar(token) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(USER_CALENDAR_URL, { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий настройки пользователя\r\n */\r\nexport async function getUserSettings(token) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(USER_SETTINGS_URL, { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, изменяющий настройки пользователя\r\n */\r\nexport async function patchUserSettings(token, settings) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.patch(USER_SETTINGS_URL, settings, { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport * as userRequests from \"../services/userRequests\";\r\nimport * as gameRequests from \"../services/gameRequests\";\r\nimport * as movieRequests from \"../services/movieRequests\";\r\nimport * as showRequests from \"../services/showRequests\";\r\n\r\nclass Search {\r\n\tgames = [];\r\n\tmovies = [];\r\n\tshows = [];\r\n\tusers = [];\r\n\tgamesState = \"done\";\r\n\tmoviesState = \"done\";\r\n\tshowsState = \"done\";\r\n\tusersState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\tsearchGames = async (query, page, gamesCount) => {\r\n\t\tthis.gamesState = \"pending\";\r\n\t\tgameRequests.searchGames(query, page, gamesCount).then(this.searchGamesSuccess, this.searchGamesFailure);\r\n\t};\r\n\tsearchGamesSuccess = (result) => {\r\n\t\tthis.games = result;\r\n\t\tthis.gamesState = \"done\";\r\n\t};\r\n\tsearchGamesFailure = (error) => {\r\n\t\tthis.gamesState = \"error: \" + error;\r\n\t};\r\n\r\n\tsearchMovies = async (query, page) => {\r\n\t\tthis.moviesState = \"pending\";\r\n\t\tmovieRequests.searchMovies(query, page).then(this.searchMoviesSuccess, this.searchMoviesFailure);\r\n\t};\r\n\tsearchMoviesSuccess = (result) => {\r\n\t\tthis.movies = result.results;\r\n\t\tthis.moviesState = \"done\";\r\n\t};\r\n\tsearchMoviesFailure = (error) => {\r\n\t\tthis.moviesState = \"error: \" + error;\r\n\t};\r\n\r\n\tsearchShows = async (query, page) => {\r\n\t\tthis.showsState = \"pending\";\r\n\t\tshowRequests.searchShows(query, page).then(this.searchShowsSuccess, this.searchShowsFailure);\r\n\t};\r\n\tsearchShowsSuccess = (result) => {\r\n\t\tthis.shows = result.results;\r\n\t\tthis.showsState = \"done\";\r\n\t};\r\n\tsearchShowsFailure = (error) => {\r\n\t\tthis.showsState = \"error: \" + error;\r\n\t};\r\n\r\n\tsearchUsers = async (query) => {\r\n\t\tthis.usersState = \"pending\";\r\n\t\tuserRequests.searchUsers(query).then(this.searchUsersSuccess, this.searchUsersFailure);\r\n\t};\r\n\tsearchUsersSuccess = (result) => {\r\n\t\tthis.users = result;\r\n\t\tthis.usersState = \"done\";\r\n\t};\r\n\tsearchUsersFailure = (error) => {\r\n\t\tthis.usersState = \"error: \" + error;\r\n\t};\r\n}\r\n\r\nconst SearchStore = new Search();\r\n//export default remotedev(SearchStore, { name: \"Search\" });\r\nexport default SearchStore;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardGame({ game }) {\r\n\tlet history = useHistory();\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (game.released) {\r\n\t\t\tlet mas = game.released.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [game]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardGame'>\r\n\t\t\t<div className='searchCardGameImage' style={{ backgroundImage: `url(${game.background_image})` }} />\r\n\t\t\t<div className='searchCardGameText'>\r\n\t\t\t\t<div className='searchCardGameName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.slug}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + game.slug);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={game.name}>\r\n\t\t\t\t\t\t<h4>{game.name}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n//onMouseDown={mouseDownHandler}\r\n\r\nexport default CardGame;\r\n","import React from \"react\";\r\nimport CardGame from \"./Cards/CardGame\";\r\n\r\nfunction GamesBlock({ games, gamesPage, onPaginate, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t<h3>Игры</h3>\r\n\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={gamesPage === 1}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(gamesPage - 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&lt;\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t\t{games.map((game) => (\r\n\t\t\t\t\t\t<CardGame game={game} key={game.id} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={games.length < 6}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(gamesPage + 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&gt;\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n//onMouseDown={mouseDownHandler}\r\n\r\nexport default GamesBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardMovie({ movie }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (movie.release_date) {\r\n\t\t\tlet mas = movie.release_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [movie]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardMovie'>\r\n\t\t\t<div className='searchCardMovieImage' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + movie.poster_path})` }} />\r\n\t\t\t<div className='searchCardMovieText'>\r\n\t\t\t\t<div className='searchCardMovieName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={movie.title}>\r\n\t\t\t\t\t\t<h4>{movie.title}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CardMovie;\r\n","import React from \"react\";\r\nimport CardMovie from \"./Cards/CardMovie\";\r\n\r\nfunction MoviesBlock({ movies, moviesPage, onPaginate, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t<h3>Фильмы</h3>\r\n\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={moviesPage === 1}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(moviesPage - 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&lt;\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t\t{movies.map((movie) => (\r\n\t\t\t\t\t\t<CardMovie movie={movie} key={movie.id} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={movies.length < 20}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(moviesPage + 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&gt;\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n//onMouseDown={mouseDownHandler}\r\n\r\nexport default MoviesBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardShow({ show }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (show.first_air_date) {\r\n\t\t\tlet mas = show.first_air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [show]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardMovie'>\r\n\t\t\t<div className='searchCardMovieImage' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + show.poster_path})` }} />\r\n\t\t\t<div className='searchCardMovieText'>\r\n\t\t\t\t<div className='searchCardMovieName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + show.id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={show.name}>\r\n\t\t\t\t\t\t<h4>{show.name}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CardShow;\r\n","import React from \"react\";\r\nimport CardShow from \"./Cards/CardShow\";\r\n\r\nfunction ShowsBlock({ shows, showsPage, onPaginate, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t<h3>Сериалы</h3>\r\n\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={showsPage === 1}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(showsPage - 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&lt;\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t\t{shows.map((show) => (\r\n\t\t\t\t\t\t<CardShow show={show} key={show.id} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={shows.length < 20}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(showsPage + 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&gt;\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ShowsBlock;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardUser({ user }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<a\r\n\t\t\thref={window.location.origin + \"/user/\" + user.id}\r\n\t\t\tonClick={(e) => {\r\n\t\t\t\thistory.push(\"/user/\" + user.id);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}}>\r\n\t\t\t<div className='cardUser'>\r\n\t\t\t\t<div className='cardUserImage' style={{ backgroundImage: `url(${\"http://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }}>\r\n\t\t\t\t\t{\" \"}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='cardUserText'>\r\n\t\t\t\t\t<h4>{user.username}</h4>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</a>\r\n\t);\r\n}\r\n\r\nexport default CardUser;\r\n","import React from \"react\";\r\nimport CardUser from \"../../Common/CardUser\";\r\n\r\nfunction UsersBlock({ users, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t<h3>Пользователи</h3>\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{users.map((user) => (\r\n\t\t\t\t\t<CardUser user={user} key={user.username} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UsersBlock;\r\n","import React from \"react\";\r\n\r\nfunction CategoriesTab({ categories, activeColor, onChangeCategory, activeCategory, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t{categories.map((category, counter) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={\"categoriesTab\"}\r\n\t\t\t\t\tkey={counter}\r\n\t\t\t\t\tstyle={{ color: activeCategory === category ? activeColor : \"rgb(207, 207, 207)\" }}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonChangeCategory(category);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{category}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t\t<hr style={{ backgroundColor: activeColor, height: 2.5, marginTop: \"0px\", marginBottom: \"10px\" }} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CategoriesTab;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport SearchStore from \"../../store/SearchStore\";\r\n\r\nimport { MDBRow, MDBCol, MDBContainer, MDBIcon, MDBFormInline } from \"mdbreact\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\nimport GamesBlock from \"./Blocks/GamesBlock\";\r\nimport MoviesBlock from \"./Blocks/MoviesBlock\";\r\nimport ShowsBlock from \"./Blocks/ShowsBlock\";\r\nimport UsersBlock from \"./Blocks/UsersBlock\";\r\nimport CategoriesTab from \"../Common/CategoriesTab\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst SearchPage = observer((props) => {\r\n\tconst { gamesState, searchGames, games, moviesState, searchMovies, movies, showsState, searchShows, shows, usersState, searchUsers, users } = SearchStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { query } = useParams();\r\n\tconst [queryText, setQueryText] = useState(\"\");\r\n\tconst [gamesPage, setGamesPage] = useState(1);\r\n\tconst [moviesPage, setMoviesPage] = useState(1);\r\n\tconst [showsPage, setShowsPage] = useState(1);\r\n\r\n\tconst [activeCategory, setActiveCategory] = useState(\"Всё\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Игры\") searchGames(query, 1, 6);\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Фильмы\") searchMovies(query, 1);\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Сериалы\") searchShows(query, 1);\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Пользователи\") searchUsers(query);\r\n\t\t\tsetQueryText(query);\r\n\t\t\tdocument.title = \"Поиск\";\r\n\t\t\tsetGamesPage(1);\r\n\t\t\tsetMoviesPage(1);\r\n\t\t\tsetShowsPage(1);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[query, searchGames, searchMovies, searchUsers, searchShows, activeCategory]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (gamesState.startsWith(\"error:\")) toast.error(`Ошибка поиска игр! ${gamesState}`);\r\n\t}, [gamesState]);\r\n\tuseEffect(() => {\r\n\t\tif (moviesState.startsWith(\"error:\")) toast.error(`Ошибка поиска фильмов! ${moviesState}`);\r\n\t}, [moviesState]);\r\n\tuseEffect(() => {\r\n\t\tif (showsState.startsWith(\"error:\")) toast.error(`Ошибка поиска серилов! ${showsState}`);\r\n\t}, [showsState]);\r\n\tuseEffect(() => {\r\n\t\tif (usersState.startsWith(\"error:\")) toast.error(`Ошибка поиска пользователей! ${usersState}`);\r\n\t}, [usersState]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg textureBG' />\r\n\t\t\t<MDBContainer>\r\n\t\t\t\t<MDBRow>\r\n\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t<MDBCol className='searchPage'>\r\n\t\t\t\t\t\t<h1>Поиск</h1>\r\n\t\t\t\t\t\t<MDBFormInline\r\n\t\t\t\t\t\t\tclassName='md-form'\r\n\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput2\").value);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='search' />\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclassName='form-control form-control-sm ml-3 w-50'\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tplaceholder='Найти'\r\n\t\t\t\t\t\t\t\taria-label='Search'\r\n\t\t\t\t\t\t\t\tid='searchInput2'\r\n\t\t\t\t\t\t\t\tvalue={queryText}\r\n\t\t\t\t\t\t\t\tonChange={(event) => setQueryText(event.target.value)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</MDBFormInline>\r\n\r\n\t\t\t\t\t\t<h1>Результаты поиска</h1>\r\n\t\t\t\t\t\t<CategoriesTab\r\n\t\t\t\t\t\t\tcategories={[\"Всё\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Пользователи\"]}\r\n\t\t\t\t\t\t\tactiveColor='#7654de'\r\n\t\t\t\t\t\t\tactiveCategory={activeCategory}\r\n\t\t\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={gamesState === \"pending\"} spinner text='Ищем игры...'>\r\n\t\t\t\t\t\t\t<GamesBlock\r\n\t\t\t\t\t\t\t\tgames={games}\r\n\t\t\t\t\t\t\t\tgamesPage={gamesPage}\r\n\t\t\t\t\t\t\t\tonPaginate={(page) => {\r\n\t\t\t\t\t\t\t\t\tsetGamesPage(page);\r\n\t\t\t\t\t\t\t\t\tsearchGames(query, page, 6);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\thidden={activeCategory !== \"Всё\" && activeCategory !== \"Игры\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={moviesState === \"pending\"} spinner text='Ищем фильмы...'>\r\n\t\t\t\t\t\t\t<MoviesBlock\r\n\t\t\t\t\t\t\t\tmovies={movies}\r\n\t\t\t\t\t\t\t\tmoviesPage={moviesPage}\r\n\t\t\t\t\t\t\t\tonPaginate={(page) => {\r\n\t\t\t\t\t\t\t\t\tsetMoviesPage(page);\r\n\t\t\t\t\t\t\t\t\tsearchMovies(query, page);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\thidden={activeCategory !== \"Всё\" && activeCategory !== \"Фильмы\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={showsState === \"pending\"} spinner text='Ищем сериалы...'>\r\n\t\t\t\t\t\t\t<ShowsBlock\r\n\t\t\t\t\t\t\t\tshows={shows}\r\n\t\t\t\t\t\t\t\tshowsPage={showsPage}\r\n\t\t\t\t\t\t\t\tonPaginate={(page) => {\r\n\t\t\t\t\t\t\t\t\tsetShowsPage(page);\r\n\t\t\t\t\t\t\t\t\tsearchShows(query, page);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\thidden={activeCategory !== \"Всё\" && activeCategory !== \"Сериалы\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={usersState === \"pending\"} spinner text='Ищем пользователей...'>\r\n\t\t\t\t\t\t\t<UsersBlock users={users} hidden={activeCategory !== \"Всё\" && activeCategory !== \"Пользователи\"} />\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t</MDBRow>\r\n\t\t\t</MDBContainer>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SearchPage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst LoginForm = observer((props) => {\r\n\tconst { tryAuth, authState } = AuthStore;\r\n\tconst { LoginFormIsOpen, closeLoginForm, openResetPasswordForm } = PagesStore;\r\n\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (authState === \"done\") closeLoginForm();\r\n\t}, [authState, closeLoginForm]);\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={LoginFormIsOpen} toggle={closeLoginForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='loginBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\ttryAuth(login, password);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Войти</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!authState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t\t\t\t{authState}\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tЛогин\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='form-control' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПароль\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='form-control' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='confirmButton'>\r\n\t\t\t\t\t\t\t\t\t\tВойти\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\tclassName='passwordResetLabel'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tcloseLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\topenResetPasswordForm();\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tВосстановить пароль\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n});\r\n\r\nexport default LoginForm;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst RegistrationForm = observer((props) => {\r\n\tconst { register, registrateState, user } = AuthStore;\r\n\tconst { RegistrateFormIsOpen, closeRegistrateForm } = PagesStore;\r\n\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={RegistrateFormIsOpen} toggle={closeRegistrateForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='registrationBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!registrateState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t\t\t\t{registrateState}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success' hidden={user.email === \"\"}>\r\n\t\t\t\t\t\t\t\t\t{user.login}, добро пожаловать! Осталось только подтвердить вашу почту\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<h4>Регистрация</h4>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput'>Никнейм</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='form-control' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput'>Электронная почта</label>\r\n\t\t\t\t\t\t\t\t<input type='email' id='emailInput' className='form-control' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput'>Пароль</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='form-control' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordConfirmInput'>Подтверждение пароля</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\t\tid='passwordConfirmInput'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tstyle={passwordConfirm === password ? { outlineColor: \"green\" } : { outlineColor: \"red\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={passwordConfirm}\r\n\t\t\t\t\t\t\t\t\tonChange={(event) => setPasswordConfirm(event.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn\r\n\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\tclassName='confirmButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={password !== passwordConfirm || login.length < 1 || email.length < 1 || password.length < 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => register(login, email, password)}>\r\n\t\t\t\t\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n});\r\n\r\nexport default RegistrationForm;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\n\r\n/**\r\n * КОмпонент формы сброса пароля\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst ResetPasswordForm = observer((props) => {\r\n\tconst { resetPassword, resetPasswordState } = AuthStore;\r\n\tconst { ResetPasswordFormIsOpen, closeResetPasswordForm } = PagesStore;\r\n\r\n\tconst [email, setEmail] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={ResetPasswordFormIsOpen} toggle={closeResetPasswordForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='loginBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\tresetPassword(email);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Сбросить пароль</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!resetPasswordState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t\t\t\t{resetPasswordState}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success' hidden={resetPasswordState !== \"done\"}>\r\n\t\t\t\t\t\t\t\t\tНа вашу почту отправлено письмо\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПочта\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='emailInput' className='form-control' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='confirmButton'>\r\n\t\t\t\t\t\t\t\t\t\tСбросить\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n});\r\n\r\nexport default ResetPasswordForm;\r\n","import React, { useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AuthStore from \"../store/AuthStore\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ConfirmPage = observer((props) => {\r\n\tconst { confirmEmail, confirmEmailState } = AuthStore;\r\n\tlet history = useHistory();\r\n\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet uid64 = params.get(\"uid64\");\r\n\tlet token = params.get(\"token\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tconfirmEmail(uid64, token);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (confirmEmailState.startsWith(\"error\")) history.push(`/404page`);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[confirmEmailState]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='bg'>\r\n\t\t\t<div hidden={confirmEmailState !== \"done\"} className='confirmEmailSuccess'>\r\n\t\t\t\tВаша почта подтверждена!\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ConfirmPage;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../store/AuthStore\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ConfirmPasswordPage = observer((props) => {\r\n\tconst { confirmPassword, confirmPasswordState } = AuthStore;\r\n\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet token = params.get(\"token\");\r\n\r\n\treturn (\r\n\t\t<div className='bg'>\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconfirmPassword(token, password);\r\n\t\t\t\t}}\r\n\t\t\t\tclassName='confirmPasswordForm'>\r\n\t\t\t\t<p className='h4'>Обновить пароль</p>\r\n\t\t\t\t<p className='note note-danger' hidden={!confirmPasswordState.startsWith(\"error:\")}>\r\n\t\t\t\t\t{confirmPasswordState}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='note note-success' hidden={confirmPasswordState !== \"done\"}>\r\n\t\t\t\t\tПароль обновлен!\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<label htmlFor='passwordInput' className='confirmPasswordLabel'>\r\n\t\t\t\t\tНовый пароль\r\n\t\t\t\t</label>\r\n\t\t\t\t<br />\r\n\t\t\t\t<input type='password' id='passwordInput' className='confirmPasswordInput' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<label htmlFor='passwordConfurmInput' className='confirmPasswordLabel'>\r\n\t\t\t\t\tПодтверждение пароля\r\n\t\t\t\t</label>\r\n\t\t\t\t<br />\r\n\t\t\t\t<input type='password' id='passwordConfurmInput' className='confirmPasswordInput' value={passwordConfirm} onChange={(event) => setPasswordConfirm(event.target.value)} />\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<button type='submit' className='confirmPasswordButton' disabled={(password !== passwordConfirm) | (password.length < 1)}>\r\n\t\t\t\t\tОбновить\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ConfirmPasswordPage;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport AuthStore from \"./AuthStore\";\r\nimport * as userRequests from \"../services/userRequests\";\r\n\r\nclass User {\r\n\tuser = { stats: {} };\r\n\tuserLogs = { log: [] };\r\n\tuserFriendsLogs = { log: [] };\r\n\tuserState = \"done\";\r\n\tuserLogsState = \"done\";\r\n\tuserFriendsLogsState = \"done\";\r\n\tsetUserStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestUser = async (username) => {\r\n\t\tthis.userState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tuserRequests.getUserInfo(localStorage.getItem(\"token\"), username).then(this.requestUserSuccess, this.requestUserFailure);\r\n\t};\r\n\trequestUserSuccess = (result) => {\r\n\t\tthis.user = result;\r\n\t\tthis.userState = \"done\";\r\n\t};\r\n\trequestUserFailure = (error) => {\r\n\t\tthis.userState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUserLogs = async (userID, page, resultsOnPage) => {\r\n\t\tthis.userLogsState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tuserRequests.getUserLog(localStorage.getItem(\"token\"), userID, page, resultsOnPage).then(this.requestLogsSuccess, this.requestLogsFailure);\r\n\t};\r\n\trequestLogsSuccess = (result) => {\r\n\t\tthis.userLogs = result;\r\n\t\tthis.userLogsState = \"done\";\r\n\t};\r\n\trequestLogsFailure = (error) => {\r\n\t\tthis.userLogsState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUserFriendsLogs = async (userID, page, resultsOnPage) => {\r\n\t\tthis.userFriendsLogsState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tuserRequests.getUserFriendsLog(localStorage.getItem(\"token\"), userID, page, resultsOnPage).then(this.requestFriendsLogsSuccess, this.requestFriendsLogsFailure);\r\n\t};\r\n\trequestFriendsLogsSuccess = (result) => {\r\n\t\tthis.userFriendsLogs = result;\r\n\t\tthis.userFriendsLogsState = \"done\";\r\n\t};\r\n\trequestFriendsLogsFailure = (error) => {\r\n\t\tthis.userFriendsLogsState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetUserStatus = async (is_following, userID) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\tthis.setUserStatusState = \"pending\";\r\n\t\t\tuserRequests.setUserStatus(localStorage.getItem(\"token\"), is_following, userID).then(this.setUserStatusSuccess, this.setUserStatusFailure);\r\n\t\t}\r\n\t};\r\n\tsetUserStatusSuccess = (result) => {\r\n\t\tthis.user.is_followed = result.is_following;\r\n\t\tthis.setUserStatusState = \"done\";\r\n\t};\r\n\tsetUserStatusFailure = (error) => {\r\n\t\tthis.setUserStatusState = \"error: \" + error;\r\n\t};\r\n}\r\n\r\nconst UserStore = new User();\r\n//export default remotedev(UserStore, { name: \"User\" });\r\nexport default UserStore;\r\n","export const COLORS = [\r\n\t\"rgb(43,206,72)\",\r\n\t\"rgb(240,163,255)\",\r\n\t\"rgb(0,117,220)\",\r\n\t\"rgb(153,63,0)\",\r\n\t\"rgb(76,0,92)\",\r\n\t\"rgb(225,225,225)\",\r\n\t\"rgb(0,92,49)\",\r\n\t\"rgb(255,204,153)\",\r\n\t\"rgb(128,128,128)\",\r\n\t\"rgb(148,255,181)\",\r\n\t\"rgb(143,124,0)\",\r\n\t\"rgb(157,204,0)\",\r\n\t\"rgb(194,0,136)\",\r\n\t\"rgb(0,51,128)\",\r\n\t\"rgb(255,164,5)\",\r\n\t\"rgb(255,168,187)\",\r\n\t\"rgb(66,102,0)\",\r\n\t\"rgb(255,0,16)\",\r\n\t\"rgb(94,241,242)\",\r\n\t\"rgb(0,153,143)\",\r\n\t\"rgb(224,255,102)\",\r\n\t\"rgb(116,10,255)\",\r\n\t\"rgb(153,0,0)\",\r\n\t\"rgb(255,255,128)\",\r\n\t\"rgb(255,255,0)\",\r\n\t\"rgb(255,80,)\",\r\n];\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction GameBlock({ games, stats }) {\r\n\tconst [gameChartData, setGameChartData] = useState([]);\r\n\tconst gameColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Время прохождения\",\r\n\t\t\tfield: \"spent_time\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t/*{\r\n\t\t\tlabel: \"Дата выхода\",\r\n\t\t\tfield: \"release_date\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},*/\r\n\t];\r\n\r\n\tconst [gameTableData, setGameTableData] = useState({\r\n\t\tcolumns: gameColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (games) {\r\n\t\t\t\tsetGameTableData({\r\n\t\t\t\t\tcolumns: gameColumns,\r\n\t\t\t\t\trows: games.map((game) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/game/\" + game.game.rawg_slug}>\r\n\t\t\t\t\t\t\t\t\t{game.game.rawg_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: game.game.rawg_name,\r\n\t\t\t\t\t\t\tstatus: game.status,\r\n\t\t\t\t\t\t\tscore: game.score,\r\n\t\t\t\t\t\t\treview: game.review,\r\n\t\t\t\t\t\t\tspent_time: parseFloat(game.spent_time),\r\n\t\t\t\t\t\t\t/*release_date: new Date(game.game.rawg_release_date).toISOString().substr(0, 10).replace(\"-\", \".\"),\r\n\t\t\t\t\t\t\tclickEvent: (e) => {\r\n                                    //window.open('/game/' + game.game.rawg_slug);\r\n                                    history.push('/game/' + game.game.rawg_slug);\r\n                                }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[games]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetGameChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetGameChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tИгр сыграно: {stats?.count}, часов наиграно: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={gameTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать игр на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tclassName='dataTable'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\t\t\t<div hidden={gameChartData.length < 1}>\r\n\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={gameChartData.length * 40} data={gameChartData} margin={{ top: 5, right: 0, left: 25, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{gameChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={Math.min(gameChartData.length * 100, document.body.clientWidth)} height={300} data={gameChartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{gameChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default GameBlock;\r\n","import React from \"react\";\r\n\r\nimport CardUser from \"../Common/CardUser\";\r\n\r\nfunction FriendBlock({ users }) {\r\n\treturn (\r\n\t\t<div className='friendsBlock'>\r\n\t\t\t{users.map((user) => (\r\n\t\t\t\t<CardUser user={user} key={user.id} />\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FriendBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction MovieBlock({ movies, stats }) {\r\n\tconst [movieChartData, setMovieChartData] = useState([]);\r\n\tconst movieColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t];\r\n\r\n\tconst [movieTableData, setMovieTableData] = useState({\r\n\t\tcolumns: movieColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (movies) {\r\n\t\t\t\tsetMovieTableData({\r\n\t\t\t\t\tcolumns: movieColumns,\r\n\t\t\t\t\trows: movies.map((movie) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/movie/\" + movie.movie.tmdb_id}>\r\n\t\t\t\t\t\t\t\t\t{movie.movie.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: movie.movie.tmdb_name,\r\n\t\t\t\t\t\t\tstatus: movie.status,\r\n\t\t\t\t\t\t\tscore: movie.score,\r\n\t\t\t\t\t\t\treview: movie.review,\r\n\t\t\t\t\t\t\t/*clickEvent: (e) => {\r\n                                //window.open('/game/' + game.game.rawg_slug);\r\n                                history.push('/movie/' + movie.movie.tmdb_id)\r\n                            }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[movies]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetMovieChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetMovieChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tФильмов посмотрено: {stats?.count}, часов просмотра: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={movieTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать фильмов на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\r\n\t\t\t<div hidden={movieChartData.length < 1}>\r\n\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={movieChartData.length * 40} data={movieChartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{movieChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={Math.min(movieChartData.length * 100, document.body.clientWidth)} height={300} data={movieChartData} margin={{ top: 5, right: 10, left: 10, bottom: 15 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{movieChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default MovieBlock;\r\n","import React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction LogRow({ log, showUsername }) {\r\n\tlet history = useHistory();\r\n\r\n\tuseEffect(() => {}, [log]);\r\n\r\n\tfunction translateActionType(action, actionResult) {\r\n\t\tswitch (action) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tswitch (actionResult) {\r\n\t\t\t\t\tcase \"0\":\r\n\t\t\t\t\t\treturn \"посмотрел(а)\";\r\n\t\t\t\t\tcase \"-1\":\r\n\t\t\t\t\t\treturn \"не смотрела(а)\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"оценил(а)\";\r\n\t\t\t\t}\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn \"изменил(а) статус\";\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn \"оставил(а) отзыв на\";\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn \"изменил(а) время прохождения\";\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\tif (actionResult > 0) return \"посмотрел(а) \" + actionResult + \" серий\";\r\n\t\t\t\telse return \"не смотрел(а) \" + actionResult * -1 + \" серий\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\tif (actionResult === \"True\") return \"подписан(а) на\";\r\n\t\t\t\telse return \"отписан(а) от\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn action;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction translateType(type, actionType) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"игру\";\r\n\t\t\t\telse return \"игры\";\r\n\t\t\tcase \"movie\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"фильм\";\r\n\t\t\t\telse return \"фильма\";\r\n\t\t\tcase \"show\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"сериал\";\r\n\t\t\t\telse return \"сериала\";\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn \"пользователя\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn type;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction nameToLink(name, type, id) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"movie\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"show\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t[s{id.season_number}e{id.episode_number}] серию\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/user/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/user/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tdefault:\r\n\t\t\t\treturn name;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction userToLink(username, userID) {\r\n\t\treturn (\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + \"/user/\" + userID}\r\n\t\t\t\tclassName='logLink'\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/user/\" + userID);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}>\r\n\t\t\t\t{username}\r\n\t\t\t</a>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction actionResultToStr(actionType, actionResult, target) {\r\n\t\tswitch (actionType) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tif ((target !== \"episode\") | (actionResult > 0))\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\tinitialRating={actionResult}\r\n\t\t\t\t\t\t\treadonly={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\telse return \"\";\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn actionResult + \" \" + intToHours(actionResult);\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn actionResult;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleTimeString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='logRow'>\r\n\t\t\t{parseDate(log.created)}&thinsp;\r\n\t\t\t{showUsername ? userToLink(log.user, log.user_id) : \"\"}&thinsp;\r\n\t\t\t{translateActionType(log.action_type, log.action_result)}&thinsp;\r\n\t\t\t{translateType(log.type, log.action_type)}&thinsp;\r\n\t\t\t{nameToLink(log.target, log.type, log.target_id)}\r\n\t\t\t{(log.type === \"user\") | (log.action_type === \"episodes\") | (log.action_result === \"0\") | (log.action_result === \"-1\") ? \"\" : \":\"}&thinsp;\r\n\t\t\t{actionResultToStr(log.action_type, log.action_result, log.type)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default LogRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport LogRow from \"./LogRow\";\r\n\r\nfunction UserLogBlock({ logs, showUsername, onChangePage }) {\r\n\tconst [logsByDay, setLogsByDay] = useState([]);\r\n\tconst [currentPage, setCurrentPage] = useState(1);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetLogsByDay(groupLogsByDay(logs.log));\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[logs]\r\n\t);\r\n\r\n\tfunction groupLogsByDay(logs) {\r\n\t\tlet newLogs = [];\r\n\r\n\t\tfor (let i in logs) {\r\n\t\t\tlet date = new Date(logs[i].created);\r\n\r\n\t\t\tif (newLogs.length === 0)\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t\telse if (date.getDay() === newLogs[newLogs.length - 1].date.getDay()) newLogs[newLogs.length - 1].logs.push(logs[i]);\r\n\t\t\telse\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn newLogs;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{logsByDay.map((dayLog) => (\r\n\t\t\t\t<div key={dayLog.logs[0].id} className='logDay'>\r\n\t\t\t\t\t<h5 className='logDate'>{dayLog.date.toLocaleDateString(\"ru-RU\")}</h5>\r\n\t\t\t\t\t<div className='logRows'>\r\n\t\t\t\t\t\t{dayLog.logs.map((log) => (\r\n\t\t\t\t\t\t\t<LogRow log={log} showUsername={showUsername} key={log.id + log.created} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t\t<button\r\n\t\t\t\tclassName='logPaginationButton'\r\n\t\t\t\tdisabled={!logs.has_next_page}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (logs.has_next_page) {\r\n\t\t\t\t\t\tonChangePage(currentPage + 1);\r\n\t\t\t\t\t\tsetCurrentPage(currentPage + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<MDBIcon icon='arrow-down' />\r\n\t\t\t</button>\r\n\r\n\t\t\t<button\r\n\t\t\t\tclassName='logPaginationButton'\r\n\t\t\t\tdisabled={currentPage === 1}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (currentPage > 1) {\r\n\t\t\t\t\t\tonChangePage(currentPage - 1);\r\n\t\t\t\t\t\tsetCurrentPage(currentPage - 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<MDBIcon icon='arrow-up' />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserLogBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction ShowBlock({ shows, stats }) {\r\n\tconst [showChartData, setShowChartData] = useState([]);\r\n\r\n\tconst showColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Часов просмотра\",\r\n\t\t\tfield: \"spentTime\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t];\r\n\r\n\tconst [showTableData, setShowTableData] = useState({\r\n\t\tcolumns: showColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (shows) {\r\n\t\t\t\tsetShowTableData({\r\n\t\t\t\t\tcolumns: showColumns,\r\n\t\t\t\t\trows: shows.map((show) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/show/\" + show.show.tmdb_id}>\r\n\t\t\t\t\t\t\t\t\t{show.show.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: show.show.tmdb_name,\r\n\t\t\t\t\t\t\tstatus: show.status,\r\n\t\t\t\t\t\t\tscore: show.score,\r\n\t\t\t\t\t\t\treview: show.review,\r\n\t\t\t\t\t\t\tspentTime: show.spent_time,\r\n\t\t\t\t\t\t\t/*clickEvent: (e) => {\r\n                                //window.open('/game/' + game.game.rawg_slug);\r\n                                history.push('/movie/' + movie.movie.tmdb_id)\r\n                            }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[shows]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetShowChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetShowChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tСерий сериалов посмотрено: {stats?.count}, часов просмотра: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={showTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать сериалов на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\t\t\t<div hidden={showChartData.length < 1}>\r\n\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={showChartData.length * 40} data={showChartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{showChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={Math.min(showChartData.length * 100, document.body.clientWidth)} height={300} data={showChartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{showChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ShowBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { PieChart, Pie, Legend, Cell, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nfunction ChartBlock({ stats }) {\r\n\tconst [chartData, setChartData] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (stats.games) {\r\n\t\t\tlet newData = [];\r\n\t\t\tif (stats.games.total_spent_time > 0) newData.push({ name: \"Часов в играх\", value: stats.games.total_spent_time });\r\n\t\t\tif (stats.movies.total_spent_time > 0) newData.push({ name: \"Часов в фильмах\", value: stats.movies.total_spent_time });\r\n\t\t\tif (stats.episodes.total_spent_time > 0) newData.push({ name: \"Часов в сериалах\", value: stats.episodes.total_spent_time });\r\n\t\t\tsetChartData(newData);\r\n\t\t}\r\n\t}, [stats]);\r\n\r\n\treturn (\r\n\t\t<div hidden={chartData.length < 1}>\r\n\t\t\t<PieChart width={350} height={250} hidden={chartData.length < 1}>\r\n\t\t\t\t<Pie dataKey='value' data={chartData} cx='50%' cy='50%' outerRadius={80} fill='#8884d8' labelLine={true} label minAngle={5}>\r\n\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Pie>\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\tcursor={false}\r\n\t\t\t\t/>\r\n\t\t\t\t<Legend verticalAlign='bottom' horizontalAlign='center' />\r\n\t\t\t</PieChart>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ChartBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport UserStore from \"../../store/UserStore\";\r\n\r\nimport { MDBRow, MDBCol, MDBContainer } from \"mdbreact\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport GameBlock from \"./GameBlock\";\r\nimport FriendBlock from \"./FriendBlock\";\r\nimport MovieBlock from \"./MovieBlock\";\r\nimport UserLogBlock from \"./UserLogBlock\";\r\nimport CategoriesTab from \"../Common/CategoriesTab\";\r\nimport ShowBlock from \"./ShowBlock\";\r\nimport ChartBlock from \"./ChartBlock\";\r\n\r\nconst LOG_ROWS_COUNT = 20;\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst UserPage = observer((props) => {\r\n\tconst { loggedIn, currentUser } = AuthStore;\r\n\tconst { user, userState, requestUser, setUserStatus, requestUserLogs, userLogs, userLogsState, requestUserFriendsLogs, userFriendsLogs, userFriendsLogsState } = UserStore;\r\n\r\n\tlet { userID } = useParams();\r\n\tconst [activeCategory, setActiveCategory] = useState(\"Профиль\");\r\n\tconst [lastActivity, setLastActivity] = useState(\"\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trequestUser(userID);\r\n\t\t\trequestUserLogs(userID, 1, LOG_ROWS_COUNT);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userID, requestUser, requestUserLogs]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) {\r\n\t\t\t\trequestUserFriendsLogs(userID, 1, LOG_ROWS_COUNT);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, userID]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = \"Профиль \" + user.username;\r\n\t\tif (user.last_activity) {\r\n\t\t\tlet date = new Date(user.last_activity);\r\n\t\t\tDate.now();\r\n\t\t\tsetLastActivity(date.toLocaleString());\r\n\t\t} else setLastActivity(\"\");\r\n\t}, [user]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg textureBG' />\r\n\t\t\t<LoadingOverlay active={userState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t\t<MDBCol className='userPage'>\r\n\t\t\t\t\t\t\t<h1>Информация о пользователе {user.username}</h1>\r\n\t\t\t\t\t\t\t<p>Последняя активность {lastActivity}</p>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\thidden={currentUser.username === user.username}\r\n\t\t\t\t\t\t\t\tclassName='addFriendButton'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetUserStatus({ is_following: user.is_followed ? false : true }, user.id);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{user.is_followed ? \"Отписаться\" : \"Подписаться\"}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<CategoriesTab\r\n\t\t\t\t\t\t\t\tcategories={[\"Профиль\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Друзья\"]}\r\n\t\t\t\t\t\t\t\tactiveColor='#7654de'\r\n\t\t\t\t\t\t\t\tactiveCategory={activeCategory}\r\n\t\t\t\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Профиль\"}>\r\n\t\t\t\t\t\t\t\t<h4>Моя активность: </h4>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userLogsState === \"pending\" && userState !== \"pending\"} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<ChartBlock stats={user.stats} />\r\n\t\t\t\t\t\t\t\t\t<UserLogBlock logs={userLogs} onChangePage={(pageNumber) => requestUserLogs(userID, pageNumber, LOG_ROWS_COUNT)} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Игры\"}>\r\n\t\t\t\t\t\t\t\t<GameBlock games={user.games} stats={user.stats.games} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Фильмы\"}>\r\n\t\t\t\t\t\t\t\t<MovieBlock movies={user.movies} stats={user.stats.movies} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Сериалы\"}>\r\n\t\t\t\t\t\t\t\t<ShowBlock shows={user.shows} stats={user.stats.episodes} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Друзья\"}>\r\n\t\t\t\t\t\t\t\t<FriendBlock users={user.followed_users ? user.followed_users : []} />\r\n\t\t\t\t\t\t\t\t<h4>Активность друзей: </h4>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userFriendsLogsState === \"pending\" && !userState === \"pending\"} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<UserLogBlock logs={userFriendsLogs} onChangePage={(pageNumber) => requestUserFriendsLogs(userID, pageNumber, LOG_ROWS_COUNT)} showUsername={true} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default UserPage;\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../store/AuthStore\";\r\nimport PagesStore from \"../store/PagesStore\";\r\n\r\nimport {\r\n\tMDBNavbar,\r\n\tMDBNavItem,\r\n\tMDBNavbarBrand,\r\n\tMDBNavbarNav,\r\n\tMDBNavLink,\r\n\tMDBIcon,\r\n\tMDBFormInline,\r\n\tMDBDropdown,\r\n\tMDBDropdownItem,\r\n\tMDBDropdownMenu,\r\n\tMDBDropdownToggle,\r\n\tMDBNavbarToggler,\r\n\tMDBCollapse,\r\n} from \"mdbreact\";\r\n\r\nconst Navbar = observer((props) => {\r\n\tconst { loggedIn, user, resetAuthorization } = AuthStore;\r\n\tconst { openLoginForm, openRegistrateForm } = PagesStore;\r\n\r\n\tlet history = useHistory();\r\n\tconst [collapseID, setCollapseID] = useState(\"\");\r\n\r\n\tconst toggleCollapse = (newCollapseID) => () => {\r\n\t\tif (newCollapseID !== collapseID) setCollapseID(newCollapseID);\r\n\t\telse setCollapseID(\"\");\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MDBNavbar style={{ backgroundColor: \"#4527a0\" }} dark expand='md' fixed='top'>\r\n\t\t\t<MDBNavbarBrand\r\n\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\thistory.push(\"/\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}}>\r\n\t\t\t\t<strong className='white-text' style={{ cursor: \"pointer\" }}>\r\n\t\t\t\t\tInterests\r\n\t\t\t\t</strong>\r\n\t\t\t</MDBNavbarBrand>\r\n\t\t\t<MDBNavbarNav left></MDBNavbarNav>\r\n\r\n\t\t\t<MDBNavbarToggler onClick={toggleCollapse(\"navbarCollapse1\")} />\r\n\t\t\t<MDBCollapse id='navbarCollapse1' isOpen={collapseID} navbar>\r\n\t\t\t\t<MDBNavbarNav right>\r\n\t\t\t\t\t<MDBNavItem>\r\n\t\t\t\t\t\t<MDBFormInline\r\n\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput\").value);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<div className='md-form my-0'>\r\n\t\t\t\t\t\t\t\t<input className='form-control mr-sm-2' type='text' placeholder='Найти' aria-label='Найти' id='searchInput' />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</MDBFormInline>\r\n\t\t\t\t\t</MDBNavItem>\r\n\r\n\t\t\t\t\t<MDBNavItem className='font-weight-bold' hidden={loggedIn}>\r\n\t\t\t\t\t\t<MDBNavLink to='#' onClick={openLoginForm}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='sign-in-alt' /> Войти\r\n\t\t\t\t\t\t</MDBNavLink>\r\n\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t\t<MDBNavItem className='font-weight-bold' hidden={loggedIn}>\r\n\t\t\t\t\t\t<MDBNavLink to='#' onClick={openRegistrateForm}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='user-plus' /> Зарегистрироваться\r\n\t\t\t\t\t\t</MDBNavLink>\r\n\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t\t<MDBNavItem hidden={!loggedIn} className='font-weight-bold'>\r\n\t\t\t\t\t\t<MDBDropdown>\r\n\t\t\t\t\t\t\t<MDBDropdownToggle nav caret>\r\n\t\t\t\t\t\t\t\t<span className='mr-2'>{user.username}</span>\r\n\t\t\t\t\t\t\t</MDBDropdownToggle>\r\n\t\t\t\t\t\t\t<MDBDropdownMenu>\r\n\t\t\t\t\t\t\t\t<MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\thref={`/user/${user.id}`}\r\n\t\t\t\t\t\t\t\t\t\tclassName='navDropdownItem'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\thistory.push(`/user/${user.id}`);\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='user-circle' /> Профиль\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t<MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\thref={`/calendar`}\r\n\t\t\t\t\t\t\t\t\t\tclassName='navDropdownItem'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\thistory.push(`/calendar`);\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='calendar-day' /> Календарь\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t<MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\thref={`/unwatched`}\r\n\t\t\t\t\t\t\t\t\t\tclassName='navDropdownItem'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\thistory.push(`/unwatched`);\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='tv' /> Непросмотренное\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t<MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\thref={`/settings`}\r\n\t\t\t\t\t\t\t\t\t\tclassName='navDropdownItem'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\thistory.push(`/settings`);\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='cog' /> Настройки\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t<MDBDropdownItem onClick={resetAuthorization}>\r\n\t\t\t\t\t\t\t\t\t<a className='navDropdownItem' href='/' onClick={(event) => event.preventDefault()}>\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='sign-out-alt' /> Выйти\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t</MDBDropdownMenu>\r\n\t\t\t\t\t\t</MDBDropdown>\r\n\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t</MDBNavbarNav>\r\n\t\t\t</MDBCollapse>\r\n\t\t</MDBNavbar>\r\n\t);\r\n});\r\n\r\nexport default Navbar;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport AuthStore from \"./AuthStore\";\r\nimport * as userRequests from \"../services/userRequests\";\r\nimport * as showRequests from \"../services/showRequests\";\r\n\r\nclass CurrentUser {\r\n\tcalendar = {};\r\n\tsettings = {};\r\n\tunwatched = [];\r\n\tcalendarState = \"done\";\r\n\tsettingsState = \"done\";\r\n\tunwatchedState = \"done\";\r\n\tsaveSettingsState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestCalendar = async () => {\r\n\t\tif (AuthStore.checkAuthorization()) {\r\n\t\t\tthis.calendarState = \"pending\";\r\n\t\t\tuserRequests.getUserCalendar(localStorage.getItem(\"token\")).then(this.requestCalendarSuccess, this.requestCalendarFailure);\r\n\t\t}\r\n\t};\r\n\trequestCalendarSuccess = (result) => {\r\n\t\tthis.calendar = result;\r\n\t\tthis.calendarState = \"done\";\r\n\t};\r\n\trequestCalendarFailure = (error) => {\r\n\t\tthis.calendarState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSettings = async () => {\r\n\t\tif (AuthStore.checkAuthorization()) {\r\n\t\t\tthis.settingsState = \"pending\";\r\n\t\t\tuserRequests.getUserSettings(localStorage.getItem(\"token\")).then(this.requestSettingsSuccess, this.requestSettingsFailure);\r\n\t\t}\r\n\t};\r\n\trequestSettingsSuccess = (result) => {\r\n\t\tthis.settings = result;\r\n\t\tthis.settingsState = \"done\";\r\n\t};\r\n\trequestSettingsFailure = (error) => {\r\n\t\tthis.settingsState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUnwatched = async () => {\r\n\t\tif (AuthStore.checkAuthorization()) {\r\n\t\t\tthis.unwatchedState = \"pending\";\r\n\t\t\tshowRequests.getUnwatchedEpisodes(localStorage.getItem(\"token\")).then(this.requestUnwatchedSuccess, this.requestUnwatchedFailure);\r\n\t\t}\r\n\t};\r\n\trequestUnwatchedSuccess = (result) => {\r\n\t\tthis.unwatched = result;\r\n\t\tthis.unwatchedState = \"done\";\r\n\t};\r\n\trequestUnwatchedFailure = (error) => {\r\n\t\tthis.unwatchedState = \"error: \" + error;\r\n\t};\r\n\r\n\tpatchSettings = async (settings) => {\r\n\t\tif (AuthStore.checkAuthorization()) {\r\n\t\t\tthis.saveSettingsState = \"pending\";\r\n\t\t\tuserRequests.patchUserSettings(localStorage.getItem(\"token\"), settings).then(this.patchSettingsSuccess, this.patchSettingsFailure);\r\n\t\t}\r\n\t};\r\n\tpatchSettingsReset = () => {\r\n\t\tthis.saveSettingsState = \"done\";\r\n\t};\r\n\tpatchSettingsSuccess = (result) => {\r\n\t\tthis.unwatched = result;\r\n\t\tthis.saveSettingsState = \"saved\";\r\n\t\tsetTimeout(this.patchSettingsReset, 1000);\r\n\t};\r\n\tpatchSettingsFailure = (error) => {\r\n\t\tthis.saveSettingsState = \"error: \" + error;\r\n\t};\r\n}\r\n\r\nconst CurrentUserStore = new CurrentUser();\r\n//export default remotedev(CurrentUserStore, { name: \"CurrentUser\" });\r\nexport default CurrentUserStore;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction DayInfo({ day, date }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className='dayInfoBlock'>\r\n\t\t\t<h3 className='dayInfo date'>\r\n\t\t\t\t{date ? date.toLocaleDateString(\"ru-RU\", { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", weekday: \"long\" }) : \"\"}\r\n\t\t\t</h3>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.games?.length > 0)}>\r\n\t\t\t\t<h3>Игры</h3>\r\n\t\t\t\t{day.games?.map((game) => (\r\n\t\t\t\t\t<div key={game.rawg_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\r\n\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{game.rawg_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.movies?.length > 0)}>\r\n\t\t\t\t<h3>Фильмы</h3>\r\n\t\t\t\t{day.movies?.map((movie) => (\r\n\t\t\t\t\t<div key={movie.tmdb_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\r\n\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{movie.tmdb_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.episodes?.length > 0)}>\r\n\t\t\t\t<h3>Сериалы</h3>\r\n\t\t\t\t{day.episodes?.map((episode) => (\r\n\t\t\t\t\t<div key={episode.tmdb_id}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\r\n\t\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DayInfo;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Timeline, TimelineEvent } from \"react-event-timeline\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction ReleasesList({ calendar }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst myStyle = {\r\n\t\tbackgroundColor: \"rgb(30, 30, 30)\",\r\n\t\tcolor: \"rgb(207, 207, 207)\",\r\n\t\tborder: \"none\",\r\n\t};\r\n\r\n\tfunction getContentForDay(day) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{day.games?.map((game) => (\r\n\t\t\t\t\t<div key={game.rawg_id} className='timelineEvent'>\r\n\t\t\t\t\t\tИгра{\" \"}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\r\n\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{game.rawg_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t{day.movies?.map((movie) => (\r\n\t\t\t\t\t<div key={movie.tmdb_id}>\r\n\t\t\t\t\t\tФильм{\" \"}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\r\n\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{movie.tmdb_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t{day.episodes?.map((episode) => (\r\n\t\t\t\t\t<div key={episode.tmdb_id}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\r\n\t\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction getIconForDay(day) {\r\n\t\tif ((day.games?.length > 0) & !(day.movies?.length > 0) & !(day.episodes?.length > 0)) return <MDBIcon icon='gamepad' />;\r\n\t\telse if ((day.movies?.length > 0) & !(day.games?.length > 0) & !(day.episodes?.length > 0)) return <MDBIcon icon='film' />;\r\n\t\telse if ((day.episodes?.length > 0) & !(day.movies?.length > 0) & !(day.games?.length > 0)) return <MDBIcon icon='tv' />;\r\n\t\telse return <MDBIcon icon='dice-d6' />;\r\n\t}\r\n\r\n\tfunction dateDiff(date) {\r\n\t\tlet time = date.getTime();\r\n\t\tlet timeNow = new Date().getTime();\r\n\t\treturn parseInt((time - timeNow) / (24 * 3600 * 1000));\r\n\t}\r\n\r\n\tfunction intToDays(number) {\r\n\t\tif (11 <= number && number <= 14) return \"дней\";\r\n\t\telse if (number % 10 === 1) return \"день\";\r\n\t\telse if (2 <= number % 10 && number % 10 <= 4) return \"дня\";\r\n\t\telse return \"дней\";\r\n\t}\r\n\r\n\tfunction remainedDays(date) {\r\n\t\tlet days = dateDiff(date);\r\n\t\treturn `${days} ${intToDays(days)}`;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Timeline className='releasesList' style={myStyle} lineColor='rgb(100, 100, 100)'>\r\n\t\t\t{calendar?.map((day) => {\r\n\t\t\t\tlet date = new Date(day[0]);\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<TimelineEvent\r\n\t\t\t\t\t\ttitle={`${remainedDays(date)}, ${date.toLocaleDateString(\"ru-RU\", {\r\n\t\t\t\t\t\t\tyear: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\",\r\n\t\t\t\t\t\t\tmonth: \"long\",\r\n\t\t\t\t\t\t\tday: \"numeric\",\r\n\t\t\t\t\t\t\tweekday: \"long\",\r\n\t\t\t\t\t\t})}`}\r\n\t\t\t\t\t\tkey={day[0]}\r\n\t\t\t\t\t\tclassName='timelineEvent'\r\n\t\t\t\t\t\ticon={getIconForDay(day[1])}\r\n\t\t\t\t\t\tcardHeaderStyle={myStyle}\r\n\t\t\t\t\t\ticonStyle={{ ...myStyle, fontSize: \"1.2rem\" }}\r\n\t\t\t\t\t\tbubbleStyle={myStyle}\r\n\t\t\t\t\t\tcontentStyle={{ ...myStyle, fontSize: \"1.1rem\", marginTop: \"0.2rem\", marginBottom: \"0.2rem\" }}\r\n\t\t\t\t\t\ttitleStyle={{ ...myStyle, fontSize: \"1.1rem\" }}\r\n\t\t\t\t\t\tsubtitleStyle={myStyle}>\r\n\t\t\t\t\t\t{getContentForDay(day[1])}\r\n\t\t\t\t\t</TimelineEvent>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</Timeline>\r\n\t);\r\n}\r\n\r\nexport default ReleasesList;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport CurrentUserStore from \"../../store/CurrentUserStore\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport Calendar from \"react-calendar\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"react-calendar/dist/Calendar.css\";\r\nimport DayInfo from \"./DayInfo\";\r\nimport ReleasesList from \"./ReleasesList\";\r\n\r\nconst CalendarPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { calendar, calendarState, requestCalendar } = CurrentUserStore;\r\n\r\n\tconst [value, onChange] = useState(new Date());\r\n\tconst [currentDay, setCurrentDay] = useState({});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (loggedIn) {\r\n\t\t\trequestCalendar();\r\n\t\t}\r\n\t}, [loggedIn, requestCalendar]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (calendarState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${calendarState}`);\r\n\t}, [calendarState]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (calendar) {\r\n\t\t\tif (formatDate(value) in calendar) setCurrentDay(calendar[formatDate(value)]);\r\n\t\t\telse setCurrentDay({});\r\n\t\t}\r\n\t}, [value, calendar]);\r\n\r\n\tfunction dateToTile({ activeStartDate, date, view }) {\r\n\t\tif (view === \"month\" && formatDate(date) in calendar) {\r\n\t\t\tlet day = calendar[formatDate(date)];\r\n\t\t\treturn (\r\n\t\t\t\t<div className='calendarDay'>\r\n\t\t\t\t\t<div className='calendarDayTile Games' hidden={!(day?.games?.length > 0)}>\r\n\t\t\t\t\t\t{day?.games?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='calendarDayTile Movies' hidden={!(day?.movies?.length > 0)}>\r\n\t\t\t\t\t\t{day?.movies?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='calendarDayTile Episodes' hidden={!(day?.episodes?.length > 0)}>\r\n\t\t\t\t\t\t{day?.episodes?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg textureBG' />\r\n\t\t\t<div className='calendarPage'>\r\n\t\t\t\t<div className='calendarBlock'>\r\n\t\t\t\t\t<h1 className='calendarHeader'>Календарь релизов</h1>\r\n\t\t\t\t\t<LoadingOverlay active={calendarState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? <DayInfo day={currentDay} date={value} /> : \"\"}\r\n\t\t\t\t\t\t<Calendar className='calendar' onChange={onChange} value={value} defaultView='month' minDetail='decade' locale='ru-RU' minDate={new Date()} tileContent={dateToTile} />\r\n\t\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? \"\" : <DayInfo day={currentDay} date={value} />}\r\n\t\t\t\t\t\t<ReleasesList calendar={Object.entries(calendar)} />\r\n\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default CalendarPage;\r\n\r\nfunction pad(number) {\r\n\tif (number < 10) {\r\n\t\treturn \"0\" + number;\r\n\t}\r\n\treturn number;\r\n}\r\nfunction formatDate(date) {\r\n\treturn date.getFullYear() + \"-\" + pad(date.getMonth() + 1) + \"-\" + pad(date.getDate());\r\n}\r\n","import React from \"react\";\r\n\r\nfunction SettingsCheckbox({ text, checked, onChange }) {\r\n\treturn (\r\n\t\t<div className='settingsRow' onClick={() => onChange(!checked)}>\r\n\t\t\t<input type='checkbox' className='settingsCheckbox' checked={checked} onChange={(event) => onChange(event.target.checked)} />\r\n\t\t\t{text}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SettingsCheckbox;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport CurrentUserStore from \"../../store/CurrentUserStore\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport SettingsCheckbox from \"./SettingsCheckbox\";\r\n\r\nconst SettingsPage = observer((props) => {\r\n\tconst { loggedIn, user } = AuthStore;\r\n\tconst { settings, requestSettings, patchSettings, settingsState, saveSettingsState } = CurrentUserStore;\r\n\r\n\tconst [gameNotifInput, setGameNotifInput] = useState(false);\r\n\tconst [movieNotifInput, setMovieNotifInput] = useState(false);\r\n\tconst [showNotifInput, setShowNotifInput] = useState(false);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestSettings();\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (saveSettingsState === \"saved\") toast.success(\"Настройки сохранены!\");\r\n\t\tif (saveSettingsState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${saveSettingsState}`);\r\n\t}, [saveSettingsState]);\r\n\tuseEffect(() => {\r\n\t\tif (settingsState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${settingsState}`);\r\n\t}, [settingsState]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (settings.receive_games_releases) setGameNotifInput(settings.receive_games_releases);\r\n\t\t\tif (settings.receive_movies_releases) setMovieNotifInput(settings.receive_movies_releases);\r\n\t\t\tif (settings.receive_episodes_releases) setShowNotifInput(settings.receive_episodes_releases);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[settings]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg textureBG' />\r\n\t\t\t<div className='settingsPage'>\r\n\t\t\t\t<div className='settingsBlock'>\r\n\t\t\t\t\t<h1 className='calendarHeader'>Настройки</h1>\r\n\t\t\t\t\t<h3>Подписка на почтовые уведомления:</h3>\r\n\t\t\t\t\t<LoadingOverlay active={settingsState === \"pending\" || saveSettingsState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t<SettingsCheckbox text={\" релиз новых игр\"} checked={gameNotifInput} onChange={(checked) => setGameNotifInput(checked)} />\r\n\t\t\t\t\t\t<SettingsCheckbox text={\" релиз новых фильмов\"} checked={movieNotifInput} onChange={(checked) => setMovieNotifInput(checked)} />\r\n\t\t\t\t\t\t<SettingsCheckbox text={\" релиз новых серий сериалов\"} checked={showNotifInput} onChange={(checked) => setShowNotifInput(checked)} />\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='saveSettingsButton'\r\n\t\t\t\t\t\t\tdisabled={!loggedIn}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tpatchSettings({ receive_games_releases: gameNotifInput, receive_movies_releases: movieNotifInput, receive_episodes_releases: showNotifInput });\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t<p>Ваша почта {user.email}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SettingsPage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction DetailedEpisodeRow({ episode, showID, seasonNumber, setShowEpisodeUserStatus, loggedIn }) {\r\n\tlet history = useHistory();\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleDateString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='episodeRow detailRow'>\r\n\t\t\t<div className='episodeRowCheckDate'>\r\n\t\t\t\t<p className='episodeRowDate'>{parseDate(episode.tmdb_release_date)}</p>\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!loggedIn} className='episodeRowRate'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstart={-1}\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' />))}\r\n\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' title={n} />))}\r\n\t\t\t\t\treadonly={!loggedIn}\r\n\t\t\t\t\tinitialRating={-1}\r\n\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\tsetShowEpisodeUserStatus(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tepisodes: [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttmdb_id: episode.tmdb_id,\r\n\t\t\t\t\t\t\t\t\t\tscore: score,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tshowID\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<a\r\n\t\t\t\tclassName='episodeRowName episodeLink detailRow'\r\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={episode.tmdb_name}>\r\n\t\t\t\tСерия {episode.tmdb_episode_number} - {episode.tmdb_name}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailedEpisodeRow;\r\n","import React, { useEffect } from \"react\";\r\nimport EpisodeRow from \"./EpisodeRow\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction ShowBlock({ loggedIn, show, setShowEpisodeUserStatus }) {\r\n\tlet history = useHistory();\r\n\r\n\tuseEffect(\r\n\t\t() => {},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show]\r\n\t);\r\n\r\n\tfunction getUserSeasonOpen(showID, seasonNumber) {\r\n\t\tlet localData = localStorage.getItem(`${showID}_${seasonNumber}`);\r\n\t\treturn localData ? localData === \"true\" : true;\r\n\t}\r\n\r\n\tfunction setUserSeasonOpen(showID, seasonNumber, isOpen) {\r\n\t\tlocalStorage.setItem(`${showID}_${seasonNumber}`, isOpen);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='unwatchedShowBlock'>\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + \"/show/\" + show.tmdb_id}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + show.tmdb_id);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}>\r\n\t\t\t\t<h4>{show?.tmdb_name}</h4>\r\n\t\t\t</a>\r\n\r\n\t\t\t{show?.seasons.map((season, counter) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<details\r\n\t\t\t\t\t\topen={getUserSeasonOpen(show.tmdb_id, season.tmdb_season_number)}\r\n\t\t\t\t\t\tclassName='unwatchedSeasonBlock'\r\n\t\t\t\t\t\tkey={counter}\r\n\t\t\t\t\t\tonToggle={(e) => setUserSeasonOpen(show.tmdb_id, season.tmdb_season_number, e.target.open)}>\r\n\t\t\t\t\t\t<summary>{season.tmdb_name}</summary>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t{season.episodes.map((episode, counter) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<li className='episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t<EpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\tshowID={show.tmdb_id}\r\n\t\t\t\t\t\t\t\t\t\t\tseasonNumber={season.tmdb_season_number}\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowEpisodeUserStatus={setShowEpisodeUserStatus}\r\n\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</details>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ShowBlock;\r\n","import React, { useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport CurrentUserStore from \"../../store/CurrentUserStore\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport ShowBlock from \"./ShowBlock\";\r\n\r\nconst UnwatchedPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { unwatched, requestUnwatched, unwatchedState } = CurrentUserStore;\r\n\tconst { setEpisodesStatus } = ShowStore;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (unwatchedState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${unwatchedState}`);\r\n\t}, [unwatchedState]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUnwatched();\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg textureBG' />\r\n\t\t\t<div className='unwatchedPage'>\r\n\t\t\t\t<div className='unwatchedBlock'>\r\n\t\t\t\t\t<h1>Непросмотренные серии</h1>\r\n\t\t\t\t\t<LoadingOverlay active={unwatchedState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t{unwatched.map((show) => (\r\n\t\t\t\t\t\t\t<ShowBlock show={show} setShowEpisodeUserStatus={setEpisodesStatus} loggedIn={loggedIn} key={show.id} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default UnwatchedPage;\r\n","import React, { useEffect, useState } from \"react\";\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction NotFoundPage() {\r\n\tconst [angle, setAngle] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetTimeout(() => setAngle(angle + 1), 100);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[angle]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='bg'>\r\n\t\t\t<div className='notFound'>\r\n\t\t\t\t<p style={{ fontSize: \"3rem\" }}>Страница не найдена!</p>\r\n\t\t\t\t<div style={{ transform: `rotate(${angle}deg)` }}>\r\n\t\t\t\t\t<img src='images/wrongPage.png' alt='Картинка' style={{ width: \"500px\", maxWidth: \"80%\" }} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default NotFoundPage;\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport HomePage from \"./components/HomePage\";\r\nimport GamePage from \"./components/Game/GamePage\";\r\nimport MoviePage from \"./components/Movie/MoviePage\";\r\nimport ShowPage from \"./components/Show/ShowPage\";\r\nimport SeasonPage from \"./components/Show/SeasonPage\";\r\nimport EpisodePage from \"./components/Show/EpisodePage\";\r\nimport SearchPage from \"./components/Search/SearchPage\";\r\nimport LoginForm from \"./components/Modals/LoginForm\";\r\nimport RegistrationForm from \"./components/Modals/RegistrationForm\";\r\nimport ResetPasswordForm from \"./components/Modals/ResetPasswordForm\";\r\nimport ConfirmPage from \"./components/ConfirmPage\";\r\nimport ConfirmPasswordPage from \"./components/ConfirmPasswordPage\";\r\nimport UserPage from \"./components/UserPage/UserPage\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport CalendarPage from \"./components/Calendar/CalendarPage\";\r\nimport SettingsPage from \"./components/Settings/SettingsPage\";\r\nimport UnwatchedPage from \"./components/Unwatched/UnwatchedPage\";\r\nimport NotFoundPage from \"./components/NotFoundPage\";\r\n\r\nclass Routes extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Navbar />\r\n\t\t\t\t<div className='navbar'></div>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path='/' component={HomePage} />\r\n\t\t\t\t\t<Route exact path='/game/:id' component={GamePage} />\r\n\t\t\t\t\t<Route exact path='/movie/:id' component={MoviePage} />\r\n\t\t\t\t\t<Route exact path='/show/:id' component={ShowPage} />\r\n\t\t\t\t\t<Route exact path='/show/:show_id/season/:number' component={SeasonPage} />\r\n\t\t\t\t\t<Route exact path='/show/:show_id/season/:season_number/episode/:episode_number' component={EpisodePage} />\r\n\t\t\t\t\t<Route exact path='/search/:query' component={SearchPage} />\r\n\t\t\t\t\t<Route exact path='/confirm/' component={ConfirmPage} />\r\n\t\t\t\t\t<Route exact path='/confirm_password/' component={ConfirmPasswordPage} />\r\n\t\t\t\t\t<Route exact path='/user/:userID' component={UserPage} />\r\n\t\t\t\t\t<Route exact path='/calendar' component={CalendarPage} />\r\n\t\t\t\t\t<Route exact path='/settings' component={SettingsPage} />\r\n\t\t\t\t\t<Route exact path='/unwatched' component={UnwatchedPage} />\r\n\t\t\t\t\t<Route component={NotFoundPage} />\r\n\t\t\t\t</Switch>\r\n\t\t\t\t<ToastContainer position='top-center' hideProgressBar newestOnTop closeOnClick autoClose={3000} />\r\n\t\t\t\t<LoginForm />\r\n\t\t\t\t<RegistrationForm />\r\n\t\t\t\t<ResetPasswordForm />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n//\r\nexport default Routes;\r\n","import React, { useEffect } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"./store/AuthStore\";\r\n\r\nimport Routes from \"./Routes\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst App = observer((props) => {\r\n\tconst { checkAuthorization } = AuthStore;\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tcheckAuthorization();\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<div className='flyout'>\r\n\t\t\t\t<main>\r\n\t\t\t\t\t<Routes />\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t</Router>\r\n\t);\r\n});\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === \"localhost\" ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === \"[::1]\" ||\r\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"load\", () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA\");\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then((registration) => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\"New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { \"Service-Worker\": \"script\" },\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get(\"content-type\");\r\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\"No internet connection found. App is running in offline mode.\");\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif (\"serviceWorker\" in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then((registration) => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\nimport \"mdbreact/dist/css/mdb.css\";\r\nimport \"./styles/css/main.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\nserviceWorker.register();\r\n"],"sourceRoot":""}