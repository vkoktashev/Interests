{"version":3,"sources":["store/actionTypes.js","store/reducers.js","components/HomePage.js","settings.js","services/jwtAuth.js","services/userRequests.js","services/gameRequests.js","services/movieRequests.js","services/showRequests.js","store/actions.js","components/Common/StatusButtonGroup.js","components/Common/FriendsActivityRow.js","components/Common/FriendsActivity.js","components/Game/TimeToBeat.js","components/Common/ScoreBlock.js","components/Game/GamePage.js","components/Movie/MoviePage.js","components/Show/DetailedEpisodeRow.js","components/Show/SeasonBlock.js","components/Show/SeasonsBlock.js","components/Show/ShowPage.js","components/Show/SeasonPage.js","components/Show/EpisodePage.js","components/Search/CardGame.js","components/Search/CardMovie.js","components/Search/CardShow.js","components/Common/CardUser.js","components/Common/CategoriesTab.js","components/Search/SearchPage.js","components/Modals/LoginForm.js","components/Modals/RegistrationForm.js","components/Modals/ResetPasswordForm.js","components/ConfirmPage.js","components/ConfirmPasswordPage.js","components/UserPage/Colors.js","components/UserPage/GameBlock.js","components/UserPage/FriendBlock.js","components/UserPage/MovieBlock.js","components/UserPage/LogRow.js","components/UserPage/UserLogBlock.js","components/UserPage/ShowBlock.js","components/UserPage/UserPage.js","components/Navbar.js","components/Calendar/DayInfo.js","components/Calendar/ReleasesList.js","components/Calendar/CalendarPage.js","components/Settings/SettingsPage.js","Routes.js","App.js","serviceWorker.js","index.js"],"names":["SET_USER","SET_AUTH","SET_USER_CALENDAR","SET_USER_SETTINGS","SET_LOGINFORM","SET_REGISTRATEFORM","SET_RESET_PASSWORD_FORM","SET_CONTENT_GAME","SET_CONTENT_GAME_USER_INFO","SET_CONTENT_MOVIE","SET_CONTENT_MOVIE_USER_INFO","SET_CONTENT_SHOW_SEASONS","SET_CONTENT_SHOW_SEASONS_USER_INFO","SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE","SET_CONTENT_SHOW","SET_CONTENT_SHOW_USER_INFO","SET_SEARCH_CONTENT_GAMES","SET_SEARCH_CONTENT_MOVIES","SET_SEARCH_CONTENT_SHOWS","SET_SEARCH_CONTENT_USERS","SET_USER_PAGE_CONTENT","SET_USER_PAGE_FOLLOWING","SET_USER_PAGE_LOGs","SET_USER_PAGE_FRIENDS_LOGS","SET_IS_LOADING_CONTENT_GAME","SET_IS_LOADING_CONTENT_GAME_USER_INFO","SET_IS_LOADING_CONTENT_MOVIE","SET_IS_LOADING_CONTENT_MOVIE_USER_INFO","SET_IS_LOADING_CONTENT_SHOW","SET_IS_LOADING_CONTENT_SHOW_USER_INFO","SET_IS_LOADING_CONTENT_SHOW_SEASONS","SET_IS_LOADING_SEARCH_GAMES","SET_IS_LOADING_SEARCH_MOVIES","SET_IS_LOADING_SEARCH_SHOWS","SET_IS_LOADING_SEARCH_USERS","SET_IS_LOADING_USER_PAGE_CONTENT","SET_IS_LOADING_USER_PAGE_LOGS","SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS","SET_IS_LOADING_USER_CALENDAR","SET_IS_LOADING_USER_SETTINGS","AUTH_ERROR","REGISTRATE_ERROR","GAME_REQUEST_ERROR","MOVIE_REQUEST_ERROR","SHOW_REQUEST_ERROR","USER_PAGE_ERROR","RESET_PASSWORD_ERROR","CONFIRM_PASSWORD_ERROR","initialState","Map","auth","loggedIn","user","username","email","id","content","game","main_info","rawg","name","background_image","background_image_additional","developers","hltb","game_image_url","user_info","status","review","score","spent_time","friends_info","movie","tmdb","title","poster_path","show","episode_run_time","showSeasons","searchContent","games","movies","shows","users","userPageContent","stats","userLogs","log","userFriendsLogs","userCalendar","userSettings","openedPages","LoginForm","RegistrateForm","ResetPasswordForm","errors","registrate","gameRequest","movieRequest","userPage","resetPassword","confirmPassword","isLoading","contentGame","contentGameUserInfo","contentMovie","contentMovieUserInfo","contentShow","contentShowUserInfo","contentShowSeasons","userPageLogs","userPageFriendsLogs","searchGames","searchMovies","searchShows","searchUsers","getLoggedIn","state","get","getUser","getUserCalendar","getUserSettings","getContentGame","getContentGameUserInfo","getContentMovie","getContentMovieUserInfo","getContentShow","getContentShowUserInfo","getContentShowSeasons","seasonNumber","getContentShowSeasonsUserInfo","getSearchContentGames","getSearchContentMovies","getSearchContentShows","getSearchContentUsers","getUserPageContent","getUserPageLogs","getUserPageFriendsLogs","getAuthError","getRegistrateError","getGameRequestError","getMovieRequestError","getShowRequestError","showRequest","getResetPasswordError","getConfirmPasswordError","getLoginForm","getRegistrateForm","getResetPasswordForm","getIsLoadingContentGame","getIsLoadingContentGameUserInfo","getIsLoadingContentMovie","getIsLoadingContentMovieUserInfo","getIsLoadingContentShow","getIsLoadingContentShowUserInfo","getIsLoadingContentShowSeasons","getIsLoadingSearchGames","getIsLoadingSearchMovies","getIsLoadingSearchShows","getIsLoadingSearchUsers","getIsLoadingUserPageContent","getIsLoadingUserPageLogs","getIsLoadingUserPageFriendsLogs","getIsLoadingUserCalendar","userPageCalendar","getIsLoadingUserSettings","userPageSettings","connect","selectors","className","style","marginTop","marginLeft","href","fontWeight","src","alt","BACKEND_URL","GET_TOKEN_URL","REFRESH_TOKEN_URL","REGISTRATE_URL","CONFIRM_URL","RESET_PASSWORD_URL","CONFIRM_PASSWORD_URL","USER_SETTINGS_URL","GET_GAME_URL","SEARCH_GAMES_URL","GET_MOVIE_URL","SEARCH_MOVIES_URL","GET_SHOW_URL","SEARCH_SHOWS_URL","USER_INFO_URL","USER_CALENDAR_URL","SEARCH_USERS_URL","axiosConfig","headers","getToken","password","a","axios","post","urls","res","userData","jwt_decode","data","access","user_id","token","refreshToken","refresh","console","updateToken","registration","response","confirmation","uid64","patch","put","getUserInfo","userID","AuthStr","Authorization","query","params","setUserStatus","is_following","getUserLog","page","resultsOnPage","page_size","getUserFriendsLog","patchUserSettings","settings","getGame","setGameStatus","gameSlug","gamesCount","getGameUserInfo","slug","getMovie","setMovieStatus","getMovieUserInfo","getShow","getShowSeason","showID","getShowEpisode","episodeNumber","setShowStatus","setShowSeasonStatus","setShowEpisodesStatus","episodesList","getShowUserInfo","getShowSeasonUserInfo","seasonID","getShowEpisodeUserInfo","episodeID","checkAuthorization","dispatch","localStorage","getItem","Date","now","type","actionTypes","setItem","resetAuthorization","removeItem","requestShowSeasonsUserInfo","showRequests","then","result","newResult","user_watched_show","episodes","episodes_user_info","toast","error","needUpdate","seasons","episode","indexOf","season_number","push","season","openLoginForm","isOpen","setLoading","setError","isError","defaults","common","StatusButtonGroup","statuses","activeColor","onChangeStatus","userStatus","map","backgroundColor","onClick","intToHours","number","FriendsActivityRow","info","history","useHistory","window","location","origin","e","preventDefault","stop","emptySymbol","far","icon","size","fullSymbol","n","initialRating","readonly","hidden","FriendsActivity","friendInfo","TimeToBeat","hltbInfo","gameplay_main","gameplay_main_extra","gameplay_completionist","display","gameplay_main_unit","gameplay_main_extra_unit","gameplay_completionist_unit","ScoreBlock","text","getColor","requestError","gameIsLoading","gameUserInfo","gameUserInfoIsLoading","requestGame","gameRequests","actions","requestGameUserInfo","getState","useParams","useState","genres","setGenres","setReview","spentTime","setSpentTime","userRate","setUserRate","setDevelopers","platforms","setPlatforms","date","setDate","gameplay_comletionist","setHtlbInfo","setClear","setClearUI","strToFloat","str","parseFloat","useEffect","newGenres","i","length","playtime","newDevelopers","newPlatforms","platform","released","mas","split","newDate","document","backgroundImage","active","spinner","fontSize","onChange","marginBottom","metacritic","paddingTop","dangerouslySetInnerHTML","__html","description","label","value","event","target","outline","list","getTimeToBeatDatalist","disabled","getElementById","movieIsLoading","movieUserInfo","movieUserInfoIsLoading","requestMovie","movieRequests","requestMovieUserInfo","companies","setCompanies","cast","setCast","director","setDirector","production_companies","newCompanies","newCast","crew","newDirector","job","backdrop_path","original_title","release_date","runtime","tagline","vote_average","overview","DetailedEpisodeRow","setShowEpisodeUserStatus","userInfo","checkAll","userWatchedShow","isChecked","setIsChecked","addEpisode","episode_number","checked","air_date","toLocaleDateString","start","concat","ownProps","showSeason","showSeasonIsLoading","showUserInfo","requestShowSeason","requestShowSeasonUserInfo","setShowSeasonUserStatus","getEpisodeByNumber","open","counter","reverse","SeasonsBlock","needHeader","setNeedHeader","changedEpisodes","setChangedEpisodes","onChangeEpisodes","newChangedEpisodes","index","findIndex","splice","updateEpisodes","showIsLoading","showUserInfoIsLoading","requestShow","setShowUserStatus","requestShowUserInfo","showStatus","firstDate","setFirstDate","lastDate","setLastDate","first_air_date","last_air_date","original_name","number_of_seasons","number_of_episodes","show_id","chartData","setChartData","show_name","newData","Оценка","show_original_name","body","clientHeight","clientWidth","width","height","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","dataKey","interval","tick","fill","tickLine","domain","tickCount","contentStyle","color","stroke","fillOpacity","layout","showEpisode","showEpisodeIsLoading","requestShowEpisode","setEpisodeUserStatus","requestShowEpisodeUserInfo","still_path","CardGame","CardMovie","CardShow","CardUser","CategoriesTab","categories","onChangeCategory","activeCategory","category","gamesIsLoading","moviesIsLoading","showsIsLoading","usersIsLoading","searchGame","searchMovie","results","searchShow","userRequests","queryText","setQueryText","gamesCards","setGamesCards","moviesCards","setMoviesCards","showsCards","setShowsCards","usersCards","setUsersCards","gamesPage","setGamesPage","moviesPage","setMoviesPage","showsPage","setShowsPage","setActiveCategory","md","onSubmit","placeholder","aria-label","authError","closeForm","logIn","login","openResetPasswordForm","setPassword","setLogin","toggle","centered","htmlFor","registrateArror","passwordConfirm","setPasswordConfirm","setEmail","outlineColor","resetPasswordError","confirmEmailRequest","success","search","URLSearchParams","confirmPasswordError","COLORS","GameBlock","gameChartData","setGameChartData","gameColumns","field","sort","columns","rows","gameTableData","setGameTableData","rawg_slug","rawg_name","name2","genre","spent_time_percent","Процент","b","count","total_spent_time","striped","bordered","small","barReverse","noBottomColumns","noRecordsFoundLabel","paginationLabel","entriesLabel","searchLabel","responsive","test","navigator","userAgent","tickMargin","itemStyle","borderRadius","cursor","entry","Math","min","angle","FriendBlock","MovieBlock","movieChartData","setMovieChartData","movieColumns","movieTableData","setMovieTableData","tmdb_id","tmdb_name","LogRow","showUsername","created","toLocaleTimeString","action","actionResult","translateActionType","action_type","action_result","actionType","translateType","parent_name","nameToLink","target_id","actionResultToStr","UserLogBlock","logs","onChangePage","logsByDay","setLogsByDay","currentPage","setCurrentPage","newLogs","getDay","groupLogsByDay","dayLog","has_next_page","ShowBlock","showChartData","setShowChartData","showColumns","showTableData","setShowTableData","userIsLoading","userLogsIsLoading","userFriendsLogsIsLoading","currentUserInfo","getUserLogs","getUserFriendsLogs","lastActivity","setLastActivity","last_activity","toLocaleString","is_followed","cx","cy","outerRadius","labelLine","minAngle","verticalAlign","horizontalAlign","pageNumber","followed_users","onLoginClick","onLogoutClick","onRegistrationClick","newCollapseID","collapseID","setCollapseID","dark","expand","fixed","navbar","to","nav","caret","DayInfo","day","year","getFullYear","undefined","month","weekday","rawg_id","tmdb_show","tmdb_season_number","tmdb_episode_number","ReleasesList","calendar","myStyle","border","getContentForDay","getIconForDay","lineColor","cardHeaderStyle","iconStyle","bubbleStyle","titleStyle","subtitleStyle","calendarIsLoading","currentDay","setCurrentDay","formatDate","defaultView","minDetail","locale","minDate","tileContent","activeStartDate","view","Object","entries","pad","getMonth","getDate","settingsIsLoading","saveSettings","gameNotifInput","setGameNotifInput","movieNotifInput","setMovieNotifInput","showNotifInput","setShowNotifInput","receive_games_releases","receive_movies_releases","receive_episodes_releases","Routes","exact","path","component","HomePage","GamePage","MoviePage","ShowPage","SeasonPage","EpisodePage","SearchPage","ConfirmPage","ConfirmPasswordPage","UserPage","CalendarPage","SettingsPage","render","position","hideProgressBar","newestOnTop","closeOnClick","autoClose","React","Component","onLoad","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","types","setIn","applyMiddleware","thunk","ReactDOM","URL","process","addEventListener","fetch","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.d4141783.chunk.js","sourcesContent":["export const SET_USER = \"SET_USER\";\r\nexport const SET_AUTH = \"SET_AUTH\";\r\nexport const SET_USER_CALENDAR = \"SET_USER_CALENDAR\";\r\nexport const SET_USER_SETTINGS = \"SET_USER_SETTINGS\";\r\n\r\nexport const SET_LOGINFORM = \"SET_LOGINFORM\";\r\nexport const SET_REGISTRATEFORM = \"SET_REGISTRATEFORM\";\r\nexport const SET_RESET_PASSWORD_FORM = \"SET_RESET_PASSWORD_FORM\";\r\n\r\nexport const SET_CONTENT_GAME = \"SET_CONTENT_GAME\";\r\nexport const SET_CONTENT_GAME_USER_INFO = \"SET_CONTENT_GAME_USER_INFO\";\r\n\r\nexport const SET_CONTENT_MOVIE = \"SET_CONTENT_MOVIE\";\r\nexport const SET_CONTENT_MOVIE_USER_INFO = \"SET_CONTENT_MOVIE_USER_INFO\";\r\n\r\nexport const SET_CONTENT_SHOW_SEASONS = \"SET_CONTENT_SHOW_SEASONS\";\r\nexport const SET_CONTENT_SHOW_SEASONS_USER_INFO = \"SET_CONTENT_SHOW_SEASONS_USER_INFO\";\r\nexport const SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE = \"SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE\";\r\n\r\nexport const SET_CONTENT_SHOW = \"SET_CONTENT_SHOW\";\r\nexport const SET_CONTENT_SHOW_USER_INFO = \"SET_CONTENT_SHOW_USER_INFO\";\r\n\r\nexport const SET_SEARCH_CONTENT_GAMES = \"SET_SEARCH_CONTENT_GAMES\";\r\nexport const SET_SEARCH_CONTENT_MOVIES = \"SET_SEARCH_CONTENT_MOVIES\";\r\nexport const SET_SEARCH_CONTENT_SHOWS = \"SET_SEARCH_CONTENT_SHOWS\";\r\nexport const SET_SEARCH_CONTENT_USERS = \"SET_SEARCH_CONTENT_USERS\";\r\n\r\nexport const SET_USER_PAGE_CONTENT = \"SET_USER_PAGE_CONTENT\";\r\nexport const SET_USER_PAGE_FOLLOWING = \"SET_USER_PAGE_FOLLOWING\";\r\nexport const SET_USER_PAGE_LOGs = \"SET_USER_PAGE_LOGs\";\r\nexport const SET_USER_PAGE_FRIENDS_LOGS = \"SET_USER_PAGE_FRIENDS_LOGS\";\r\n\r\nexport const SET_IS_LOADING_CONTENT_GAME = \"SET_IS_LOADING_CONTENT_GAME\";\r\nexport const SET_IS_LOADING_CONTENT_GAME_USER_INFO = \"SET_IS_LOADING_CONTENT_GAME_USER_INFO\";\r\nexport const SET_IS_LOADING_CONTENT_MOVIE = \"SET_IS_LOADING_CONTENT_MOVIE\";\r\nexport const SET_IS_LOADING_CONTENT_MOVIE_USER_INFO = \"SET_IS_LOADING_CONTENT_MOVIE_USER_INFO\";\r\nexport const SET_IS_LOADING_CONTENT_SHOW = \"SET_IS_LOADING_CONTENT_SHOW\";\r\nexport const SET_IS_LOADING_CONTENT_SHOW_USER_INFO = \"SET_IS_LOADING_CONTENT_SHOW_USER_INFO\";\r\nexport const SET_IS_LOADING_CONTENT_SHOW_SEASONS = \"SET_IS_LOADING_CONTENT_SHOW_SEASONS\";\r\nexport const SET_IS_LOADING_SEARCH_GAMES = \"SET_IS_LOADING_SEARCH_GAMES\";\r\nexport const SET_IS_LOADING_SEARCH_MOVIES = \"SET_IS_LOADING_SEARCH_MOVIES\";\r\nexport const SET_IS_LOADING_SEARCH_SHOWS = \"SET_IS_LOADING_SEARCH_SHOWS\";\r\nexport const SET_IS_LOADING_SEARCH_USERS = \"SET_IS_LOADING_SEARCH_USERS\";\r\nexport const SET_IS_LOADING_USER_PAGE_CONTENT = \"SET_IS_LOADING_USER_PAGE_CONTENT\";\r\nexport const SET_IS_LOADING_USER_PAGE_LOGS = \"SET_IS_LOADING_USER_PAGE_LOGS\";\r\nexport const SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS = \"SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS\";\r\nexport const SET_IS_LOADING_USER_CALENDAR = \"SET_IS_LOADING_USER_CALENDAR\";\r\nexport const SET_IS_LOADING_USER_SETTINGS = \"SET_IS_LOADING_USER_SETTINGS\";\r\n\r\nexport const AUTH_ERROR = \"AUTH_ERROR\";\r\nexport const REGISTRATE_ERROR = \"REGISTRATE_ERROR\";\r\nexport const GAME_REQUEST_ERROR = \"GAME_REQUEST_ERROR\";\r\nexport const MOVIE_REQUEST_ERROR = \"MOVIE_REQUEST_ERROR\";\r\nexport const SHOW_REQUEST_ERROR = \"SHOW_REQUEST_ERROR\";\r\nexport const USER_PAGE_ERROR = \"USER_PAGE_ERROR\";\r\nexport const RESET_PASSWORD_ERROR = \"RESET_PASSWORD_ERROR\";\r\nexport const CONFIRM_PASSWORD_ERROR = \"CONFIRM_PASSWORD_ERROR\";\r\n","import * as types from \"./actionTypes\";\r\nimport { Map } from \"immutable\";\r\n\r\n// Создаем reducer с начальным состоянием.\r\nconst initialState = Map({\r\n\tauth: { loggedIn: false },\r\n\tuser: { username: \"\", email: \"\", id: null },\r\n\tcontent: {\r\n\t\tgame: {\r\n\t\t\tmain_info: { rawg: { name: \"\", background_image: \"\", background_image_additional: \"\", developers: [{}] }, hltb: { game_image_url: \"\" } },\r\n\t\t\tuser_info: { status: null, review: \"\", score: 0, spent_time: 0, friends_info: [] },\r\n\t\t},\r\n\t\tmovie: { main_info: { tmdb: { title: \"\", poster_path: \"\", developers: [{}] } }, user_info: { status: null, review: \"\", score: 0, friends_info: [] } },\r\n\t\tshow: { main_info: { tmdb: { title: \"\", poster_path: \"\", developers: [{}], episode_run_time: [] } }, user_info: { status: null, review: \"\", score: 0, friends_info: [] } },\r\n\t\tshowSeasons: {},\r\n\t},\r\n\tsearchContent: { games: [], movies: [], shows: [], users: [] },\r\n\tuserPageContent: {\r\n\t\tuser: { stats: {} },\r\n\t\tuserLogs: { log: [] },\r\n\t\tuserFriendsLogs: { log: [] },\r\n\t},\r\n\tuserCalendar: {},\r\n\tuserSettings: {},\r\n\topenedPages: { LoginForm: false, RegistrateForm: false, ResetPasswordForm: false },\r\n\terrors: { auth: false, registrate: false, gameRequest: false, movieRequest: false, userPage: false, resetPassword: false, confirmPassword: false },\r\n\tisLoading: {\r\n\t\tcontentGame: false,\r\n\t\tcontentGameUserInfo: false,\r\n\t\tcontentMovie: false,\r\n\t\tcontentMovieUserInfo: false,\r\n\t\tcontentShow: false,\r\n\t\tcontentShowUserInfo: false,\r\n\t\tcontentShowSeasons: {},\r\n\t\tuserPageContent: false,\r\n\t\tuserPageLogs: false,\r\n\t\tuserPageFriendsLogs: false,\r\n\t\tuserCalendar: false,\r\n\t\tuserSettings: false,\r\n\t\tsearchGames: false,\r\n\t\tsearchMovies: false,\r\n\t\tsearchShows: false,\r\n\t\tsearchUsers: false,\r\n\t},\r\n});\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\t//Редьюсеры пользовательской информации\r\n\t\tcase types.SET_USER:\r\n\t\t\treturn state.setIn([\"user\"], action.user);\r\n\t\tcase types.SET_AUTH:\r\n\t\t\treturn state.setIn([\"auth\"], action.auth);\r\n\r\n\t\t//Редьюсеры информации об игре\r\n\t\tcase types.SET_CONTENT_GAME:\r\n\t\t\treturn state.setIn([\"content\", \"game\", \"main_info\"], action.game);\r\n\t\tcase types.SET_CONTENT_GAME_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"game\", \"user_info\"], action.user_info);\r\n\r\n\t\t//Редьюсеры информации о фильме\r\n\t\tcase types.SET_CONTENT_MOVIE:\r\n\t\t\treturn state.setIn([\"content\", \"movie\", \"main_info\"], action.movie);\r\n\t\tcase types.SET_CONTENT_MOVIE_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"movie\", \"user_info\"], action.user_info);\r\n\r\n\t\t//Редьюсеры информации о сериале\r\n\t\tcase types.SET_CONTENT_SHOW:\r\n\t\t\treturn state.setIn([\"content\", \"show\", \"main_info\"], action.show);\r\n\t\tcase types.SET_CONTENT_SHOW_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"show\", \"user_info\"], action.user_info);\r\n\r\n\t\t//Редьюсеры информации о сезонах сериала\r\n\t\tcase types.SET_CONTENT_SHOW_SEASONS:\r\n\t\t\treturn state.setIn([\"content\", \"showSeasons\", action.seasonNumber, \"main_info\"], action.info);\r\n\t\tcase types.SET_CONTENT_SHOW_SEASONS_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"showSeasons\", action.seasonNumber, \"user_info\"], action.user_info);\r\n\t\tcase types.SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE:\r\n\t\t\treturn state.setIn([\"content\", \"showSeasons\", action.seasonNumber, \"user_info\", \"episodes\", action.episodeNumber, \"score\"], action.score);\r\n\r\n\t\t//Редьюсеры результатов поиска\r\n\t\tcase types.SET_SEARCH_CONTENT_GAMES:\r\n\t\t\treturn state.setIn([\"searchContent\", \"games\"], action.games);\r\n\t\tcase types.SET_SEARCH_CONTENT_MOVIES:\r\n\t\t\treturn state.setIn([\"searchContent\", \"movies\"], action.movies);\r\n\t\tcase types.SET_SEARCH_CONTENT_SHOWS:\r\n\t\t\treturn state.setIn([\"searchContent\", \"shows\"], action.shows);\r\n\t\tcase types.SET_SEARCH_CONTENT_USERS:\r\n\t\t\treturn state.setIn([\"searchContent\", \"users\"], action.users);\r\n\r\n\t\t//Редьюсеры страницы профиля\r\n\t\tcase types.SET_USER_PAGE_CONTENT:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"user\"], action.content);\r\n\t\tcase types.SET_USER_PAGE_FOLLOWING:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"user\", \"is_followed\"], action.is_following);\r\n\t\tcase types.SET_USER_PAGE_LOGs:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"userLogs\"], action.logs);\r\n\t\tcase types.SET_USER_PAGE_FRIENDS_LOGS:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"userFriendsLogs\"], action.logs);\r\n\t\tcase types.SET_USER_CALENDAR:\r\n\t\t\treturn state.setIn([\"userCalendar\"], action.data);\r\n\t\tcase types.SET_USER_SETTINGS:\r\n\t\t\treturn state.setIn([\"userSettings\"], action.data);\r\n\r\n\t\t//Редьюсеры состояния всплывающих окон\r\n\t\tcase types.SET_LOGINFORM:\r\n\t\t\treturn state.setIn([\"openedPages\", \"LoginForm\"], action.isOpen);\r\n\t\tcase types.SET_REGISTRATEFORM:\r\n\t\t\treturn state.setIn([\"openedPages\", \"RegistrateForm\"], action.isOpen);\r\n\t\tcase types.SET_RESET_PASSWORD_FORM:\r\n\t\t\treturn state.setIn([\"openedPages\", \"ResetPasswordForm\"], action.isOpen);\r\n\r\n\t\t//Редьюсеры ошибок\r\n\t\tcase types.AUTH_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"auth\"], action.error);\r\n\t\tcase types.REGISTRATE_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"registrate\"], action.error);\r\n\t\tcase types.GAME_REQUEST_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"gameRequest\"], action.error);\r\n\t\tcase types.MOVIE_REQUEST_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"movieRequest\"], action.error);\r\n\t\tcase types.SHOW_REQUEST_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"showRequest\"], action.error);\r\n\t\tcase types.USER_PAGE_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"userPage\"], action.error);\r\n\t\tcase types.RESET_PASSWORD_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"resetPassword\"], action.error);\r\n\t\tcase types.CONFIRM_PASSWORD_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"confirmPassword\"], action.error);\r\n\r\n\t\t//Редьюсеры состояния загрузки\r\n\t\tcase types.SET_IS_LOADING_CONTENT_GAME:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentGame\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_GAME_USER_INFO:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentGameUserInfo\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_MOVIE:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentMovie\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_MOVIE_USER_INFO:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentMovieUserInfo\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_SHOW:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentShow\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_SHOW_USER_INFO:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentShowUserInfo\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_SHOW_SEASONS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentShowSeasons\", action.seasonNumber], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_GAMES:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchGames\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_MOVIES:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchMovies\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_SHOWS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchShows\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_USERS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchUsers\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_PAGE_CONTENT:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userPageContent\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_PAGE_LOGS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userPageLogs\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userPageFriendsLogs\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_CALENDAR:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userCalendar\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_SETTINGS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userSettings\"], action.isLoading);\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n//Селекторы пользовательской информации\r\nexport function getLoggedIn(state) {\r\n\treturn state.get(\"auth\").loggedIn;\r\n}\r\nexport function getAuth(state) {\r\n\treturn state.get(\"auth\");\r\n}\r\nexport function getUser(state) {\r\n\treturn state.get(\"user\");\r\n}\r\nexport function getUserCalendar(state) {\r\n\treturn state.get(\"userCalendar\");\r\n}\r\nexport function getUserSettings(state) {\r\n\treturn state.get(\"userSettings\");\r\n}\r\n\r\n//Селекторы информации о контенте\r\nexport function getContentGame(state) {\r\n\treturn state.get(\"content\").game.main_info;\r\n}\r\nexport function getContentGameUserInfo(state) {\r\n\treturn state.get(\"content\").game.user_info;\r\n}\r\nexport function getContentMovie(state) {\r\n\treturn state.get(\"content\").movie.main_info;\r\n}\r\nexport function getContentMovieUserInfo(state) {\r\n\treturn state.get(\"content\").movie.user_info;\r\n}\r\nexport function getContentShow(state) {\r\n\treturn state.get(\"content\").show.main_info;\r\n}\r\nexport function getContentShowUserInfo(state) {\r\n\treturn state.get(\"content\").show.user_info;\r\n}\r\nexport function getContentShowSeasons(state, seasonNumber) {\r\n\treturn state.get(\"content\").showSeasons[seasonNumber]?.main_info;\r\n}\r\nexport function getContentShowSeasonsUserInfo(state, seasonNumber) {\r\n\treturn state.get(\"content\").showSeasons[seasonNumber]?.user_info;\r\n}\r\n\r\n//Селекторы поисковых результатов\r\nexport function getSearchContentGames(state) {\r\n\treturn state.get(\"searchContent\").games;\r\n}\r\nexport function getSearchContentMovies(state) {\r\n\treturn state.get(\"searchContent\").movies;\r\n}\r\nexport function getSearchContentShows(state) {\r\n\treturn state.get(\"searchContent\").shows;\r\n}\r\nexport function getSearchContentUsers(state) {\r\n\treturn state.get(\"searchContent\").users;\r\n}\r\n\r\n//Селекторы страницы профиля\r\nexport function getUserPageContent(state) {\r\n\treturn state.get(\"userPageContent\").user;\r\n}\r\nexport function getUserPageLogs(state) {\r\n\treturn state.get(\"userPageContent\").userLogs;\r\n}\r\nexport function getUserPageFriendsLogs(state) {\r\n\treturn state.get(\"userPageContent\").userFriendsLogs;\r\n}\r\n\r\n//Селекторы ошибок\r\nexport function getAuthError(state) {\r\n\treturn state.get(\"errors\").auth;\r\n}\r\nexport function getRegistrateError(state) {\r\n\treturn state.get(\"errors\").registrate;\r\n}\r\nexport function getGameRequestError(state) {\r\n\treturn state.get(\"errors\").gameRequest;\r\n}\r\nexport function getMovieRequestError(state) {\r\n\treturn state.get(\"errors\").movieRequest;\r\n}\r\nexport function getShowRequestError(state) {\r\n\treturn state.get(\"errors\").showRequest;\r\n}\r\nexport function getUserPageError(state) {\r\n\treturn state.get(\"errors\").userPage;\r\n}\r\nexport function getResetPasswordError(state) {\r\n\treturn state.get(\"errors\").resetPassword;\r\n}\r\nexport function getConfirmPasswordError(state) {\r\n\treturn state.get(\"errors\").confirmPassword;\r\n}\r\n\r\n//Селекторы состояния высплывающих окон\r\nexport function getLoginForm(state) {\r\n\treturn state.get(\"openedPages\").LoginForm;\r\n}\r\nexport function getRegistrateForm(state) {\r\n\treturn state.get(\"openedPages\").RegistrateForm;\r\n}\r\nexport function getResetPasswordForm(state) {\r\n\treturn state.get(\"openedPages\").ResetPasswordForm;\r\n}\r\n\r\n//Селекторы состояния загрузки\r\nexport function getIsLoadingContentGame(state) {\r\n\treturn state.get(\"isLoading\").contentGame;\r\n}\r\nexport function getIsLoadingContentGameUserInfo(state) {\r\n\treturn state.get(\"isLoading\").contentGameUserInfo;\r\n}\r\nexport function getIsLoadingContentMovie(state) {\r\n\treturn state.get(\"isLoading\").contentMovie;\r\n}\r\nexport function getIsLoadingContentMovieUserInfo(state) {\r\n\treturn state.get(\"isLoading\").contentMovieUserInfo;\r\n}\r\nexport function getIsLoadingContentShow(state) {\r\n\treturn state.get(\"isLoading\").contentShow;\r\n}\r\nexport function getIsLoadingContentShowUserInfo(state) {\r\n\treturn state.get(\"isLoading\").contentShowUserInfo;\r\n}\r\nexport function getIsLoadingContentShowSeasons(state, seasonNumber) {\r\n\treturn state.get(\"isLoading\").contentShowSeasons[seasonNumber];\r\n}\r\nexport function getIsLoadingSearchGames(state) {\r\n\treturn state.get(\"isLoading\").searchGames;\r\n}\r\nexport function getIsLoadingSearchMovies(state) {\r\n\treturn state.get(\"isLoading\").searchMovies;\r\n}\r\nexport function getIsLoadingSearchShows(state) {\r\n\treturn state.get(\"isLoading\").searchShows;\r\n}\r\nexport function getIsLoadingSearchUsers(state) {\r\n\treturn state.get(\"isLoading\").searchUsers;\r\n}\r\nexport function getIsLoadingSearchAll(state) {\r\n\treturn state.get(\"isLoading\").searchUsers || state.get(\"isLoading\").searchMovies || state.get(\"isLoading\").searchGames;\r\n}\r\nexport function getIsLoadingUserPageContent(state) {\r\n\treturn state.get(\"isLoading\").userPageContent;\r\n}\r\nexport function getIsLoadingUserPageLogs(state) {\r\n\treturn state.get(\"isLoading\").userPageLogs;\r\n}\r\nexport function getIsLoadingUserPageFriendsLogs(state) {\r\n\treturn state.get(\"isLoading\").userPageFriendsLogs;\r\n}\r\nexport function getIsLoadingUserCalendar(state) {\r\n\treturn state.get(\"isLoading\").userPageCalendar;\r\n}\r\nexport function getIsLoadingUserSettings(state) {\r\n\treturn state.get(\"isLoading\").userPageSettings;\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../store/reducers\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction HomePage({ user }) {\r\n\treturn (\r\n\t\t<div className='bg'>\r\n\t\t\t<h2 style={{ marginTop: \"70px\", marginLeft: \"30px\" }}>Добро пожаловать на Interests!</h2>\r\n\t\t\t<h4 style={{ marginLeft: \"30px\" }}>\r\n\t\t\t\tГлавная страница ещё не готова, однако можно воспользоваться{\" \"}\r\n\t\t\t\t<a href='/search/example' style={{ fontWeight: \"600\" }}>\r\n\t\t\t\t\tпоиском\r\n\t\t\t\t</a>{\" \"}\r\n\t\t\t\tили проверить свой{\" \"}\r\n\t\t\t\t<a href={\"/user/\" + user.id} style={{ fontWeight: \"600\" }}>\r\n\t\t\t\t\tпрофиль\r\n\t\t\t\t</a>\r\n\t\t\t\t, если вы уже зарегистрированы\r\n\t\t\t</h4>\r\n\t\t\t<img src='images/logo192.png' style={{ marginLeft: \"20px\" }} alt='Картинка' />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: selectors.getUser(state),\r\n});\r\n\r\nconst mapDispatchToProps = () => {\r\n\treturn {};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePage);\r\n","/** Время жизни токена в миллисекундах, после истечения которого будет запрошен новый токен*/\r\nexport const TOKEN_LIFETIME = 290000;\r\n/**Адрес сервера*/\r\nexport const BACKEND_URL = \"http://35.193.124.214:8001/\";\r\n/**Адрес получения токена */\r\nexport const GET_TOKEN_URL = BACKEND_URL + \"users/auth/login/\";\r\n/**Адрес обновления токена */\r\nexport const REFRESH_TOKEN_URL = BACKEND_URL + \"users/auth/refresh-token/\";\r\n/**Адрес регистрации */\r\nexport const REGISTRATE_URL = BACKEND_URL + \"users/auth/signup/\";\r\n/**Адрес подтверждения почты */\r\nexport const CONFIRM_URL = BACKEND_URL + \"users/auth/confirm_email/\";\r\n/**Адрес сброса пароля */\r\nexport const RESET_PASSWORD_URL = BACKEND_URL + \"users/auth/password_reset/\";\r\n/**Адрес подтверждения сброса пароля */\r\nexport const CONFIRM_PASSWORD_URL = BACKEND_URL + \"users/auth/confirm_password_reset/\";\r\n/**Адрес сохранения настроек */\r\nexport const USER_SETTINGS_URL = BACKEND_URL + \"users/user/user_settings/\";\r\n/**Адрес запроса игры */\r\nexport const GET_GAME_URL = BACKEND_URL + \"games/game/\";\r\n/**Адрес поиска игр */\r\nexport const SEARCH_GAMES_URL = BACKEND_URL + \"games/search/\";\r\n/**Адрес запроса фильма */\r\nexport const GET_MOVIE_URL = BACKEND_URL + \"movies/movie/\";\r\n/**Адрес поиска фильмов */\r\nexport const SEARCH_MOVIES_URL = BACKEND_URL + \"movies/search/\";\r\n/**Адрес запроса сериала */\r\nexport const GET_SHOW_URL = BACKEND_URL + \"shows/show/\";\r\n/**Адрес поиска сериалов */\r\nexport const SEARCH_SHOWS_URL = BACKEND_URL + \"shows/search/\";\r\n/**Адрес получения информации о пользователе */\r\nexport const USER_INFO_URL = BACKEND_URL + \"users/user/\";\r\n/**Адрес получения календаря релизов пользователя */\r\nexport const USER_CALENDAR_URL = BACKEND_URL + \"users/user/release_calendar/\";\r\n/**Адрес поиска пользователей */\r\nexport const SEARCH_USERS_URL = BACKEND_URL + \"users/search/\";\r\n","import axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport * as urls from \"../settings\";\r\n\r\nlet axiosConfig = {\r\n\theaders: {\r\n\t\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n\t},\r\n};\r\n\r\n/**\r\n * ПОлучение токена авторизации. Токен сохраняется в localStorage\r\n * @param {string} username Имя пользователя\r\n * @param {string} password Пароль\r\n */\r\nexport async function getToken(username, password) {\r\n\ttry {\r\n\t\tconst res = await axios.post(\r\n\t\t\turls.GET_TOKEN_URL,\r\n\t\t\t{\r\n\t\t\t\tusername: username,\r\n\t\t\t\tpassword: password,\r\n\t\t\t},\r\n\t\t\taxiosConfig\r\n\t\t);\r\n\r\n\t\tlet userData = jwt_decode(res.data.access);\r\n\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\t\treturn { token: res.data.access, refreshToken: res.data.refresh, user: user };\r\n\t} catch (e) {\r\n\t\tconsole.log(\"axios error: \" + e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Функция обновления токена\r\n */\r\nexport async function updateToken(refreshToken) {\r\n\tif ((typeof refreshToken !== \"undefined\") & (refreshToken != null))\r\n\t\ttry {\r\n\t\t\tconst res = await axios.post(\r\n\t\t\t\turls.REFRESH_TOKEN_URL,\r\n\t\t\t\t{\r\n\t\t\t\t\trefresh: refreshToken,\r\n\t\t\t\t},\r\n\t\t\t\taxiosConfig\r\n\t\t\t);\r\n\r\n\t\t\tlet userData = jwt_decode(res.data.access);\r\n\t\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\t\t\treturn { token: res.data.access, user: user };\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(\"exios error: \" + e);\r\n\t\t\treturn null;\r\n\t\t}\r\n\treturn null;\r\n}\r\n\r\nexport async function registration(username, email, password) {\r\n\ttry {\r\n\t\tconst res = await axios.post(\r\n\t\t\turls.REGISTRATE_URL,\r\n\t\t\t{\r\n\t\t\t\tusername: username,\r\n\t\t\t\temail: email,\r\n\t\t\t\tpassword: password,\r\n\t\t\t},\r\n\t\t\taxiosConfig\r\n\t\t);\r\n\t\tlet data = res.data;\r\n\t\tdata.status = res.status;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n\r\nexport async function confirmation(uid64, token) {\r\n\ttry {\r\n\t\tconst res = await axios.patch(urls.CONFIRM_URL + \"?uid64=\" + uid64 + \"&token=\" + token);\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n\r\nexport async function resetPassword(email) {\r\n\ttry {\r\n\t\tconst res = await axios.put(urls.RESET_PASSWORD_URL, { email: email }, axiosConfig);\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n\r\nexport async function confirmPassword(token, password) {\r\n\ttry {\r\n\t\tconst res = await axios.patch(urls.CONFIRM_PASSWORD_URL + \"?reset_token=\" + token, { password: password }, axiosConfig);\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n","import axios from \"axios\";\r\nimport { USER_INFO_URL, SEARCH_USERS_URL, USER_CALENDAR_URL, USER_SETTINGS_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о пользователе\r\n * @param {string} token Токен доступа\r\n * @param {string} userID ID пользователя\r\n * @returns {object} Информация о пользователе\r\n */\r\nexport async function getUserInfo(token, userID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/\");\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск пользователей\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchUsers(query) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_USERS_URL, { params: { query: query } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса пользовтеля (добавить в друзья и тд)\r\n * @param {string} token Токен доступа\r\n * @param {boolean} is_following Статус фильма\r\n * @param {string} userID ID пользовтеля\r\n */\r\nexport async function setUserStatus(token, is_following, userID) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(USER_INFO_URL + userID + \"/follow/\", is_following, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {string} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserLog(token, userID, page, resultsOnPage) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage } }, { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage } });\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог друзей пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {int} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserFriendsLog(token, userID, page, resultsOnPage) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/friends_log/\", { params: { page: page, page_size: resultsOnPage }, headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий календарь релизов пользователя\r\n */\r\nexport async function getUserCalendar(token) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(USER_CALENDAR_URL, { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий настройки пользователя\r\n */\r\nexport async function getUserSettings(token) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(USER_SETTINGS_URL, { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, изменяющий настройки пользователя\r\n */\r\nexport async function patchUserSettings(token, settings) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.patch(USER_SETTINGS_URL, settings, { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n","import axios from \"axios\";\r\nimport { GET_GAME_URL, SEARCH_GAMES_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об игре\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID игры\r\n * @returns {object} Информация об игре\r\n */\r\nexport async function getGame(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_GAME_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_GAME_URL + id + \"/\");\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса игры\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус игры\r\n * @param {string} gameSlug Слаг игры\r\n */\r\nexport async function setGameStatus(token, gameSlug, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\r\n\t\tconst res = await axios.put(GET_GAME_URL + gameSlug + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск игр\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchGames(query, page, gamesCount) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_GAMES_URL, { params: { query: query, page: page, page_size: gamesCount } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для игры\r\n * @param {string} slug slug игры\r\n * @param {int} page страница\r\n */\r\nexport async function getGameUserInfo(token, slug) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_GAME_URL + slug + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n","import axios from \"axios\";\r\nimport { SEARCH_MOVIES_URL, GET_MOVIE_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о фильме\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID фильма\r\n * @returns {object} Информация о фильме\r\n */\r\nexport async function getMovie(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/\");\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса фильма\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус фильма\r\n * @param {string} movieID ID фильма\r\n */\r\nexport async function setMovieStatus(token, id, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_MOVIE_URL + id + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск фильмов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchMovies(query, page) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_MOVIES_URL, { params: { query: query, page: page } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для фильма\r\n * @param {string} id id фильма\r\n */\r\nexport async function getMovieUserInfo(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n","import axios from \"axios\";\r\nimport { SEARCH_SHOWS_URL, GET_SHOW_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сериале\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID сериала\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShow(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + id + \"/\");\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сезоне сериала\r\n * @param {string} token Токен доступа\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowSeason(token, showID, seasonNumber) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber, { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber);\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о серии сериала\r\n * @param {string} token Токен доступа\r\n * @param {string} showID ID сериала\r\n * @param {string} seasonNumber номер сезона\r\n * @param {string} episodeNumber номер эпизода\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowEpisode(token, showID, seasonNumber, episodeNumber) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber, { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber);\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус сериала\r\n * @param {string} id ID сериала\r\n */\r\nexport async function setShowStatus(token, id, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_SHOW_URL + id + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус сезона сериала\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n */\r\nexport async function setShowSeasonStatus(token, showID, seasonNumber, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} episodesList Список объектов эпизодов\r\n * @param {string} showID ID сериала\r\n */\r\nexport async function setShowEpisodesStatus(token, showID, episodesList) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_SHOW_URL + showID + \"/episodes/\", episodesList, { headers: { Authorization: AuthStr } });\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск сериалов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchShows(query, page) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_SHOWS_URL, { params: { query: query, page: page } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowUserInfo(token, showID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сезона сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowSeasonUserInfo(token, showID, seasonID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для эпизода сериала\r\n * @param {string} showID id сериала\r\n * @param {int} page страница\r\n */\r\nexport async function getShowEpisodeUserInfo(token, showID, seasonID, episodeID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/episode/\" + episodeID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n","import * as actionTypes from \"./actionTypes\";\r\nimport * as selectors from \"./reducers\";\r\nimport * as auth from \"../services/jwtAuth\";\r\nimport { TOKEN_LIFETIME } from \"../settings\";\r\nimport * as userRequests from \"../services/userRequests\";\r\nimport * as gameRequests from \"../services/gameRequests\";\r\nimport * as movieRequests from \"../services/movieRequests\";\r\nimport * as showRequests from \"../services/showRequests\";\r\nimport { toast } from \"react-toastify\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nexport function tryAuth(login, password) {\r\n\treturn async (dispatch) => {\r\n\t\tsetError(dispatch, actionTypes.AUTH_ERROR, false);\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await auth.getToken(login, password);\r\n\t\t\tif (res !== null) {\r\n\t\t\t\tlocalStorage.setItem(\"refreshToken\", res.refreshToken);\r\n\t\t\t\tlocalStorage.setItem(\"token\", res.token);\r\n\t\t\t\tlocalStorage.setItem(\"tokenTime\", Date.now());\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\t\t\tauth: { loggedIn: true },\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\t\tuser: res.user,\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_LOGINFORM,\r\n\t\t\t\t\tisOpen: false,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsetError(dispatch, actionTypes.AUTH_ERROR, true);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetError(dispatch, actionTypes.AUTH_ERROR, true);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function checkAuthorization() {\r\n\treturn async (dispatch) => {\r\n\t\tif ((localStorage.getItem(\"token\") === null) | (Date.now() - localStorage.getItem(\"tokenTime\") > TOKEN_LIFETIME)) {\r\n\t\t\tconst res = await auth.updateToken(localStorage.getItem(\"refreshToken\"));\r\n\t\t\tif (res !== null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\t\t\tauth: { loggedIn: true },\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\t\tuser: res.user,\r\n\t\t\t\t});\r\n\t\t\t\tlocalStorage.setItem(\"token\", res.token);\r\n\t\t\t\tlocalStorage.setItem(\"tokenTime\", Date.now());\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\t//toast.warn(\"Произошла ошибка авторизации. Зайдите ещё раз\");\r\n\t\t\t\tdispatch(resetAuthorization());\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet userData = jwt_decode(localStorage.getItem(\"token\"));\r\n\t\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\tuser: user,\r\n\t\t\t});\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\t\tauth: { loggedIn: true },\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function resetAuthorization() {\r\n\treturn async (dispatch) => {\r\n\t\tlocalStorage.removeItem(\"refreshToken\");\r\n\t\tlocalStorage.removeItem(\"token\");\r\n\t\tlocalStorage.removeItem(\"tokenTime\");\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\tauth: { loggedIn: false },\r\n\t\t});\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\tuser: { username: \"\", id: null, email: \"\" },\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function registrationRequest(username, email, password) {\r\n\treturn async (dispatch) => {\r\n\t\tsetError(dispatch, actionTypes.REGISTRATE_ERROR, false);\r\n\t\tauth.registration(username, email, password).then((result) => {\r\n\t\t\tif ((result.status === 201) | (result.status === 200)) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\t\tuser: { login: result.username, email: result.email },\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tfor (let error in result.data) toast.error(result.data[error][0]);\r\n\r\n\t\t\t\tsetError(dispatch, actionTypes.REGISTRATE_ERROR, true);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function confirmEmailRequest(uid64, token) {\r\n\treturn async () => {\r\n\t\tauth.confirmation(uid64, token).then((result) => {\r\n\t\t\tif (result.status === 200) {\r\n\t\t\t\ttoast.success(\"Почта подтверждена!\");\r\n\t\t\t} else {\r\n\t\t\t\tif (result.data) toast.error(result.data.error);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestGame(id) {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch(checkAuthorization());\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME, true);\r\n\t\tsetError(dispatch, actionTypes.GAME_REQUEST_ERROR, false);\r\n\t\tgameRequests.getGame(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_GAME,\r\n\t\t\t\t\tgame: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Игра не найдена!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.GAME_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestGameUserInfo(slug) {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch(checkAuthorization());\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME_USER_INFO, true);\r\n\t\tgameRequests.getGameUserInfo(localStorage.getItem(\"token\"), slug).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_GAME_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestMovie(id) {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch(checkAuthorization());\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE, true);\r\n\t\tsetError(dispatch, actionTypes.MOVIE_REQUEST_ERROR, false);\r\n\t\tmovieRequests.getMovie(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_MOVIE,\r\n\t\t\t\t\tmovie: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Фильм не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.MOVIE_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestMovieUserInfo(id) {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch(checkAuthorization());\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE_USER_INFO, true);\r\n\t\tmovieRequests.getMovieUserInfo(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_MOVIE_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShow(id) {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch(checkAuthorization());\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, true);\r\n\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, false);\r\n\t\tshowRequests.getShow(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW,\r\n\t\t\t\t\tshow: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Сериал не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowSeason(showID, seasonNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch(checkAuthorization());\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, true);\r\n\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, false);\r\n\t\tshowRequests.getShowSeason(localStorage.getItem(\"token\"), showID, seasonNumber).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW,\r\n\t\t\t\t\tshow: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Сериал не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowSeasons(showID, seasonNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch(checkAuthorization());\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\tseasonNumber: seasonNumber,\r\n\t\t\tisLoading: true,\r\n\t\t});\r\n\t\tshowRequests.getShowSeason(localStorage.getItem(\"token\"), showID, seasonNumber).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_SEASONS,\r\n\t\t\t\t\tseasonNumber: seasonNumber,\r\n\t\t\t\t\tinfo: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Сериал не найден!\");\r\n\t\t\t}\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\t\tseasonNumber: seasonNumber,\r\n\t\t\t\tisLoading: false,\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowEpisode(showID, seasonNumber, episodeNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch(checkAuthorization());\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, true);\r\n\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, false);\r\n\t\tshowRequests.getShowEpisode(localStorage.getItem(\"token\"), showID, seasonNumber, episodeNumber).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW,\r\n\t\t\t\t\tshow: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Серия не найдена!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowUserInfo(id) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, true);\r\n\t\t\tshowRequests.getShowUserInfo(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\t\tif (result != null) {\r\n\t\t\t\t\tlet newResult = { ...result.user_info, friends_info: result.friends_info };\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_USER_INFO,\r\n\t\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t\t}\r\n\t\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, false);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function requestShowSeasonUserInfo(showID, seasonID) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, true);\r\n\t\t\tshowRequests.getShowSeasonUserInfo(localStorage.getItem(\"token\"), showID, seasonID).then((result) => {\r\n\t\t\t\tif (result != null) {\r\n\t\t\t\t\tlet newResult = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_USER_INFO,\r\n\t\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t\t}\r\n\t\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, false);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function requestShowSeasonsUserInfo(showID, seasonID) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\t\tseasonNumber: seasonID,\r\n\t\t\t\tisLoading: true,\r\n\t\t\t});\r\n\t\t\tshowRequests.getShowSeasonUserInfo(localStorage.getItem(\"token\"), showID, seasonID).then((result) => {\r\n\t\t\t\tif (result != null) {\r\n\t\t\t\t\tlet newResult = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_SEASONS_USER_INFO,\r\n\t\t\t\t\t\tseasonNumber: seasonID,\r\n\t\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttoast.error(\"Ошибка загрузки сезона!\");\r\n\t\t\t\t}\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\t\t\tseasonNumber: seasonID,\r\n\t\t\t\t\tisLoading: false,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function requestShowEpisodeUserInfo(showID, seasonID, episodeID) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, true);\r\n\t\t\tshowRequests.getShowEpisodeUserInfo(localStorage.getItem(\"token\"), showID, seasonID, episodeID).then((result) => {\r\n\t\t\t\tif (result != null) {\r\n\t\t\t\t\tlet newResult = { ...result.user_info, user_watched_show: result.user_watched_show, friends_info: result.friends_info };\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_USER_INFO,\r\n\t\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t\t}\r\n\t\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, false);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setGameStatus(user_info) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tgameRequests.setGameStatus(localStorage.getItem(\"token\"), selectors.getContentGame(getState()).rawg.slug, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_GAME_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function requestUserPageContent(username) {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch(checkAuthorization());\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_CONTENT, true);\r\n\t\tsetError(dispatch, actionTypes.USER_PAGE_ERROR, false);\r\n\t\tuserRequests.getUserInfo(localStorage.getItem(\"token\"), username).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_CONTENT,\r\n\t\t\t\t\tcontent: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Профиль не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.USER_PAGE_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_CONTENT, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestUserPageLogs(userID, page, resultsOnPage) {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch(checkAuthorization());\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_LOGS, true);\r\n\t\tuserRequests.getUserLog(localStorage.getItem(\"token\"), userID, page, resultsOnPage).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_LOGs,\r\n\t\t\t\t\tlogs: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_LOGS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestUserPageFriendsLogs(userID, page, resultsOnPage) {\r\n\treturn async (dispatch) => {\r\n\t\tawait dispatch(checkAuthorization());\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS, true);\r\n\t\tuserRequests.getUserFriendsLog(localStorage.getItem(\"token\"), userID, page, resultsOnPage).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_FRIENDS_LOGS,\r\n\t\t\t\t\tlogs: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки активности друзей!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestUserCalendar() {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_CALENDAR, true);\r\n\t\t\tuserRequests.getUserCalendar(localStorage.getItem(\"token\")).then((result) => {\r\n\t\t\t\tif (result != null) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: actionTypes.SET_USER_CALENDAR,\r\n\t\t\t\t\t\tdata: result,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttoast.error(\"Ошибка загрузки календаря!\");\r\n\t\t\t\t}\r\n\t\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_CALENDAR, false);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function requestUserSettings() {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_SETTINGS, true);\r\n\t\t\tuserRequests.getUserSettings(localStorage.getItem(\"token\")).then((result) => {\r\n\t\t\t\tif (result != null) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: actionTypes.SET_USER_SETTINGS,\r\n\t\t\t\t\t\tdata: result,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttoast.error(\"Ошибка загрузки настроек!\");\r\n\t\t\t\t}\r\n\t\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_SETTINGS, false);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function searchGames(query, page, gamesCount) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_GAMES, true);\r\n\t\tgameRequests.searchGames(query, page, gamesCount).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_GAMES,\r\n\t\t\t\t\tgames: result,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_GAMES, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function searchMovies(query, page) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_MOVIES, true);\r\n\t\tmovieRequests.searchMovies(query, page).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска фильмов\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_MOVIES,\r\n\t\t\t\t\tmovies: result.results,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_MOVIES, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function searchShows(query, page) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_SHOWS, true);\r\n\t\tshowRequests.searchShows(query, page).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска сериалов\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_SHOWS,\r\n\t\t\t\t\tshows: result.results,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_SHOWS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function setMovieStatus(user_info) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tmovieRequests.setMovieStatus(localStorage.getItem(\"token\"), selectors.getContentMovie(getState()).tmdb.id, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_MOVIE_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setShowStatus(user_info) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tshowRequests.setShowStatus(localStorage.getItem(\"token\"), selectors.getContentShow(getState()).tmdb.id, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_SHOW_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setShowSeasonStatus(user_info, showID, seasonNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tshowRequests.setShowSeasonStatus(localStorage.getItem(\"token\"), showID, seasonNumber, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_SHOW_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setShowEpisodesStatus(episodesList, showID, needUpdate = false) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tshowRequests.setShowEpisodesStatus(localStorage.getItem(\"token\"), showID, episodesList).then((result) => {\r\n\t\t\t\tif ((result.status !== 204) & (result.status !== 200) & (result.status !== 201)) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (needUpdate) {\r\n\t\t\t\t\t\tlet seasons = [];\r\n\t\t\t\t\t\tfor (let episode in episodesList.episodes) if (seasons.indexOf(episodesList.episodes[episode].season_number) === -1) seasons.push(episodesList.episodes[episode].season_number);\r\n\r\n\t\t\t\t\t\tfor (let season in seasons) dispatch(requestShowSeasonsUserInfo(showID, seasons[season]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function searchUsers(query) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_USERS, true);\r\n\t\tuserRequests.searchUsers(query).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_USERS,\r\n\t\t\t\t\tusers: result,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_USERS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function setUserStatus(is_following, userID) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tuserRequests.setUserStatus(localStorage.getItem(\"token\"), is_following, userID).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_FOLLOWING,\r\n\t\t\t\t\t\tis_following: result.is_following,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function resetPassword(email) {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.RESET_PASSWORD_ERROR,\r\n\t\t\terror: false,\r\n\t\t});\r\n\t\tauth.resetPassword(email).then((result) => {\r\n\t\t\tif (result.status !== 200) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.RESET_PASSWORD_ERROR,\r\n\t\t\t\t\terror: result.data.error,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.RESET_PASSWORD_ERROR,\r\n\t\t\t\t\terror: \"ok\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function confirmPassword(token, password) {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.CONFIRM_PASSWORD_ERROR,\r\n\t\t\terror: false,\r\n\t\t});\r\n\t\tauth.confirmPassword(token, password).then((result) => {\r\n\t\t\tif (result.status !== 200) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.CONFIRM_PASSWORD_ERROR,\r\n\t\t\t\t\terror: result.data.error ? result.data.error : \"Неизвестная ошибка\",\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.CONFIRM_PASSWORD_ERROR,\r\n\t\t\t\t\terror: \"ok\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function patchUserSettings(settings) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_SETTINGS, true);\r\n\t\t\tuserRequests.patchUserSettings(localStorage.getItem(\"token\"), settings).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка сохренения настроек\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttoast.success(\"Настройки сохранены!\");\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_MOVIE_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_SETTINGS, false);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setUser(user) {\r\n\treturn { type: actionTypes.SET_USER, user: user };\r\n}\r\n\r\nexport function openLoginForm() {\r\n\treturn { type: actionTypes.SET_LOGINFORM, isOpen: true };\r\n}\r\n\r\nexport function closeLoginForm() {\r\n\treturn { type: actionTypes.SET_LOGINFORM, isOpen: false };\r\n}\r\n\r\nexport function openRegistrateForm() {\r\n\treturn { type: actionTypes.SET_REGISTRATEFORM, isOpen: true };\r\n}\r\n\r\nexport function closeRegistrateForm() {\r\n\treturn { type: actionTypes.SET_REGISTRATEFORM, isOpen: false };\r\n}\r\n\r\nexport function openResetPasswordForm() {\r\n\treturn { type: actionTypes.SET_RESET_PASSWORD_FORM, isOpen: true };\r\n}\r\n\r\nexport function closeResetPasswordForm() {\r\n\treturn { type: actionTypes.SET_RESET_PASSWORD_FORM, isOpen: false };\r\n}\r\n\r\nfunction setLoading(dispatch, type, isLoading) {\r\n\tdispatch({\r\n\t\ttype: type,\r\n\t\tisLoading: isLoading,\r\n\t});\r\n}\r\n\r\nfunction setError(dispatch, type, isError) {\r\n\tdispatch({\r\n\t\ttype: type,\r\n\t\terror: isError,\r\n\t});\r\n}\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nfunction StatusButtonGroup({ statuses, activeColor, onChangeStatus, userStatus }) {\r\n\treturn (\r\n\t\t<div className='contentStatuses'>\r\n\t\t\t{statuses.map((status) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={\"contentStatus\"}\r\n\t\t\t\t\tkey={status}\r\n\t\t\t\t\tstyle={{ backgroundColor: userStatus === status ? activeColor : \"#000000\" }}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonChangeStatus(status);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{status}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default StatusButtonGroup;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction FriendsActivityRow({ info }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className='fActivityBlock'>\r\n\t\t\t<h5 className='fActivityUser'>\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={window.location.origin + \"/user/\" + info.user.id}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\thistory.push(\"/user/\" + info.user.id);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{info.user.username}\r\n\t\t\t\t</a>\r\n\t\t\t</h5>\r\n\t\t\t<div className='fActivityInfo'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t\tinitialRating={info.score}\r\n\t\t\t\t\tclassName='fActivityInfoText'\r\n\t\t\t\t\treadonly={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<p className='fActivityInfoText'>Статус: {info.status} </p>\r\n\t\t\t\t<p className='fActivityInfoText' hidden={!info.spent_time}>\r\n\t\t\t\t\tВремя проходения: {info.spent_time} {intToHours(info.spent_time)}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='fActivityInfoText' hidden={info.review === \"\"}>\r\n\t\t\t\t\tОтзыв: {info.review}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default FriendsActivityRow;\r\n","import React from \"react\";\r\nimport FriendsActivityRow from \"./FriendsActivityRow\";\r\n\r\nfunction FriendsActivity({ info }) {\r\n\treturn <div className='friendsBlock'>{typeof info !== \"undefined\" ? info?.map((friendInfo) => <FriendsActivityRow info={friendInfo} key={friendInfo.user.id} />) : \"\"}</div>;\r\n}\r\n\r\nexport default FriendsActivity;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction TimeToBeat({ hltbInfo }) {\r\n\treturn (\r\n\t\t<div hidden={(hltbInfo.gameplay_main < 0) & (hltbInfo.gameplay_main_extra < 0) & (hltbInfo.gameplay_completionist < 0)}>\r\n\t\t\t<p style={{ display: \"inline\" }}>Время прохождения: </p>\r\n\t\t\t<div hidden={hltbInfo.gameplay_main < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='light-green-text' title={\"Главный сюжет\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo.gameplay_main} {hltbInfo.gameplay_main_unit}\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t</div>{\" \"}\r\n\t\t\t<p style={{ display: \"inline\" }}> </p>\r\n\t\t\t<div hidden={hltbInfo.gameplay_main_extra < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='yellow-text' title={\"Главный сюжет + побочные задания\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo.gameplay_main_extra} {hltbInfo.gameplay_main_extra_unit}\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t</div>{\" \"}\r\n\t\t\t<p style={{ display: \"inline\" }}> </p>\r\n\t\t\t<div hidden={hltbInfo.gameplay_completionist < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='red-text' title={\"Полное прохождение\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo.gameplay_completionist} {hltbInfo.gameplay_completionist_unit}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TimeToBeat;\r\n","import React from \"react\";\r\n\r\nfunction ScoreBlock({ score, text, className }) {\r\n\tfunction getColor(score) {\r\n\t\tswitch (true) {\r\n\t\t\tcase score >= 80:\r\n\t\t\t\treturn \"metacriticGreen\";\r\n\t\t\tcase score >= 60 && score < 80:\r\n\t\t\t\treturn \"metacriticYellow\";\r\n\t\t\tcase score < 60:\r\n\t\t\t\treturn \"metacriticRed\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"metacriticGreen\";\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div hidden={!score} className={className}>\r\n\t\t\t<div className={\"metacritic \" + getColor(score)}>\r\n\t\t\t\t<p>{score}</p>\r\n\t\t\t</div>\r\n\t\t\t<p className='metacriticText'>{text}</p>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ScoreBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport TimeToBeat from \"./TimeToBeat\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction GamePage({ requestGame, openLoginForm, setGameStatus, requestGameUserInfo, loggedIn, game, gameIsLoading, gameUserInfo, gameUserInfoIsLoading }) {\r\n\tlet { id } = useParams();\r\n\tconst [genres, setGenres] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [spentTime, setSpentTime] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не играл\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [developers, setDevelopers] = useState(\"\");\r\n\tconst [platforms, setPlatforms] = useState(\"\");\r\n\tconst [date, setDate] = useState(\"\");\r\n\tconst [hltbInfo, setHtlbInfo] = useState({ gameplay_main_extra: -1, gameplay_main: -1, gameplay_comletionist: -1 });\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetClearUI();\r\n\t\t\trequestGame(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestGame]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestGameUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, loggedIn]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (game.rawg.genres) {\r\n\t\t\tlet newGenres = \"\";\r\n\t\t\tfor (let i = 0; i < game.rawg.genres.length; i++) {\r\n\t\t\t\tnewGenres += game.rawg.genres[i].name;\r\n\t\t\t\tif (i !== game.rawg.genres.length - 1) newGenres += \", \";\r\n\t\t\t}\r\n\t\t\tsetGenres(newGenres);\r\n\t\t}\r\n\r\n\t\tif (game.hltb) {\r\n\t\t\tsetHtlbInfo(game.hltb);\r\n\t\t} else if (game.rawg.playtime) {\r\n\t\t\tsetHtlbInfo({ gameplay_main_extra: game.rawg.playtime, gameplay_main: -1, gameplay_completionist: -1 });\r\n\t\t}\r\n\r\n\t\tif (game.rawg.developers) {\r\n\t\t\tlet newDevelopers = \"\";\r\n\t\t\tfor (let i = 0; i < game.rawg.developers.length; i++) {\r\n\t\t\t\tnewDevelopers += game.rawg.developers[i].name;\r\n\t\t\t\tif (i !== game.rawg.developers.length - 1) newDevelopers += \", \";\r\n\t\t\t}\r\n\t\t\tsetDevelopers(newDevelopers);\r\n\t\t}\r\n\r\n\t\tif (game.rawg.platforms) {\r\n\t\t\tlet newPlatforms = \"\";\r\n\t\t\tfor (let i = 0; i < game.rawg.platforms.length; i++) {\r\n\t\t\t\tnewPlatforms += game.rawg.platforms[i].platform.name;\r\n\t\t\t\tif (i !== game.rawg.platforms.length - 1) newPlatforms += \", \";\r\n\t\t\t}\r\n\t\t\tsetPlatforms(newPlatforms);\r\n\t\t}\r\n\r\n\t\tif (game.rawg.released) {\r\n\t\t\tlet mas = game.rawg.released.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = game.rawg.name;\r\n\t}, [game]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (gameUserInfo?.status) {\r\n\t\t\t\tsetReview(gameUserInfo.review);\r\n\t\t\t\tsetSpentTime(gameUserInfo.spent_time);\r\n\t\t\t\tsetUserStatus(gameUserInfo.status);\r\n\t\t\t\tsetUserRate(gameUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[gameUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetGenres(\"\");\r\n\t\tsetHtlbInfo({ gameplay_main_extra: -1, gameplay_main: -1, gameplay_completionist: -1 });\r\n\t\tsetDevelopers(\"\");\r\n\t\tsetPlatforms(\"\");\r\n\t\tsetDate(\"\");\r\n\t}\r\n\r\n\tfunction setClearUI() {\r\n\t\tsetReview(\"\");\r\n\t\tsetSpentTime(\"\");\r\n\t\tsetUserStatus(\"Не играл\");\r\n\t\tsetUserRate(0);\r\n\t}\r\n\r\n\tfunction getTimeToBeatDatalist() {\r\n\t\tif (game.hltb) {\r\n\t\t\treturn (\r\n\t\t\t\t<datalist id='timesList'>\r\n\t\t\t\t\t<option value={strToFloat(game.hltb?.gameplay_main_extra)} className='testil' />\r\n\t\t\t\t\t<option value={strToFloat(game.hltb?.gameplay_main)} />\r\n\t\t\t\t\t<option value={strToFloat(game.hltb?.gameplay_completionist)} />\r\n\t\t\t\t</datalist>\r\n\t\t\t);\r\n\t\t} else if (game.rawg.playtime) {\r\n\t\t\treturn (\r\n\t\t\t\t<datalist id='timesList'>\r\n\t\t\t\t\t<option value={strToFloat(game.rawg.playtime)} />\r\n\t\t\t\t</datalist>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction strToFloat(str) {\r\n\t\tif (str & (str !== -1))\r\n\t\t\tif (str.indexOf(\"½\") + 1) return parseFloat(str) + 0.5;\r\n\t\t\telse return parseFloat(str);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${game.rawg.background_image_additional ? game.rawg.background_image_additional : game.rawg.background_image})` }} />\r\n\t\t\t<LoadingOverlay active={gameIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='gameContentPage'>\r\n\t\t\t\t\t<div className='gameContentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock'>\r\n\t\t\t\t\t\t\t<img src={game.rawg.background_image} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='gameInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{game.rawg.name}</h1>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p>Разработчики: {developers}</p>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {date}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Платформы: {platforms}</p>\r\n\t\t\t\t\t\t\t\t<TimeToBeat hltbInfo={hltbInfo} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={gameUserInfoIsLoading && !gameIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: \"10px\" }}\r\n\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не играл\", \"Буду играть\", \"Играю\", \"Дропнул\", \"Прошел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не играл\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={game?.rawg?.metacritic} text='Metascore' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='gameContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{/* <video width='800' height='450' controls='controls' poster={game.rawg?.clip?.preview} src={game.rawg?.clip?.clip} type='video' /> */}\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: game.rawg.description }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='gameReviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={gameUserInfoIsLoading && !gameIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\tid='spentTimeInput'\r\n\t\t\t\t\t\t\t\t\tlabel='Время прохождения (часы)'\r\n\t\t\t\t\t\t\t\t\tlist='timesList'\r\n\t\t\t\t\t\t\t\t\tvalue={spentTime}\r\n\t\t\t\t\t\t\t\t\tonChange={(event) => setSpentTime(event.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{getTimeToBeatDatalist()}\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ review: document.getElementById(\"reviewInput\").value, spent_time: document.getElementById(\"spentTimeInput\").value });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='gameFriendsBlock' hidden={!loggedIn | (gameUserInfo?.friends_info?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={gameUserInfo?.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getGameRequestError(state),\r\n\tgame: selectors.getContentGame(state),\r\n\tgameIsLoading: selectors.getIsLoadingContentGame(state),\r\n\tgameUserInfo: selectors.getContentGameUserInfo(state),\r\n\tgameUserInfoIsLoading: selectors.getIsLoadingContentGameUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestGame: (id) => {\r\n\t\t\tdispatch(actions.requestGame(id));\r\n\t\t},\r\n\t\trequestGameUserInfo: (slug) => {\r\n\t\t\tdispatch(actions.requestGameUserInfo(slug));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tsetGameStatus: (status) => {\r\n\t\t\tdispatch(actions.setGameStatus(status));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GamePage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction MoviePage({ requestMovie, movie, movieIsLoading, setMovieStatus, requestMovieUserInfo, movieUserInfo, movieUserInfoIsLoading, loggedIn, openLoginForm }) {\r\n\tlet { id } = useParams();\r\n\tconst [genres, setGenres] = useState(\"\");\r\n\tconst [companies, setCompanies] = useState(\"\");\r\n\tconst [cast, setCast] = useState(\"\");\r\n\tconst [director, setDirector] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestMovie(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestMovie]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestMovieUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (movie.tmdb.genres) {\r\n\t\t\tlet newGenres = \"\";\r\n\t\t\tfor (let i = 0; i < movie.tmdb.genres.length; i++) {\r\n\t\t\t\tnewGenres += movie.tmdb.genres[i].name;\r\n\t\t\t\tif (i !== movie.tmdb.genres.length - 1) newGenres += \", \";\r\n\t\t\t}\r\n\t\t\tsetGenres(newGenres);\r\n\t\t}\r\n\r\n\t\tif (movie.tmdb.production_companies) {\r\n\t\t\tlet newCompanies = \"\";\r\n\t\t\tfor (let i = 0; i < movie.tmdb.production_companies.length; i++) {\r\n\t\t\t\tnewCompanies += movie.tmdb.production_companies[i].name;\r\n\t\t\t\tif (i !== movie.tmdb.production_companies.length - 1) newCompanies += \", \";\r\n\t\t\t}\r\n\t\t\tsetCompanies(newCompanies);\r\n\t\t}\r\n\r\n\t\tif (movie.tmdb.cast) {\r\n\t\t\tlet newCast = \"\";\r\n\t\t\tlet length = movie.tmdb.cast.length > 5 ? 5 : movie.tmdb.cast.length;\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tnewCast += movie.tmdb.cast[i].name;\r\n\t\t\t\tif (i !== length - 1) newCast += \", \";\r\n\t\t\t}\r\n\t\t\tsetCast(newCast);\r\n\t\t}\r\n\r\n\t\tif (movie.tmdb.crew) {\r\n\t\t\tlet newDirector = \"\";\r\n\t\t\tfor (let i = 0; i < movie.tmdb.crew.length; i++) {\r\n\t\t\t\tif (movie.tmdb.crew[i].job === \"Director\") {\r\n\t\t\t\t\tnewDirector = movie.tmdb.crew[i].name;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetDirector(newDirector);\r\n\t\t}\r\n\r\n\t\tdocument.title = movie.tmdb.title;\r\n\t}, [movie]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (movieUserInfo?.status) {\r\n\t\t\t\tsetReview(movieUserInfo.review);\r\n\t\t\t\tsetUserStatus(movieUserInfo.status);\r\n\t\t\t\tsetUserRate(movieUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[movieUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetDirector(\"\");\r\n\t\tsetCast(\"\");\r\n\t\tsetCompanies(\"\");\r\n\t\tsetGenres(\"\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + movie.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={movieIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='movieContentPage'>\r\n\t\t\t\t\t<div className='movieContentHeader'>\r\n\t\t\t\t\t\t<div className='moviePosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + movie.tmdb.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{movie.tmdb.title}</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{movie.tmdb.original_title}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {movie.tmdb.release_date}</p>\r\n\t\t\t\t\t\t\t\t<p>Продолжительность (мин): {movie.tmdb.runtime}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Компания: {companies}</p>\r\n\t\t\t\t\t\t\t\t<p>Слоган: {movie.tmdb.tagline}</p>\r\n\t\t\t\t\t\t\t\t<p>В ролях: {cast}</p>\r\n\t\t\t\t\t\t\t\t<p>Режиссер: {director}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={movieUserInfoIsLoading & !movieIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={movie.tmdb.vote_average * 10} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='movieContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: movie.tmdb.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieReviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={movieUserInfoIsLoading & !movieIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ review: document.getElementById(\"reviewInput\").value });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieFriendsBlock' hidden={!loggedIn | (movieUserInfo?.friends_info?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={movieUserInfo?.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getMovieRequestError(state),\r\n\tmovie: selectors.getContentMovie(state),\r\n\tmovieIsLoading: selectors.getIsLoadingContentMovie(state),\r\n\tmovieUserInfo: selectors.getContentMovieUserInfo(state),\r\n\tmovieUserInfoIsLoading: selectors.getIsLoadingContentMovieUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestMovie: (id) => {\r\n\t\t\tdispatch(actions.requestMovie(id));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tsetMovieStatus: (status) => {\r\n\t\t\tdispatch(actions.setMovieStatus(status));\r\n\t\t},\r\n\t\trequestMovieUserInfo: (id) => {\r\n\t\t\tdispatch(actions.requestMovieUserInfo(id));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MoviePage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./style.css\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction DetailedEpisodeRow({ episode, showID, setShowEpisodeUserStatus, loggedIn, userInfo, onChangeStatus, checkAll, userWatchedShow }) {\r\n\tlet history = useHistory();\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [isChecked, setIsChecked] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUserRate(userInfo?.score);\r\n\t\tsetIsChecked(userInfo?.score > -1);\r\n\t}, [userInfo]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (checkAll === -1) {\r\n\t\t\t\tsetIsChecked(false);\r\n\t\t\t\tonChangeStatus({\r\n\t\t\t\t\taddEpisode: userRate > -1,\r\n\t\t\t\t\tepisode: {\r\n\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\tscore: -1,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t} else if (checkAll === 1) {\r\n\t\t\t\tsetIsChecked(true);\r\n\t\t\t\tonChangeStatus({\r\n\t\t\t\t\taddEpisode: !(userRate > -1),\r\n\t\t\t\t\tepisode: {\r\n\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\tscore: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[checkAll]\r\n\t);\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleDateString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='episodeRow detailRow'>\r\n\t\t\t<div className='episodeRowCheckDate'>\r\n\t\t\t\t<div className='episodeRowCheck' hidden={!loggedIn || typeof onChangeStatus === \"undefined\" || !userWatchedShow}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\tchecked={isChecked}\r\n\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\tsetIsChecked(res.target.checked);\r\n\t\t\t\t\t\t\tonChangeStatus({\r\n\t\t\t\t\t\t\t\taddEpisode: res.target.checked === !(userRate > -1),\r\n\t\t\t\t\t\t\t\tepisode: {\r\n\t\t\t\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\t\t\t\tscore: res.target.checked ? 0 : -1,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className='episodeRowDate'>{parseDate(episode.air_date)}</p>\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='episodeRowRate'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstart={-1}\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' />))}\r\n\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' title={n} />))}\r\n\t\t\t\t\treadonly={!loggedIn}\r\n\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\tsetIsChecked(score > -1);\r\n\t\t\t\t\t\t/*if (typeof onChangeStatus!=='undefined')\r\n                                onChangeStatus({\r\n                                    addEpisode: (score>-1) !== (userRate > -1),\r\n                                    episode: {\r\n                                        season_number: episode.season_number,\r\n                                        episode_number: episode.episode_number,\r\n                                        score: (score>-1)?0:-1\r\n                                    } \r\n                                });*/\r\n\t\t\t\t\t\tsetShowEpisodeUserStatus(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tepisodes: [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\t\t\t\t\tscore: score,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tshowID\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<a\r\n\t\t\t\tclassName='episodeRowName episodeLink detailRow'\r\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={episode.name}>\r\n\t\t\t\tСерия {episode.episode_number} - {episode.name}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailedEpisodeRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport DetailedEpisodeRow from \"./DetailedEpisodeRow\";\r\nimport Rating from \"react-rating\";\r\n\r\nfunction SeasonBlock({\r\n\tshowID,\r\n\tseasonNumber,\r\n\tloggedIn,\r\n\topenLoginForm,\r\n\tshowSeason,\r\n\tshowSeasonIsLoading,\r\n\tshowUserInfo,\r\n\trequestShowSeason,\r\n\trequestShowSeasonUserInfo,\r\n\tsetShowEpisodeUserStatus,\r\n\tonChangeStatus,\r\n\tsetShowSeasonUserStatus,\r\n\tuserWatchedShow,\r\n}) {\r\n\tlet history = useHistory();\r\n\tconst [isChecked, setIsChecked] = useState(0);\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetIsChecked(0);\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShowSeason(showID, seasonNumber);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showID, seasonNumber, requestShowSeason]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetIsChecked(0);\r\n\t\t\tsetUserRate(0);\r\n\t\t\tif (loggedIn) requestShowSeasonUserInfo(showID, seasonNumber);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, showID, seasonNumber]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.score) {\r\n\t\t\t\tsetUserRate(showUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction getEpisodeByNumber(episodes, number) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].episode_number === number) return episodes[episode];\r\n\t}\r\n\r\n\treturn (\r\n\t\t<LoadingOverlay active={showSeasonIsLoading} spinner text='Загрузка...'>\r\n\t\t\t<div key={showSeason?.tmdb?.id} className='seasonBlock'>\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='seasonBlockName'>\r\n\t\t\t\t\t<h5> {showSeason?.tmdb?.name} </h5>\r\n\t\t\t\t</a>\r\n\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='seasonBlockName'>\r\n\t\t\t\t\t<Rating\r\n\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\tsetShowSeasonUserStatus({ score: score }, showID, seasonNumber);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\t\t\t\t<details open={true} className='episodeRows'>\r\n\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t<div style={{ marginLeft: \"5px\" }} hidden={!loggedIn || !userWatchedShow}>\r\n\t\t\t\t\t\tВыбрать все&nbsp;\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\tchecked={isChecked > 0}\r\n\t\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{showSeason?.tmdb?.episodes\r\n\t\t\t\t\t\t\t?.map((episode, counter) => (\r\n\t\t\t\t\t\t\t\t<li className='episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t<DetailedEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\tshowID={showID}\r\n\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByNumber(showUserInfo?.episodes, episode?.episode_number)}\r\n\t\t\t\t\t\t\t\t\t\tsetShowEpisodeUserStatus={setShowEpisodeUserStatus}\r\n\t\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => onChangeStatus(status)}\r\n\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\r\n\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t.reverse()}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</details>\r\n\t\t\t</div>\r\n\t\t</LoadingOverlay>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tshowSeason: selectors.getContentShowSeasons(state, ownProps.seasonNumber),\r\n\tshowSeasonIsLoading: selectors.getIsLoadingContentShowSeasons(state, ownProps.seasonNumber),\r\n\tshowUserInfo: selectors.getContentShowSeasonsUserInfo(state, ownProps.seasonNumber),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShowSeason: (showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.requestShowSeasons(showID, seasonNumber));\r\n\t\t},\r\n\t\trequestShowSeasonUserInfo: (showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.requestShowSeasonsUserInfo(showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowSeasonUserStatus: (status, showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.setShowSeasonStatus(status, showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SeasonBlock);\r\n","import React, { useState } from \"react\";\r\nimport \"./style.css\";\r\nimport SeasonBlock from \"./SeasonBlock\";\r\n\r\nfunction SeasonsBlock({ showID, seasons, setShowEpisodeUserStatus, userWatchedShow }) {\r\n\tconst [needHeader, setNeedHeader] = useState(false);\r\n\tconst [changedEpisodes, setChangedEpisodes] = useState([]);\r\n\r\n\tfunction updateEpisodes(episode) {\r\n\t\tlet newChangedEpisodes = changedEpisodes;\r\n\t\tif (episode.addEpisode) newChangedEpisodes.push(episode.episode);\r\n\t\telse {\r\n\t\t\tconst index = newChangedEpisodes.findIndex((i) => i.episode_number === episode.episode.episode_number && i.season_number === episode.episode.season_number);\r\n\t\t\tif (index > -1) newChangedEpisodes.splice(index, 1);\r\n\t\t}\r\n\t\tsetNeedHeader(newChangedEpisodes.length > 0);\r\n\t\tsetChangedEpisodes(newChangedEpisodes);\r\n\t\tconsole.log(newChangedEpisodes);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{seasons\r\n\t\t\t\t?.map((season) => (\r\n\t\t\t\t\t<SeasonBlock\r\n\t\t\t\t\t\tshowID={showID}\r\n\t\t\t\t\t\tseasonNumber={season.season_number}\r\n\t\t\t\t\t\tonChangeEpisodes={(episodes) => {\r\n\t\t\t\t\t\t\tconsole.log(episodes);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tkey={season.season_number}\r\n\t\t\t\t\t\tonChangeStatus={(status) => updateEpisodes(status)}\r\n\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))\r\n\t\t\t\t.reverse()}\r\n\t\t\t<div className='saveEpisodesHeader' hidden={!needHeader}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='saveEpisodesButton'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetShowEpisodeUserStatus({ episodes: changedEpisodes }, showID);\r\n\t\t\t\t\t\tsetNeedHeader(false);\r\n\t\t\t\t\t\tsetChangedEpisodes([]);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tСохранить\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SeasonsBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport SeasonsBlock from \"./SeasonsBlock\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ShowPage({ requestShow, show, showIsLoading, setShowUserStatus, setShowEpisodeUserStatus, requestShowUserInfo, showUserInfo, showUserInfoIsLoading, loggedIn, openLoginForm }) {\r\n\tlet { id } = useParams();\r\n\tconst [genres, setGenres] = useState(\"\");\r\n\tconst [companies, setCompanies] = useState(\"\");\r\n\tconst [showStatus, setShowStatus] = useState(\"\");\r\n\tconst [firstDate, setFirstDate] = useState(\"\");\r\n\tconst [lastDate, setLastDate] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShow(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestShow]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (show.tmdb.genres) {\r\n\t\t\tlet newGenres = \"\";\r\n\t\t\tfor (let i = 0; i < show.tmdb.genres.length; i++) {\r\n\t\t\t\tnewGenres += show.tmdb.genres[i].name;\r\n\t\t\t\tif (i !== show.tmdb.genres.length - 1) newGenres += \", \";\r\n\t\t\t}\r\n\t\t\tsetGenres(newGenres);\r\n\t\t}\r\n\r\n\t\tif (show.tmdb.production_companies) {\r\n\t\t\tlet newCompanies = \"\";\r\n\t\t\tfor (let i = 0; i < show.tmdb.production_companies.length; i++) {\r\n\t\t\t\tnewCompanies += show.tmdb.production_companies[i].name;\r\n\t\t\t\tif (i !== show.tmdb.production_companies.length - 1) newCompanies += \", \";\r\n\t\t\t}\r\n\t\t\tsetCompanies(newCompanies);\r\n\t\t}\r\n\r\n\t\tswitch (show.tmdb.status) {\r\n\t\t\tcase \"Ended\":\r\n\t\t\t\tsetShowStatus(\"Окончен\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Returning Series\":\r\n\t\t\t\tsetShowStatus(\"Продолжается\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Pilot\":\r\n\t\t\t\tsetShowStatus(\"Пилот\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Canceled\":\r\n\t\t\t\tsetShowStatus(\"Отменен\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"In Production\":\r\n\t\t\t\tsetShowStatus(\"В производстве\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Planned\":\r\n\t\t\t\tsetShowStatus(\"Запланирован\");\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tsetShowStatus(show.tmdb.status);\r\n\t\t}\r\n\r\n\t\tif (show.tmdb.first_air_date) {\r\n\t\t\tlet mas = show.tmdb.first_air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetFirstDate(newDate);\r\n\t\t}\r\n\r\n\t\tif (show.tmdb.last_air_date) {\r\n\t\t\tlet mas = show.tmdb.last_air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetLastDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = show.tmdb.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.status) {\r\n\t\t\t\tsetReview(showUserInfo.review);\r\n\t\t\t\tsetUserStatus(showUserInfo.status);\r\n\t\t\t\tsetUserRate(showUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetLastDate(\"\");\r\n\t\tsetFirstDate(\"\");\r\n\t\tsetShowStatus(\"\");\r\n\t\tsetCompanies(\"\");\r\n\t\tsetGenres(\"\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + show.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='showContentPage'>\r\n\t\t\t\t\t<div className='showContentHeader'>\r\n\t\t\t\t\t\t<div className='showPosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + show.tmdb.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{show.tmdb.name}</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{show.tmdb.original_name}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Компания: {companies}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={firstDate === \"\"}>Дата выхода первой серии: {firstDate}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={lastDate === \"\"}>Дата выхода последней серии: {lastDate}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={show.tmdb.episode_run_time ? false : true}>Продолжительность (мин): {show.tmdb.episode_run_time ? show.tmdb.episode_run_time[0] : 0}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество сезонов: {show.tmdb.number_of_seasons}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество серий: {show.tmdb.number_of_episodes}</p>\r\n\t\t\t\t\t\t\t\t<p>Статус: {showStatus}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading & !showIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Смотрю\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={show.tmdb.vote_average * 10} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='showContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.tmdb.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showSeasonsBody'>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Список серий</h3>\r\n\t\t\t\t\t\t\t<SeasonsBlock showID={show.tmdb.id} seasons={show.tmdb.seasons} setShowEpisodeUserStatus={setShowEpisodeUserStatus} userWatchedShow={userStatus !== \"Не смотрел\"} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showReviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading & !showIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ review: document.getElementById(\"reviewInput\").value });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showFriendsBlock' hidden={showUserInfo.friends_info.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={showUserInfo.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getShowRequestError(state),\r\n\tshow: selectors.getContentShow(state),\r\n\tshowIsLoading: selectors.getIsLoadingContentShow(state),\r\n\tshowUserInfo: selectors.getContentShowUserInfo(state),\r\n\tshowUserInfoIsLoading: selectors.getIsLoadingContentShowUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShow: (id) => {\r\n\t\t\tdispatch(actions.requestShow(id));\r\n\t\t},\r\n\t\tsetShowUserStatus: (status) => {\r\n\t\t\tdispatch(actions.setShowStatus(status));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\trequestShowUserInfo: (id) => {\r\n\t\t\tdispatch(actions.requestShowUserInfo(id));\r\n\t\t},\r\n\t\tsetShowEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID, true));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowPage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport DetailedEpisodeRow from \"./DetailedEpisodeRow\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ShowPage({\r\n\trequestShowSeason,\r\n\tshowSeason,\r\n\tshowSeasonIsLoading,\r\n\tsetShowUserStatus,\r\n\tsetShowEpisodeUserStatus,\r\n\trequestShowSeasonUserInfo,\r\n\tshowUserInfo,\r\n\tshowUserInfoIsLoading,\r\n\tloggedIn,\r\n\topenLoginForm,\r\n}) {\r\n\tlet history = useHistory();\r\n\tlet { show_id, number } = useParams();\r\n\tconst [date, setDate] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [chartData, setChartData] = useState([]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShowSeason(show_id, number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, number, requestShowSeason]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowSeasonUserInfo(show_id, number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (showSeason.tmdb.air_date) {\r\n\t\t\tlet mas = showSeason.tmdb.air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = showSeason.tmdb.show_name + \" - \" + showSeason.tmdb.name;\r\n\t}, [showSeason]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (showSeason.tmdb.episodes)\r\n\t\t\tif (showSeason.tmdb.episodes.length > 0) {\r\n\t\t\t\tlet newData = [];\r\n\t\t\t\tfor (let episode in showSeason.tmdb.episodes) {\r\n\t\t\t\t\tif (showSeason.tmdb.episodes[episode].vote_average > 0)\r\n\t\t\t\t\t\tnewData.push({ name: \"Ep \" + showSeason.tmdb.episodes[episode].episode_number, Оценка: showSeason.tmdb.episodes[episode].vote_average });\r\n\t\t\t\t}\r\n\t\t\t\tsetChartData(newData);\r\n\t\t\t}\r\n\t}, [showSeason]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.review) setReview(showUserInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (showUserInfo?.score) setUserRate(showUserInfo.score);\r\n\t\t\telse setUserRate(0);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetDate(\"\");\r\n\t}\r\n\r\n\tfunction getEpisodeByNumber(episodes, number) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].episode_number === number) return episodes[episode];\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + showSeason.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showSeasonIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='showContentPage'>\r\n\t\t\t\t\t<div className='showContentHeader'>\r\n\t\t\t\t\t\t<div className='showPosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + showSeason.tmdb.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{showSeason.tmdb.show_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + showSeason.tmdb.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{showSeason.tmdb.show_original_name + \" - Season \" + showSeason.tmdb.season_number}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={date === \"\"}>Дата выхода: {date}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество серий: {showSeason.tmdb.episodes ? showSeason.tmdb.episodes.length : 0}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !showUserInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading & !showSeasonIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ score: score }, show_id, showSeason.tmdb.season_number);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewSeasonInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !showUserInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ review: document.getElementById(\"reviewSeasonInput\").value }, show_id, showSeason.tmdb.season_number);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showContentBody'>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: showSeason.tmdb.overview }} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='showSeasonsBody'>\r\n\t\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Список серий</h3>\r\n\t\t\t\t\t\t\t\t<details open={false} className='episodeRows' style={{ marginBottom: \"15px\" }}>\r\n\t\t\t\t\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t{showSeason.tmdb.episodes\r\n\t\t\t\t\t\t\t\t\t\t\t? showSeason.tmdb.episodes.map((episode) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='episode' key={showSeason.tmdb.id + episode.episode_number}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DetailedEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowID={show_id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByNumber(showUserInfo.episodes, episode.episode_number)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowEpisodeUserStatus={setShowEpisodeUserStatus}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={showUserInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</details>\r\n\t\t\t\t\t\t\t\t<div hidden={!(chartData.length > 0)}>\r\n\t\t\t\t\t\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={200}>\r\n\t\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<XAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={chartData.length * 30}>\r\n\t\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }} layout='vertical'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<YAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} type='category' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<XAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} type='number' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='movieFriendsBlock' hidden={showUserInfo.friends_info.length < 1}>\r\n\t\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t\t<FriendsActivity info={showUserInfo.friends_info} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getShowRequestError(state),\r\n\tshowSeason: selectors.getContentShow(state),\r\n\tshowSeasonIsLoading: selectors.getIsLoadingContentShow(state),\r\n\tshowUserInfo: selectors.getContentShowUserInfo(state),\r\n\tshowUserInfoIsLoading: selectors.getIsLoadingContentShowUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShowSeason: (showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.requestShowSeason(showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowUserStatus: (status, showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.setShowSeasonStatus(status, showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\trequestShowSeasonUserInfo: (showID, seasonID) => {\r\n\t\t\tdispatch(actions.requestShowSeasonUserInfo(showID, seasonID));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowPage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction EpisodePage({ requestShowEpisode, showEpisode, showEpisodeIsLoading, setEpisodeUserStatus, requestShowEpisodeUserInfo, showUserInfo, showUserInfoIsLoading, loggedIn, openLoginForm }) {\r\n\tlet history = useHistory();\r\n\tlet { show_id, season_number, episode_number } = useParams();\r\n\tconst [date, setDate] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShowEpisode(show_id, season_number, episode_number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, season_number, episode_number, requestShowEpisode]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowEpisodeUserInfo(show_id, season_number, episode_number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, season_number, episode_number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (showEpisode.tmdb.air_date) {\r\n\t\t\tlet mas = showEpisode.tmdb.air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = showEpisode.tmdb.show_name + \" - \" + showEpisode.tmdb.name;\r\n\t}, [showEpisode]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.review) setReview(showUserInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (showUserInfo?.score) setUserRate(showUserInfo.score);\r\n\t\t\telse setUserRate(0);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetDate(\"\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + showEpisode.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showEpisodeIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='showContentPage'>\r\n\t\t\t\t\t<div className='showContentHeader'>\r\n\t\t\t\t\t\t<div className='showPosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + showEpisode.tmdb.still_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{showEpisode.tmdb.show_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + showEpisode.tmdb.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>\r\n\t\t\t\t\t\t\t\t{showEpisode.tmdb.show_original_name + \" - Season \" + showEpisode.tmdb.season_number + \" - Episode \" + showEpisode.tmdb.episode_number}{\" \"}\r\n\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={date === \"\"}>Дата выхода: {date}</p>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id + \"/season/\" + season_number}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id + \"/season/\" + season_number);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСезон: {showEpisode.tmdb.season_number}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !showUserInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading & !showEpisodeIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tstart={-1}\r\n\t\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat(\r\n\t\t\t\t\t\t\t\t\t\t\t[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />)\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat(\r\n\t\t\t\t\t\t\t\t\t\t\t[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />)\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus({ episodes: [{ season_number: season_number, episode_number: episode_number, score: score }] }, show_id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewSeasonInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !showUserInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisodes: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tseason_number: season_number,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode_number: episode_number,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treview: document.getElementById(\"reviewSeasonInput\").value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshow_id\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<ScoreBlock score={showEpisode.tmdb.vote_average * 10} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='showContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: showEpisode.tmdb.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieFriendsBlock' hidden={showUserInfo.friends_info.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={showUserInfo.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getShowRequestError(state),\r\n\tshowEpisode: selectors.getContentShow(state),\r\n\tshowEpisodeIsLoading: selectors.getIsLoadingContentShow(state),\r\n\tshowUserInfo: selectors.getContentShowUserInfo(state),\r\n\tshowUserInfoIsLoading: selectors.getIsLoadingContentShowUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShowEpisode: (showID, seasonNumber, episodeNumber) => {\r\n\t\t\tdispatch(actions.requestShowEpisode(showID, seasonNumber, episodeNumber));\r\n\t\t},\r\n\t\tsetEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\trequestShowEpisodeUserInfo: (showID, seasonID, episodeID) => {\r\n\t\t\tdispatch(actions.requestShowEpisodeUserInfo(showID, seasonID, episodeID));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EpisodePage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardGame({ game }) {\r\n\tlet history = useHistory();\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (game.released) {\r\n\t\t\tlet mas = game.released.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [game]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardGame'>\r\n\t\t\t<div className='searchCardGameImage' style={{ backgroundImage: `url(${game.background_image})` }}>\r\n\t\t\t\t{\" \"}\r\n\t\t\t</div>\r\n\t\t\t<div className='searchCardGameText'>\r\n\t\t\t\t<div className='searchCardGameName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.slug}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + game.slug);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={game.name}>\r\n\t\t\t\t\t\t<h4>{game.name}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n//onMouseDown={mouseDownHandler}\r\n\r\nexport default CardGame;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardMovie({ movie }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (movie.release_date) {\r\n\t\t\tlet mas = movie.release_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [movie]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardMovie'>\r\n\t\t\t<div className='searchCardMovieImage' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + movie.poster_path})` }}>\r\n\t\t\t\t{\" \"}\r\n\t\t\t</div>\r\n\t\t\t<div className='searchCardMovieText'>\r\n\t\t\t\t<div className='searchCardMovieName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={movie.title}>\r\n\t\t\t\t\t\t<h4>{movie.title}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CardMovie;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardShow({ show }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (show.first_air_date) {\r\n\t\t\tlet mas = show.first_air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [show]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardMovie'>\r\n\t\t\t<div className='searchCardMovieImage' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + show.poster_path})` }}>\r\n\t\t\t\t{\" \"}\r\n\t\t\t</div>\r\n\t\t\t<div className='searchCardMovieText'>\r\n\t\t\t\t<div className='searchCardMovieName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + show.id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={show.name}>\r\n\t\t\t\t\t\t<h4>{show.name}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CardShow;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardUser({ user }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<a\r\n\t\t\thref={window.location.origin + \"/user/\" + user.id}\r\n\t\t\tonClick={(e) => {\r\n\t\t\t\thistory.push(\"/user/\" + user.id);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}}>\r\n\t\t\t<div className='cardUser'>\r\n\t\t\t\t<div className='cardUserImage' style={{ backgroundImage: `url(${\"http://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }}>\r\n\t\t\t\t\t{\" \"}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='cardUserText'>\r\n\t\t\t\t\t<h4>{user.username}</h4>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</a>\r\n\t);\r\n}\r\n\r\nexport default CardUser;\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nfunction CategoriesTab({ categories, activeColor, onChangeCategory, activeCategory, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t{categories.map((category, counter) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={\"categoriesTab\"}\r\n\t\t\t\t\tkey={counter}\r\n\t\t\t\t\tstyle={{ color: activeCategory === category ? activeColor : \"rgb(207, 207, 207)\" }}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonChangeCategory(category);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{category}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t\t<hr style={{ backgroundColor: activeColor, height: 2.5, marginTop: \"0px\", marginBottom: \"10px\" }} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CategoriesTab;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { MDBRow, MDBCol, MDBContainer, MDBIcon, MDBFormInline } from \"mdbreact\";\r\nimport \"./style.css\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport CardGame from \"./CardGame\";\r\nimport CardMovie from \"./CardMovie\";\r\nimport CardShow from \"./CardShow\";\r\nimport CardUser from \"../Common/CardUser\";\r\nimport CategoriesTab from \"../Common/CategoriesTab\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction SearchPage({ loggedIn, gamesIsLoading, moviesIsLoading, showsIsLoading, usersIsLoading, searchGame, games, searchMovie, movies, searchShow, shows, searchUsers, users }) {\r\n\tlet history = useHistory();\r\n\tlet { query } = useParams();\r\n\tconst [queryText, setQueryText] = useState(\"\");\r\n\tconst [gamesCards, setGamesCards] = useState(\"\");\r\n\tconst [moviesCards, setMoviesCards] = useState(\"\");\r\n\tconst [showsCards, setShowsCards] = useState(\"\");\r\n\tconst [usersCards, setUsersCards] = useState(\"\");\r\n\tconst [gamesPage, setGamesPage] = useState(1);\r\n\tconst [moviesPage, setMoviesPage] = useState(1);\r\n\tconst [showsPage, setShowsPage] = useState(1);\r\n\r\n\tconst [activeCategory, setActiveCategory] = useState(\"Всё\");\r\n\r\n\tuseEffect(() => {\r\n\t\tsearchGame(query, 1, 6);\r\n\t\tsearchMovie(query, 1);\r\n\t\tsearchShow(query, 1);\r\n\t\tsearchUsers(query);\r\n\t\tsetQueryText(query);\r\n\t\tdocument.title = \"Поиск\";\r\n\t\tsetGamesPage(1);\r\n\t\tsetMoviesPage(1);\r\n\t\tsetShowsPage(1);\r\n\t}, [query, searchGame, searchMovie, searchUsers, searchShow]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetGamesCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{games.map((game) => (\r\n\t\t\t\t\t<CardGame game={game} key={game.id} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [games]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetMoviesCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{movies.map((movie) => (\r\n\t\t\t\t\t<CardMovie movie={movie} key={movie.id} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [movies]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetShowsCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{shows.map((show) => (\r\n\t\t\t\t\t<CardShow show={show} key={show.id} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [shows]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUsersCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{users.map((user) => (\r\n\t\t\t\t\t<CardUser user={user} key={user.username} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [users]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg searchBG' />\r\n\t\t\t<MDBContainer>\r\n\t\t\t\t<MDBRow>\r\n\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t<MDBCol className='searchPage'>\r\n\t\t\t\t\t\t<h1>Поиск</h1>\r\n\t\t\t\t\t\t<MDBFormInline\r\n\t\t\t\t\t\t\tclassName='md-form'\r\n\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput2\").value);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='search' />\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclassName='form-control form-control-sm ml-3 w-50'\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tplaceholder='Найти'\r\n\t\t\t\t\t\t\t\taria-label='Search'\r\n\t\t\t\t\t\t\t\tid='searchInput2'\r\n\t\t\t\t\t\t\t\tvalue={queryText}\r\n\t\t\t\t\t\t\t\tonChange={(event) => setQueryText(event.target.value)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</MDBFormInline>\r\n\r\n\t\t\t\t\t\t<h1>Результаты поиска</h1>\r\n\t\t\t\t\t\t<CategoriesTab\r\n\t\t\t\t\t\t\tcategories={[\"Всё\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Пользователи\"]}\r\n\t\t\t\t\t\t\tactiveColor='#7654de'\r\n\t\t\t\t\t\t\tactiveCategory={activeCategory}\r\n\t\t\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={gamesIsLoading} spinner text='Ищем игры...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Игры\"}>\r\n\t\t\t\t\t\t\t\t<h3>Игры</h3>\r\n\t\t\t\t\t\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={gamesPage === 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchGame(query, gamesPage - 1, 6);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGamesPage(gamesPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&lt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{gamesCards}\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={games.length < 6}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchGame(query, gamesPage + 1, 6);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGamesPage(gamesPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&gt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={moviesIsLoading} spinner text='Ищем фильмы...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Фильмы\"}>\r\n\t\t\t\t\t\t\t\t<h3>Фильмы</h3>\r\n\t\t\t\t\t\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={moviesPage === 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchMovie(query, moviesPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMoviesPage(moviesPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&lt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{moviesCards}\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={movies.length < 20}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchMovie(query, moviesPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMoviesPage(moviesPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&gt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={showsIsLoading} spinner text='Ищем сериалы...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Сериалы\"}>\r\n\t\t\t\t\t\t\t\t<h3>Сериалы</h3>\r\n\t\t\t\t\t\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={showsPage === 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchShow(query, showsPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowsPage(showsPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&lt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{showsCards}\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={shows.length < 20}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchShow(query, showsPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowsPage(showsPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&gt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={usersIsLoading} spinner text='Ищем пользователей...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Пользователи\"}>\r\n\t\t\t\t\t\t\t\t<h3>Пользователи</h3>\r\n\t\t\t\t\t\t\t\t{usersCards}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t</MDBRow>\r\n\t\t\t</MDBContainer>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tgamesIsLoading: selectors.getIsLoadingSearchGames(state),\r\n\tmoviesIsLoading: selectors.getIsLoadingSearchMovies(state),\r\n\tshowsIsLoading: selectors.getIsLoadingSearchShows(state),\r\n\tusersIsLoading: selectors.getIsLoadingSearchUsers(state),\r\n\tgames: selectors.getSearchContentGames(state),\r\n\tmovies: selectors.getSearchContentMovies(state),\r\n\tshows: selectors.getSearchContentShows(state),\r\n\tusers: selectors.getSearchContentUsers(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tsearchGame: (query, page, gamesCount) => {\r\n\t\t\tdispatch(actions.searchGames(query, page, gamesCount));\r\n\t\t},\r\n\t\tsearchMovie: (query, page) => {\r\n\t\t\tdispatch(actions.searchMovies(query, page));\r\n\t\t},\r\n\t\tsearchShow: (query, page) => {\r\n\t\t\tdispatch(actions.searchShows(query, page));\r\n\t\t},\r\n\t\tsearchUsers: (query) => {\r\n\t\t\tdispatch(actions.searchUsers(query));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchPage);\r\n","import React, { useState } from \"react\";\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/actions\";\r\nimport * as selectors from \"../../store/reducers\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nfunction LoginForm({ isOpen, closeForm, logIn, authError, openResetPasswordForm }) {\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={isOpen} toggle={closeForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='loginBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\tlogIn(login, password);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Войти</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!authError}>\r\n\t\t\t\t\t\t\t\t\tНеверный логин или пароль!\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tЛогин\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='form-control' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПароль\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='form-control' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='confirmButton'>\r\n\t\t\t\t\t\t\t\t\t\tВойти\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\tclassName='passwordResetLabel'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tcloseForm();\r\n\t\t\t\t\t\t\t\t\t\t\topenResetPasswordForm();\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tВосстановить пароль\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisOpen: selectors.getLoginForm(state),\r\n\tauthError: selectors.getAuthError(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tcloseForm: () => {\r\n\t\t\tdispatch(actions.closeLoginForm());\r\n\t\t},\r\n\t\tlogIn: (login, password) => {\r\n\t\t\tdispatch(actions.tryAuth(login, password));\r\n\t\t},\r\n\t\topenResetPasswordForm: () => {\r\n\t\t\tdispatch(actions.openResetPasswordForm());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\r\n","import React, { useState } from \"react\";\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/actions\";\r\nimport * as selectors from \"../../store/reducers\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nfunction RegistrationForm({ isOpen, closeForm, registrate, registrateArror, user }) {\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={isOpen} toggle={closeForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='registrationBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!registrateArror}>\r\n\t\t\t\t\t\t\t\t\tОшибка регистрации!\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success' hidden={user.email === \"\"}>\r\n\t\t\t\t\t\t\t\t\t{user.login}, добро пожаловать! Осталось только подтвердить вашу почту\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<h4>Регистрация</h4>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput'>Никнейм</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='form-control' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput'>Электронная почта</label>\r\n\t\t\t\t\t\t\t\t<input type='email' id='emailInput' className='form-control' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput'>Пароль</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='form-control' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordConfirmInput'>Подтверждение пароля</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\t\tid='passwordConfirmInput'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tstyle={passwordConfirm === password ? { outlineColor: \"green\" } : { outlineColor: \"red\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={passwordConfirm}\r\n\t\t\t\t\t\t\t\t\tonChange={(event) => setPasswordConfirm(event.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn\r\n\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\tclassName='confirmButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={password !== passwordConfirm || login.length < 1 || email.length < 1 || password.length < 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => registrate(login, email, password)}>\r\n\t\t\t\t\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisOpen: selectors.getRegistrateForm(state),\r\n\tregistrateArror: selectors.getRegistrateError(state),\r\n\tuser: selectors.getUser(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tcloseForm: () => {\r\n\t\t\tdispatch(actions.closeRegistrateForm());\r\n\t\t},\r\n\t\tregistrate: (login, email, password) => {\r\n\t\t\tdispatch(actions.registrationRequest(login, email, password));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RegistrationForm);\r\n","import React, { useState } from \"react\";\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/actions\";\r\nimport * as selectors from \"../../store/reducers\";\r\n\r\n/**\r\n * КОмпонент формы сброса пароля\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nfunction ResetPasswordForm({ isOpen, closeForm, resetPassword, resetPasswordError }) {\r\n\tconst [email, setEmail] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={isOpen} toggle={closeForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='loginBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\tresetPassword(email);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Сбросить пароль</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!resetPasswordError | (resetPasswordError === \"ok\")}>\r\n\t\t\t\t\t\t\t\t\t{resetPasswordError}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success' hidden={resetPasswordError !== \"ok\"}>\r\n\t\t\t\t\t\t\t\t\tНа вашу почту отправлено письмо\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПочта\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='emailInput' className='form-control' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='confirmButton'>\r\n\t\t\t\t\t\t\t\t\t\tСбросить\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisOpen: selectors.getResetPasswordForm(state),\r\n\tresetPasswordError: selectors.getResetPasswordError(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tcloseForm: () => {\r\n\t\t\tdispatch(actions.closeResetPasswordForm());\r\n\t\t},\r\n\t\tresetPassword: (email) => {\r\n\t\t\tdispatch(actions.resetPassword(email));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResetPasswordForm);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../store/reducers\";\r\nimport * as actions from \"../store/actions\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ConfirmPage({ confirmEmailRequest }) {\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet uid64 = params.get(\"uid64\");\r\n\tlet token = params.get(\"token\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tconfirmEmailRequest(uid64, token);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[]\r\n\t);\r\n\r\n\treturn <div className='bg'></div>;\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tconfirmEmailRequest: (uid64, token) => {\r\n\t\t\tdispatch(actions.confirmEmailRequest(uid64, token));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmPage);\r\n","import React, { useState } from \"react\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../store/actions\";\r\nimport * as selectors from \"../store/reducers\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ConfirmPasswordPage({ confirmPassword, confirmPasswordError }) {\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet token = params.get(\"token\");\r\n\r\n\treturn (\r\n\t\t<div className='bg'>\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconfirmPassword(token, password);\r\n\t\t\t\t}}\r\n\t\t\t\tclassName='confirmPasswordForm'>\r\n\t\t\t\t<p className='h4'>Обновить пароль</p>\r\n\t\t\t\t<p className='note note-danger' hidden={!confirmPasswordError | (confirmPasswordError === \"ok\")}>\r\n\t\t\t\t\t{confirmPasswordError}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='note note-success' hidden={confirmPasswordError !== \"ok\"}>\r\n\t\t\t\t\tПароль обновлен!\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<label htmlFor='passwordInput' className='confirmPasswordLabel'>\r\n\t\t\t\t\tНовый пароль\r\n\t\t\t\t</label>\r\n\t\t\t\t<br />\r\n\t\t\t\t<input type='password' id='passwordInput' className='confirmPasswordInput' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<label htmlFor='passwordConfurmInput' className='confirmPasswordLabel'>\r\n\t\t\t\t\tПодтверждение пароля\r\n\t\t\t\t</label>\r\n\t\t\t\t<br />\r\n\t\t\t\t<input type='password' id='passwordConfurmInput' className='confirmPasswordInput' value={passwordConfirm} onChange={(event) => setPasswordConfirm(event.target.value)} />\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<button type='submit' className='confirmPasswordButton' disabled={(password !== passwordConfirm) | (password.length < 1)}>\r\n\t\t\t\t\tОбновить\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tconfirmPasswordError: selectors.getConfirmPasswordError(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tconfirmPassword: (token, password) => {\r\n\t\t\tdispatch(actions.confirmPassword(token, password));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmPasswordPage);\r\n","export const COLORS = [\r\n\t\"rgb(43,206,72)\",\r\n\t\"rgb(240,163,255)\",\r\n\t\"rgb(0,117,220)\",\r\n\t\"rgb(153,63,0)\",\r\n\t\"rgb(76,0,92)\",\r\n\t\"rgb(225,225,225)\",\r\n\t\"rgb(0,92,49)\",\r\n\t\"rgb(255,204,153)\",\r\n\t\"rgb(128,128,128)\",\r\n\t\"rgb(148,255,181)\",\r\n\t\"rgb(143,124,0)\",\r\n\t\"rgb(157,204,0)\",\r\n\t\"rgb(194,0,136)\",\r\n\t\"rgb(0,51,128)\",\r\n\t\"rgb(255,164,5)\",\r\n\t\"rgb(255,168,187)\",\r\n\t\"rgb(66,102,0)\",\r\n\t\"rgb(255,0,16)\",\r\n\t\"rgb(94,241,242)\",\r\n\t\"rgb(0,153,143)\",\r\n\t\"rgb(224,255,102)\",\r\n\t\"rgb(116,10,255)\",\r\n\t\"rgb(153,0,0)\",\r\n\t\"rgb(255,255,128)\",\r\n\t\"rgb(255,255,0)\",\r\n\t\"rgb(255,80,)\",\r\n];\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction GameBlock({ games, stats }) {\r\n\tconst [gameChartData, setGameChartData] = useState([]);\r\n\tconst gameColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Время прохождения\",\r\n\t\t\tfield: \"spent_time\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t/*{\r\n\t\t\tlabel: \"Дата выхода\",\r\n\t\t\tfield: \"release_date\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},*/\r\n\t];\r\n\r\n\tconst [gameTableData, setGameTableData] = useState({\r\n\t\tcolumns: gameColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (games) {\r\n\t\t\t\tsetGameTableData({\r\n\t\t\t\t\tcolumns: gameColumns,\r\n\t\t\t\t\trows: games.map((game) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/game/\" + game.game.rawg_slug}>\r\n\t\t\t\t\t\t\t\t\t{game.game.rawg_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: game.game.rawg_name,\r\n\t\t\t\t\t\t\tstatus: game.status,\r\n\t\t\t\t\t\t\tscore: game.score,\r\n\t\t\t\t\t\t\treview: game.review,\r\n\t\t\t\t\t\t\tspent_time: parseFloat(game.spent_time),\r\n\t\t\t\t\t\t\t/*release_date: new Date(game.game.rawg_release_date).toISOString().substr(0, 10).replace(\"-\", \".\"),\r\n\t\t\t\t\t\t\tclickEvent: (e) => {\r\n                                    //window.open('/game/' + game.game.rawg_slug);\r\n                                    history.push('/game/' + game.game.rawg_slug);\r\n                                }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[games]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetGameChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetGameChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tИгр сыграно: {stats?.count}, часов наиграно: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={gameTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать игр на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tclassName='dataTable'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\t\t\t<div hidden={gameChartData.length < 1}>\r\n\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={gameChartData.length * 40} data={gameChartData} margin={{ top: 5, right: 0, left: 25, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{gameChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={Math.min(gameChartData.length * 100, document.body.clientWidth)} height={300} data={gameChartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{gameChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default GameBlock;\r\n","import React from \"react\";\r\n\r\nimport CardUser from \"../Common/CardUser\";\r\n\r\nfunction FriendBlock({ users }) {\r\n\treturn (\r\n\t\t<div className='friendsBlock'>\r\n\t\t\t{users.map((user) => (\r\n\t\t\t\t<CardUser user={user} key={user.id} />\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FriendBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction MovieBlock({ movies, stats }) {\r\n\tconst [movieChartData, setMovieChartData] = useState([]);\r\n\tconst movieColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t];\r\n\r\n\tconst [movieTableData, setMovieTableData] = useState({\r\n\t\tcolumns: movieColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (movies) {\r\n\t\t\t\tsetMovieTableData({\r\n\t\t\t\t\tcolumns: movieColumns,\r\n\t\t\t\t\trows: movies.map((movie) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/movie/\" + movie.movie.tmdb_id}>\r\n\t\t\t\t\t\t\t\t\t{movie.movie.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: movie.movie.tmdb_name,\r\n\t\t\t\t\t\t\tstatus: movie.status,\r\n\t\t\t\t\t\t\tscore: movie.score,\r\n\t\t\t\t\t\t\treview: movie.review,\r\n\t\t\t\t\t\t\t/*clickEvent: (e) => {\r\n                                //window.open('/game/' + game.game.rawg_slug);\r\n                                history.push('/movie/' + movie.movie.tmdb_id)\r\n                            }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[movies]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetMovieChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetMovieChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tФильмов посмотрено: {stats?.count}, часов просмотра: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={movieTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать фильмов на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\r\n\t\t\t<div hidden={movieChartData.length < 1}>\r\n\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={movieChartData.length * 40} data={movieChartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{movieChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={Math.min(movieChartData.length * 100, document.body.clientWidth)} height={300} data={movieChartData} margin={{ top: 5, right: 10, left: 10, bottom: 15 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{movieChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default MovieBlock;\r\n","import React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./style.css\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction LogRow({ log, showUsername }) {\r\n\tlet history = useHistory();\r\n\r\n\tuseEffect(() => {}, [log]);\r\n\r\n\tfunction translateActionType(action, actionResult) {\r\n\t\tswitch (action) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tswitch (actionResult) {\r\n\t\t\t\t\tcase \"0\":\r\n\t\t\t\t\t\treturn \"посмотрел(а)\";\r\n\t\t\t\t\tcase \"-1\":\r\n\t\t\t\t\t\treturn \"не смотрела(а)\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"оценил(а)\";\r\n\t\t\t\t}\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn \"изменил(а) статус\";\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn \"оставил(а) отзыв на\";\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn \"изменил(а) время прохождения\";\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\tif (actionResult > 0) return \"посмотрел(а) \" + actionResult + \" серий\";\r\n\t\t\t\telse return \"не смотрел(а) \" + actionResult * -1 + \" серий\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\tif (actionResult === \"True\") return \"подписан(а) на\";\r\n\t\t\t\telse return \"отписан(а) от\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn action;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction translateType(type, actionType) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"игру\";\r\n\t\t\t\telse return \"игры\";\r\n\t\t\tcase \"movie\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"фильм\";\r\n\t\t\t\telse return \"фильма\";\r\n\t\t\tcase \"show\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"сериал\";\r\n\t\t\t\telse return \"сериала\";\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn \"пользователя\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn type;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction nameToLink(name, type, id) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"movie\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"show\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t[s{id.season_number}e{id.episode_number}] серию\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/user/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/user/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tdefault:\r\n\t\t\t\treturn name;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction userToLink(username, userID) {\r\n\t\treturn (\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + \"/user/\" + userID}\r\n\t\t\t\tclassName='logLink'\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/user/\" + userID);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}>\r\n\t\t\t\t{username}\r\n\t\t\t</a>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction actionResultToStr(actionType, actionResult, target) {\r\n\t\tswitch (actionType) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tif ((target !== \"episode\") | (actionResult > 0))\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\tinitialRating={actionResult}\r\n\t\t\t\t\t\t\treadonly={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\telse return \"\";\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn actionResult + \" \" + intToHours(actionResult);\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn actionResult;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleTimeString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='logRow'>\r\n\t\t\t{parseDate(log.created)}&thinsp;\r\n\t\t\t{showUsername ? userToLink(log.user, log.user_id) : \"\"}&thinsp;\r\n\t\t\t{translateActionType(log.action_type, log.action_result)}&thinsp;\r\n\t\t\t{translateType(log.type, log.action_type)}&thinsp;\r\n\t\t\t{nameToLink(log.target, log.type, log.target_id)}\r\n\t\t\t{(log.type === \"user\") | (log.action_type === \"episodes\") | (log.action_result === \"0\") | (log.action_result === \"-1\") ? \"\" : \":\"}&thinsp;\r\n\t\t\t{actionResultToStr(log.action_type, log.action_result, log.type)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default LogRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport LogRow from \"./LogRow\";\r\n\r\nfunction UserLogBlock({ logs, showUsername, onChangePage }) {\r\n\tconst [logsByDay, setLogsByDay] = useState([]);\r\n\tconst [currentPage, setCurrentPage] = useState(1);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetLogsByDay(groupLogsByDay(logs.log));\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[logs]\r\n\t);\r\n\r\n\tfunction groupLogsByDay(logs) {\r\n\t\tlet newLogs = [];\r\n\r\n\t\tfor (let i in logs) {\r\n\t\t\tlet date = new Date(logs[i].created);\r\n\r\n\t\t\tif (newLogs.length === 0)\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t\telse if (date.getDay() === newLogs[newLogs.length - 1].date.getDay()) newLogs[newLogs.length - 1].logs.push(logs[i]);\r\n\t\t\telse\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn newLogs;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{logsByDay.map((dayLog) => (\r\n\t\t\t\t<div key={dayLog.logs[0].id} className='logDay'>\r\n\t\t\t\t\t<h5 className='logDate'>{dayLog.date.toLocaleDateString(\"ru-RU\")}</h5>\r\n\t\t\t\t\t<div className='logRows'>\r\n\t\t\t\t\t\t{dayLog.logs.map((log) => (\r\n\t\t\t\t\t\t\t<LogRow log={log} showUsername={showUsername} key={log.id + log.created} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t\t<button\r\n\t\t\t\tclassName='logPaginationButton'\r\n\t\t\t\tdisabled={!logs.has_next_page}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (logs.has_next_page) {\r\n\t\t\t\t\t\tonChangePage(currentPage + 1);\r\n\t\t\t\t\t\tsetCurrentPage(currentPage + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<MDBIcon icon='arrow-down' />\r\n\t\t\t</button>\r\n\r\n\t\t\t<button\r\n\t\t\t\tclassName='logPaginationButton'\r\n\t\t\t\tdisabled={currentPage === 1}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (currentPage > 1) {\r\n\t\t\t\t\t\tonChangePage(currentPage - 1);\r\n\t\t\t\t\t\tsetCurrentPage(currentPage - 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<MDBIcon icon='arrow-up' />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserLogBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction ShowBlock({ shows, stats }) {\r\n\tconst [showChartData, setShowChartData] = useState([]);\r\n\r\n\tconst showColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Часов просмотра\",\r\n\t\t\tfield: \"spentTime\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t];\r\n\r\n\tconst [showTableData, setShowTableData] = useState({\r\n\t\tcolumns: showColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (shows) {\r\n\t\t\t\tsetShowTableData({\r\n\t\t\t\t\tcolumns: showColumns,\r\n\t\t\t\t\trows: shows.map((show) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/show/\" + show.show.tmdb_id}>\r\n\t\t\t\t\t\t\t\t\t{show.show.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: show.show.tmdb_name,\r\n\t\t\t\t\t\t\tstatus: show.status,\r\n\t\t\t\t\t\t\tscore: show.score,\r\n\t\t\t\t\t\t\treview: show.review,\r\n\t\t\t\t\t\t\tspentTime: show.spent_time,\r\n\t\t\t\t\t\t\t/*clickEvent: (e) => {\r\n                                //window.open('/game/' + game.game.rawg_slug);\r\n                                history.push('/movie/' + movie.movie.tmdb_id)\r\n                            }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[shows]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetShowChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetShowChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tСерий сериалов посмотрено: {stats?.count}, часов просмотра: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={showTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать сериалов на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\t\t\t<div hidden={showChartData.length < 1}>\r\n\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={showChartData.length * 40} data={showChartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{showChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={Math.min(showChartData.length * 100, document.body.clientWidth)} height={300} data={showChartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{showChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ShowBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBRow, MDBCol, MDBContainer } from \"mdbreact\";\r\nimport { PieChart, Pie, Legend, Cell, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\nimport \"./style.css\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport GameBlock from \"./GameBlock\";\r\nimport FriendBlock from \"./FriendBlock\";\r\nimport MovieBlock from \"./MovieBlock\";\r\nimport UserLogBlock from \"./UserLogBlock\";\r\nimport CategoriesTab from \"../Common/CategoriesTab\";\r\nimport ShowBlock from \"./ShowBlock\";\r\n\r\nconst LOG_ROWS_COUNT = 20;\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction UserPage({\r\n\tloggedIn,\r\n\tuserInfo,\r\n\tuserIsLoading,\r\n\tgetUserInfo,\r\n\tcurrentUserInfo,\r\n\tsetUserStatus,\r\n\tgetUserLogs,\r\n\tuserLogs,\r\n\tuserLogsIsLoading,\r\n\tgetUserFriendsLogs,\r\n\tuserFriendsLogs,\r\n\tuserFriendsLogsIsLoading,\r\n}) {\r\n\tlet { userID } = useParams();\r\n\tconst [activeCategory, setActiveCategory] = useState(\"Профиль\");\r\n\tconst [lastActivity, setLastActivity] = useState(\"\");\r\n\tconst [chartData, setChartData] = useState([]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tgetUserInfo(userID);\r\n\t\t\tgetUserLogs(userID, 1, LOG_ROWS_COUNT);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userID, getUserInfo, getUserLogs]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) {\r\n\t\t\t\tgetUserFriendsLogs(userID, 1, LOG_ROWS_COUNT);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, userID]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tdocument.title = \"Профиль \" + userInfo.username;\r\n\t\tif (userInfo.stats.games) {\r\n\t\t\tlet newData = [];\r\n\t\t\tif (userInfo.stats.games.total_spent_time > 0) newData.push({ name: \"Часов в играх\", value: userInfo.stats.games.total_spent_time });\r\n\t\t\tif (userInfo.stats.movies.total_spent_time > 0) newData.push({ name: \"Часов в фильмах\", value: userInfo.stats.movies.total_spent_time });\r\n\t\t\tif (userInfo.stats.episodes.total_spent_time > 0) newData.push({ name: \"Часов в сериалах\", value: userInfo.stats.episodes.total_spent_time });\r\n\t\t\tsetChartData(newData);\r\n\t\t}\r\n\t\tif (userInfo.last_activity) {\r\n\t\t\tlet date = new Date(userInfo.last_activity);\r\n\t\t\tDate.now();\r\n\t\t\tsetLastActivity(date.toLocaleString());\r\n\t\t} else setLastActivity(\"\");\r\n\t}, [userInfo]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg searchBG' />\r\n\t\t\t<LoadingOverlay active={userIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t\t<MDBCol className='userPage'>\r\n\t\t\t\t\t\t\t<h1>Информация о пользователе {userInfo.username}</h1>\r\n\t\t\t\t\t\t\t<p>Последняя активность {lastActivity}</p>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\thidden={currentUserInfo.username === userInfo.username}\r\n\t\t\t\t\t\t\t\tclassName='addFriendButton'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetUserStatus({ is_following: userInfo.is_followed ? false : true }, userInfo.id);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{userInfo.is_followed ? \"Отписаться\" : \"Подписаться\"}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<CategoriesTab\r\n\t\t\t\t\t\t\t\tcategories={[\"Профиль\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Друзья\"]}\r\n\t\t\t\t\t\t\t\tactiveColor='#7654de'\r\n\t\t\t\t\t\t\t\tactiveCategory={activeCategory}\r\n\t\t\t\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Профиль\"}>\r\n\t\t\t\t\t\t\t\t<h4>Моя активность: </h4>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userLogsIsLoading && !userIsLoading} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<div hidden={chartData.length < 1}>\r\n\t\t\t\t\t\t\t\t\t\t<PieChart width={350} height={250} hidden={chartData.length < 1}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Pie dataKey='value' data={chartData} cx='50%' cy='50%' outerRadius={80} fill='#8884d8' labelLine={true} label minAngle={5}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t</Pie>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Legend verticalAlign='bottom' horizontalAlign='center' />\r\n\t\t\t\t\t\t\t\t\t\t</PieChart>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<UserLogBlock logs={userLogs} onChangePage={(pageNumber) => getUserLogs(userID, pageNumber, LOG_ROWS_COUNT)} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Игры\"}>\r\n\t\t\t\t\t\t\t\t<GameBlock games={userInfo.games} stats={userInfo.stats.games} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Фильмы\"}>\r\n\t\t\t\t\t\t\t\t<MovieBlock movies={userInfo.movies} stats={userInfo.stats.movies} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Сериалы\"}>\r\n\t\t\t\t\t\t\t\t<ShowBlock shows={userInfo.shows} stats={userInfo.stats.episodes} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Друзья\"}>\r\n\t\t\t\t\t\t\t\t<FriendBlock users={userInfo.followed_users ? userInfo.followed_users : []} />\r\n\t\t\t\t\t\t\t\t<h4>Активность друзей: </h4>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userFriendsLogsIsLoading && !userIsLoading} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<UserLogBlock logs={userFriendsLogs} onChangePage={(pageNumber) => getUserFriendsLogs(userID, pageNumber, LOG_ROWS_COUNT)} showUsername={true} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tuserIsLoading: selectors.getIsLoadingUserPageContent(state),\r\n\tuserInfo: selectors.getUserPageContent(state),\r\n\tuserLogs: selectors.getUserPageLogs(state),\r\n\tuserLogsIsLoading: selectors.getIsLoadingUserPageLogs(state),\r\n\tuserFriendsLogs: selectors.getUserPageFriendsLogs(state),\r\n\tuserFriendsLogsIsLoading: selectors.getIsLoadingUserPageFriendsLogs(state),\r\n\tcurrentUserInfo: selectors.getUser(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tgetUserInfo: (user_id) => {\r\n\t\t\tdispatch(actions.requestUserPageContent(user_id));\r\n\t\t},\r\n\t\tsetUserStatus: (is_following, userID) => {\r\n\t\t\tdispatch(actions.setUserStatus(is_following, userID));\r\n\t\t},\r\n\t\tgetUserLogs: (userID, page, resultsOnPage) => {\r\n\t\t\tdispatch(actions.requestUserPageLogs(userID, page, resultsOnPage));\r\n\t\t},\r\n\t\tgetUserFriendsLogs: (userID, page, resultsOnPage) => {\r\n\t\t\tdispatch(actions.requestUserPageFriendsLogs(userID, page, resultsOnPage));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserPage);\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport {\r\n\tMDBNavbar,\r\n\tMDBNavItem,\r\n\tMDBNavbarBrand,\r\n\tMDBNavbarNav,\r\n\tMDBNavLink,\r\n\tMDBIcon,\r\n\tMDBFormInline,\r\n\tMDBDropdown,\r\n\tMDBDropdownItem,\r\n\tMDBDropdownMenu,\r\n\tMDBDropdownToggle,\r\n\tMDBNavbarToggler,\r\n\tMDBCollapse,\r\n} from \"mdbreact\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../store/reducers\";\r\nimport * as actions from \"../store/actions\";\r\n\r\nfunction Navbar({ loggedIn, onLoginClick, onLogoutClick, onRegistrationClick, user }) {\r\n\tlet history = useHistory();\r\n\tconst [collapseID, setCollapseID] = useState(\"\");\r\n\r\n\tconst toggleCollapse = (newCollapseID) => () => {\r\n\t\tif (newCollapseID !== collapseID) setCollapseID(newCollapseID);\r\n\t\telse setCollapseID(\"\");\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MDBNavbar style={{ backgroundColor: \"#4527a0\" }} dark expand='md' fixed='top'>\r\n\t\t\t<MDBNavbarBrand\r\n\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\thistory.push(\"/\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}}>\r\n\t\t\t\t<strong className='white-text' style={{ cursor: \"pointer\" }}>\r\n\t\t\t\t\tInterests\r\n\t\t\t\t</strong>\r\n\t\t\t</MDBNavbarBrand>\r\n\t\t\t<MDBNavbarNav left></MDBNavbarNav>\r\n\r\n\t\t\t<MDBNavbarToggler onClick={toggleCollapse(\"navbarCollapse1\")} />\r\n\t\t\t<MDBCollapse id='navbarCollapse1' isOpen={collapseID} navbar>\r\n\t\t\t\t<MDBNavbarNav right>\r\n\t\t\t\t\t<MDBNavItem>\r\n\t\t\t\t\t\t<MDBFormInline\r\n\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput\").value);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<div className='md-form my-0'>\r\n\t\t\t\t\t\t\t\t<input className='form-control mr-sm-2' type='text' placeholder='Найти' aria-label='Найти' id='searchInput' />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</MDBFormInline>\r\n\t\t\t\t\t</MDBNavItem>\r\n\r\n\t\t\t\t\t<MDBNavItem className='font-weight-bold' hidden={loggedIn}>\r\n\t\t\t\t\t\t<MDBNavLink to='#' onClick={onLoginClick}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='sign-in-alt' /> Войти\r\n\t\t\t\t\t\t</MDBNavLink>\r\n\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t\t<MDBNavItem className='font-weight-bold' hidden={loggedIn}>\r\n\t\t\t\t\t\t<MDBNavLink to='#' onClick={onRegistrationClick}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='user-plus' /> Зарегистрироваться\r\n\t\t\t\t\t\t</MDBNavLink>\r\n\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t\t<MDBNavItem hidden={!loggedIn} className='font-weight-bold'>\r\n\t\t\t\t\t\t<MDBDropdown>\r\n\t\t\t\t\t\t\t<MDBDropdownToggle nav caret>\r\n\t\t\t\t\t\t\t\t<span className='mr-2'>{user.username}</span>\r\n\t\t\t\t\t\t\t</MDBDropdownToggle>\r\n\t\t\t\t\t\t\t<MDBDropdownMenu>\r\n\t\t\t\t\t\t\t\t<MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\thref={`/user/${user.id}`}\r\n\t\t\t\t\t\t\t\t\t\tclassName='navDropdownItem'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\thistory.push(`/user/${user.id}`);\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='user-circle' /> Профиль\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t<MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\thref={`/calendar`}\r\n\t\t\t\t\t\t\t\t\t\tclassName='navDropdownItem'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\thistory.push(`/calendar`);\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='calendar-day' /> Календарь\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t<MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\thref={`/settings`}\r\n\t\t\t\t\t\t\t\t\t\tclassName='navDropdownItem'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\thistory.push(`/settings`);\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='cog' /> Настройки\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t<MDBDropdownItem onClick={onLogoutClick}>\r\n\t\t\t\t\t\t\t\t\t<a className='navDropdownItem' href='/' onClick={(event) => event.preventDefault()}>\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='sign-out-alt' /> Выйти\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t</MDBDropdownMenu>\r\n\t\t\t\t\t\t</MDBDropdown>\r\n\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t</MDBNavbarNav>\r\n\t\t\t</MDBCollapse>\r\n\t\t</MDBNavbar>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tuser: selectors.getUser(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonLoginClick: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tonLogoutClick: () => {\r\n\t\t\tdispatch(actions.resetAuthorization());\r\n\t\t},\r\n\t\tonRegistrationClick: () => {\r\n\t\t\tdispatch(actions.openRegistrateForm());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar);\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction DayInfo({ day, date }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className='dayInfoBlock'>\r\n\t\t\t<h3 className='dayInfoDate'>\r\n\t\t\t\t{date ? date.toLocaleDateString(\"ru-RU\", { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", weekday: \"long\" }) : \"\"}\r\n\t\t\t</h3>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.games?.length > 0)}>\r\n\t\t\t\t<h3>Игры</h3>\r\n\t\t\t\t{day.games?.map((game) => (\r\n\t\t\t\t\t<div key={game.rawg_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\r\n\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{game.rawg_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.movies?.length > 0)}>\r\n\t\t\t\t<h3>Фильмы</h3>\r\n\t\t\t\t{day.movies?.map((movie) => (\r\n\t\t\t\t\t<div key={movie.tmdb_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\r\n\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{movie.tmdb_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.episodes?.length > 0)}>\r\n\t\t\t\t<h3>Сериалы</h3>\r\n\t\t\t\t{day.episodes?.map((episode) => (\r\n\t\t\t\t\t<div key={episode.tmdb_id}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\r\n\t\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DayInfo;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Timeline, TimelineEvent } from \"react-event-timeline\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction ReleasesList({ calendar }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst myStyle = {\r\n\t\tbackgroundColor: \"rgb(30, 30, 30)\",\r\n\t\tcolor: \"rgb(207, 207, 207)\",\r\n\t\tborder: \"none\",\r\n\t};\r\n\r\n\tfunction getContentForDay(day) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{day.games?.map((game) => (\r\n\t\t\t\t\t<div key={game.rawg_id} className='timelineEvent'>\r\n\t\t\t\t\t\tИгра{\" \"}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\r\n\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{game.rawg_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t{day.movies?.map((movie) => (\r\n\t\t\t\t\t<div key={movie.tmdb_id}>\r\n\t\t\t\t\t\tФильм{\" \"}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\r\n\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{movie.tmdb_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t{day.episodes?.map((episode) => (\r\n\t\t\t\t\t<div key={episode.tmdb_id}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\r\n\t\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction getIconForDay(day) {\r\n\t\tif ((day.games?.length > 0) & !(day.movies?.length > 0) & !(day.episodes?.length > 0)) return <MDBIcon icon='gamepad' />;\r\n\t\telse if ((day.movies?.length > 0) & !(day.games?.length > 0) & !(day.episodes?.length > 0)) return <MDBIcon icon='film' />;\r\n\t\telse if ((day.episodes?.length > 0) & !(day.movies?.length > 0) & !(day.games?.length > 0)) return <MDBIcon icon='tv' />;\r\n\t\telse return <MDBIcon icon='dice-d6' />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Timeline className='releasesList' style={myStyle} lineColor='rgb(100, 100, 100)'>\r\n\t\t\t{calendar?.map((day) => {\r\n\t\t\t\tlet date = new Date(day[0]);\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<TimelineEvent\r\n\t\t\t\t\t\ttitle={date.toLocaleDateString(\"ru-RU\", { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", weekday: \"long\" })}\r\n\t\t\t\t\t\tkey={day[0]}\r\n\t\t\t\t\t\tclassName='timelineEvent'\r\n\t\t\t\t\t\ticon={getIconForDay(day[1])}\r\n\t\t\t\t\t\tcardHeaderStyle={myStyle}\r\n\t\t\t\t\t\ticonStyle={{ ...myStyle, fontSize: \"1.2rem\" }}\r\n\t\t\t\t\t\tbubbleStyle={myStyle}\r\n\t\t\t\t\t\tcontentStyle={{ ...myStyle, fontSize: \"1.1rem\", marginTop: \"0.2rem\", marginBottom: \"0.2rem\" }}\r\n\t\t\t\t\t\ttitleStyle={{ ...myStyle, fontSize: \"1.1rem\" }}\r\n\t\t\t\t\t\tsubtitleStyle={myStyle}>\r\n\t\t\t\t\t\t{getContentForDay(day[1])}\r\n\t\t\t\t\t</TimelineEvent>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</Timeline>\r\n\t);\r\n}\r\n\r\nexport default ReleasesList;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\n\r\nimport Calendar from \"react-calendar\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"react-calendar/dist/Calendar.css\";\r\nimport DayInfo from \"./DayInfo\";\r\nimport ReleasesList from \"./ReleasesList\";\r\nimport \"./style.css\";\r\n\r\nfunction CalendarPage({ loggedIn, calendar, getUserCalendar, calendarIsLoading }) {\r\n\tconst [value, onChange] = useState(new Date());\r\n\tconst [currentDay, setCurrentDay] = useState({});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (loggedIn) {\r\n\t\t\tgetUserCalendar();\r\n\t\t}\r\n\t}, [loggedIn, getUserCalendar]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (calendar) {\r\n\t\t\tif (formatDate(value) in calendar) setCurrentDay(calendar[formatDate(value)]);\r\n\t\t\telse setCurrentDay({});\r\n\t\t}\r\n\t}, [value, calendar]);\r\n\r\n\tfunction dateToTile({ activeStartDate, date, view }) {\r\n\t\tif (view === \"month\" && formatDate(date) in calendar) {\r\n\t\t\tlet day = calendar[formatDate(date)];\r\n\t\t\treturn (\r\n\t\t\t\t<div className='calendarDay'>\r\n\t\t\t\t\t<div className='calendarDayTile Games' hidden={!(day?.games?.length > 0)}>\r\n\t\t\t\t\t\t{day?.games?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='calendarDayTile Movies' hidden={!(day?.movies?.length > 0)}>\r\n\t\t\t\t\t\t{day?.movies?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='calendarDayTile Episodes' hidden={!(day?.episodes?.length > 0)}>\r\n\t\t\t\t\t\t{day?.episodes?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg searchBG' />\r\n\t\t\t<div className='calendarPage'>\r\n\t\t\t\t<div className='calendarBlock'>\r\n\t\t\t\t\t<h1 className='calendarHeader'>Календарь релизов</h1>\r\n\t\t\t\t\t<LoadingOverlay active={calendarIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? <DayInfo day={currentDay} date={value} /> : \"\"}\r\n\t\t\t\t\t\t<Calendar className='calendar' onChange={onChange} value={value} defaultView='month' minDetail='decade' locale='ru-RU' minDate={new Date()} tileContent={dateToTile} />\r\n\t\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? \"\" : <DayInfo day={currentDay} date={value} />}\r\n\t\t\t\t\t\t<ReleasesList calendar={Object.entries(calendar)} />\r\n\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tcalendar: selectors.getUserCalendar(state),\r\n\tcalendarIsLoading: selectors.getIsLoadingUserCalendar(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tgetUserCalendar: () => {\r\n\t\t\tdispatch(actions.requestUserCalendar());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CalendarPage);\r\n\r\nfunction pad(number) {\r\n\tif (number < 10) {\r\n\t\treturn \"0\" + number;\r\n\t}\r\n\treturn number;\r\n}\r\nfunction formatDate(date) {\r\n\treturn date.getFullYear() + \"-\" + pad(date.getMonth() + 1) + \"-\" + pad(date.getDate());\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"./style.css\";\r\n\r\nfunction SettingsPage({ loggedIn, settings, getUserSettings, saveSettings, settingsIsLoading, user }) {\r\n\tconst [gameNotifInput, setGameNotifInput] = useState(false);\r\n\tconst [movieNotifInput, setMovieNotifInput] = useState(false);\r\n\tconst [showNotifInput, setShowNotifInput] = useState(false);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tgetUserSettings();\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (settings.receive_games_releases) setGameNotifInput(settings.receive_games_releases);\r\n\t\t\tif (settings.receive_movies_releases) setMovieNotifInput(settings.receive_movies_releases);\r\n\t\t\tif (settings.receive_episodes_releases) setShowNotifInput(settings.receive_episodes_releases);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[settings]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg searchBG' />\r\n\t\t\t<div className='settingsPage'>\r\n\t\t\t\t<div className='settingsBlock'>\r\n\t\t\t\t\t<h1 className='calendarHeader'>Настройки</h1>\r\n\t\t\t\t\t<h3>Подписка на почтовые уведомления:</h3>\r\n\t\t\t\t\t<LoadingOverlay active={settingsIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t<div className='settingsRow' onClick={() => setGameNotifInput(!gameNotifInput)}>\r\n\t\t\t\t\t\t\t<input type='checkbox' className='settingsCheckbox' id='gameNotificationsInput' checked={gameNotifInput} onChange={(event) => setGameNotifInput(event.target.checked)} />{\" \"}\r\n\t\t\t\t\t\t\tрелиз новых игр\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='settingsRow' onClick={() => setMovieNotifInput(!movieNotifInput)}>\r\n\t\t\t\t\t\t\t<input type='checkbox' className='settingsCheckbox' id='movieNotificationsInput' checked={movieNotifInput} onChange={(event) => setMovieNotifInput(event.target.checked)} />{\" \"}\r\n\t\t\t\t\t\t\tрелиз новых фильмов\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='settingsRow' onClick={() => setShowNotifInput(!showNotifInput)}>\r\n\t\t\t\t\t\t\t<input type='checkbox' className='settingsCheckbox' id='episodeNotificationsInput' checked={showNotifInput} onChange={(event) => setShowNotifInput(event.target.checked)} />{\" \"}\r\n\t\t\t\t\t\t\tрелиз новых серий сериалов\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='saveSettingsButton'\r\n\t\t\t\t\t\t\tdisabled={!loggedIn}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsaveSettings({ receive_games_releases: gameNotifInput, receive_movies_releases: movieNotifInput, receive_episodes_releases: showNotifInput });\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t<p>Ваша почта {user.email}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tuser: selectors.getUser(state),\r\n\tsettings: selectors.getUserSettings(state),\r\n\tsettingsIsLoading: selectors.getIsLoadingUserSettings(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tgetUserSettings: () => {\r\n\t\t\tdispatch(actions.requestUserSettings());\r\n\t\t},\r\n\t\tsaveSettings: (settings) => {\r\n\t\t\tdispatch(actions.patchUserSettings(settings));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SettingsPage);\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport HomePage from \"./components/HomePage\";\r\nimport GamePage from \"./components/Game/GamePage\";\r\nimport MoviePage from \"./components/Movie/MoviePage\";\r\nimport ShowPage from \"./components/Show/ShowPage\";\r\nimport SeasonPage from \"./components/Show/SeasonPage\";\r\nimport EpisodePage from \"./components/Show/EpisodePage\";\r\nimport SearchPage from \"./components/Search/SearchPage\";\r\nimport LoginForm from \"./components/Modals/LoginForm\";\r\nimport RegistrationForm from \"./components/Modals/RegistrationForm\";\r\nimport ResetPasswordForm from \"./components/Modals/ResetPasswordForm\";\r\nimport ConfirmPage from \"./components/ConfirmPage\";\r\nimport ConfirmPasswordPage from \"./components/ConfirmPasswordPage\";\r\nimport UserPage from \"./components/UserPage/UserPage\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport CalendarPage from \"./components/Calendar/CalendarPage\";\r\nimport SettingsPage from \"./components/Settings/SettingsPage\";\r\n\r\nclass Routes extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Navbar />\r\n\t\t\t\t<div className='navbar'></div>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path='/' component={HomePage} />\r\n\t\t\t\t\t<Route exact path='/game/:id' component={GamePage} />\r\n\t\t\t\t\t<Route exact path='/movie/:id' component={MoviePage} />\r\n\t\t\t\t\t<Route exact path='/show/:id' component={ShowPage} />\r\n\t\t\t\t\t<Route exact path='/show/:show_id/season/:number' component={SeasonPage} />\r\n\t\t\t\t\t<Route exact path='/show/:show_id/season/:season_number/episode/:episode_number' component={EpisodePage} />\r\n\t\t\t\t\t<Route exact path='/search/:query' component={SearchPage} />\r\n\t\t\t\t\t<Route exact path='/confirm/' component={ConfirmPage} />\r\n\t\t\t\t\t<Route exact path='/confirm_password/' component={ConfirmPasswordPage} />\r\n\t\t\t\t\t<Route exact path='/user/:userID' component={UserPage} />\r\n\t\t\t\t\t<Route exact path='/calendar' component={CalendarPage} />\r\n\t\t\t\t\t<Route exact path='/settings' component={SettingsPage} />\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\trender={function () {\r\n\t\t\t\t\t\t\treturn <h1>Not Found</h1>;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Switch>\r\n\t\t\t\t<ToastContainer position='top-center' hideProgressBar newestOnTop closeOnClick autoClose={1500} />\r\n\t\t\t\t<LoginForm />\r\n\t\t\t\t<RegistrationForm />\r\n\t\t\t\t<ResetPasswordForm />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n//\r\nexport default Routes;\r\n","import React, { useEffect } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport Routes from \"./Routes\";\r\nimport * as actions from \"./store/actions\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nfunction App({ onLoad }) {\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tonLoad();\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<div className='flyout'>\r\n\t\t\t\t<main>\r\n\t\t\t\t\t<Routes />\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t</Router>\r\n\t);\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonLoad: () => {\r\n\t\t\tdispatch(actions.checkAuthorization());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === \"localhost\" ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === \"[::1]\" ||\r\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"load\", () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA\");\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then((registration) => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\"New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { \"Service-Worker\": \"script\" },\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get(\"content-type\");\r\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\"No internet connection found. App is running in offline mode.\");\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif (\"serviceWorker\" in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then((registration) => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\nimport \"mdbreact/dist/css/mdb.css\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport {\r\n\tcreateStore,\r\n\tapplyMiddleware,\r\n\t//combineReducers,\r\n\tcompose,\r\n} from \"redux\";\r\nimport { Provider } from \"react-redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer from \"./store/reducers\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n\r\nexport default store;\r\n"],"sourceRoot":""}