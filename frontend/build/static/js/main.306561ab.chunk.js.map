{"version":3,"sources":["routes/CalendarPage/calendar-page.module.sass","settings.ts","services/jwtAuth.js","store/AuthStore.ts","store/PagesStore.ts","routes/HomePage/index.js","routes/HomePage/HomePage.js","http/index.js","services/gameRequests.ts","store/GameStore.ts","shared/StatusButtonGroup/StatusButtonGroup.js","shared/StatusButtonGroup/index.js","shared/Rating/Rating.js","shared/Rating/index.js","shared/FriendsActivity/views/FriendActivity/FriendActivity.js","shared/FriendsActivity/views/FriendActivity/index.js","shared/FriendsActivity/FriendsActivity.js","shared/FriendsActivity/index.js","routes/GamePage/views/TimeToBeat/TimeToBeat.js","routes/GamePage/views/TimeToBeat/index.js","shared/ScoreBlock/ScoreBlock.js","shared/ScoreBlock/index.js","shared/InputNumber/InputNumber.js","shared/InputNumber/index.js","routes/GamePage/index.js","routes/GamePage/GamePage.js","services/movieRequests.js","store/MovieStore.ts","routes/MoviePage/index.js","routes/MoviePage/MoviePage.js","services/showRequests.js","store/ShowStore.ts","shared/DetailEpisodeRow/DetailEpisodeRow.js","shared/DetailEpisodeRow/index.js","routes/ShowPage/views/SeasonBlock/index.js","routes/ShowPage/views/SeasonBlock/SeasonBlock.js","routes/ShowPage/views/SeasonsBlock/index.js","routes/ShowPage/views/SeasonsBlock/SeasonsBlock.js","routes/ShowPage/index.js","routes/ShowPage/ShowPage.js","routes/ShowSeasonPage/index.js","routes/ShowSeasonPage/SeasonPage.js","routes/ShowEpisodePage/index.js","routes/ShowEpisodePage/EpisodePage.js","services/userRequests.ts","store/SearchStore.ts","routes/SearchPage/views/SearchCard/SearchCard.js","routes/SearchPage/views/SearchCard/index.js","routes/SearchPage/views/SearchCardsBlock/SearchCardsBlock.js","routes/SearchPage/views/SearchCardsBlock/index.js","routes/SearchPage/views/GameCards.js","routes/SearchPage/views/MovieCards.js","routes/SearchPage/views/ShowCards.js","shared/CardUser/CardUser.js","shared/CardUser/index.js","shared/FriendBlock/FriendBlock.js","shared/FriendBlock/index.js","routes/SearchPage/views/UserCards.js","shared/CategoriesTab/CategoriesTab.tsx","shared/CategoriesTab/index.js","routes/SearchPage/SearchPage.tsx","routes/SearchPage/index.js","hooks/useScroll.js","routes/ConfirmPage/index.js","routes/ConfirmPage/ConfirmPage.js","routes/ConfirmPasswordPage/index.js","routes/ConfirmPasswordPage/ConfirmPasswordPage.js","store/UserStore.ts","shared/SelectMulti/SelectMulti.js","shared/SelectMulti/index.js","routes/UserPage/views/ItemsBlock/ItemRow/ItemRow.js","hooks/useWindowDimensions.js","routes/UserPage/views/ItemsBlock/ItemBlock/ItemBlock.js","routes/UserPage/views/ItemsBlock/ItemBlock/index.js","routes/UserPage/views/ItemsBlock/GameBlock.js","routes/UserPage/views/ItemsBlock/MovieBlock.js","routes/UserPage/views/UserLogs/LogRow/LogRow.js","routes/UserPage/views/UserLogs/LogsByDay/LogsByDay.js","routes/UserPage/views/UserLogs/UserLogs.js","routes/UserPage/views/UserLogs/index.js","routes/UserPage/views/ItemsBlock/ShowBlock.js","routes/UserPage/views/StatisticsBlock/Colors.js","routes/UserPage/views/StatisticsBlock/GenresChart/GenresChart.js","routes/UserPage/views/StatisticsBlock/YearsChart/YearsChart.js","routes/UserPage/views/StatisticsBlock/ChartBlock/ChartBlock.js","routes/UserPage/views/StatisticsBlock/StatisticsBlock.js","routes/UserPage/views/StatisticsBlock/index.js","routes/UserPage/index.js","routes/UserPage/UserPage.js","store/CurrentUserStore.ts","routes/CalendarPage/views/DayInfo/DayInfo.js","routes/CalendarPage/views/DayInfo/index.js","routes/CalendarPage/views/ReleasesList/ReleasesList.js","routes/CalendarPage/views/ReleasesList/index.js","routes/CalendarPage/CalendarPage.js","routes/CalendarPage/index.js","routes/SettingsPage/index.js","routes/SettingsPage/SettingsPage.js","routes/UnwatchedPage/views/EpisodeRow/EpisodeRow.js","routes/UnwatchedPage/views/EpisodeRow/index.js","routes/UnwatchedPage/views/ShowBlock/ShowBlock.js","routes/UnwatchedPage/views/ShowBlock/index.js","routes/UnwatchedPage/index.js","routes/UnwatchedPage/UnwatchedPage.js","routes/NotFoundPage/wrongPage.png","routes/NotFoundPage/NotFoundPage.js","routes/NotFoundPage/index.js","shared/Button/Button.tsx","shared/Button/index.ts","routes/RandomPage/views/RandomCard/RandomCard.tsx","routes/RandomPage/views/RandomCard/index.ts","routes/RandomPage/RandomPage.tsx","Routes.tsx","shared/app/Navbar/views/SearchInput/index.js","shared/app/Navbar/views/SearchInput/SearchInput.js","shared/app/Navbar/index.js","shared/app/Navbar/Navbar.js","shared/app/Footer/Footer.js","shared/app/Footer/index.js","shared/app/Sidebar/index.js","shared/app/Sidebar/Sidebar.js","shared/Modal/Modal.tsx","shared/Modal/index.ts","shared/Modals/LoginForm/LoginForm.tsx","shared/Modals/LoginForm/index.ts","shared/Modals/RegisterForm/index.ts","shared/Modals/RegisterForm/RegisterForm.tsx","shared/Modals/ResetPasswordForm/ResetPasswordForm.tsx","shared/Modals/ResetPasswordForm/index.ts","App.tsx","serviceWorker.js","index.tsx"],"names":["module","exports","BACKEND_URL","GET_TOKEN_URL","REFRESH_TOKEN_URL","REGISTRATE_URL","CONFIRM_URL","RESET_PASSWORD_URL","CONFIRM_PASSWORD_URL","GET_GAME_URL","SEARCH_GAMES_URL","SEARCH_GAMES_FAST_URL","GET_MOVIE_URL","SEARCH_MOVIES_URL","SEARCH_MOVIES_FAST_URL","GET_SHOW_URL","SEARCH_SHOWS_URL","SEARCH_SHOWS_FAST_URL","GET_UNWATCHED_EPISODES_URL","USER_INFO_URL","USER_CALENDAR_URL","SEARCH_USERS_URL","USER_SETTINGS_URL","getToken","username","password","axios","post","urls","res","userData","jwt_decode","data","access","user","id","user_id","email","token","refreshToken","refresh","updateToken","registration","status","confirmation","uid64","patch","resetPassword","put","confirmPassword","Auth","loggedIn","authState","registrateState","confirmEmailState","resetPasswordState","confirmPasswordState","tryAuth","login","auth","then","authSuccess","authFailure","localStorage","setItem","error","resetAuthorization","response","detail","removeItem","register","registerSuccess","registerFailure","result","errors","error2","confirmEmail","confirmEmailSuccess","confirmEmailFailure","resetPasswordSuccess","resetPasswordFailure","confirmPasswordSuccess","confirmPasswordFailure","checkAuth","getItem","checkAuthSuccess","checkAuthFailure","makeAutoObservable","this","AuthStore","PagesStore","LoginFormIsOpen","RegistrateFormIsOpen","ResetPasswordFormIsOpen","saveEpisodesBlockIsOpen","sidebarIsToggled","sidebarIsCollapsed","toggleSidebar","JSON","stringify","collapseSidebar","openLoginForm","closeLoginForm","openRegistrateForm","closeRegistrateForm","openResetPasswordForm","closeResetPasswordForm","setSaveEpisodes","HomePage","observer","props","history","useHistory","className","href","onClick","e","preventDefault","push","api","create","baseURL","interceptors","request","use","config","headers","Authorization","originalRequest","_isRetry","console","log","getGame","get","setGameStatus","gameSlug","user_info","searchGames","query","page","gamesCount","params","page_size","searchGamesFast","getGameUserInfo","slug","defaults","common","Game","game","gameState","userInfo","review","score","spent_time","friendsInfo","userInfoState","setStatusState","setStatusToast","requestGame","gameRequests","requestGameSuccess","requestGameFailure","statusText","requestUserInfo","requestUserInfoSuccess","requestUserInfoFailure","friends_info","setGameStatusSuccess","setGameStatusFailure","setGameReview","toast","autoClose","type","TYPE","INFO","position","setGameReviewSuccess","setGameReviewFailure","update","render","SUCCESS","ERROR","startsWith","GameStore","StatusButtonGroup","statuses","onChangeStatus","userStatus","classnames","map","counter","RatingBlock","Rating","initialRating","readonly","onChange","withEye","start","stop","emptySymbol","concat","n","fullSymbol","title","quiet","intToHours","number","FriendActivity","info","window","location","origin","hidden","FriendsActivity","friendInfo","TimeToBeat","hltbInfo","gameplay_main","gameplay_main_extra","gameplay_completionist","gameplay_main_unit","gameplay_main_extra_unit","gameplay_completionist_unit","ScoreBlock","text","getColor","InputNumber","value","max","min","dataList","parseFloat","event","target","style","width","toString","length","GamePage","anyError","useParams","useState","setReview","spentTime","setSpentTime","setUserStatus","userRate","setUserRate","setClearUI","strToFloat","toFixed","cleanStr","indexOf","useEffect","document","name","backgroundImage","background","active","spinner","src","poster","alt","developers","release_date","genres","platforms","hltb","playtime","metacritic","dangerouslySetInnerHTML","__html","overview","newData","hltbToDatalist","disabled","getMovie","setMovieStatus","searchMovies","searchMoviesFast","getMovieUserInfo","Movie","movie","movieState","requestMovie","movieRequests","requestMovieSuccess","requestMovieFailure","setMovieStatusSuccess","setMovieStatusFailure","setMovieReview","setMovieReviewSuccess","setMovieReviewFailure","MovieStore","MoviePage","backdrop_path","poster_path","original_name","runtime","production_companies","tagline","cast","directors","showArrows","centerMode","centerSlidePercentage","showThumbs","showStatus","showIndicators","videos","video","index","url","controls","getShow","getShowSeason","showID","seasonNumber","getShowEpisode","episodeNumber","setShowStatus","setShowSeasonStatus","setShowEpisodesStatus","episodesList","searchShows","searchShowsFast","getShowUserInfo","getShowSeasonUserInfo","seasonID","getShowEpisodeUserInfo","episodeID","getUnwatchedEpisodes","Show","show","showState","showSeasons","showSeasonsState","showSeasonsUserInfo","showSeasonsUserInfoState","requestShow","showRequests","requestShowSuccess","requestShowFailure","requestSeason","requestSeasonSuccess","requestSeasonFailure","requestSeasons","requestSeasonsSuccess","requestSeasonsFailure","requestEpisode","requestEpisodeSuccess","requestEpisodeFailure","requestShowUserInfo","requestShowUserInfoSuccess","requestShowUserInfoFailure","requestSeasonUserInfo","requestSeasonUserInfoSuccess","requestSeasonUserInfoFailure","user_watched_show","episodes","episodes_user_info","requestSeasonsUserInfo","requestSeasonsUserInfoSuccess","requestSeasonsUserInfoFailure","requestEpisodeUserInfo","requestEpisodeUserInfoSuccess","requestEpisodeUserInfoFailure","setShowStatusSuccess","setShowStatusFailure","setShowReview","setShowReviewSuccess","setShowReviewFailure","setSeasonStatus","setSeasonReview","setEpisodesStatus","seasonsToUpdate","season","getShowSeasonState","getEpisodesUserInfo","episode","tmdb_id","ShowStore","DetailEpisodeRow","setEpisodeUserStatus","checkAll","userWatchedShow","isChecked","setIsChecked","checked","date","newDate","Date","toLocaleDateString","parseDate","air_date","season_number","episode_number","SeasonBlock","showSeason","computed","showSeasonState","showUserInfo","getEpisodeByID","open","reverse","SeasonsBlock","seasons","anySeasonLoading","toJS","sendAllEpisodes","currentValue","cbValue","getElementById","sendEpisodes","ShowPage","first_air_date","last_air_date","episode_run_time","seasons_count","episodes_count","SeasonPage","show_id","chartData","setChartData","tmdb_name","vote_average","Оценка","tmdb_backdrop_path","tmdb_original_name","outline","body","clientHeight","clientWidth","height","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","dataKey","interval","tick","fill","tickLine","domain","tickCount","contentStyle","color","backgroundColor","stroke","fillOpacity","layout","EpisodePage","still_path","getUserInfo","userID","searchUsers","is_following","getUserLog","resultsOnPage","filters","deleteUserLog","logType","logID","delete","getUserFriendsLog","getUserCalendar","getUserSettings","patchUserSettings","settings","Search","games","values","movies","shows","users","hints","gamesState","moviesState","showsState","usersState","searchHints","currentQuery","searchGamesHintsSuccess","searchMoviesHintsSuccess","searchShowsHintsSuccess","searchGamesSuccess","searchGamesFailure","isEnd","nextGames","nextGamesSuccess","nextGamesFailure","searchMoviesSuccess","searchMoviesFailure","results","total_pages","nextMovies","nextMoviesSuccess","nextMoviesFailure","searchShowsSuccess","searchShowsFailure","nextShows","nextShowsSuccess","nextShowsFailure","userRequests","searchUsersSuccess","searchUsersFailure","SearchStore","SearchCard","link","tags","SearchCardsBlock","objects","object","GameCards","useMemo","reduce","newObjects","background_image","released","mas","split","previousValue","genre","slice","tag","platform","MovieCards","ShowCards","CardUser","FriendBlock","UserCards","CategoriesTab","categories","onChangeCategory","activeCategory","children","category","SearchPage","store","queryText","setQueryText","parentRef","useRef","childRef","callback","options","root","current","rootMargin","threshold","IntersectionObserver","isIntersecting","observe","unobserve","useScroll","fetchItems","setActiveCategory","onSubmit","placeholder","ref","ConfirmPage","search","URLSearchParams","ConfirmPasswordPage","setPassword","passwordConfirm","setPasswordConfirm","htmlFor","User","userLogs","userFriendsLogs","userState","userLogsState","userFriendsLogsState","setUserStatusState","requestUser","requestUserSuccess","requestUserFailure","requestUserLogs","requestLogsSuccess","requestLogsFailure","deleteUserLogSuccess","deleteUserLogFailure","newLogs","filter","requestUserFriendsLogs","requestFriendsLogsSuccess","requestFriendsLogsFailure","setUserStatusSuccess","setUserStatusFailure","is_followed","UserStore","SelectMulti","classNamePrefix","isMulti","ItemRow","fields","display","undefined","find","field","key","getWindowDimensions","innerWidth","innerHeight","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","addEventListener","removeEventListener","ItemBlock","items","setQuery","pageSize","setPageSize","setPage","filteredItems","setFilteredItems","sort","setSort","statusFilters","setStatusFilters","collapse","setCollapse","item","toLowerCase","includes","a","b","field1","field2","isAsc","obj","total","separator","filename","GameBlock","rawg_slug","rawg_name","rawg_backdrop_path","label","MovieBlock","LogRow","showUsername","onDeleteLog","created","toLocaleTimeString","hour","minute","action","actionResult","translateActionType","action_type","action_result","actionType","translateType","parent_name","nameToLink","target_id","actionResultToStr","UserLogs","logs","currentUser","logsByDay","setLogsByDay","i","getDay","groupLogsByDay","dayLog","year","getFullYear","month","day","logsType","currentPage","setCurrentPage","setFilters","LogsByDay","count","ShowBlock","COLORS","ChartBlock","Процент","spent_time_percent","test","navigator","userAgent","tickMargin","itemStyle","borderRadius","cursor","entry","Math","angle","YearsChart","maxCount","setMaxCount","newMaxCount","array","Количество","allowDataOverflow","stats","total_spent_time","cx","cy","outerRadius","labelLine","minAngle","verticalAlign","horizontalAlign","StatisticsBlock","marginBottom","GenresChart","years","UserPage","isCurrentUser","useQueryParam","withDefault","StringParam","lastActivity","setLastActivity","last_activity","toLocaleString","is_available","marginRight","followed_users","CurrentUser","calendar","unwatched","calendarState","settingsState","unwatchedState","saveSettingsState","requestCalendar","requestCalendarSuccess","requestCalendarFailure","requestSettings","requestSettingsSuccess","requestSettingsFailure","requestUnwatched","requestUnwatchedSuccess","requestUnwatchedFailure","patchSettings","patchSettingsSuccess","patchSettingsFailure","patchSettingsReset","setTimeout","CurrentUserStore","DayInfo","weekday","rawg_id","tmdb_show","tmdb_season_number","tmdb_episode_number","ReleasesList","myStyle","border","getContentForDay","getIconForDay","remainedDays","days","now","diff","getTime","getUTCDay","parseInt","dateDiff","lineColor","icon","cardHeaderStyle","iconStyle","fontSize","bubbleStyle","marginTop","titleStyle","subtitleStyle","pad","formatDate","getMonth","getDate","CalendarPage","currentDay","setCurrentDay","styles","calendarPage","pageHeader","defaultView","minDetail","locale","minDate","tileContent","view","calendarDay","calendarDayBody","calendarDayGames","calendarDayHidden","calendarDayMovies","calendarDayEpisodes","Object","entries","SettingsPage","gameNotifInput","setGameNotifInput","movieNotifInput","setMovieNotifInput","showNotifInput","setShowNotifInput","privacySelect","setPrivacySelect","success","receive_games_releases","receive_movies_releases","receive_episodes_releases","privacy","DetailedEpisodeRow","EpisodeRow","setShowEpisodeUserStatus","tmdb_release_date","getUserSeasonOpen","localData","onToggle","isOpen","class","UnwatchedPage","NotFoundPage","setAngle","requestAnimationFrame","transform","image","Button","bem","block","compact","join","RandomCard","winner","getLink","tmdb_poster_path","rawg_poster_path","categoriesEnum","RandomPage","setWinner","setLoading","useForm","handleSubmit","formState","useCallback","getRoulette","newItems","catch","onLoad","duration","distance","Routes","exact","path","component","React","Component","SearchInput","hint","rawg_release_date","substr","Navbar","toggleIfSmallScreen","Footer","Sidebar","toggleSidebarIfSmallScreen","collapsed","iconShape","Modal","toggle","LoginForm","setLogin","onPasswordRecovery","onRegistration","RegisterForm","setEmail","ResetPasswordForm","App","adapter","ReactRouter5Adapter","hideProgressBar","newestOnTop","closeOnClick","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ReactDOM","URL","process","fetch","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.306561ab.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"calendarPage\":\"calendar-page_calendarPage__29wv0\",\"pageHeader\":\"calendar-page_pageHeader__1PvOu\",\"calendarDay\":\"calendar-page_calendarDay__1uzIW\",\"calendarDayBody\":\"calendar-page_calendarDayBody__3zbLn\",\"calendarDayGames\":\"calendar-page_calendarDayGames__2Iu3C\",\"calendarDayMovies\":\"calendar-page_calendarDayMovies__4JRvd\",\"calendarDayEpisodes\":\"calendar-page_calendarDayEpisodes__1vctD\",\"calendarDayHidden\":\"calendar-page_calendarDayHidden__2Hjhl\"};","/**Адрес сервера*/\nexport const BACKEND_URL = \"https://интерестс.space/api/\";\n/**Адрес получения токена */\nexport const GET_TOKEN_URL = BACKEND_URL + \"users/auth/login/\";\n/**Адрес обновления токена */\nexport const REFRESH_TOKEN_URL = BACKEND_URL + \"users/auth/refresh-token/\";\n/**Адрес регистрации */\nexport const REGISTRATE_URL = BACKEND_URL + \"users/auth/signup/\";\n/**Адрес подтверждения почты */\nexport const CONFIRM_URL = BACKEND_URL + \"users/auth/confirm_email/\";\n/**Адрес сброса пароля */\nexport const RESET_PASSWORD_URL = BACKEND_URL + \"users/auth/password_reset/\";\n/**Адрес подтверждения сброса пароля */\nexport const CONFIRM_PASSWORD_URL = BACKEND_URL + \"users/auth/confirm_password_reset/\";\n/**Адрес запроса игры */\nexport const GET_GAME_URL = \"games/game/\";\n/**Адрес поиска игр */\nexport const SEARCH_GAMES_URL = \"games/search/rawg/\";\n/**Адрес быстрого поиска игр */\nexport const SEARCH_GAMES_FAST_URL = \"games/search/\";\n/**Адрес запроса фильма */\nexport const GET_MOVIE_URL = \"movies/movie/\";\n/**Адрес поиска фильмов */\nexport const SEARCH_MOVIES_URL = \"movies/search/tmdb/\";\n/**Адрес быстрого поиска игр */\nexport const SEARCH_MOVIES_FAST_URL = \"movies/search/\";\n/**Адрес запроса сериала */\nexport const GET_SHOW_URL = \"shows/show/\";\n/**Адрес поиска сериалов */\nexport const SEARCH_SHOWS_URL = \"shows/search/tmdb/\";\n/**Адрес быстрого поиска сериалов */\nexport const SEARCH_SHOWS_FAST_URL = \"shows/search/\";\n/**Адрес запроса непросмотренных серий */\nexport const GET_UNWATCHED_EPISODES_URL = \"shows/show/unwatched_episodes/\";\n/**Адрес получения информации о пользователе */\nexport const USER_INFO_URL = \"users/user/\";\n/**Адрес получения календаря релизов пользователя */\nexport const USER_CALENDAR_URL = \"users/user/release_calendar/\";\n/**Адрес поиска пользователей */\nexport const SEARCH_USERS_URL = \"users/search/\";\n/**Адрес сохранения настроек */\nexport const USER_SETTINGS_URL = \"users/user/user_settings/\";\n","import axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport * as urls from \"../settings\";\n\n/**\n * ПОлучение токена авторизации. Токен сохраняется в localStorage\n * @param {string} username Имя пользователя\n * @param {string} password Пароль\n */\nexport async function getToken(username, password) {\n\tconst res = await axios.post(urls.GET_TOKEN_URL, {\n\t\tusername: username,\n\t\tpassword: password,\n\t});\n\n\tlet userData = jwt_decode(res.data.access);\n\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\n\n\treturn { token: res.data.access, refreshToken: res.data.refresh, user: user };\n}\n\n/**\n * Функция обновления токена\n */\nexport async function updateToken(refreshToken) {\n\tconst res = await axios.post(urls.REFRESH_TOKEN_URL, { refresh: refreshToken });\n\tlet userData = jwt_decode(res.data.access);\n\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\n\n\treturn { token: res.data.access, user: user };\n}\n\nexport async function registration(username, email, password) {\n\tconst res = await axios.post(urls.REGISTRATE_URL, {\n\t\tusername: username,\n\t\temail: email,\n\t\tpassword: password,\n\t});\n\tlet data = res.data;\n\tdata.status = res.status;\n\treturn data;\n}\n\nexport async function confirmation(uid64, token) {\n\tconst res = await axios.patch(urls.CONFIRM_URL + \"?uid64=\" + uid64 + \"&token=\" + token);\n\treturn res;\n}\n\nexport async function resetPassword(email) {\n\tconst res = await axios.put(urls.RESET_PASSWORD_URL, { email: email });\n\treturn res;\n}\n\nexport async function confirmPassword(token, password) {\n\tconst res = await axios.patch(urls.CONFIRM_PASSWORD_URL + \"?reset_token=\" + token, { password: password });\n\treturn res;\n}\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as auth from '../services/jwtAuth';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface ICurrentUser {\n\tlogin?: string,\n\tusername?: string,\n\temail?: string,\n\tid?: number | null,\n}\n\ninterface IAuthState {\n\tloggedIn: boolean,\n\tuser: ICurrentUser,\n\tauthState: IPendingState,\n\tregistrateState: IPendingState,\n\tconfirmEmailState: IPendingState,\n\tresetPasswordState: IPendingState,\n\tconfirmPasswordState: IPendingState,\n}\n\nclass Auth implements IAuthState {\n\tloggedIn = false;\n\tuser: ICurrentUser = {\n\t\tusername: '',\n\t\temail: '',\n\t\tid: null,\n\t};\n\tauthState = '';\n\tregistrateState = '';\n\tconfirmEmailState = '';\n\tresetPasswordState = '';\n\tconfirmPasswordState = '';\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\ttryAuth = async (login: string, password: string) => {\n\t\tthis.authState = 'pending';\n\t\tauth.getToken(login, password).then(this.authSuccess, this.authFailure);\n\t};\n\tauthSuccess = (res: {refreshToken: string, token: string, user: ICurrentUser}) => {\n\t\tlocalStorage.setItem('refreshToken', res.refreshToken);\n\t\tlocalStorage.setItem('token', res.token);\n\t\tthis.loggedIn = true;\n\t\tthis.user = res.user;\n\t\tthis.authState = 'done';\n\t};\n\tauthFailure = async (error: any) => {\n\t\tawait this.resetAuthorization();\n\t\tthis.authState = 'error: ' + error.response.data.detail;\n\t};\n\n\tresetAuthorization = async () => {\n\t\tthis.loggedIn = false;\n\t\tthis.user = { username: '', id: null, email: '' };\n\t\tlocalStorage.removeItem('refreshToken');\n\t\tlocalStorage.removeItem('token');\n\t};\n\n\tregister = async (username: string, email: string, password: string) => {\n\t\tthis.registrateState = 'pending';\n\t\tauth.registration(username, email, password).then(this.registerSuccess, this.registerFailure);\n\t};\n\tregisterSuccess = (result: {username: string, email: string}) => {\n\t\tthis.user = { login: result.username, email: result.email };\n\t\tthis.registrateState = 'done';\n\t};\n\tregisterFailure = (error: any) => {\n\t\tlet errors = '';\n\t\tfor (const error2 in error.response.data) {\n\t\t\terrors += error.response.data[error2] + '\\n';\n\t\t}\n\t\tthis.registrateState = 'error: ' + errors;\n\t};\n\n\tconfirmEmail = async (uid64: string, token: string) => {\n\t\tthis.confirmEmailState = 'pending';\n\t\tauth.confirmation(uid64, token).then(this.confirmEmailSuccess, this.confirmEmailFailure);\n\t};\n\tconfirmEmailSuccess = () => {\n\t\tthis.confirmEmailState = 'done';\n\t};\n\tconfirmEmailFailure = (error: any) => {\n\t\tlet errors = '';\n\t\tfor (const error2 in error.response.data) {\n\t\t\terrors += error.response.data[error2] + '\\n';\n\t\t}\n\t\tthis.confirmEmailState = 'error: ' + errors;\n\t};\n\n\tresetPassword = async (email: string) => {\n\t\tthis.resetPasswordState = 'pending';\n\t\tauth.resetPassword(email).then(this.resetPasswordSuccess, this.resetPasswordFailure);\n\t};\n\tresetPasswordSuccess = () => {\n\t\tthis.resetPasswordState = 'done';\n\t};\n\tresetPasswordFailure = (error: string) => {\n\t\tthis.resetPasswordState = 'error: ' + error;\n\t};\n\n\tconfirmPassword = async (token: string, password: string) => {\n\t\tthis.confirmPasswordState = '';\n\t\tauth.confirmPassword(token, password).then(this.confirmPasswordSuccess, this.confirmPasswordFailure);\n\t};\n\tconfirmPasswordSuccess = () => {\n\t\tthis.confirmPasswordState = 'done';\n\t};\n\tconfirmPasswordFailure = (error: any) => {\n\t\tlet errors = '';\n\t\tfor (const error2 in error.response.data) {\n\t\t\terrors += error.response.data[error2] + '\\n';\n\t\t}\n\t\tthis.confirmPasswordState = 'error: ' + errors;\n\t};\n\n\t/**\n\t * Проверка авторизации\n\t */\n\tcheckAuth = async () => {\n\t\tthis.authState = 'pending';\n\t\tauth.updateToken(localStorage.getItem('refreshToken')).then(this.checkAuthSuccess, this.checkAuthFailure);\n\t};\n\tcheckAuthSuccess = (res: {token: string, user: ICurrentUser}) => {\n\t\tlocalStorage.setItem('token', res?.token);\n\t\tthis.loggedIn = true;\n\t\tthis.user = res.user;\n\t\tthis.authState = 'done';\n\t};\n\tcheckAuthFailure = () => {\n\t\tthis.loggedIn = false;\n\t\tthis.user = { username: '', id: null, email: '' };\n\t\tlocalStorage.removeItem('token');\n\t\tthis.authState = 'done';\n\t};\n\n\tget currentUser() {\n\t\treturn this.user;\n\t}\n}\n\nconst AuthStore = new Auth();\n//export default remotedev(AuthStore, { name: 'Auth' });\nexport default AuthStore;\n","import { makeAutoObservable } from \"mobx\";\n//import remotedev from \"mobx-remotedev\";\n\nexport interface IPagesState {\n\tLoginFormIsOpen: boolean;\n\tRegistrateFormIsOpen: boolean;\n\tResetPasswordFormIsOpen: boolean;\n\tsaveEpisodesBlockIsOpen: boolean;\n\tsidebarIsToggled: boolean;\n\tsidebarIsCollapsed: boolean;\n}\n\nclass Pages implements IPagesState{\n\tLoginFormIsOpen = false;\n\tRegistrateFormIsOpen = false;\n\tResetPasswordFormIsOpen = false;\n\tsaveEpisodesBlockIsOpen = false;\n\tsidebarIsToggled = localStorage.getItem(\"sidebarToggled\") === \"true\";\n\tsidebarIsCollapsed = localStorage.getItem(\"sidebarCollapsed\") === \"true\";\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\ttoggleSidebar = async () => {\n\t\tthis.sidebarIsToggled = !this.sidebarIsToggled;\n\t\tif (!this.sidebarIsToggled) this.sidebarIsCollapsed = false;\n\t\tlocalStorage.setItem(\"sidebarToggled\", JSON.stringify(this.sidebarIsToggled));\n\t};\n\n\tcollapseSidebar = async () => {\n\t\tthis.sidebarIsCollapsed = !this.sidebarIsCollapsed;\n\t\tlocalStorage.setItem(\"sidebarCollapsed\", JSON.stringify(this.sidebarIsCollapsed));\n\t};\n\n\topenLoginForm = async () => {\n\t\tthis.LoginFormIsOpen = true;\n\t};\n\n\tcloseLoginForm = async () => {\n\t\tthis.LoginFormIsOpen = false;\n\t};\n\n\topenRegistrateForm = async () => {\n\t\tthis.RegistrateFormIsOpen = true;\n\t};\n\n\tcloseRegistrateForm = async () => {\n\t\tthis.RegistrateFormIsOpen = false;\n\t};\n\n\topenResetPasswordForm = async () => {\n\t\tthis.ResetPasswordFormIsOpen = true;\n\t};\n\n\tcloseResetPasswordForm = async () => {\n\t\tthis.ResetPasswordFormIsOpen = false;\n\t};\n\n\tsetSaveEpisodes = (status: boolean) => (this.saveEpisodesBlockIsOpen = status);\n}\n\nconst PagesStore = new Pages();\n//export default remotedev(PagesStore, { name: \"Pages\" });\nexport default PagesStore;\n","import HomePage from \"./HomePage\";\n\nexport default HomePage;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport AuthStore from '../../store/AuthStore';\nimport PagesStore from '../../store/PagesStore';\nimport \"./home-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst HomePage = observer((props) => {\n\tlet history = useHistory();\n\tconst { user, loggedIn } = AuthStore;\n\tconst { openLoginForm } = PagesStore;\n\n\treturn (\n\t\t<div className='home-page'>\n\t\t\t<div className='home-page__body'>\n\t\t\t\t<h1 className='home-page__header'>Добро пожаловать на Interests!</h1>\n\t\t\t\t<h3 className='home-page__header-secondary'>Что это?</h3>\n\t\t\t\t<p className='home-page__text'>Interests - сайт для отслеживания фильмов, сериалов и видеоигр. </p>\n\t\t\t\t<h3 className='home-page__header-secondary'>Какой функционал у сайта?</h3>\n\t\t\t\t<p className='home-page__text'>Здесь можно вести персональный список интересного вам контента, выставлять ему оценки и писать отзывы, а также отслеживать активность ваших друзей.</p>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tВ{\" \"}\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName='home-page__link'\n\t\t\t\t\t\thref={\"/user/\" + user?.id}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\thistory.push(\"/user/\" + user?.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tпрофиле\n\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\tсобраны все добавленные игры, фильмы и сериалы, а также ваша персональная статистика.\n\t\t\t\t</p>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tC помощью{\" \"}\n\t\t\t\t\t<a className='home-page__link' href='/search/example'>\n\t\t\t\t\t\tпоиска\n\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\tможно найти интересущий вас тайтл или человека.\n\t\t\t\t</p>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tВ{\" \"}\n\t\t\t\t\t<a className='home-page__link' href={\"/calendar/\"}>\n\t\t\t\t\t\tкалендаре\n\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\tотображены все грядущие релизы из вашего списка. Вы можете подписаться на email уведомления о новых релизах в{\" \"}\n\t\t\t\t\t<a className='home-page__link' href={\"/settings/\"}>\n\t\t\t\t\t\tнастройках\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tРаздел{\" \"}\n\t\t\t\t\t<a className='home-page__link' href={\"/unwatched/\"}>\n\t\t\t\t\t\tнепросмотренное\n\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\tпредназначен для отслеживания непрсмотренных серий ваших сериалов.\n\t\t\t\t</p>\n\t\t\t\t<h3 className='home-page__header-secondary'>Что такое статус контента</h3>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tНа странице фильма, сериала или игры есть блок кнопок, состоящий из различных статусов. При выборе любого статуса, кроме \"Не смотрел\" или \"Не играл\", тайтл добавляется к вам в профиль.\n\t\t\t\t</p>\n\t\t\t\t<p className='home-page__text'>\n\t\t\t\t\tВ зависимости от статуса, тайтл будет по разному восприниматься системой. Например, тайтлы со статусом \"Буду смотреть\" не учитываются при подсчете статистики. Или сериалы со статусом\n\t\t\t\t\t\"Дропнул\" не будут выводиться в разделах Непросмотренное и Календарь.\n\t\t\t\t</p>\n\t\t\t\t<h3 className='home-page__header-secondary'>Зачем нужна подписка на пользователя</h3>\n\t\t\t\t<p className='home-page__text'>После подписки на пользователя вы будете видеть активность всех своих друзей в разделе Профиль, во вкладке Друзья.</p>\n\t\t\t\t<p className='home-page__text'>На странице любого тайтла будут отображены отзывы ваших друзей, если они оценили его ранее.</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default HomePage;\n","import axios from \"axios\";\nimport {BACKEND_URL, REFRESH_TOKEN_URL} from \"../settings\";\n\nconst api = axios.create({\n\tbaseURL: BACKEND_URL,\n});\n\napi.interceptors.request.use((config) => {\n\tconst token = localStorage.getItem('token')\n\tif (token) {\n\t\tconfig.headers.Authorization = `Bearer ${token}`;\n\t}\n\treturn config;\n});\n\napi.interceptors.response.use(\n\t(config) => {\n\t\treturn config;\n\t},\n\tasync (error) => {\n\t\tconst originalRequest = error.config;\n\t\tif (error.response.status === 401 && error.config && !error.config._isRetry) {\n\t\t\toriginalRequest._isRetry = true;\n\t\t\ttry {\n\t\t\t\tconst response = await axios.post(REFRESH_TOKEN_URL, {\n\t\t\t\t\trefresh: localStorage.getItem(\"refreshToken\"),\n\t\t\t\t});\n\t\t\t\tlocalStorage.setItem(\"token\", response.data.access);\n\t\t\t\treturn api.request(originalRequest);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(\"НЕ АВТОРИЗОВАН\");\n\t\t\t}\n\t\t}\n\t\tthrow error;\n\t}\n);\n\nexport default api;\n","import api from \"../http\";\nimport { GET_GAME_URL, SEARCH_GAMES_URL, SEARCH_GAMES_FAST_URL } from \"../settings\";\n\napi.defaults.headers.common = {\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\n};\n\n/**\n * Запрос к бд, получающий информацию об игре\n * @param {string} id ID игры\n */\nexport async function getGame(id: string) {\n\tconst res = await api.get(GET_GAME_URL + id + \"/\");\n\treturn res.data;\n}\n\n/**\n * Запрос на изменение статуса игры\n * @param {object} user_info Статус игры\n * @param {string} gameSlug Слаг игры\n */\nexport async function setGameStatus(gameSlug: string, user_info: any) {\n\tconst res = await api.put(GET_GAME_URL + gameSlug + \"/\", user_info);\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск игр\n * @param {string} query Поисковый запрос\n * @param {int} page Страница поиска\n */\nexport async function searchGames(query: string, page: number, gamesCount: number) {\n\tconst res = await api.get(SEARCH_GAMES_URL, { params: { query: query, page: page, page_size: gamesCount } });\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск локльных игр\n * @param {string} query Поисковый запрос\n */\nexport async function searchGamesFast(query: string) {\n\tconst res = await api.get(SEARCH_GAMES_FAST_URL, { params: { query: query } });\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию об оценках друзей для игры\n * @param {string} slug slug игры\n * @param {int} page страница\n */\nexport async function getGameUserInfo(slug: string) {\n\tconst res = await api.get(GET_GAME_URL + slug + \"/user_info/\");\n\treturn res.data;\n}\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as gameRequests from '../services/gameRequests';\nimport { toast } from 'react-toastify';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface IGameUserInfo {\n\tstatus: string,\n\treview: string,\n\tscore: number,\n\tspent_time: number,\n}\n\nexport interface IGame {\n\tslug: string,\n\t[key: string]: any,\n}\n\nexport interface IGameState {\n\tgame: IGame,\n\tgameState: IPendingState,\n\tuserInfo: IGameUserInfo,\n\tfriendsInfo: any,\n\tuserInfoState: IPendingState,\n\tsetStatusState: IPendingState,\n\tsetStatusToast: any,\n}\n\nclass Game implements IGameState{\n\tgame: IGame = {slug: ''};\n\tgameState = 'done';\n\n\tuserInfo = { status: '', review: '', score: 0, spent_time: 0 };\n\tfriendsInfo = [];\n\tuserInfoState = 'done';\n\n\tsetStatusState = 'done';\n\tsetStatusToast: any;\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\trequestGame = async (id: string) => {\n\t\tthis.gameState = 'pending';\n\t\tgameRequests.getGame(id).then(this.requestGameSuccess, this.requestGameFailure);\n\t};\n\trequestGameSuccess = (result: IGame) => {\n\t\tthis.game = result;\n\t\tthis.gameState = 'done';\n\t};\n\trequestGameFailure = (error: any) => {\n\t\tthis.gameState = 'error: ' + error.response.statusText;\n\t};\n\n\trequestUserInfo = async (slug: string) => {\n\t\tthis.userInfoState = 'pending';\n\t\tgameRequests.getGameUserInfo(slug).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\n\t};\n\trequestUserInfoSuccess = (result: any) => {\n\t\tthis.userInfo = result.user_info;\n\t\tthis.friendsInfo = result.friends_info;\n\t\tthis.userInfoState = 'done';\n\t};\n\trequestUserInfoFailure = (error: string) => {\n\t\tthis.userInfoState = 'error: ' + error;\n\t};\n\n\tsetGameStatus = async (userInfo: IGameUserInfo) => {\n\t\tthis.setStatusState = 'pending';\n\t\tgameRequests.setGameStatus(this.game.slug, userInfo).then(this.setGameStatusSuccess, this.setGameStatusFailure);\n\t};\n\tsetGameStatusSuccess = () => {\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetGameStatusFailure = (error: string) => {\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tsetGameReview = async (userInfo: IGameUserInfo) => {\n\t\tthis.setStatusState = 'pendingReview';\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\n\t\tgameRequests.setGameStatus(this.game.slug, userInfo).then(this.setGameReviewSuccess, this.setGameReviewFailure);\n\t};\n\tsetGameReviewSuccess = () => {\n\t\ttoast.update(this.setStatusToast, { render: 'Отзыв сохранен!', type: toast.TYPE.SUCCESS, autoClose: 1000 });\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetGameReviewFailure = (error: string) => {\n\t\ttoast.update(this.setStatusToast, { render: 'Ошибка сохранения отзыва!', type: toast.TYPE.ERROR, autoClose: 1000 });\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tget anyError() {\n\t\tif (this.gameState.startsWith('error:')) return this.gameState;\n\t\tif (this.userInfoState.startsWith('error:')) return this.userInfoState;\n\t\treturn null;\n\t}\n}\n\nconst GameStore = new Game();\n//export default remotedev(GameStore, { name: 'Game' });\nexport default GameStore;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport \"./status-button-group.sass\";\n\nfunction StatusButtonGroup({ statuses, onChangeStatus, userStatus, className }) {\n\treturn (\n\t\t<div className={classnames(\"content-statuses\", className)}>\n\t\t\t{statuses.map((status, counter) => (\n\t\t\t\t<button\n\t\t\t\t\tclassName={classnames(\"content-statuses__content-status\", userStatus === status ? \"content-statuses__content-status_active\" : \"\")}\n\t\t\t\t\tkey={status}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tonChangeStatus(status);\n\t\t\t\t\t}}>\n\t\t\t\t\t{status}\n\t\t\t\t</button>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default StatusButtonGroup;\n","import StatusButtonGroup from \"./StatusButtonGroup\";\n\nexport default StatusButtonGroup;\n","import React from \"react\";\nimport { FaStar, FaRegStar, FaEyeSlash, FaEye } from \"react-icons/fa\";\nimport Rating from \"react-rating\";\n\nfunction RatingBlock({ initialRating, readonly, onChange, className, withEye }) {\n\treturn (\n\t\t<Rating\n\t\t\tstart={withEye ? -1 : 0}\n\t\t\tstop={10}\n\t\t\temptySymbol={(withEye ? [<FaEyeSlash />] : []).concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <FaRegStar />))}\n\t\t\tfullSymbol={(withEye ? [<FaEye />] : []).concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <FaStar title={n} />))}\n\t\t\tinitialRating={initialRating}\n\t\t\treadonly={readonly}\n\t\t\tonChange={onChange}\n\t\t\tclassName={className}\n\t\t\tquiet\n\t\t/>\n\t);\n}\n\nexport default RatingBlock;\n","import Rating from \"./Rating\";\n\nexport default Rating;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport classnames from \"classnames\";\nimport Rating from '../../../Rating';\nimport \"./friend-activity.sass\";\n\nfunction FriendActivity({ info, className }) {\n\tlet history = useHistory();\n\n\treturn (\n\t\t<div className={classnames(\"friend-activity\", className)}>\n\t\t\t<h5 className='friend-activity__user'>\n\t\t\t\t<a\n\t\t\t\t\thref={window.location.origin + \"/user/\" + info.user.id}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\thistory.push(\"/user/\" + info.user.id);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}}>\n\t\t\t\t\t{info.user.username}\n\t\t\t\t</a>\n\t\t\t</h5>\n\t\t\t<div className='friend-activity__info'>\n\t\t\t\t<Rating initialRating={info.score} className='friend-activity__info-text' readonly={true} />\n\t\t\t\t<p className='friend-activity__info-text'>Статус: {info.status} </p>\n\t\t\t\t<p className='friend-activity__info-text' hidden={!info.spent_time}>\n\t\t\t\t\tВремя проходения: {info.spent_time} {intToHours(info.spent_time)}\n\t\t\t\t</p>\n\t\t\t\t<p className='friend-activity__info-text' hidden={info.review === \"\"}>\n\t\t\t\t\tОтзыв: {info.review}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction intToHours(number) {\n\tif (11 <= number && number <= 14) return \"часов\";\n\telse if (number % 10 === 1) return \"час\";\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\n\telse return \"часов\";\n}\n\nexport default FriendActivity;\n","import FriendActivity from \"./FriendActivity\";\n\nexport default FriendActivity;\n","import React from \"react\";\nimport FriendActivity from \"./views/FriendActivity\";\n\nfunction FriendsActivity({ info }) {\n\treturn (\n\t\t<div className='friends-activity'>\n\t\t\t{info?.map((friendInfo) => (\n\t\t\t\t<FriendActivity info={friendInfo} key={friendInfo.user.id} className='friends-activity__element' />\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default FriendsActivity;\n","import FriendsActivity from \"./FriendsActivity\";\n\nexport default FriendsActivity;\n","import React from \"react\";\nimport { MdAccessTime } from \"react-icons/md\";\nimport \"./time-to-beat.sass\";\n\nfunction TimeToBeat({ hltbInfo }) {\n\tif (!hltbInfo) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<div className='time-to-beat' hidden={!hltbInfo || hltbInfo === \"0 часов\" || (hltbInfo?.gameplay_main < 0 && hltbInfo?.gameplay_main_extra < 0 && hltbInfo?.gameplay_completionist < 0)}>\n\t\t\t<p className='time-to-beat__element'>Время прохождения: </p>\n\t\t\t<div hidden={hltbInfo?.gameplay_main === -1} className='time-to-beat__element'>\n\t\t\t\t<MdAccessTime className='time-to-beat__icon time-to-beat__icon_green' title={\"Главный сюжет\"} />\n\t\t\t\t{hltbInfo?.gameplay_main} {hltbInfo?.gameplay_main_unit}\n\t\t\t</div>\n\t\t\t<div hidden={hltbInfo?.gameplay_main_extra === -1} className='time-to-beat__element'>\n\t\t\t\t<MdAccessTime className='time-to-beat__icon time-to-beat__icon_yellow' title={\"Главный сюжет + побочные задания\"} />\n\t\t\t\t{hltbInfo?.gameplay_main_extra} {hltbInfo?.gameplay_main_extra_unit}\n\t\t\t</div>\n\t\t\t<div hidden={!hltbInfo || hltbInfo?.gameplay_completionist === -1} className='time-to-beat__element'>\n\t\t\t\t<MdAccessTime className='time-to-beat__icon time-to-beat__icon_red' title={\"Полное прохождение\"} />\n\t\t\t\t{hltbInfo?.gameplay_completionist} {hltbInfo?.gameplay_completionist_unit}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default TimeToBeat;\n","import TimeToBeat from \"./TimeToBeat\";\n\nexport default TimeToBeat;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport \"./score-block.sass\";\n\nfunction ScoreBlock({ score, text, className }) {\n\tfunction getColor(score) {\n\t\tswitch (true) {\n\t\t\tcase score >= 80:\n\t\t\t\treturn \"green\";\n\t\t\tcase score >= 60 && score < 80:\n\t\t\t\treturn \"yellow\";\n\t\t\tcase score < 60:\n\t\t\t\treturn \"red\";\n\t\t\tdefault:\n\t\t\t\treturn \"green\";\n\t\t}\n\t}\n\n\treturn (\n\t\t<div hidden={!score} className={classnames(\"score-block\", className)}>\n\t\t\t<div className={classnames(\"score-block__body\", \"score-block__body_\" + getColor(score))}>\n\t\t\t\t<p>{score}</p>\n\t\t\t</div>\n\t\t\t<p className='score-block__text'>{text}</p>\n\t\t</div>\n\t);\n}\n\nexport default ScoreBlock;\n","import ScoreBlock from \"./ScoreBlock\";\n\nexport default ScoreBlock;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport \"./input-number.sass\";\n\nfunction InputNumber({ value, max, min, onChange, className, dataList }) {\n\treturn (\n\t\t<div className={classnames(\"input-number\", className)}>\n\t\t\t<button\n\t\t\t\tclassName='input-number__minus'\n\t\t\t\tonClick={() => {\n\t\t\t\t\tif (!min || parseFloat(value) > min + 1) onChange(parseFloat(value) - 1);\n\t\t\t\t}}>\n\t\t\t\t-\n\t\t\t</button>\n\t\t\t<input\n\t\t\t\ttype='number'\n\t\t\t\tvalue={value}\n\t\t\t\tmax={max ? max : \"\"}\n\t\t\t\tmin={min ? min : \"\"}\n\t\t\t\tonChange={(event) => {\n\t\t\t\t\tif ((!min || event.target.value > min) && (!max || event.target.value < max)) onChange(parseFloat(event.target.value));\n\t\t\t\t}}\n\t\t\t\tclassName='input-number__input'\n\t\t\t\tstyle={{ width: `${value.toString().length * 15}px` }}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclassName='input-number__plus'\n\t\t\t\tonClick={() => {\n\t\t\t\t\tif (!max || value < max - 1) onChange(parseFloat(value) + 1);\n\t\t\t\t}}>\n\t\t\t\t+\n\t\t\t</button>\n\t\t\t<div className='input-number__hints'>\n\t\t\t\t{dataList?.map((data, counter) => (\n\t\t\t\t\t<div key={counter} onClick={() => onChange(parseFloat(data))} className='input-number__hint'>\n\t\t\t\t\t\t{data}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default InputNumber;\n","import InputNumber from \"./InputNumber\";\n\nexport default InputNumber;\n","import GamePage from \"./GamePage\";\n\nexport default GamePage;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport { toast } from \"react-toastify\";\n\nimport GameStore from '../../store/GameStore';\nimport AuthStore from '../../store/AuthStore';\nimport PagesStore from '../../store/PagesStore';\nimport StatusButtonGroup from '../../shared/StatusButtonGroup';\nimport FriendsActivity from '../../shared/FriendsActivity';\nimport TimeToBeat from './views/TimeToBeat';\nimport ScoreBlock from '../../shared/ScoreBlock';\nimport Rating from '../../shared/Rating';\nimport InputNumber from '../../shared/InputNumber';\n\nimport \"./game-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst GamePage = observer((props) => {\n\tconst { game, gameState, requestGame, setGameStatus, setGameReview, userInfo, friendsInfo, userInfoState, requestUserInfo, anyError } = GameStore;\n\tconst { loggedIn } = AuthStore;\n\tconst { openLoginForm } = PagesStore;\n\n\tlet { id } = useParams();\n\tconst [review, setReview] = useState(\"\");\n\tconst [spentTime, setSpentTime] = useState(\"\");\n\tconst [userStatus, setUserStatus] = useState(\"Не играл\");\n\tconst [userRate, setUserRate] = useState(0);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetClearUI();\n\t\t\trequestGame(id);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[id, requestGame]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestUserInfo(id);\n\t\t\telse {\n\t\t\t\tsetClearUI();\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[id, loggedIn]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = game?.name || 'Interests';\n\t}, [game]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (userInfo?.status) {\n\t\t\t\tsetReview(userInfo.review);\n\t\t\t\tsetSpentTime(userInfo.spent_time);\n\t\t\t\tsetUserStatus(userInfo.status);\n\t\t\t\tsetUserRate(userInfo.score);\n\t\t\t} else {\n\t\t\t\tsetClearUI();\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userInfo]\n\t);\n\n\tuseEffect(() => {\n\t\tif (anyError) toast.error(anyError);\n\t}, [anyError]);\n\n\tfunction setClearUI() {\n\t\tsetReview(\"\");\n\t\tsetSpentTime(\"\");\n\t\tsetUserStatus(\"Не играл\");\n\t\tsetUserRate(0);\n\t}\n\n\tfunction strToFloat(text) {\n\t\tif (typeof text === 'number') {\n\t\t\treturn text.toFixed(1);\n\t\t}\n\t\tlet cleanStr = text;\n\t\tif (cleanStr && cleanStr !== -1) {\n\t\t\tif (cleanStr.indexOf(\"½\") + 1) {\n\t\t\t\treturn parseFloat(cleanStr) + 0.5\n\t\t\t} else {\n\t\t\t\treturn parseFloat(cleanStr).toFixed(1);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction hltbToDatalist(hltbInfo) {\n\t\tlet newData = [];\n\t\tif (!(!hltbInfo || hltbInfo === \"0 часов\" || hltbInfo?.gameplay_main === -1)) {\n\t\t\tif (typeof hltbInfo === 'string') {\n\t\t\t\tnewData.push(strToFloat(hltbInfo));\n\t\t\t} else {\n\t\t\t\tnewData.push(strToFloat(hltbInfo?.gameplay_main));\n\t\t\t}\n\t\t}\n\t\tif (hltbInfo?.gameplay_main_extra !== -1) {\n\t\t\tnewData.push(strToFloat(hltbInfo?.gameplay_main_extra));\n\t\t}\n\t\tif (hltbInfo?.gameplay_completionist !== -1) {\n\t\t\tnewData.push(strToFloat(hltbInfo?.gameplay_completionist));\n\t\t}\n\t\treturn newData;\n\t}\n\n\treturn (\n\t\t<div className='game-page'>\n\t\t\t<div style={{ backgroundImage: `url(${game.background})` }} className='game-page__background' />\n\t\t\t<LoadingOverlay active={gameState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='game-page__body'>\n\t\t\t\t\t<div className='game-page__header'>\n\t\t\t\t\t\t<div className='game-page__poster'>\n\t\t\t\t\t\t\t<img src={game.poster} className='img-fluid' alt='' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='game-page__info'>\n\t\t\t\t\t\t\t<h1 className='game-page__info-header'>{game.name}</h1>\n\t\t\t\t\t\t\t<div className='game-page__info-body'>\n\t\t\t\t\t\t\t\t<p>Разработчики: {game.developers}</p>\n\t\t\t\t\t\t\t\t<p>Дата релиза: {game.release_date}</p>\n\t\t\t\t\t\t\t\t<p>Жанр: {game.genres}</p>\n\t\t\t\t\t\t\t\t<p>Платформы: {game.platforms}</p>\n\t\t\t\t\t\t\t\t<TimeToBeat hltbInfo={game.hltb || game.playtime} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не играл\")}\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\t\tsetGameStatus({ score: score });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName='game-page__rating'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<StatusButtonGroup\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не играл\", \"Буду играть\", \"Играю\", \"Дропнул\", \"Прошел\"]}\n\t\t\t\t\t\t\t\t\tclassName='game-page__info-statuses'\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ status: status });\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не играл\") {\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t<ScoreBlock score={game.metacritic} text='Metascore' className='game-page__info-score' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='game-page__overview'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{/* <video width='800' height='450' controls='controls' poster={game.rawg?.clip?.preview} src={game.rawg?.clip?.clip} type='video' /> */}\n\t\t\t\t\t\t\t<h3 className='game-page__overview-header'>Описание</h3>\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: game.overview }} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h3 className='game-page__review-header'>Отзыв</h3>\n\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t<div className='game-page__review-body' hidden={!loggedIn}>\n\t\t\t\t\t\t\t\t<div className='game-page__review'>\n\t\t\t\t\t\t\t\t\tВаш отзыв\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='game-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} />\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className='game-page__review-time'>\n\t\t\t\t\t\t\t\t\tВремя прохождения (часы)\n\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\tclassName='game-page__time-input'\n\t\t\t\t\t\t\t\t\t\tvalue={spentTime}\n\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\tmax={100000}\n\t\t\t\t\t\t\t\t\t\tonChange={(value) => setSpentTime(value)}\n\t\t\t\t\t\t\t\t\t\tdataList={hltbToDatalist(game.hltb)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName='game-page__review-save-button'\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не играл\")}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetGameReview({ review: review, spent_time: spentTime });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t<div className='game-page__friends' hidden={!loggedIn | (friendsInfo?.length < 1)}>\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default GamePage;\n","import api from \"../http\";\nimport { SEARCH_MOVIES_URL, SEARCH_MOVIES_FAST_URL, GET_MOVIE_URL } from \"../settings\";\n\n/**\n * Запрос к бд, получающий информацию о фильме\n * @param {number} id ID фильма\n */\nexport async function getMovie(id) {\n\tconst res = await api.get(GET_MOVIE_URL + id + \"/\");\n\treturn res.data;\n}\n\n/**\n * Запрос на изменение статуса фильма\n * @param {object} user_info Статус фильма\n * @param {string} movieID ID фильма\n */\nexport async function setMovieStatus(id, user_info) {\n\tconst res = await api.put(GET_MOVIE_URL + id + \"/\", user_info);\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск фильмов\n * @param {string} query Поисковый запрос\n * @param {int} page Страница поиска\n */\nexport async function searchMovies(query, page) {\n\tconst res = await api.get(SEARCH_MOVIES_URL, { params: { query: query, page: page } });\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск локальных фильмов\n * @param {string} query Поисковый запрос\n */\nexport async function searchMoviesFast(query) {\n\tconst res = await api.get(SEARCH_MOVIES_FAST_URL, { params: { query: query } });\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию об оценках друзей для фильма\n * @param {number} id id фильма\n */\nexport async function getMovieUserInfo(id) {\n\tconst res = await api.get(GET_MOVIE_URL + id + \"/user_info/\");\n\treturn res.data;\n}\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as movieRequests from '../services/movieRequests';\nimport { toast } from 'react-toastify';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface IMovieUserInfo {\n\tstatus: string,\n\treview: string,\n\tscore: number,\n\tspent_time: number,\n}\n\nexport interface IMovie {\n\tid?: number,\n\t[key: string]: any,\n}\n\nexport interface IMovieState {\n\tmovie: IMovie | undefined,\n\tmovieState: IPendingState,\n\tuserInfo: IMovieUserInfo | undefined,\n\tfriendsInfo: any,\n\tuserInfoState: IPendingState,\n\tsetStatusState: IPendingState,\n\tsetStatusToast: any,\n}\n\nclass Movie implements IMovieState {\n\tmovie: IMovie | undefined;\n\tmovieState = 'done';\n\n\tuserInfo: IMovieUserInfo | undefined;\n\tfriendsInfo = [];\n\tuserInfoState = 'done';\n\n\tsetStatusState = 'done';\n\tsetStatusToast: any;\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\trequestMovie = async (id: number) => {\n\t\tthis.movieState = 'pending';\n\t\tmovieRequests.getMovie(id).then(this.requestMovieSuccess, this.requestMovieFailure);\n\t};\n\trequestMovieSuccess = (result: IMovie) => {\n\t\tthis.movie = result;\n\t\tthis.movieState = 'done';\n\t};\n\trequestMovieFailure = (error: string) => {\n\t\tthis.movieState = 'error: ' + error;\n\t};\n\n\trequestUserInfo = async (id: number) => {\n\t\tthis.userInfoState = 'pending';\n\t\tmovieRequests.getMovieUserInfo(id).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\n\t};\n\trequestUserInfoSuccess = (result: any) => {\n\t\tthis.userInfo = result.user_info;\n\t\tthis.friendsInfo = result.friends_info;\n\t\tthis.userInfoState = 'done';\n\t};\n\trequestUserInfoFailure = (error: string) => {\n\t\tthis.userInfoState = 'error: ' + error;\n\t};\n\n\tsetMovieStatus = async (userInfo: IMovieUserInfo) => {\n\t\tthis.setStatusState = 'pending';\n\t\tmovieRequests.setMovieStatus(this.movie?.id, userInfo).then(this.setMovieStatusSuccess, this.setMovieStatusFailure);\n\t};\n\tsetMovieStatusSuccess = () => {\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetMovieStatusFailure = (error: string) => {\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tsetMovieReview = async (userInfo: IMovieUserInfo) => {\n\t\tthis.setStatusState = 'pendingReview';\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\n\t\tmovieRequests.setMovieStatus(this.movie?.id, userInfo).then(this.setMovieReviewSuccess, this.setMovieReviewFailure);\n\t};\n\tsetMovieReviewSuccess = () => {\n\t\ttoast.update(this.setStatusToast, { render: 'Отзыв сохранен!', type: toast.TYPE.SUCCESS, autoClose: 1000 });\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetMovieReviewFailure = (error: string) => {\n\t\ttoast.update(this.setStatusToast, { render: 'Ошибка сохранения отзыва!', type: toast.TYPE.ERROR, autoClose: 1000 });\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tget anyError() {\n\t\tif (this.movieState.startsWith('error:')) return this.movieState;\n\t\tif (this.userInfoState.startsWith('error:')) return this.userInfoState;\n\t\treturn null;\n\t}\n}\n\nconst MovieStore = new Movie();\n//export default remotedev(MovieStore, { name: 'Movie' });\nexport default MovieStore;\n","import MoviePage from \"./MoviePage\";\n\nexport default MoviePage;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport ReactPlayer from \"react-player/youtube\";\nimport { Carousel } from \"react-responsive-carousel\";\nimport { observer } from \"mobx-react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport { toast } from \"react-toastify\";\n\nimport MovieStore from '../../store/MovieStore';\nimport AuthStore from '../../store/AuthStore';\nimport PagesStore from '../../store/PagesStore';\nimport StatusButtonGroup from '../../shared/StatusButtonGroup';\nimport FriendsActivity from '../../shared/FriendsActivity';\nimport ScoreBlock from '../../shared/ScoreBlock';\nimport Rating from '../../shared/Rating';\n\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\nimport \"./movie-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst MoviePage = observer((props) => {\n\tconst { movie, movieState, requestMovie, setMovieStatus, setMovieReview, userInfo, friendsInfo, userInfoState, requestUserInfo, anyError } = MovieStore;\n\tconst { loggedIn } = AuthStore;\n\tconst { openLoginForm } = PagesStore;\n\n\tlet { id } = useParams();\n\tconst [review, setReview] = useState(\"\");\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\n\tconst [userRate, setUserRate] = useState(0);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetReview(\"\");\n\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\tsetUserRate(0);\n\t\t\trequestMovie(id);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[id, requestMovie]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestUserInfo(id);\n\t\t\telse {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(0);\n\t\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn, id]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = movie?.name || 'Interests';\n\t}, [movie]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (userInfo?.status) {\n\t\t\t\tsetReview(userInfo.review);\n\t\t\t\tsetUserStatus(userInfo.status);\n\t\t\t\tsetUserRate(userInfo.score);\n\t\t\t} else {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(0);\n\t\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userInfo]\n\t);\n\n\tuseEffect(() => {\n\t\tif (anyError) toast.error(anyError);\n\t}, [anyError]);\n\n\tconst renderVideo = (video, index) => (\n\t\t<div className='movie-page__trailer'>\n\t\t\t<ReactPlayer url={video.url} controls key={index} className='movie-page__trailer-player' />\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className='movie-page'>\n\t\t\t<div className='movie-page__background' style={{ backgroundImage: `url(${movie?.backdrop_path})` }} />\n\t\t\t<LoadingOverlay active={movieState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='movie-page__body'>\n\t\t\t\t\t<div className='movie-page__header'>\n\t\t\t\t\t\t<div className='movie-page__poster'>\n\t\t\t\t\t\t\t<img src={movie?.poster_path} className='movie-page__poster-img' alt='' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='movie-page__info'>\n\t\t\t\t\t\t\t<h1 className='movie-page__info-header'>{movie?.name}</h1>\n\t\t\t\t\t\t\t<h5 className='movie-page__info-subheader'>{movie?.original_name}</h5>\n\t\t\t\t\t\t\t<div className='movie-page__info-body'>\n\t\t\t\t\t\t\t\t<p>Дата релиза: {movie?.release_date}</p>\n\t\t\t\t\t\t\t\t<p>Продолжительность (мин): {movie?.runtime}</p>\n\t\t\t\t\t\t\t\t<p>Жанр: {movie?.genres}</p>\n\t\t\t\t\t\t\t\t<p>Компания: {movie?.production_companies}</p>\n\t\t\t\t\t\t\t\t<p>Слоган: {movie?.tagline}</p>\n\t\t\t\t\t\t\t\t<p>В ролях: {movie?.cast}</p>\n\t\t\t\t\t\t\t\t<p>Режиссер: {movie?.directors}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ score: score });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName='movie-page__rating'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<StatusButtonGroup\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Дропнул\", \"Посмотрел\"]}\n\t\t\t\t\t\t\t\t\tclassName='movie-page__info-statuses'\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ status: status });\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t<ScoreBlock score={movie?.score} text='TMDB score' className='movie-page__info-score' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Carousel className='movie-page__trailers' showArrows centerMode centerSlidePercentage={50} showThumbs={false} showStatus={false} showIndicators={false}>\n\t\t\t\t\t\t{movie?.videos?.map(renderVideo)}\n\t\t\t\t\t</Carousel>\n\t\t\t\t\t<div className='movie-page__overview'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 className='game-page__overview-header'>Описание</h3>\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: movie?.overview }} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h3 className='movie-page__review-header'>Отзыв</h3>\n\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t<div className='game-page__review-body' hidden={!loggedIn}>\n\t\t\t\t\t\t\t\t<div className='movie-page__review'>\n\t\t\t\t\t\t\t\t\tВаш отзыв\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='movie-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName='movie-page__review-save-button'\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetMovieReview({ review: review });\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t<div className='movie-page__friends' hidden={!loggedIn || friendsInfo?.length < 1}>\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default MoviePage;\n","import api from \"../http\";\nimport { SEARCH_SHOWS_URL, SEARCH_SHOWS_FAST_URL, GET_SHOW_URL, GET_UNWATCHED_EPISODES_URL } from \"../settings\";\n\n/**\n * Запрос к бд, получающий информацию о сериале\n * @param {number} id ID сериала\n */\nexport async function getShow(id) {\n\tconst res = await api.get(GET_SHOW_URL + id + \"/\");\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию о сезоне сериала\n * @param {number} showID ID сериала\n *  * @param {number} seasonNumber номер сезона\n */\nexport async function getShowSeason(showID, seasonNumber) {\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\");\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию о серии сериала\n * @param {number} showID ID сериала\n * @param {number} seasonNumber номер сезона\n * @param {number} episodeNumber номер эпизода\n */\nexport async function getShowEpisode(showID, seasonNumber, episodeNumber) {\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber + \"/\");\n\treturn res.data;\n}\n\nexport async function setShowStatus(id, user_info) {\n\tconst res = await api.put(GET_SHOW_URL + id + \"/\", user_info);\n\treturn res.data;\n}\n\n/**\n * Запрос на изменение статуса сезона сериала\n * @param {object} user_info Статус сезона сериала\n * @param {number} showID ID сериала\n *  * @param {number} seasonNumber номер сезона\n */\nexport async function setShowSeasonStatus(showID, seasonNumber, user_info) {\n\tconst res = await api.put(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\", user_info);\n\treturn res.data;\n}\n\n/**\n * Запрос на изменение статуса сезона сериала\n * @param {object} episodesList Список объектов эпизодов\n * @param {number} showID ID сериала\n */\nexport async function setShowEpisodesStatus(showID, episodesList) {\n\tconst res = await api.put(GET_SHOW_URL + showID + \"/episodes/\", episodesList);\n\treturn res;\n}\n\n/**\n * Запрос на поиск сериалов\n * @param {string} query Поисковый запрос\n * @param {int} page Страница поиска\n */\nexport async function searchShows(query, page) {\n\tconst res = await api.get(SEARCH_SHOWS_URL, { params: { query: query, page: page } });\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск локальных сериалов\n * @param {string} query Поисковый запрос\n */\nexport async function searchShowsFast(query) {\n\tconst res = await api.get(SEARCH_SHOWS_FAST_URL, { params: { query: query } });\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию об оценках друзей для сериала\n * @param {number} showID id сериала\n */\nexport async function getShowUserInfo(showID) {\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/user_info/\");\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию об оценках друзей для сезона сериала\n * @param {number} showID id сериала\n */\nexport async function getShowSeasonUserInfo(showID, seasonID) {\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/user_info/\");\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию об оценках друзей для эпизода сериала\n * @param {number} showID id сериала\n * @param {int} page страница\n */\nexport async function getShowEpisodeUserInfo(showID, seasonID, episodeID) {\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/episode/\" + episodeID + \"/user_info/\");\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий информацию о сериале\n */\nexport async function getUnwatchedEpisodes() {\n\tconst res = await api.get(GET_UNWATCHED_EPISODES_URL);\n\treturn res.data;\n}\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as showRequests from '../services/showRequests';\nimport { toast } from 'react-toastify';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface IShowUserInfo {\n\tstatus: string,\n\treview: string,\n\tscore: number,\n\tspent_time: number,\n}\n\nexport interface IShow {\n\tid?: number,\n\t[key: string]: any,\n}\n\nexport interface IShowState {\n\tshow: IShow | undefined,\n\tshowState: IPendingState,\n\tuserInfo: IShowUserInfo | undefined,\n\tfriendsInfo: any,\n\tuserInfoState: IPendingState,\n\n\tshowSeasons: any,\n\tshowSeasonsState: {[key: string]: IPendingState},\n\tshowSeasonsUserInfo: any,\n\tshowSeasonsUserInfoState: {[key: string]: IPendingState};\n\n\tsetStatusState: IPendingState,\n\tsetStatusToast: any,\n}\n\nclass Show implements IShowState {\n\tshow: IShow | undefined;\n\tshowState: IPendingState = 'done';\n\tuserInfo: IShowUserInfo | undefined;\n\tfriendsInfo = [];\n\tuserInfoState: IPendingState = 'done';\n\n\tshowSeasons: any = {};\n\tshowSeasonsState: {[key: string]: IPendingState} = {};\n\tshowSeasonsUserInfo: any = {};\n\tshowSeasonsUserInfoState: {[key: string]: IPendingState} = {};\n\n\tsetStatusState: IPendingState = 'done';\n\tsetStatusToast: any;\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\trequestShow = async (id: number) => {\n\t\tthis.showState = 'pending';\n\t\tshowRequests.getShow(id).then(this.requestShowSuccess, this.requestShowFailure);\n\t};\n\trequestShowSuccess = (result: IShow) => {\n\t\tthis.show = result;\n\t\tthis.showState = 'done';\n\t};\n\trequestShowFailure = (error: string) => {\n\t\tthis.showState = 'error: ' + error;\n\t};\n\n\trequestSeason = async (showID: number, seasonNumber: number) => {\n\t\tthis.showState = 'pending';\n\t\tshowRequests.getShowSeason(showID, seasonNumber).then(this.requestSeasonSuccess, this.requestSeasonFailure);\n\t};\n\trequestSeasonSuccess = (result: IShow) => {\n\t\tthis.show = result;\n\t\tthis.showState = 'done';\n\t};\n\trequestSeasonFailure = (error: any) => {\n\t\tthis.showState = 'error: ' + error;\n\t};\n\n\trequestSeasons = async (showID: number, seasonNumber: number) => {\n\t\tthis.showSeasonsState[seasonNumber] = 'pending';\n\t\tthis.showSeasons[seasonNumber] = {};\n\t\tshowRequests.getShowSeason(showID, seasonNumber).then(\n\t\t\t(res) => this.requestSeasonsSuccess(res, seasonNumber),\n\t\t\t(res) => this.requestSeasonsFailure(res, seasonNumber)\n\t\t);\n\t};\n\trequestSeasonsSuccess = (result: IShow, seasonNumber: number) => {\n\t\tthis.showSeasons[seasonNumber] = result;\n\t\tthis.showSeasonsState[seasonNumber] = 'done';\n\t};\n\trequestSeasonsFailure = (error: string, seasonNumber: number) => {\n\t\tthis.showSeasonsState[seasonNumber] = 'error: ' + error;\n\t};\n\n\trequestEpisode = async (showID: number, seasonNumber: number, episodeNumber: number) => {\n\t\tthis.showState = 'pending';\n\t\tshowRequests.getShowEpisode(showID, seasonNumber, episodeNumber).then(this.requestEpisodeSuccess, this.requestEpisodeFailure);\n\t};\n\trequestEpisodeSuccess = (result: IShow) => {\n\t\tthis.show = result;\n\t\tthis.showState = 'done';\n\t};\n\trequestEpisodeFailure = (error: string) => {\n\t\tthis.showState = 'error: ' + error;\n\t};\n\n\trequestShowUserInfo = async (id: number) => {\n\t\tthis.userInfoState = 'pending';\n\t\tshowRequests.getShowUserInfo(id).then(this.requestShowUserInfoSuccess, this.requestShowUserInfoFailure);\n\t};\n\trequestShowUserInfoSuccess = (result: any) => {\n\t\tthis.userInfo = result.user_info;\n\t\tthis.friendsInfo = result.friends_info;\n\t\tthis.userInfoState = 'done';\n\t};\n\trequestShowUserInfoFailure = (error: string) => {\n\t\tthis.userInfoState = 'error: ' + error;\n\t};\n\n\trequestSeasonUserInfo = async (showID: number, seasonID: number) => {\n\t\tthis.userInfoState = 'pending';\n\t\tshowRequests.getShowSeasonUserInfo(showID, seasonID).then(this.requestSeasonUserInfoSuccess, this.requestSeasonUserInfoFailure);\n\t};\n\trequestSeasonUserInfoSuccess = (result: any) => {\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info };\n\t\tthis.friendsInfo = result.friends_info;\n\t\tthis.userInfoState = 'done';\n\t};\n\trequestSeasonUserInfoFailure = (error: string) => {\n\t\tthis.userInfoState = 'error: ' + error;\n\t};\n\n\trequestSeasonsUserInfo = async (showID: number, seasonID: number) => {\n\t\tthis.showSeasonsUserInfo[seasonID] = {};\n\t\tthis.showSeasonsUserInfoState[seasonID] = 'pending';\n\t\tshowRequests.getShowSeasonUserInfo(showID, seasonID).then(\n\t\t\t(res) => this.requestSeasonsUserInfoSuccess(res, seasonID),\n\t\t\t(res) => this.requestSeasonsUserInfoFailure(res, seasonID)\n\t\t);\n\t};\n\trequestSeasonsUserInfoSuccess = (result: any, seasonID: number) => {\n\t\tthis.showSeasonsUserInfoState[seasonID] = 'done';\n\t\tthis.showSeasonsUserInfo[seasonID] = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\n\t};\n\trequestSeasonsUserInfoFailure = (error: string, seasonID: number) => {\n\t\tthis.showSeasonsUserInfoState[seasonID] = 'error: ' + error;\n\t};\n\n\trequestEpisodeUserInfo = async (showID: number, seasonID: number, episodeID: number) => {\n\t\tthis.userInfoState = 'pending';\n\t\tshowRequests.getShowEpisodeUserInfo(showID, seasonID, episodeID).then(this.requestEpisodeUserInfoSuccess, this.requestEpisodeUserInfoFailure);\n\t};\n\trequestEpisodeUserInfoSuccess = (result: any) => {\n\t\tthis.userInfoState = 'done';\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show };\n\t\tthis.friendsInfo = result.friends_info;\n\t};\n\trequestEpisodeUserInfoFailure = (error: string) => {\n\t\tthis.userInfoState = 'error: ' + error;\n\t};\n\n\tsetShowStatus = async (userInfo: IShowUserInfo) => {\n\t\tthis.setStatusState = 'pending';\n\t\tshowRequests.setShowStatus(this.show?.id, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\n\t};\n\tsetShowStatusSuccess = () => {\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetShowStatusFailure = (error: string) => {\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tsetShowReview = async (userInfo: IShowUserInfo) => {\n\t\tthis.setStatusState = 'pendingReview';\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\n\t\tshowRequests.setShowStatus(this.show?.id, userInfo).then(this.setShowReviewSuccess, this.setShowReviewFailure);\n\t};\n\tsetShowReviewSuccess = () => {\n\t\ttoast.update(this.setStatusToast, { render: 'Отзыв сохранен!', type: toast.TYPE.SUCCESS, autoClose: 1000 });\n\t\tthis.setStatusState = 'done';\n\t};\n\tsetShowReviewFailure = (error: string) => {\n\t\ttoast.update(this.setStatusToast, { render: 'Ошибка сохранения отзыва!', type: toast.TYPE.ERROR, autoClose: 1000 });\n\t\tthis.setStatusState = 'error: ' + error;\n\t};\n\n\tsetSeasonStatus = async (userInfo: IShowUserInfo, showID: number, seasonNumber: number) => {\n\t\tthis.setStatusState = 'pending';\n\t\tshowRequests.setShowSeasonStatus(showID, seasonNumber, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\n\t};\n\tsetSeasonReview = async (userInfo: IShowUserInfo, showID: number, seasonNumber: number) => {\n\t\tthis.setStatusState = 'pendingReview';\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\n\t\tshowRequests.setShowSeasonStatus(showID, seasonNumber, userInfo).then(this.setShowReviewSuccess, this.setShowReviewFailure);\n\t};\n\n\tsetEpisodesStatus = async (episodesList: any, showID: number, seasonsToUpdate = []) => {\n\t\tthis.setStatusState = 'pending';\n\t\tshowRequests.setShowEpisodesStatus(showID, episodesList).then((result) => {\n\t\t\tif (seasonsToUpdate) for (let season in seasonsToUpdate) this.requestSeasonsUserInfo(showID, seasonsToUpdate[season]);\n\t\t\tthis.setShowStatusSuccess();\n\t\t}, this.setShowStatusFailure);\n\t};\n\n\tgetShowSeason = (seasonNumber: number) => {\n\t\treturn this.showSeasons[seasonNumber];\n\t};\n\n\tgetShowSeasonState = (seasonNumber: number) => {\n\t\treturn this.showSeasonsState[seasonNumber];\n\t};\n\n\tgetShowSeasonUserInfo = (seasonNumber: number) => {\n\t\treturn this.showSeasonsUserInfo[seasonNumber];\n\t};\n\n\tgetEpisodesUserInfo = (season: number, id: number) => {\n\t\tfor (let episodeNumber in this.showSeasonsUserInfo[season].episodes) {\n\t\t\tlet episode = this.showSeasonsUserInfo[season].episodes[episodeNumber];\n\t\t\tif (episode.tmdb_id === id) return episode;\n\t\t}\n\t\treturn null;\n\t};\n\n\tget anySeasonLoading() {\n\t\tfor (let season in this.showSeasonsState) if (this.showSeasonsState[season] === 'pending') return true;\n\t\treturn false;\n\t}\n\n\tget anyError() {\n\t\tif (this.showState.startsWith('error:')) return this.showState;\n\t\tif (this.userInfoState.startsWith('error:')) return this.userInfoState;\n\t\tif (this.setStatusState.startsWith('error:')) return this.setStatusState;\n\t\treturn null;\n\t}\n}\n\nconst ShowStore = new Show();\n//export default remotedev(ShowStore, { name: 'Show' });\nexport default ShowStore;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Rating from '../Rating';\n\nimport \"./detail-episode-row.sass\";\n\nfunction DetailEpisodeRow({ episode, showID, setEpisodeUserStatus, loggedIn, userInfo, checkAll, userWatchedShow, setSaveEpisodes }) {\n\tlet history = useHistory();\n\tconst [userRate, setUserRate] = useState(0);\n\tconst [isChecked, setIsChecked] = useState(false);\n\n\tuseEffect(() => {\n\t\tsetUserRate(userInfo?.score);\n\t\tsetIsChecked(userInfo?.score > -1);\n\t}, [userInfo]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (checkAll === -1) {\n\t\t\t\tsetIsChecked(false);\n\t\t\t} else if (checkAll === 1) {\n\t\t\t\tsetIsChecked(true);\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[checkAll]\n\t);\n\n\tfunction parseDate(date) {\n\t\tlet newDate = new Date(date).toLocaleDateString(\"ru-RU\");\n\t\tif (newDate !== \"Invalid Date\") return newDate;\n\t\telse return \"TBA\";\n\t}\n\n\treturn (\n\t\t<div className='detail-episode-row'>\n\t\t\t<input\n\t\t\t\ttype='checkbox'\n\t\t\t\tid={`cbEpisode${episode.id}`}\n\t\t\t\tchecked={isChecked}\n\t\t\t\tonChange={(res) => {\n\t\t\t\t\tsetSaveEpisodes(true);\n\t\t\t\t\tsetIsChecked(res.target.checked);\n\t\t\t\t}}\n\t\t\t\thidden={!loggedIn || !userWatchedShow}\n\t\t\t/>\n\t\t\t<p className='detail-episode-row__date'>{parseDate(episode.air_date)}</p>\n\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='detail-episode-row__rate'>\n\t\t\t\t<Rating\n\t\t\t\t\twithEye={true}\n\t\t\t\t\treadonly={!loggedIn}\n\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\tsetIsChecked(score > -1);\n\t\t\t\t\t\tsetEpisodeUserStatus({ episodes: [{ tmdb_id: episode.id, score: score }] }, showID);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<a\n\t\t\t\tclassName='detail-episode-row__name'\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}\n\t\t\t\ttitle={episode.name}>\n\t\t\t\tСерия {episode.episode_number} - {episode.name}\n\t\t\t</a>\n\t\t</div>\n\t);\n}\n\nexport default DetailEpisodeRow;\n","import DetailEpisodeRow from \"./DetailEpisodeRow\";\n\nexport default DetailEpisodeRow;\n","import SeasonBlock from \"./SeasonBlock\";\n\nexport default SeasonBlock;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport { computed } from \"mobx\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport classnames from \"classnames\";\n\nimport AuthStore from '../../../../store/AuthStore';\nimport ShowStore from '../../../../store/ShowStore';\nimport PagesStore from '../../../../store/PagesStore';\nimport DetailEpisodeRow from '../../../../shared/DetailEpisodeRow';\nimport Rating from '../../../../shared/Rating';\n\nimport \"./season-block.sass\";\n\nconst SeasonBlock = observer(\n\t({\n\t\tshowID,\n\t\tseasonNumber,\n\t\t//onChangeStatus,\n\t\tuserWatchedShow,\n\t\tclassName,\n\t}) => {\n\t\tconst { loggedIn } = AuthStore;\n\t\tconst { openLoginForm, setSaveEpisodes } = PagesStore;\n\t\tconst { requestSeasons, requestSeasonsUserInfo, setEpisodesStatus, setSeasonStatus } = ShowStore;\n\t\tconst showSeason = computed(() => ShowStore.getShowSeason(seasonNumber)).get();\n\t\tconst showSeasonState = computed(() => ShowStore.getShowSeasonState(seasonNumber)).get();\n\t\tconst showUserInfo = computed(() => ShowStore.getShowSeasonUserInfo(seasonNumber)).get();\n\n\t\tlet history = useHistory();\n\t\tconst [isChecked, setIsChecked] = useState(0);\n\t\tconst [userRate, setUserRate] = useState(0);\n\n\t\tuseEffect(\n\t\t\t() => {\n\t\t\t\tsetIsChecked(0);\n\t\t\t\tsetUserRate(0);\n\t\t\t\trequestSeasons(showID, seasonNumber);\n\t\t\t},\n\t\t\t// eslint-disable-next-line\n\t\t\t[showID, seasonNumber, requestSeasons]\n\t\t);\n\n\t\tuseEffect(\n\t\t\t() => {\n\t\t\t\tsetIsChecked(0);\n\t\t\t\tsetUserRate(0);\n\t\t\t\tif (loggedIn) requestSeasonsUserInfo(showID, seasonNumber);\n\t\t\t},\n\t\t\t// eslint-disable-next-line\n\t\t\t[loggedIn, showID, seasonNumber]\n\t\t);\n\n\t\tuseEffect(\n\t\t\t() => {\n\t\t\t\tif (showUserInfo?.score) {\n\t\t\t\t\tsetUserRate(showUserInfo.score);\n\t\t\t\t} else {\n\t\t\t\t\tsetUserRate(0);\n\t\t\t\t}\n\t\t\t},\n\t\t\t// eslint-disable-next-line\n\t\t\t[showUserInfo]\n\t\t);\n\n\t\tfunction getEpisodeByID(episodes, id) {\n\t\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\n\t\t}\n\n\t\treturn (\n\t\t\t<LoadingOverlay active={showSeasonState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div key={showSeason?.id} className={classnames(\"season-block\", className)}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber);\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName='season-block__link'>\n\t\t\t\t\t\t<h5 className='season-block__name'> {showSeason?.name} </h5>\n\t\t\t\t\t</a>\n\t\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='season-block__rate'>\n\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, showID, seasonNumber);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br />\n\t\t\t\t\t<details open={true} className='season-block__episodes'>\n\t\t\t\t\t\t<summary>Развернуть</summary>\n\t\t\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='season-block__check-all'>\n\t\t\t\t\t\t\tВыбрать все&nbsp;\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\tchecked={isChecked > 0}\n\t\t\t\t\t\t\t\tonChange={(res) => {\n\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\n\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ul className='season-block__episodes-ul'>\n\t\t\t\t\t\t\t{showSeason?.episodes\n\t\t\t\t\t\t\t\t?.map((episode, counter) => (\n\t\t\t\t\t\t\t\t\t<li className='season-block__episode' key={counter}>\n\t\t\t\t\t\t\t\t\t\t<DetailEpisodeRow\n\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\n\t\t\t\t\t\t\t\t\t\t\tshowID={showID}\n\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\n\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(showUserInfo?.episodes, episode?.id)}\n\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\n\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\n\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t.reverse()}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</details>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t);\n\t}\n);\n\nexport default SeasonBlock;\n","import SeasonsBlock from \"./SeasonsBlock\";\n\nexport default SeasonsBlock;\n","import React from \"react\";\nimport { toJS } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nimport ShowStore from '../../../../store/ShowStore';\nimport PagesStore from '../../../../store/PagesStore';\nimport AuthStore from '../../../../store/AuthStore';\nimport SeasonBlock from \"../SeasonBlock\";\n\nimport \"./seasons-block.sass\";\n\nconst SeasonsBlock = observer(({ showID, seasons, userWatchedShow }) => {\n\tconst { showSeasonsUserInfo, showSeasons, setEpisodesStatus, setStatusState, anySeasonLoading } = ShowStore;\n\tconst { saveEpisodesBlockIsOpen, setSaveEpisodes } = PagesStore;\n\tconst { loggedIn } = AuthStore;\n\n\tfunction getEpisodeByID(episodes, id) {\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\n\t}\n\n\tfunction sendEpisodes() {\n\t\tlet episodes = [];\n\t\tlet seasons = [];\n\t\tfor (let season in showSeasons) {\n\t\t\tfor (let episode in showSeasons[season].episodes) {\n\t\t\t\tlet currentValue = getEpisodeByID(showSeasonsUserInfo[season].episodes, showSeasons[season].episodes[episode].id);\n\t\t\t\tlet cbValue = document.getElementById(`cbEpisode${showSeasons[season].episodes[episode].id}`).checked;\n\t\t\t\tlet currentStatus = currentValue?.score > -1;\n\t\t\t\tif (cbValue !== currentStatus) {\n\t\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: cbValue ? 0 : -1 });\n\t\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\n\t\tsetSaveEpisodes(false);\n\t}\n\n\tfunction sendAllEpisodes() {\n\t\tlet episodes = [];\n\t\tlet seasons = [];\n\t\tfor (let season in showSeasons) {\n\t\t\tconsole.log(toJS(showSeasons));\n\t\t\tif (showSeasons[season].name !== \"Спецматериалы\")\n\t\t\t\tfor (let episode in showSeasons[season].episodes) {\n\t\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: 0 });\n\t\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\n\t\t\t\t}\n\t\t}\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\n\t\tsetSaveEpisodes(false);\n\t}\n\n\treturn (\n\t\t<div className='seasons-block'>\n\t\t\t<LoadingOverlay active={setStatusState === \"pending\"} spinner text='Обновление...'>\n\t\t\t\t<button\n\t\t\t\t\tclassName='seasons-block__all-button'\n\t\t\t\t\thidden={!loggedIn | !userWatchedShow}\n\t\t\t\t\tdisabled={anySeasonLoading}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsendAllEpisodes();\n\t\t\t\t\t}}>\n\t\t\t\t\tПосмотрел весь сериал\n\t\t\t\t</button>\n\t\t\t\t{seasons\n\t\t\t\t\t?.map((season) => <SeasonBlock className='seasons-block__season-block' showID={showID} seasonNumber={season.season_number} key={season.season_number} userWatchedShow={userWatchedShow} />)\n\t\t\t\t\t.reverse()}\n\t\t\t\t<div className='seasons-block__save-episodes-block' hidden={!saveEpisodesBlockIsOpen}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName='seasons-block__save-episodes-button'\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsendEpisodes();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tСохранить\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default SeasonsBlock;\n","import ShowPage from \"./ShowPage\";\n\nexport default ShowPage;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport ReactPlayer from \"react-player/youtube\";\nimport { Carousel } from \"react-responsive-carousel\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport { toast } from \"react-toastify\";\n\nimport AuthStore from '../../store/AuthStore';\nimport PagesStore from '../../store/PagesStore';\nimport ShowStore from '../../store/ShowStore';\nimport Rating from '../../shared/Rating';\nimport StatusButtonGroup from '../../shared/StatusButtonGroup';\nimport FriendsActivity from '../../shared/FriendsActivity';\nimport SeasonsBlock from './views/SeasonsBlock';\nimport ScoreBlock from '../../shared/ScoreBlock';\n\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\nimport \"./show-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst ShowPage = observer((props) => {\n\tconst { loggedIn } = AuthStore;\n\tconst { openLoginForm } = PagesStore;\n\tconst { requestShow, show, showState, setShowStatus, setShowReview, requestShowUserInfo, userInfo, friendsInfo, userInfoState, anyError } = ShowStore;\n\n\tlet { id } = useParams();\n\tconst [review, setReview] = useState(\"\");\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\n\tconst [userRate, setUserRate] = useState(0);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetReview(\"\");\n\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\tsetUserRate(0);\n\t\t\trequestShow(id);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[id, requestShow]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestShowUserInfo(id);\n\t\t\telse {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(0);\n\t\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn, id]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = show?.name || 'Interests';\n\t}, [show]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (userInfo?.status) {\n\t\t\t\tsetReview(userInfo.review);\n\t\t\t\tsetUserStatus(userInfo.status);\n\t\t\t\tsetUserRate(userInfo.score);\n\t\t\t} else {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(0);\n\t\t\t\tsetUserStatus(\"Не смотрел\");\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userInfo]\n\t);\n\n\tuseEffect(() => {\n\t\tif (anyError) toast.error(anyError);\n\t}, [anyError]);\n\n\tconst renderVideo = (video, index) => (\n\t\t<div className='movie-page__trailer' key={video.url}>\n\t\t\t<ReactPlayer url={video.url} controls key={index} className='movie-page__trailer-player' />\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className='show-page'>\n\t\t\t<div className='show-page__background' style={{ backgroundImage: `url(${show?.backdrop_path})` }} />\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='show-page__body'>\n\t\t\t\t\t<div className='show-page__header'>\n\t\t\t\t\t\t<div className='show-page__poster'>\n\t\t\t\t\t\t\t<img src={show?.poster_path} className='show-page__poster-img' alt='' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='show-page__info'>\n\t\t\t\t\t\t\t<h1 className='show-page__info-header'>{show?.name}</h1>\n\t\t\t\t\t\t\t<h5 className='show-page__info-subheader'>{show?.original_name}</h5>\n\t\t\t\t\t\t\t<div className='show-page__info-body'>\n\t\t\t\t\t\t\t\t<p hidden={!show?.genres}>Жанр: {show?.genres}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.production_companies}>Компания: {show?.production_companies}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.first_air_date}>Дата выхода первой серии: {show?.first_air_date}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.last_air_date}>Дата выхода последней серии: {show?.last_air_date}</p>\n\t\t\t\t\t\t\t\t<p hidden={!!show?.episode_run_time}>Продолжительность (мин): {show?.episode_run_time}</p>\n\t\t\t\t\t\t\t\t<p>Количество сезонов: {show?.seasons_count}</p>\n\t\t\t\t\t\t\t\t<p>Количество серий: {show?.episodes_count}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.status}>Статус: {show?.status}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ score: score });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName='show-page__rating'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<StatusButtonGroup\n\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Смотрю\", \"Дропнул\", \"Посмотрел\"]}\n\t\t\t\t\t\t\t\t\tclassName='show-page__info-statuses'\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ status: status });\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t<ScoreBlock score={show?.score} text='TMDB score' className='show-page__info-score' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Carousel className='movie-page__trailers' showArrows centerMode centerSlidePercentage={50} showThumbs={false} showStatus={false} showIndicators={false}>\n\t\t\t\t\t\t{show?.videos?.map(renderVideo)}\n\t\t\t\t\t</Carousel>\n\t\t\t\t\t<div className='show-page__overview'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 className='show-page__overview-header'>Описание</h3>\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show?.overview }} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='show-page__seasons'>\n\t\t\t\t\t\t\t<h3 className='show-page__seasons-header'>Список серий</h3>\n\t\t\t\t\t\t\t<SeasonsBlock showID={show?.id} seasons={show?.seasons} userWatchedShow={userStatus !== \"Не смотрел\"} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='show-page__review' hidden={!loggedIn}>\n\t\t\t\t\t\t\t<h3 className='show-page__review-header'>Отзыв</h3>\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t<div className='show-page__review'>\n\t\t\t\t\t\t\t\t\tВаш отзыв\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' value={review} onChange={(event) => setReview(event.target.value)} className='show-page__review-input' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName='show-page__review-save-button'\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetShowReview({ review: review });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='show-page__friends' hidden={!loggedIn || friendsInfo.length < 1}>\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default ShowPage;\n","import SeasonPage from \"./SeasonPage\";\n\nexport default SeasonPage;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\nimport { toast } from \"react-toastify\";\n\nimport AuthStore from '../../store/AuthStore';\nimport ShowStore from '../../store/ShowStore';\nimport PagesStore from '../../store/PagesStore';\nimport Rating from '../../shared/Rating';\nimport FriendsActivity from '../../shared/FriendsActivity';\nimport DetailEpisodeRow from '../../shared/DetailEpisodeRow';\n\nimport \"./season-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst SeasonPage = observer((props) => {\n\tconst { loggedIn } = AuthStore;\n\tconst { requestSeason, show, showState, setSeasonStatus, setSeasonReview, setEpisodesStatus, requestSeasonUserInfo, userInfo, userInfoState, friendsInfo } = ShowStore;\n\tconst { openLoginForm, setSaveEpisodes, saveEpisodesBlockIsOpen } = PagesStore;\n\n\tlet history = useHistory();\n\tlet { show_id, number } = useParams();\n\tconst [review, setReview] = useState(\"\");\n\tconst [userRate, setUserRate] = useState(0);\n\tconst [chartData, setChartData] = useState([]);\n\tconst [isChecked, setIsChecked] = useState(0);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetReview(\"\");\n\t\t\tsetUserRate(0);\n\t\t\tsetIsChecked(0);\n\t\t\trequestSeason(show_id, number);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[show_id, number, requestSeason]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestSeasonUserInfo(show_id, number);\n\t\t\telse {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(0);\n\t\t\t\tsetIsChecked(0);\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn, show_id, number]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = show?.show?.tmdb_name + \" - \" + show?.name;\n\t}, [show]);\n\n\tuseEffect(() => {\n\t\tsetChartData([]);\n\t\tif (show?.episodes)\n\t\t\tif (show?.episodes.length > 0) {\n\t\t\t\tlet newData = [];\n\t\t\t\tfor (let episode in show?.episodes) {\n\t\t\t\t\tif (show?.episodes[episode].vote_average > 0) newData.push({ name: \"Ep \" + show?.episodes[episode].episode_number, Оценка: show?.episodes[episode].vote_average });\n\t\t\t\t}\n\t\t\t\tsetChartData(newData);\n\t\t\t}\n\t}, [show]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\n\t\t\telse setReview(\"\");\n\n\t\t\tif (userInfo?.score) setUserRate(userInfo.score);\n\t\t\telse setUserRate(0);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userInfo]\n\t);\n\n\tuseEffect(() => {\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\n\t}, [showState]);\n\tuseEffect(() => {\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\n\t}, [userInfoState]);\n\n\tfunction getEpisodeByID(episodes, id) {\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\n\t}\n\n\tfunction sendEpisodes() {\n\t\tlet episodes = [];\n\t\tfor (let episode in userInfo.episodes) {\n\t\t\tlet currentValue = userInfo.episodes[episode];\n\t\t\tlet cbValue = document.getElementById(`cbEpisode${currentValue.tmdb_id}`).checked;\n\t\t\tlet currentStatus = currentValue?.score > -1;\n\t\t\tif (cbValue !== currentStatus) episodes.push({ tmdb_id: currentValue.tmdb_id, score: cbValue ? 0 : -1 });\n\t\t}\n\t\tsetEpisodesStatus({ episodes }, show_id);\n\t\trequestSeasonUserInfo(show_id, number);\n\t\tsetSaveEpisodes(false);\n\t}\n\n\treturn (\n\t\t<div className='season-page'>\n\t\t\t<div className='season-page__background' style={{ backgroundImage: `url(${show?.show?.tmdb_backdrop_path})` }} />\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='season-page__body'>\n\t\t\t\t\t<div className='season-page__header'>\n\t\t\t\t\t\t<div className='season-page__poster'>\n\t\t\t\t\t\t\t<img src={show?.poster_path} className='img-fluid' alt='' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='season-page__info'>\n\t\t\t\t\t\t\t<h1 className='season-page__info-header'>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show?.show?.id}\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show?.show?.tmdb_id);\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{show?.show?.tmdb_name}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{\" - \" + show?.name}\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t<h5 className='season-page__info-subheader'>{show?.show?.tmdb_original_name + \" - Season \" + show?.season_number}</h5>\n\t\t\t\t\t\t\t<div className='season-page__info-body'>\n\t\t\t\t\t\t\t\t<p hidden={!show?.air_date}>Дата выхода: {show?.air_date}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.episodes}>Количество серий: {show?.episodes?.length}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, show_id, show?.season_number);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName='season-page__rating'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className='season-page__review'>\n\t\t\t\t\t\t\t\t\t\tВаш отзыв\n\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='season-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} outline />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName='season-page__review-save-button'\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetSeasonReview({ review: review }, show_id, show?.season_number);\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='season-page__overview'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 className='season-page__overview-header'>Описание</h3>\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show?.overview }} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='season-page__episodes'>\n\t\t\t\t\t\t\t<h3 className='season-page__episodes-header'>Список серий</h3>\n\t\t\t\t\t\t\t<details open={false} className='season-page__episodes-body'>\n\t\t\t\t\t\t\t\t<summary>Развернуть</summary>\n\t\t\t\t\t\t\t\t<div hidden={!loggedIn || !userInfo?.user_watched_show}>\n\t\t\t\t\t\t\t\t\tВыбрать все&nbsp;\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\t\t\tchecked={isChecked > 0}\n\t\t\t\t\t\t\t\t\t\tonChange={(res) => {\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\n\t\t\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ul className='season-page__episodes-ul'>\n\t\t\t\t\t\t\t\t\t{show?.episodes\n\t\t\t\t\t\t\t\t\t\t? show?.episodes.map((episode, counter) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<li className='season-page__episode' key={counter}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DetailEpisodeRow\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowID={show_id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(userInfo.episodes, episode.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userInfo?.user_watched_show}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t  ))\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t<div hidden={!(chartData.length > 0)}>\n\t\t\t\t\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={200}>\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\n\t\t\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t\t\t<XAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} />\n\t\t\t\t\t\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={chartData.length * 30}>\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }} layout='vertical'>\n\t\t\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t\t\t<YAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} type='category' />\n\t\t\t\t\t\t\t\t\t\t\t<XAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} type='number' />\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='season-page__friends' hidden={friendsInfo.length < 1}>\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t\t<div className='season-page__save-episodes-block' hidden={!saveEpisodesBlockIsOpen}>\n\t\t\t\t<button\n\t\t\t\t\tclassName='season-page__save-episodes-button'\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsendEpisodes();\n\t\t\t\t\t}}>\n\t\t\t\t\tСохранить\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default SeasonPage;\n","import EpisodePage from \"./EpisodePage\";\n\nexport default EpisodePage;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useParams } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport { toast } from \"react-toastify\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nimport AuthStore from '../../store/AuthStore';\nimport ShowStore from '../../store/ShowStore';\nimport PagesStore from '../../store/PagesStore';\nimport Rating from '../../shared/Rating';\nimport FriendsActivity from '../../shared/FriendsActivity';\nimport ScoreBlock from '../../shared/ScoreBlock';\n\nimport \"./episode-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst EpisodePage = observer((props) => {\n\tconst { loggedIn } = AuthStore;\n\tconst { openLoginForm } = PagesStore;\n\tconst { requestEpisode, show, showState, setEpisodesStatus, requestEpisodeUserInfo, userInfo, userInfoState, friendsInfo, setStatusState } = ShowStore;\n\n\tlet history = useHistory();\n\tlet { show_id, season_number, episode_number } = useParams();\n\tconst [review, setReview] = useState(\"\");\n\tconst [userRate, setUserRate] = useState(-1);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetReview(\"\");\n\t\t\tsetUserRate(-1);\n\t\t\trequestEpisode(show_id, season_number, episode_number);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[show_id, season_number, episode_number, requestEpisode]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestEpisodeUserInfo(show_id, season_number, episode_number);\n\t\t\telse {\n\t\t\t\tsetReview(\"\");\n\t\t\t\tsetUserRate(-1);\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn, show_id, season_number, episode_number]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = show?.show?.tmdb_name + \" - \" + show?.name;\n\t}, [show]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\n\t\t\telse setReview(\"\");\n\n\t\t\tif (userInfo?.score > -1) setUserRate(userInfo.score);\n\t\t\telse setUserRate(-1);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userInfo]\n\t);\n\n\tuseEffect(() => {\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\n\t}, [showState]);\n\tuseEffect(() => {\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\n\t}, [userInfoState]);\n\tuseEffect(() => {\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\n\t}, [setStatusState]);\n\n\treturn (\n\t\t<div className='episode-page'>\n\t\t\t<div className='episode-page__background' style={{ backgroundImage: `url(${show?.show?.tmdb_backdrop_path})` }} />\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='episode-page__body'>\n\t\t\t\t\t<div className='episode-page__header'>\n\t\t\t\t\t\t<div className='episode-page__poster'>\n\t\t\t\t\t\t\t<img src={show?.still_path} className='img-fluid' alt='' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='episode-page__info'>\n\t\t\t\t\t\t\t<h1 className='episode-page__info-header'>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{show?.show?.tmdb_name}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{\" - \" + show?.name}\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t<h5 className='episode-page__info-subheader'>{show?.show?.tmdb_original_name + \" - Season \" + show?.season_number + \" - Episode \" + show?.episode_number}</h5>\n\t\t\t\t\t\t\t<div className='episode-page__info-body'>\n\t\t\t\t\t\t\t\t<p hidden={!show?.air_date}>Дата выхода: {show?.air_date}</p>\n\t\t\t\t\t\t\t\t<p hidden={!show?.runtime}>Продолжительность (мин): {show?.runtime}</p>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id + \"/season/\" + season_number}\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id + \"/season/\" + season_number);\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\tСезон: {show?.season_number}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t\t\t\t\t<Rating\n\t\t\t\t\t\t\t\t\t\twithEye={true}\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show?.id, score: score }] }, show_id);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tclassName='episode-page__rating'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className='episode-page__review'>\n\t\t\t\t\t\t\t\t\t\tВаш отзыв\n\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='episode-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} outline />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName='episode-page__review-save-button'\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show?.id, review: review }] }, show_id);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ScoreBlock score={show?.score} text='TMDB score' className='episode-page__info-score' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='episode-page__overview'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3>Описание</h3>\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show?.overview }} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='episode-page__friends' hidden={friendsInfo.length < 1}>\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default EpisodePage;\n","import api from '../http';\nimport { USER_INFO_URL, SEARCH_USERS_URL, USER_CALENDAR_URL, USER_SETTINGS_URL } from '../settings';\n\n/**\n * Запрос к бд, получающий информацию о пользователе\n * @param {string} userID ID пользователя\n */\nexport async function getUserInfo(userID: string | number) {\n\tconst res = await api.get(USER_INFO_URL + userID + '/');\n\treturn res.data;\n}\n\n/**\n * Запрос на поиск пользователей\n * @param {string} query Поисковый запрос\n */\nexport async function searchUsers(query: string) {\n\tconst res = await api.get(SEARCH_USERS_URL, { params: { query: query } });\n\treturn res.data;\n}\n\nexport async function setUserStatus(is_following: boolean, userID: string | number) {\n\tconst res = await api.put(USER_INFO_URL + userID + '/follow/', is_following);\n\treturn res.data;\n}\n\nexport async function getUserLog(\n\tuserID: string | number,\n\tpage: number,\n\tresultsOnPage: number,\n\tquery: string,\n\tfilters: string[],\n) {\n\tconst res = await api.get(USER_INFO_URL + userID + '/log/', { params: { page: page, page_size: resultsOnPage, query: query, filters: filters } });\n\treturn res.data;\n}\n\nexport async function deleteUserLog(userID: string, logType: string, logID: string | number) {\n\tconst res = await api.delete(USER_INFO_URL + userID + '/log/', { data: { type: logType, id: logID } });\n\treturn res;\n}\n\nexport async function getUserFriendsLog(\n\tpage: string | number,\n\tresultsOnPage: number,\n\tquery: string,\n\tfilters: string[],\n) {\n\tconst res = await api.get(USER_INFO_URL + 'friends_log/', { params: { page: page, page_size: resultsOnPage, query: query, filters: filters } });\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий календарь релизов пользователя\n */\nexport async function getUserCalendar() {\n\tconst res = await api.get(USER_CALENDAR_URL);\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, получающий настройки пользователя\n */\nexport async function getUserSettings() {\n\tconst res = await api.get(USER_SETTINGS_URL);\n\treturn res.data;\n}\n\n/**\n * Запрос к бд, изменяющий настройки пользователя\n */\nexport async function patchUserSettings(settings: any) {\n\tconst res = await api.patch(USER_SETTINGS_URL, settings);\n\treturn res.data;\n}\n\nexport async function getRoulette(params: {\n\tcategories: string[],\n\tendedOnly: boolean,\n}) {\n\tconst response = await api.get('users/user/random/', {params: params});\n\tconsole.log(response.data);\n\treturn response.data;\n}\n","import { makeAutoObservable } from 'mobx';\nimport { toast } from 'react-toastify';\n//import remotedev from 'mobx-remotedev';\nimport * as userRequests from '../services/userRequests';\nimport * as gameRequests from '../services/gameRequests';\nimport * as movieRequests from '../services/movieRequests';\nimport * as showRequests from '../services/showRequests';\nimport {IGame} from './GameStore';\nimport {IMovie} from './MovieStore';\nimport {IShow} from './ShowStore';\nimport {IUser} from './UserStore';\n\ntype IPendingState = 'done' | 'pending' | string;\n\ninterface ISearchResult<Type> {\n\tvalues: Array<Type>,\n\tpage: number,\n\tquery: string,\n\tisEnd?: boolean,\n}\n\ninterface IHints {\n\tgames: Array<any>,\n\tshows: Array<any>,\n\tmovies: Array<any>,\n\tquery: string,\n\tcurrentQuery?: any,\n}\n\nclass Search {\n\tgames: ISearchResult<IGame> = { values: [], page: 1, query: '' };\n\tmovies: ISearchResult<IMovie> = { values: [], page: 1, query: '' };\n\tshows: ISearchResult<IShow> = { values: [], page: 1, query: '' };\n\tusers: ISearchResult<IUser> = { values: [], page: 1, query: '' };\n\thints: IHints = { games: [], shows: [], movies: [], query: '' };\n\tgamesState: IPendingState = 'done';\n\tmoviesState: IPendingState = 'done';\n\tshowsState: IPendingState = 'done';\n\tusersState: IPendingState = 'done';\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\tsearchHints = async (query: string) => {\n\t\tif (this.hints.query !== query) {\n\t\t\tthis.hints.currentQuery = query;\n\t\t\tgameRequests.searchGamesFast(query).then(this.searchGamesHintsSuccess);\n\t\t\tmovieRequests.searchMoviesFast(query).then(this.searchMoviesHintsSuccess);\n\t\t\tshowRequests.searchShowsFast(query).then(this.searchShowsHintsSuccess);\n\t\t}\n\t};\n\tsearchGamesHintsSuccess = (result: Array<any>) => {\n\t\tthis.hints.games = result;\n\t};\n\tsearchMoviesHintsSuccess = (result: Array<any>) => {\n\t\tthis.hints.movies = result;\n\t};\n\tsearchShowsHintsSuccess = (result: Array<any>) => {\n\t\tthis.hints.shows = result;\n\t};\n\n\tsearchGames = async (query: string) => {\n\t\tthis.gamesState = 'pending';\n\t\tgameRequests.searchGames(query, 1, 20).then((res) => this.searchGamesSuccess(res, query), this.searchGamesFailure);\n\t};\n\tsearchGamesSuccess = (result: Array<any>, query: string) => {\n\t\tthis.games = { values: result, page: 1, query, isEnd: result.length < 20 };\n\t\tthis.gamesState = 'done';\n\t};\n\tsearchGamesFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска игр! ${error}`);\n\t\tthis.gamesState = 'error: ' + error;\n\t};\n\tnextGames = async () => {\n\t\tif (this.gamesState === 'pending' || this.games.isEnd) return;\n\t\tthis.gamesState = 'pending';\n\t\tgameRequests.searchGames(this.games.query, this.games.page + 1, 20).then(this.nextGamesSuccess, this.nextGamesFailure);\n\t};\n\tnextGamesSuccess = (result: Array<any>) => {\n\t\tthis.games = { values: [...this.games.values, ...result], page: this.games.page + 1, query: this.games.query, isEnd: result.length < 20 };\n\t\tthis.gamesState = 'done';\n\t};\n\tnextGamesFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска игр! ${error}`);\n\t\tthis.gamesState = 'error: ' + error;\n\t};\n\n\tsearchMovies = async (query: string) => {\n\t\tthis.moviesState = 'pending';\n\t\tmovieRequests.searchMovies(query, 1).then((res) => this.searchMoviesSuccess(res, query), this.searchMoviesFailure);\n\t};\n\tsearchMoviesSuccess = (result: any, query: string) => {\n\t\tthis.movies = { values: result.results, page: 1, query, isEnd: result.page === result.total_pages || result.total_pages === 0 };\n\t\tthis.moviesState = 'done';\n\t};\n\tsearchMoviesFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска фильмов! ${error}`);\n\t\tthis.moviesState = 'error: ' + error;\n\t};\n\tnextMovies = async () => {\n\t\tif (this.moviesState === 'pending' || this.movies.isEnd) return;\n\t\tthis.moviesState = 'pending';\n\t\tmovieRequests.searchMovies(this.movies.query, this.movies.page + 1).then(this.nextMoviesSuccess, this.nextMoviesFailure);\n\t};\n\tnextMoviesSuccess = (result: any) => {\n\t\tthis.movies = { values: [...this.movies.values, ...result?.results], page: this.movies.page + 1, query: this.movies.query, isEnd: result.page === result.total_pages };\n\t\tthis.moviesState = 'done';\n\t};\n\tnextMoviesFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска фильмов! ${error}`);\n\t\tthis.moviesState = 'error: ' + error;\n\t};\n\n\tsearchShows = async (query: string, page?: number) => {\n\t\tthis.showsState = 'pending';\n\t\tshowRequests.searchShows(query, page).then((res) => this.searchShowsSuccess(res, query), this.searchShowsFailure);\n\t};\n\tsearchShowsSuccess = (result: any, query: string) => {\n\t\tthis.shows = { values: result.results, page: 1, query, isEnd: result.page === result.total_pages || result.total_pages === 0 };\n\t\tthis.showsState = 'done';\n\t};\n\tsearchShowsFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска серилов! ${error}`);\n\t\tthis.showsState = 'error: ' + error;\n\t};\n\tnextShows = async () => {\n\t\tif (this.showsState === 'pending' || this.shows.isEnd) return;\n\t\tthis.showsState = 'pending';\n\t\tshowRequests.searchShows(this.shows.query, this.shows.page + 1).then(this.nextShowsSuccess, this.nextShowsFailure);\n\t};\n\tnextShowsSuccess = (result: any) => {\n\t\tthis.shows = { values: [...this.shows.values, ...result.results], page: this.shows.page + 1, query: this.shows.query, isEnd: result.page === result.total_pages };\n\t\tthis.showsState = 'done';\n\t};\n\tnextShowsFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска сериалов! ${error}`);\n\t\tthis.showsState = 'error: ' + error;\n\t};\n\n\tsearchUsers = async (query: string) => {\n\t\tthis.usersState = 'pending';\n\t\tuserRequests.searchUsers(query).then(this.searchUsersSuccess, this.searchUsersFailure);\n\t};\n\tsearchUsersSuccess = (result: any) => {\n\t\tthis.users = { values: result, page: 1, query: '' };\n\t\tthis.usersState = 'done';\n\t};\n\tsearchUsersFailure = (error: string) => {\n\t\ttoast.error(`Ошибка поиска пользователей! ${error}`);\n\t\tthis.usersState = 'error: ' + error;\n\t};\n}\n\nconst SearchStore = new Search();\n//export default remotedev(SearchStore, { name: 'Search' });\nexport default SearchStore;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport classnames from \"classnames\";\nimport \"./search-card.sass\";\n\nfunction SearchCard({ info, className }) {\n\tlet history = useHistory();\n\n\treturn (\n\t\t<div className={classnames(\"search-card\", className)}>\n\t\t\t<a\n\t\t\t\thref={window.location.origin + info.link}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\thistory.push(info.link);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}\n\t\t\t\ttitle={info.name}>\n\t\t\t\t<div className='search-card__poster' style={{ backgroundImage: info.poster }} />\n\t\t\t\t<div className='search-card__body'>\n\t\t\t\t\t<div className='search-card__name'>\n\t\t\t\t\t\t<h4>{info.name}</h4>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className='search-card__date'>{info.release_date}</p>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t\t<div className='search-card__wrapper'>\n\t\t\t\t<p className='search-card__genres' hidden={!info.genres}>\n\t\t\t\t\tЖанр: {info.genres}\n\t\t\t\t</p>\n\t\t\t\t<p className='search-card__tags' hidden={!info.tags}>\n\t\t\t\t\tТеги: {info.tags}\n\t\t\t\t</p>\n\t\t\t\t<p className='search-card__platfroms' hidden={!info.platforms}>\n\t\t\t\t\tПлатформы: {info.platforms}\n\t\t\t\t</p>\n\t\t\t\t<p className='search-card__overview' hidden={!info.overview}>\n\t\t\t\t\t{info.overview}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default SearchCard;\n","import SearchCard from \"./SearchCard\";\n\nexport default SearchCard;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport SearchCard from \"../SearchCard\";\nimport \"./search-cards.sass\";\n\nfunction SearchCardsBlock({ name, objects, hidden, className }) {\n\treturn (\n\t\t<div hidden={hidden} className={classnames(\"search-cards\", className)}>\n\t\t\t<h3>{name}</h3>\n\t\t\t<div className='search-cards__body'>\n\t\t\t\t<div className='search-cards__cards'>\n\t\t\t\t\t{objects?.map((object) => (\n\t\t\t\t\t\t<SearchCard info={object} key={object.id} className='search-cards__card' />\n\t\t\t\t\t))}\n\t\t\t\t\t{objects?.length < 1 ? `${name} не найдены` : \"\"}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n//onMouseDown={mouseDownHandler}\n\nexport default SearchCardsBlock;\n","import SearchCardsBlock from \"./SearchCardsBlock\";\n\nexport default SearchCardsBlock;\n","import React, { useMemo } from \"react\";\nimport SearchCardsBlock from \"./SearchCardsBlock\";\n\nfunction GameCards({ games, hidden }) {\n\tconst objects = useMemo(\n\t\t() =>\n\t\t\tgames?.reduce((newObjects, game) => {\n\t\t\t\tlet object = {\n\t\t\t\t\tname: game.name,\n\t\t\t\t\tid: game.id,\n\t\t\t\t\tposter: `url(${game.background_image})`,\n\t\t\t\t\tlink: \"/game/\" + game.slug,\n\t\t\t\t\tgenres: \"\",\n\t\t\t\t\ttags: \"\",\n\t\t\t\t\tplatforms: \"\",\n\t\t\t\t};\n\n\t\t\t\tif (game.released) {\n\t\t\t\t\tlet mas = game.released.split(\"-\");\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\n\t\t\t\t\tobject.release_date = newDate;\n\t\t\t\t} else object.release_date = \"\";\n\n\t\t\t\tif (game.genres) {\n\t\t\t\t\tobject.genres = game.genres.reduce((previousValue, genre) => `${previousValue}, ${genre.name}`, \"\").slice(2);\n\t\t\t\t}\n\t\t\t\tif (game.tags) {\n\t\t\t\t\tobject.tags = game.tags\n\t\t\t\t\t\t.reduce((previousValue, tag, index) => {\n\t\t\t\t\t\t\tif (index < 6) return `${previousValue}, ${tag.name}`;\n\t\t\t\t\t\t\treturn previousValue;\n\t\t\t\t\t\t}, \"\")\n\t\t\t\t\t\t.slice(2);\n\t\t\t\t}\n\t\t\t\tif (game.platforms) {\n\t\t\t\t\tobject.platforms = game.platforms.reduce((previousValue, platform) => `${previousValue}, ${platform.platform.name}`, \"\").slice(2);\n\t\t\t\t}\n\n\t\t\t\tif (object) newObjects.push(object);\n\t\t\t\treturn newObjects;\n\t\t\t}, []),\n\t\t[games]\n\t);\n\n\treturn <SearchCardsBlock name='Игры' hidden={hidden} objects={objects} />;\n}\n\nexport default GameCards;\n","import React, { useMemo } from \"react\";\nimport SearchCardsBlock from \"./SearchCardsBlock\";\n\nfunction MovieCards({ movies, hidden }) {\n\tconst objects = useMemo(\n\t\t() =>\n\t\t\tmovies?.reduce((newObjects, movie) => {\n\t\t\t\tlet object = {\n\t\t\t\t\tname: movie.title,\n\t\t\t\t\tid: movie.id,\n\t\t\t\t\tposter: `url(${\"http://image.tmdb.org/t/p/w300\" + movie.backdrop_path})`,\n\t\t\t\t\tlink: \"/movie/\" + movie.id,\n\t\t\t\t\toverview: movie.overview,\n\t\t\t\t};\n\n\t\t\t\tif (movie.release_date) {\n\t\t\t\t\tlet mas = movie.release_date.split(\"-\");\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\n\t\t\t\t\tobject.release_date = newDate;\n\t\t\t\t} else object.release_date = \"\";\n\n\t\t\t\tif (object) newObjects.push(object);\n\t\t\t\treturn newObjects;\n\t\t\t}, []),\n\t\t[movies]\n\t);\n\n\treturn <SearchCardsBlock name='Фильмы' hidden={hidden} objects={objects} />;\n}\n\nexport default MovieCards;\n","import React, { useMemo } from \"react\";\nimport SearchCardsBlock from \"./SearchCardsBlock\";\n\nfunction ShowCards({ shows, hidden }) {\n\tconst objects = useMemo(\n\t\t() =>\n\t\t\tshows?.reduce((newObjects, show) => {\n\t\t\t\tlet object = {\n\t\t\t\t\tname: show.name,\n\t\t\t\t\tid: show.id,\n\t\t\t\t\tposter: `url(${\"http://image.tmdb.org/t/p/w300\" + show.backdrop_path})`,\n\t\t\t\t\tlink: \"/show/\" + show.id,\n\t\t\t\t\toverview: show.overview,\n\t\t\t\t};\n\n\t\t\t\tif (show.first_air_date) {\n\t\t\t\t\tlet mas = show.first_air_date.split(\"-\");\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\n\t\t\t\t\tobject.release_date = newDate;\n\t\t\t\t} else object.release_date = \"\";\n\n\t\t\t\tif (object) newObjects.push(object);\n\t\t\t\treturn newObjects;\n\t\t\t}, []),\n\t\t[shows]\n\t);\n\n\treturn <SearchCardsBlock name='Сериалы' hidden={hidden} objects={objects} />;\n}\n\nexport default ShowCards;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./card-user.sass\";\n\nfunction CardUser({ user, className }) {\n\tlet history = useHistory();\n\n\treturn (\n\t\t<a\n\t\t\thref={window.location.origin + \"/user/\" + user.id}\n\t\t\tonClick={(e) => {\n\t\t\t\thistory.push(\"/user/\" + user.id);\n\t\t\t\te.preventDefault();\n\t\t\t}}\n\t\t\tclassName={classnames(\"card-user\", className)}>\n\t\t\t<div className='card-user__image' style={{ backgroundImage: `url(${\"https://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }} />\n\t\t\t<div className='card-user__text'>{user.username}</div>\n\t\t</a>\n\t);\n}\n\nexport default CardUser;\n","import CardUser from \"./CardUser\";\n\nexport default CardUser;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport \"./friend-block.sass\";\n\nimport CardUser from '../CardUser';\n\nfunction FriendBlock({ users, className }) {\n\treturn (\n\t\t<div className={classnames(\"friends-block\", className)}>\n\t\t\t{users.map((user) => (\n\t\t\t\t<CardUser user={user} key={user.id} className='friends-block__friend' />\n\t\t\t))}\n\t\t\t{users.length < 1 ? \"Пользователи не найдены\" : \"\"}\n\t\t</div>\n\t);\n}\n\nexport default FriendBlock;\n","import FriendBlock from \"./FriendBlock\";\n\nexport default FriendBlock;\n","import React from \"react\";\nimport FriendBlock from '../../../shared/FriendBlock';\n\nfunction UserCards({ users, hidden }) {\n\treturn (\n\t\t<div hidden={hidden}>\n\t\t\t<h3>Пользователи</h3>\n\t\t\t<FriendBlock users={users} />\n\t\t</div>\n\t);\n}\n\nexport default UserCards;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport \"./categories-tab.sass\";\n\ninterface ICategoriesTabProps {\n\tcategories: Array<string>,\n\tonChangeCategory: (category: string) => void,\n\tactiveCategory: string,\n\thidden?: boolean,\n\tchildren?: any,\n\tclassName?: string,\n}\n\nfunction CategoriesTab({ categories, onChangeCategory, activeCategory, hidden, children, className }: ICategoriesTabProps) {\n\treturn (\n\t\t<div hidden={hidden} className={classnames(\"categories-tabs\", className)}>\n\t\t\t<div className='categories-tabs__body'>\n\t\t\t\t{categories.map((category, counter) => (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={classnames(\"categories-tabs__tab\", activeCategory === category ? \"categories-tabs__tab_active\" : \"\")}\n\t\t\t\t\t\tkey={counter}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tonChangeCategory(category);\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t{category}\n\t\t\t\t\t</button>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className='categories-tabs__content'>{children}</div>\n\t\t</div>\n\t);\n}\n\nexport default CategoriesTab;\n","import CategoriesTab from \"./CategoriesTab\";\n\nexport default CategoriesTab;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { observer } from 'mobx-react';\nimport LoadingOverlay from 'react-loading-overlay-ts';\nimport { FaSearch } from 'react-icons/fa';\nimport SearchStore from '../../store/SearchStore';\nimport GameCards from './views/GameCards';\nimport MovieCards from './views/MovieCards';\nimport ShowCards from './views/ShowCards';\nimport UserCards from './views/UserCards';\nimport CategoriesTab from '../../shared/CategoriesTab';\n\nimport './search-page.sass';\nimport useScroll from '../../hooks/useScroll';\n\n/**\n * Основная страница приложения\n */\nconst SearchPage = observer(() => {\n\tconst store = SearchStore;\n\n\tlet history = useHistory();\n\tlet { query }: any = useParams();\n\tconst [queryText, setQueryText] = useState('');\n\n\tconst parentRef = useRef() as React.MutableRefObject<HTMLInputElement>;\n\tconst childRef = useRef() as React.MutableRefObject<HTMLInputElement>;\n\t// eslint-disable-next-line\n\tconst intersected = useScroll(parentRef, childRef, () => fetchItems());\n\n\tconst [activeCategory, setActiveCategory] = useState('Игры');\n\n\tfunction fetchItems() {\n\t\tif (activeCategory === 'Игры') store.nextGames();\n\t\tif (activeCategory === 'Фильмы') store.nextMovies();\n\t\tif (activeCategory === 'Сериалы') store.nextShows();\n\t}\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (activeCategory === 'Игры') store.searchGames(query);\n\t\t\tif (activeCategory === 'Фильмы') store.searchMovies(query);\n\t\t\tif (activeCategory === 'Сериалы') store.searchShows(query);\n\t\t\tif (activeCategory === 'Пользователи') store.searchUsers(query);\n\t\t\tsetQueryText(query);\n\t\t\tdocument.title = 'Поиск';\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[query, activeCategory]\n\t);\n\n\n\treturn (\n\t\t<div className='search-page'>\n\t\t\t<div className='search-page__body'>\n\t\t\t\t<form\n\t\t\t\t\tclassName='search-page__form'\n\t\t\t\t\tonSubmit={(event) => {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\thistory.push('/search/' + queryText);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}}>\n\t\t\t\t\t<h1>Поиск</h1>\n\t\t\t\t\t<FaSearch className='search-page__name-icon' />\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName='search-page__name-input'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tplaceholder='Найти'\n\t\t\t\t\t\tvalue={queryText}\n\t\t\t\t\t\tonChange={(e) => setQueryText(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t\t<CategoriesTab\n\t\t\t\t\tcategories={['Игры', 'Фильмы', 'Сериалы', 'Пользователи']}\n\t\t\t\t\tactiveCategory={activeCategory}\n\t\t\t\t\tonChangeCategory={(category: string) => {\n\t\t\t\t\t\tsetActiveCategory(category);\n\t\t\t\t\t}}>\n\t\t\t\t\t<div className='search-page__results' ref={parentRef}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t activeCategory === 'Игры' && (\n\t\t\t\t\t\t\t\t<LoadingOverlay active={store.gamesState === 'pending'} spinner text='Ищем игры...'>\n\t\t\t\t\t\t\t\t\t<GameCards games={store.games.values} hidden={activeCategory !== 'Игры'} />\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactiveCategory === 'Фильмы' && (\n\t\t\t\t\t\t\t\t<LoadingOverlay active={store.moviesState === 'pending'} spinner text='Ищем фильмы...'>\n\t\t\t\t\t\t\t\t\t<MovieCards movies={store.movies.values} hidden={activeCategory !== 'Фильмы'} />\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactiveCategory === 'Сериалы' && (\n\t\t\t\t\t\t\t\t<LoadingOverlay active={store.showsState === 'pending'} spinner text='Ищем сериалы...'>\n\t\t\t\t\t\t\t\t\t<ShowCards shows={store.shows.values} hidden={activeCategory !== 'Сериалы'} />\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactiveCategory === 'Пользователи' && (\n\t\t\t\t\t\t\t\t<LoadingOverlay active={store.usersState === 'pending'} spinner text='Ищем пользователей...'>\n\t\t\t\t\t\t\t\t\t<UserCards users={store.users.values} hidden={activeCategory !== 'Пользователи'} />\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t<div ref={childRef} style={{ height: 20 }} />\n\t\t\t\t\t</div>\n\t\t\t\t</CategoriesTab>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default SearchPage;\n","import SearchPage from \"./SearchPage\";\n\nexport default SearchPage;\n","import { useEffect, useRef } from \"react\";\n\nexport default function useScroll(parentRef, childRef, callback) {\n\tconst observer = useRef();\n\n\tuseEffect(() => {\n\t\tconst options = {\n\t\t\troot: parentRef.current,\n\t\t\trootMargin: \"0px\",\n\t\t\tthreshold: 0,\n\t\t};\n\t\tobserver.current = new IntersectionObserver(([target]) => {\n\t\t\tif (target.isIntersecting) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}, options);\n\n\t\tobserver.current.observe(childRef.current);\n\n\t\treturn function () {\n\t\t\t// eslint-disable-next-line\n\t\t\tobserver.current.unobserve(childRef.current);\n\t\t};\n\t\t// eslint-disable-next-line\n\t}, [callback]);\n}\n","import ConfirmPage from \"./ConfirmPage\";\n\nexport default ConfirmPage;\n","import React, { useEffect } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { useHistory } from \"react-router-dom\";\nimport AuthStore from '../../store/AuthStore';\nimport \"./confirm-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst ConfirmPage = observer((props) => {\n\tconst { confirmEmail, confirmEmailState } = AuthStore;\n\tlet history = useHistory();\n\n\tlet search = window.location.search;\n\tlet params = new URLSearchParams(search);\n\tlet uid64 = params.get(\"uid64\");\n\tlet token = params.get(\"token\");\n\n\tuseEffect(\n\t\t() => {\n\t\t\tconfirmEmail(uid64, token);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (confirmEmailState.startsWith(\"error\")) history.push(`/404page`);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[confirmEmailState]\n\t);\n\n\treturn (\n\t\t<div className='confirm-page'>\n\t\t\t<h2 hidden={confirmEmailState !== \"done\"} className='confirm-page__success'>\n\t\t\t\tВаша почта подтверждена!\n\t\t\t</h2>\n\t\t</div>\n\t);\n});\n\nexport default ConfirmPage;\n","import ConfirmPasswordPage from \"./ConfirmPasswordPage\";\n\nexport default ConfirmPasswordPage;\n","import React, {useState} from 'react';\nimport { observer } from 'mobx-react';\nimport AuthStore from '../../store/AuthStore';\nimport './confirm-password-page.sass';\n\n/**\n * Основная страница приложения\n */\nconst ConfirmPasswordPage = observer((props) => {\n\tconst { confirmPassword, confirmPasswordState } = AuthStore;\n\n\tconst [password, setPassword] = useState('');\n\tconst [passwordConfirm, setPasswordConfirm] = useState('');\n\n\tlet search = window.location.search;\n\tlet params = new URLSearchParams(search);\n\tlet token = params.get(\"token\");\n\n\treturn (\n\t\t<div className='confirm-password-page'>\n\t\t\t<div className='confirm-password-page__body'>\n\t\t\t\t<form\n\t\t\t\t\tonSubmit={(event) => {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tconfirmPassword(token, password.value);\n\t\t\t\t\t}}>\n\t\t\t\t\t<h4 className='confirm-password-page__header'>Обновить пароль</h4>\n\t\t\t\t\t<p className='note note-danger confirm-password-page__fail' hidden={!confirmPasswordState.startsWith(\"error:\")}>\n\t\t\t\t\t\t{confirmPasswordState}\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className='note note-success confirm-password-page__success' hidden={confirmPasswordState !== \"done\"}>\n\t\t\t\t\t\tПароль обновлен!\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<label htmlFor='passwordInput'>\n\t\t\t\t\t\tНовый пароль\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tid='passwordInput'\n\t\t\t\t\t\tclassName='confirm-password-page__input'\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\tonChange={setPassword}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor='passwordConfirmInput'>\n\t\t\t\t\t\tПодтверждение пароля\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tid='passwordConfirmInput'\n\t\t\t\t\t\tclassName='confirm-password-page__input'\n\t\t\t\t\t\tvalue={passwordConfirm}\n\t\t\t\t\t\tonChange={setPasswordConfirm}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tclassName='confirm-password-page__button'\n\t\t\t\t\t\tdisabled={(password.value !== passwordConfirm.value) | (password.value.length < 1)}\n\t\t\t\t\t>\n\t\t\t\t\t\tОбновить\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default ConfirmPasswordPage;\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as userRequests from '../services/userRequests';\nimport AuthStore from './AuthStore';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface IUser {\n\t[key: string]: any,\n}\n\nclass User {\n\tuser: IUser = {};\n\tuserLogs: any = {};\n\tuserFriendsLogs: any = { log: [] };\n\tuserState: IPendingState = 'done';\n\tuserLogsState: IPendingState = 'done';\n\tuserFriendsLogsState: IPendingState = 'done';\n\tsetUserStatusState: IPendingState = 'done';\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\tget isCurrentUser() {\n\t\treturn AuthStore.loggedIn && +this.user.id === +(AuthStore.user.id || 0);\n\t}\n\n\trequestUser = async (username: string) => {\n\t\tthis.userState = 'pending';\n\t\tuserRequests.getUserInfo(username).then(this.requestUserSuccess, this.requestUserFailure);\n\t};\n\trequestUserSuccess = (result: IUser) => {\n\t\tthis.user = result;\n\t\tthis.userState = 'done';\n\t};\n\trequestUserFailure = (error: string) => {\n\t\tthis.userState = 'error: ' + error;\n\t};\n\n\trequestUserLogs = async (userID: number, page: number, resultsOnPage: number, query: string, filters: any) => {\n\t\tthis.userLogsState = 'pending';\n\t\tuserRequests.getUserLog(userID, page, resultsOnPage, query, filters).then(this.requestLogsSuccess, this.requestLogsFailure);\n\t};\n\trequestLogsSuccess = (result: any) => {\n\t\tthis.userLogs = result;\n\t\tthis.userLogsState = 'done';\n\t};\n\trequestLogsFailure = (error: any) => {\n\t\tif (error.response.status === 403) this.userLogsState = 'forbidden';\n\t\telse this.userLogsState = 'error: ' + error;\n\t};\n\tdeleteUserLog = async (logType: any, logID: any) => {\n\t\tthis.userLogsState = 'pending';\n\t\tuserRequests.deleteUserLog(this.user.id, logType, logID).then(() => this.deleteUserLogSuccess(logType, logID), this.deleteUserLogFailure);\n\t};\n\tdeleteUserLogSuccess = (logType: any, logID: any) => {\n\t\tlet newLogs = this.userLogs.log.filter((log: any) => {\n\t\t\treturn !(log.id === logID && log.type === logType);\n\t\t});\n\t\tthis.userLogs = { ...this.userLogs, log: newLogs };\n\t\tthis.userLogsState = 'done';\n\t};\n\tdeleteUserLogFailure = (error: any) => {\n\t\tif (error.response.status === 403) this.userLogsState = 'forbidden';\n\t\telse this.userLogsState = 'error: ' + error;\n\t};\n\n\trequestUserFriendsLogs = async (userID: number, page: number, resultsOnPage: number, query: string, filters: any) => {\n\t\tthis.userFriendsLogsState = 'pending';\n\t\tuserRequests.getUserFriendsLog(page, resultsOnPage, query, filters).then(this.requestFriendsLogsSuccess, this.requestFriendsLogsFailure);\n\t};\n\trequestFriendsLogsSuccess = (result: any) => {\n\t\tthis.userFriendsLogs = result;\n\t\tthis.userFriendsLogsState = 'done';\n\t};\n\trequestFriendsLogsFailure = (error: string) => {\n\t\tthis.userFriendsLogsState = 'error: ' + error;\n\t};\n\n\tsetUserStatus = async (is_following: boolean, userID: number | string) => {\n\t\tthis.setUserStatusState = 'pending';\n\t\tuserRequests.setUserStatus(is_following, userID).then(this.setUserStatusSuccess, this.setUserStatusFailure);\n\t};\n\tsetUserStatusSuccess = (result: any) => {\n\t\tthis.user.is_followed = result.is_following;\n\t\tthis.setUserStatusState = 'done';\n\t};\n\tsetUserStatusFailure = (error: string) => {\n\t\tthis.setUserStatusState = 'error: ' + error;\n\t};\n}\n\nconst UserStore = new User();\n//export default remotedev(UserStore, { name: 'User' });\nexport default UserStore;\n","import React from \"react\";\nimport Select from \"react-select\";\nimport \"./select-multi.sass\";\n\nfunction SelectMulti({ placeholder, options, onChange, hidden }) {\n\tif (hidden) return \"\";\n\telse return <Select className='react-select-container' classNamePrefix={\"multiselect\"} isMulti={true} placeholder={placeholder} onChange={onChange} options={options} hidden={hidden} />;\n}\n\nexport default SelectMulti;\n","import SelectMulti from \"./SelectMulti\";\n\nexport default SelectMulti;\n","import React from \"react\";\nimport { FaStar, FaClock } from \"react-icons/fa\";\nimport \"./item-row.sass\";\n\nfunction ItemRow({ data, fields }) {\n\treturn (\n\t\t<div className='item-row'>\n\t\t\t<div className='item-row__review' style={{ display: data.review ? \"block\" : \"none\" }}>\n\t\t\t\tОтзыв\n\t\t\t\t<div className='item-row__review-body'>{data.review}</div>\n\t\t\t</div>\n\t\t\t<div className='item-row__body'>\n\t\t\t\t<div className='item-row__body-left'>\n\t\t\t\t\t<div className='item-row__poster' style={{ backgroundImage: `url(${data.poster})` }} />\n\t\t\t\t\t<div className='item-row__name'>\n\t\t\t\t\t\t<a href={data.link}> {data.name} </a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='item-row__body-right'>\n\t\t\t\t\t<div className='item-row__status-block'>\n\t\t\t\t\t\tстатус\n\t\t\t\t\t\t<div className='item-row__status'>{data.status}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='item-row__score'>\n\t\t\t\t\t\t<div>{data.score}/10</div>\n\t\t\t\t\t\t<FaStar className='item-row__score-icon' />\n\t\t\t\t\t</div>\n\t\t\t\t\t{fields.find((field) => field.key === \"spent_time\") === undefined ? (\n\t\t\t\t\t\t\"\"\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className='item-row__time'>\n\t\t\t\t\t\t\t<div>{data.spent_time}</div>\n\t\t\t\t\t\t\t<FaClock className='item-row__time-icon' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default ItemRow;\n","import { useState, useEffect } from \"react\";\n\nfunction getWindowDimensions() {\n\tconst { innerWidth: width, innerHeight: height } = window;\n\treturn {\n\t\twidth,\n\t\theight,\n\t};\n}\n\nexport default function useWindowDimensions() {\n\tconst [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n\n\tuseEffect(() => {\n\t\tfunction handleResize() {\n\t\t\tsetWindowDimensions(getWindowDimensions());\n\t\t}\n\n\t\twindow.addEventListener(\"resize\", handleResize);\n\t\treturn () => window.removeEventListener(\"resize\", handleResize);\n\t}, []);\n\n\treturn windowDimensions;\n}","import React, { useEffect, useState } from \"react\";\nimport { CSVLink } from \"react-csv\";\nimport { FaAngleDown, FaAngleUp, FaStar, FaClock, FaArrowsAltV } from \"react-icons/fa\";\nimport Pagination from \"rc-pagination\";\n\nimport InputNumber from '../../../../../shared/InputNumber';\nimport SelectMulti from '../../../../../shared/SelectMulti';\nimport ItemRow from \"../ItemRow/ItemRow\";\nimport useWindowDimensions from '../../../../../hooks/useWindowDimensions';\n\nimport \"./item-block.sass\";\n\nfunction ItemBlock({ items, statuses, fields, name }) {\n\tconst [query, setQuery] = useState(\"\");\n\tconst [pageSize, setPageSize] = useState(10);\n\tconst [page, setPage] = useState(1);\n\tconst [filteredItems, setFilteredItems] = useState([]);\n\tconst [sort, setSort] = useState({});\n\tconst [statusFilters, setStatusFilters] = useState([]);\n\tconst [collapse, setCollapse] = useState(true);\n\tconst { width } = useWindowDimensions();\n\n\tconst toggleCollapse = () => {\n\t\tsetCollapse(!collapse);\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetFilteredItems(\n\t\t\t\titems\n\t\t\t\t\t?.filter((item) => item.name.toLowerCase().includes(query.toLowerCase()) && (statusFilters.includes(item.status) || statusFilters.length < 1))\n\t\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t\tlet field1, field2;\n\t\t\t\t\t\tif (sort.type === \"number\") {\n\t\t\t\t\t\t\tfield1 = parseFloat(a[sort.field]);\n\t\t\t\t\t\t\tfield2 = parseFloat(b[sort.field]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfield1 = a[sort.field];\n\t\t\t\t\t\t\tfield2 = b[sort.field];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (field1 > field2) return sort.isAsc ? 1 : -1;\n\t\t\t\t\t\tif (field1 < field2) return sort.isAsc ? -1 : 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[items, query, statusFilters, sort]\n\t);\n\n\treturn (\n\t\t<div className='item-block'>\n\t\t\t<div className='item-block__header'>\n\t\t\t\t<div className='item-block__header-left'>\n\t\t\t\t\t<div className='item-block__header-first-row'>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tplaceholder='Поиск'\n\t\t\t\t\t\t\taria-label='Поиск'\n\t\t\t\t\t\t\tclassName='item-block__search-input'\n\t\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\tsetQuery(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button className='item-block__mobile-expand' onClick={toggleCollapse}>\n\t\t\t\t\t\t\t{collapse ? <FaAngleDown /> : <FaAngleUp />}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='item-block__sort-buttons' hidden={collapse && width <= 515}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='item-block__sort-button'\n\t\t\t\t\t\t\thidden={fields.find((field) => field.key === \"score\") === undefined}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetSort({ field: \"score\", type: \"number\", isAsc: !sort.isAsc });\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<FaStar /> <FaArrowsAltV />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='item-block__sort-button'\n\t\t\t\t\t\t\thidden={fields.find((field) => field.key === \"spent_time\") === undefined}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetSort({ field: \"spent_time\", type: \"number\", isAsc: !sort.isAsc });\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<FaClock /> <FaArrowsAltV />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<SelectMulti\n\t\t\t\t\t\thidden={collapse && width <= 515}\n\t\t\t\t\t\tplaceholder={\"Cтатус\"}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetStatusFilters(e.map((obj) => obj.value));\n\t\t\t\t\t\t}}\n\t\t\t\t\t\toptions={statuses}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='item-block__header-right' hidden={collapse && width <= 515}>\n\t\t\t\t\t<label className='item-block__label'>Записей на странице</label>\n\t\t\t\t\t<InputNumber value={pageSize} max={100} min={1} onChange={(value) => setPageSize(value)} dataList={[5, 10, 25, 50, 100]} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className='item-block__rows'>\n\t\t\t\t{filteredItems?.slice((page - 1) * pageSize, page * pageSize).map((item, counter) => (\n\t\t\t\t\t<ItemRow data={item} fields={fields} key={counter} />\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className='item-block__footer'>\n\t\t\t\t<Pagination\n\t\t\t\t\ttotal={filteredItems?.length}\n\t\t\t\t\tpageSize={pageSize}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetPage(e);\n\t\t\t\t\t}}\n\t\t\t\t\tcurrent={page}\n\t\t\t\t/>\n\t\t\t\t<CSVLink data={items ? items : []} headers={fields} separator={\";\"} filename={`interests ${name}.csv`}>\n\t\t\t\t\tСкачать CSV\n\t\t\t\t</CSVLink>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default ItemBlock;\n","import ItemBlock from \"./ItemBlock\";\n\nexport default ItemBlock;\n","import React from \"react\";\nimport ItemBlock from \"./ItemBlock\";\n\nfunction GameBlock({ games }) {\n\treturn (\n\t\t<ItemBlock\n\t\t\titems={games?.map((game) => {\n\t\t\t\treturn {\n\t\t\t\t\tlink: window.location.origin + \"/game/\" + game.game.rawg_slug,\n\t\t\t\t\tname: game.game.rawg_name,\n\t\t\t\t\tstatus: game.status,\n\t\t\t\t\tscore: game.score,\n\t\t\t\t\treview: game.review,\n\t\t\t\t\tspent_time: parseFloat(game.spent_time),\n\t\t\t\t\tposter: game.game.rawg_backdrop_path,\n\t\t\t\t};\n\t\t\t})}\n\t\t\tstatuses={[\n\t\t\t\t{ value: \"Буду играть\", label: \"Буду играть\" },\n\t\t\t\t{ value: \"Играю\", label: \"Играю\" },\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\n\t\t\t\t{ value: \"Прошел\", label: \"Прошел\" },\n\t\t\t]}\n\t\t\tfields={[\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\n\t\t\t\t{ label: \"Название\", key: \"name\" },\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\n\t\t\t\t{ label: \"Время прохождения\", key: \"spent_time\" },\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\n\t\t\t]}\n\t\t\tname={\"Игры\"}\n\t\t/>\n\t);\n}\n\nexport default GameBlock;\n","import React from \"react\";\nimport ItemBlock from \"./ItemBlock\";\n\nfunction MovieBlock({ movies }) {\n\treturn (\n\t\t<ItemBlock\n\t\t\titems={movies?.map((movie) => {\n\t\t\t\treturn {\n\t\t\t\t\tlink: window.location.origin + \"/movie/\" + movie.movie.tmdb_id,\n\t\t\t\t\tname: movie.movie.tmdb_name,\n\t\t\t\t\tstatus: movie.status,\n\t\t\t\t\tscore: movie.score,\n\t\t\t\t\treview: movie.review,\n\t\t\t\t\tposter: movie.movie.tmdb_backdrop_path,\n\t\t\t\t};\n\t\t\t})}\n\t\t\tstatuses={[\n\t\t\t\t{ value: \"Буду смотреть\", label: \"Буду смотреть\" },\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\n\t\t\t\t{ value: \"Посмотрел\", label: \"Посмотрел\" },\n\t\t\t]}\n\t\t\tfields={[\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\n\t\t\t\t{ label: \"Название\", key: \"name\" },\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\n\t\t\t]}\n\t\t\tname={\"Фильмы\"}\n\t\t/>\n\t);\n}\n\nexport default MovieBlock;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport classnames from \"classnames\";\n\nimport Rating from '../../../../../shared/Rating';\n\nimport \"./log-row.sass\";\n\nfunction LogRow({ log, showUsername, onDeleteLog, className }) {\n\tlet history = useHistory();\n\n\tfunction translateActionType(action, actionResult) {\n\t\tswitch (action) {\n\t\t\tcase \"score\":\n\t\t\t\tswitch (actionResult) {\n\t\t\t\t\tcase \"0\":\n\t\t\t\t\t\treturn \"посмотрел(а)\";\n\t\t\t\t\tcase \"-1\":\n\t\t\t\t\t\treturn \"не смотрела(а)\";\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn \"оценил(а)\";\n\t\t\t\t}\n\t\t\tcase \"status\":\n\t\t\t\treturn \"изменил(а) статус\";\n\t\t\tcase \"review\":\n\t\t\t\treturn \"оставил(а) отзыв на\";\n\t\t\tcase \"spent_time\":\n\t\t\t\treturn \"изменил(а) время прохождения\";\n\t\t\tcase \"episodes\":\n\t\t\t\tif (actionResult > 0) return \"посмотрел(а) \" + actionResult + \" серий\";\n\t\t\t\telse return \"не смотрел(а) \" + actionResult * -1 + \" серий\";\n\t\t\tcase \"is_following\":\n\t\t\t\tif (actionResult === \"True\") return \"подписан(а) на\";\n\t\t\t\telse return \"отписан(а) от\";\n\t\t\tdefault:\n\t\t\t\treturn action;\n\t\t}\n\t}\n\n\tfunction translateType(type, actionType) {\n\t\tswitch (type) {\n\t\t\tcase \"game\":\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"игру\";\n\t\t\t\telse return \"игры\";\n\t\t\tcase \"movie\":\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"фильм\";\n\t\t\t\telse return \"фильма\";\n\t\t\tcase \"show\":\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"сериал\";\n\t\t\t\telse return \"сериала\";\n\t\t\tcase \"season\":\n\t\t\t\treturn \"\";\n\t\t\tcase \"episode\":\n\t\t\t\treturn \"\";\n\t\t\tcase \"user\":\n\t\t\t\treturn \"пользователя\";\n\t\t\tdefault:\n\t\t\t\treturn type;\n\t\t}\n\t}\n\n\tfunction nameToLink(name, type, id) {\n\t\tswitch (type) {\n\t\t\tcase \"game\":\n\t\t\t\treturn (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + id}\n\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thistory.push(\"/game/\" + id);\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</a>\n\t\t\t\t);\n\t\t\tcase \"movie\":\n\t\t\t\treturn (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + id}\n\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + id);\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</a>\n\t\t\t\t);\n\t\t\tcase \"show\":\n\t\t\t\treturn (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id}\n\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thistory.push(\"/show/\" + id);\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</a>\n\t\t\t\t);\n\t\t\tcase \"season\":\n\t\t\t\treturn (\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number}\n\t\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{name.name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\n\t\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{name.parent_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\tcase \"episode\":\n\t\t\t\treturn (\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number}\n\t\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t[s{id.season_number}e{id.episode_number}] серию\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\n\t\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{name.parent_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\tcase \"user\":\n\t\t\t\treturn (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={window.location.origin + \"/user/\" + id}\n\t\t\t\t\t\tclassName='log-row__link'\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\thistory.push(\"/user/\" + id);\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</a>\n\t\t\t\t);\n\t\t\tdefault:\n\t\t\t\treturn name;\n\t\t}\n\t}\n\n\tfunction userToLink(username, userID) {\n\t\treturn (\n\t\t\t<a\n\t\t\t\thref={window.location.origin + \"/user/\" + userID}\n\t\t\t\tclassName='log-row__link'\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\thistory.push(\"/user/\" + userID);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}>\n\t\t\t\t{username}\n\t\t\t</a>\n\t\t);\n\t}\n\n\tfunction actionResultToStr(actionType, actionResult, target) {\n\t\tswitch (actionType) {\n\t\t\tcase \"score\":\n\t\t\t\tif ((target !== \"episode\") | (actionResult > 0)) return <Rating initialRating={actionResult} readonly={true} />;\n\t\t\t\telse return \"\";\n\t\t\tcase \"status\":\n\t\t\t\treturn '\"' + actionResult + '\"';\n\t\t\tcase \"review\":\n\t\t\t\treturn '\"' + actionResult + '\"';\n\t\t\tcase \"spent_time\":\n\t\t\t\treturn actionResult + \" \" + intToHours(actionResult);\n\t\t\tcase \"episodes\":\n\t\t\t\treturn \"\";\n\t\t\tcase \"is_following\":\n\t\t\t\treturn \"\";\n\t\t\tdefault:\n\t\t\t\treturn actionResult;\n\t\t}\n\t}\n\n\tfunction parseDate(date) {\n\t\tlet newDate = new Date(date);\n\t\tlet options = { hour: \"numeric\", minute: \"numeric\" };\n\t\treturn newDate.toLocaleTimeString(\"ru-RU\", options);\n\t}\n\n\treturn (\n\t\t<div className={classnames(\"log-row\", className)}>\n\t\t\t{parseDate(log.created)}&thinsp;\n\t\t\t{showUsername ? userToLink(log.user, log.user_id) : \"\"}&thinsp;\n\t\t\t{translateActionType(log.action_type, log.action_result)}&thinsp;\n\t\t\t{translateType(log.type, log.action_type)}&thinsp;\n\t\t\t{nameToLink(log.target, log.type, log.target_id)}\n\t\t\t{(log.type === \"user\") | (log.action_type === \"episodes\") | (log.action_result === \"0\") | (log.action_result === \"-1\") ? \"\" : \":\"}&thinsp;\n\t\t\t{actionResultToStr(log.action_type, log.action_result, log.type)}\n\t\t\t<button\n\t\t\t\tclassName={classnames(\"log-row__delete-button\", showUsername ? \"log-row__delete-button_hidden\" : \"\")}\n\t\t\t\tonClick={(event) => {\n\t\t\t\t\tonDeleteLog(log.type, log.id);\n\t\t\t\t}}>\n\t\t\t\tx\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nfunction intToHours(number) {\n\tif (11 <= number && number <= 14) return \"часов\";\n\telse if (number % 10 === 1) return \"час\";\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\n\telse return \"часов\";\n}\n\nexport default LogRow;\n","import React, { useEffect, useState } from \"react\";\nimport LogRow from \"../LogRow/LogRow\";\nimport \"./logs-by-day.sass\";\n\nfunction UserLogs({ logs, showUsername, currentUser, onDeleteLog }) {\n\tconst [logsByDay, setLogsByDay] = useState([]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tsetLogsByDay(groupLogsByDay(logs.log));\n\t\t},\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[logs]\n\t);\n\n\tfunction groupLogsByDay(logs) {\n\t\tlet newLogs = [];\n\n\t\tfor (let i in logs) {\n\t\t\tlet date = new Date(logs[i].created);\n\n\t\t\tif (newLogs.length === 0)\n\t\t\t\tnewLogs.push({\n\t\t\t\t\tdate: date,\n\t\t\t\t\tlogs: [logs[i]],\n\t\t\t\t});\n\t\t\telse if (date.getDay() === newLogs[newLogs.length - 1].date.getDay()) newLogs[newLogs.length - 1].logs.push(logs[i]);\n\t\t\telse\n\t\t\t\tnewLogs.push({\n\t\t\t\t\tdate: date,\n\t\t\t\t\tlogs: [logs[i]],\n\t\t\t\t});\n\t\t}\n\t\treturn newLogs;\n\t}\n\n\treturn (\n\t\t<div className='logs-by-day'>\n\t\t\t{logsByDay.map((dayLog, counter) => (\n\t\t\t\t<div key={counter} className='logs-by-day__day'>\n\t\t\t\t\t<div className='logs-by-day__date'>\n\t\t\t\t\t\t{dayLog.date.toLocaleDateString(\"ru-RU\", { year: dayLog.date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"numeric\", day: \"numeric\" })}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='logs-by-day__logs'>\n\t\t\t\t\t\t{dayLog.logs.map((log) => (\n\t\t\t\t\t\t\t<LogRow log={log} showUsername={showUsername} key={log.id + log.created} currentUser={currentUser} onDeleteLog={onDeleteLog} className='logs-by-day__log' />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default UserLogs;\n","import React, { useEffect, useState } from \"react\";\nimport Pagination from \"rc-pagination\";\nimport { FaAngleDown, FaAngleUp } from \"react-icons/fa\";\n\nimport SelectMulti from '../../../../shared/SelectMulti';\nimport InputNumber from '../../../../shared/InputNumber';\nimport LogsByDay from \"./LogsByDay/LogsByDay\";\nimport useWindowDimensions from '../../../../hooks/useWindowDimensions';\n\nimport \"./user-logs.sass\";\n\nfunction UserLogs({ userID, logs, showUsername, requestUserLogs, currentUser, onDeleteLog, logsType }) {\n\tconst [currentPage, setCurrentPage] = useState(1);\n\tconst [pageSize, setPageSize] = useState(15);\n\tconst [query, setQuery] = useState(\"\");\n\tconst [filters, setFilters] = useState([]);\n\tconst [collapse, setCollapse] = useState(true);\n\tconst { width } = useWindowDimensions();\n\n\tconst toggleCollapse = () => {\n\t\tsetCollapse(!collapse);\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (logsType === \"user\" || (logsType === \"userFriends\" && currentUser)) requestUserLogs(userID, currentPage, pageSize, query, filters);\n\t\t},\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[userID, currentPage, currentUser, logsType, pageSize, filters]\n\t);\n\n\treturn (\n\t\t<div className='user-logs'>\n\t\t\t<div className='user-logs__header'>\n\t\t\t\t<div className='user-logs__header-left'>\n\t\t\t\t\t<div className='user-logs__header-first-row'>\n\t\t\t\t\t\t<form\n\t\t\t\t\t\t\tonSubmit={(event) => {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\trequestUserLogs(userID, currentPage, pageSize, query, filters);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\tplaceholder='Поиск'\n\t\t\t\t\t\t\t\taria-label='Поиск'\n\t\t\t\t\t\t\t\tclassName='user-logs__search-input'\n\t\t\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\tsetQuery(event.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t<button className='user-logs__mobile-expand' onClick={toggleCollapse}>\n\t\t\t\t\t\t\t{collapse ? <FaAngleDown /> : <FaAngleUp />}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<SelectMulti\n\t\t\t\t\t\tplaceholder={\"Тип логов\"}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetFilters(e.map((obj) => obj.value));\n\t\t\t\t\t\t}}\n\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t{ value: \"game\", label: \"Игры\" },\n\t\t\t\t\t\t\t{ value: \"movie\", label: \"Фильмы\" },\n\t\t\t\t\t\t\t{ value: \"show\", label: \"Сериал\" },\n\t\t\t\t\t\t\t{ value: \"user\", label: \"Пользователи\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\thidden={collapse && width < 748}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className='user-logs__page-size' hidden={collapse && width < 748}>\n\t\t\t\t\t<label className='user-logs__page-size-label'> Записей на странице</label>\n\t\t\t\t\t<InputNumber value={pageSize} max={100} min={1} onChange={(value) => setPageSize(value)} dataList={[5, 10, 25, 50, 100]} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<LogsByDay logs={logs} showUsername={showUsername} currentUser={currentUser} onDeleteLog={onDeleteLog} />\n\t\t\t<Pagination\n\t\t\t\ttotal={logs.count}\n\t\t\t\tpageSize={pageSize}\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tsetCurrentPage(e);\n\t\t\t\t}}\n\t\t\t\tcurrent={currentPage}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default UserLogs;\n","import UserLogs from \"./UserLogs\";\n\nexport default UserLogs;\n","import React from \"react\";\nimport ItemBlock from \"./ItemBlock\";\n\nfunction ShowBlock({ shows }) {\n\treturn (\n\t\t<ItemBlock\n\t\t\titems={shows?.map((show) => {\n\t\t\t\treturn {\n\t\t\t\t\tlink: window.location.origin + \"/show/\" + show.show.tmdb_id,\n\t\t\t\t\tname: show.show.tmdb_name,\n\t\t\t\t\tstatus: show.status,\n\t\t\t\t\tscore: show.score,\n\t\t\t\t\treview: show.review,\n\t\t\t\t\tposter: show.show.tmdb_backdrop_path,\n\t\t\t\t\tspent_time: show.spent_time,\n\t\t\t\t};\n\t\t\t})}\n\t\t\tstatuses={[\n\t\t\t\t{ value: \"Буду смотреть\", label: \"Буду смотреть\" },\n\t\t\t\t{ value: \"Смотрю\", label: \"Смотрю\" },\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\n\t\t\t\t{ value: \"Посмотрел\", label: \"Посмотрел\" },\n\t\t\t]}\n\t\t\tfields={[\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\n\t\t\t\t{ label: \"Название\", key: \"name\" },\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\n\t\t\t\t{ label: \"Время просмотра\", key: \"spent_time\" },\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\n\t\t\t]}\n\t\t\tname={\"Сериалы\"}\n\t\t/>\n\t);\n}\n\nexport default ShowBlock;\n","export const COLORS = [\n\t\"rgb(43,206,72)\",\n\t\"rgb(240,163,255)\",\n\t\"rgb(0,117,220)\",\n\t\"rgb(153,63,0)\",\n\t\"rgb(76,0,92)\",\n\t\"rgb(225,225,225)\",\n\t\"rgb(0,92,49)\",\n\t\"rgb(255,204,153)\",\n\t\"rgb(128,128,128)\",\n\t\"rgb(148,255,181)\",\n\t\"rgb(143,124,0)\",\n\t\"rgb(157,204,0)\",\n\t\"rgb(194,0,136)\",\n\t\"rgb(0,51,128)\",\n\t\"rgb(255,164,5)\",\n\t\"rgb(255,168,187)\",\n\t\"rgb(66,102,0)\",\n\t\"rgb(255,0,16)\",\n\t\"rgb(94,241,242)\",\n\t\"rgb(0,153,143)\",\n\t\"rgb(224,255,102)\",\n\t\"rgb(116,10,255)\",\n\t\"rgb(153,0,0)\",\n\t\"rgb(255,255,128)\",\n\t\"rgb(255,255,0)\",\n\t\"rgb(255,80,)\",\n];\n","import React, { useState, useEffect } from \"react\";\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\nimport { COLORS } from \"../Colors\";\n\nfunction ChartBlock(props) {\n\tconst [chartData, setChartData] = useState([]);\n\n\tuseEffect(() => {\n\t\tsetChartData([]);\n\t\tif (props.chartData && props.chartData?.length > 0) {\n\t\t\tlet newData = props.chartData?.map((value) => ({ name: value.name, Процент: value.spent_time_percent })).sort((a, b) => b.Процент - a.Процент);\n\t\t\tnewData = newData.slice(0, 12);\n\t\t\tconsole.log(newData);\n\t\t\tsetChartData(newData);\n\t\t}\n\t}, [props.chartData, setChartData]);\n\n\treturn (\n\t\t<div hidden={props.hidden}>\n\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (\n\t\t\t\t<BarChart width={document.body.clientWidth - 50} height={chartData?.length * 40} data={chartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\n\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\n\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\n\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\n\t\t\t\t\t\tcursor={false}\n\t\t\t\t\t/>\n\t\t\t\t\t<Bar dataKey='Процент'>\n\t\t\t\t\t\t{chartData.map((entry, index) => (\n\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Bar>\n\t\t\t\t</BarChart>\n\t\t\t) : (\n\t\t\t\t<BarChart width={Math.min(chartData?.length * 100, document.body.clientWidth - 50)} height={300} data={chartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\n\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\n\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\n\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\n\t\t\t\t\t\tcursor={false}\n\t\t\t\t\t/>\n\t\t\t\t\t<Bar dataKey='Процент'>\n\t\t\t\t\t\t{chartData?.map((entry, index) => (\n\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Bar>\n\t\t\t\t</BarChart>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default ChartBlock;\n","import React, { useEffect, useState } from \"react\";\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\n\nfunction YearsChart(props) {\n\tconst [chartData, setChartData] = useState([]);\n\tconst [maxCount, setMaxCount] = useState(0);\n\n\tuseEffect(() => {\n\t\tsetChartData([]);\n\t\tif (props.chartData && props.chartData?.length > 0) {\n\t\t\tlet newMaxCount = 0;\n\t\t\tlet newData = props.chartData\n\t\t\t\t?.map((value, index, array) => {\n\t\t\t\t\tif (value.count > maxCount) {\n\t\t\t\t\t\tnewMaxCount = value.count;\n\t\t\t\t\t}\n\t\t\t\t\treturn { name: value.year, Количество: value.count };\n\t\t\t\t})\n\t\t\t\t.sort((a, b) => a.name - b.name);\n\t\t\tsetMaxCount(newMaxCount);\n\t\t\tsetChartData(newData);\n\t\t}\n\t}, [props.chartData, setChartData]);\n\n\treturn (\n\t\t<div hidden={props.hidden}>\n\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? null : (\n\t\t\t\t<ResponsiveContainer width={\"100%\"} height={200}>\n\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\n\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\n\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\n\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\n\t\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t<XAxis dataKey='name' tick={{ fill: \"rgb(238, 238, 238)\" }} allowDataOverflow={false} />\n\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, maxCount + 1]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\n\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\n\t\t\t\t\t\t<Area type='monotone' dataKey='Количество' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\n\t\t\t\t\t</AreaChart>\n\t\t\t\t</ResponsiveContainer>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default YearsChart;\n","import React, { useEffect, useState } from \"react\";\nimport { PieChart, Pie, Legend, Cell, Tooltip } from \"recharts\";\nimport { COLORS } from \"../Colors\";\n\nfunction ChartBlock({ stats }) {\n\tconst [chartData, setChartData] = useState([]);\n\n\tuseEffect(() => {\n\t\tsetChartData([]);\n\t\tif (stats?.games) {\n\t\t\tlet newData = [];\n\t\t\tif (stats?.games?.total_spent_time > 0) newData.push({ name: \"Часов в играх\", value: stats?.games?.total_spent_time });\n\t\t\tif (stats?.movies?.total_spent_time > 0) newData.push({ name: \"Часов в фильмах\", value: stats?.movies?.total_spent_time });\n\t\t\tif (stats?.episodes?.total_spent_time > 0) newData.push({ name: \"Часов в сериалах\", value: stats?.episodes?.total_spent_time });\n\t\t\tsetChartData(newData);\n\t\t}\n\t}, [stats]);\n\n\treturn (\n\t\t<div hidden={chartData.length < 1}>\n\t\t\t<PieChart width={350} height={260} hidden={chartData.length < 1}>\n\t\t\t\t<Pie dataKey='value' data={chartData} cx='50%' cy='50%' outerRadius={80} fill='#8884d8' labelLine={true} label minAngle={5}>\n\t\t\t\t\t{chartData.map((entry, index) => (\n\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\n\t\t\t\t\t))}\n\t\t\t\t</Pie>\n\t\t\t\t<Tooltip\n\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\n\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\n\t\t\t\t\tcursor={false}\n\t\t\t\t/>\n\t\t\t\t<Legend verticalAlign='bottom' horizontalAlign='center' />\n\t\t\t</PieChart>\n\t\t</div>\n\t);\n}\n\nexport default ChartBlock;\n","import React from \"react\";\nimport GenresChart from \"./GenresChart/GenresChart\";\nimport YearsChart from \"./YearsChart/YearsChart\";\nimport ChartBlock from \"./ChartBlock/ChartBlock\";\n\nfunction StatisticsBlock({ stats }) {\n\treturn (\n\t\t<div>\n\t\t\t<ChartBlock stats={stats} />\n\t\t\t<div hidden={!stats?.games}>\n\t\t\t\t<h3>Игры</h3>\n\t\t\t\t<p style={{ marginBottom: \"1rem\" }}>\n\t\t\t\t\tИгр сыграно: {stats?.games?.count}, часов наиграно: {stats?.games?.total_spent_time}\n\t\t\t\t</p>\n\t\t\t\t<p>Популярные жанры:</p>\n\t\t\t\t<GenresChart chartData={stats?.games?.genres} hidden={stats?.games?.genres?.length < 1} />\n\t\t\t\t<p>Пройденные игры по году выпуска:</p>\n\t\t\t\t<YearsChart chartData={stats?.games?.years} hidden={stats?.games?.years?.length < 1} />\n\t\t\t</div>\n\t\t\t<div hidden={!stats?.movies}>\n\t\t\t\t<h3>Фильмы</h3>\n\t\t\t\t<p style={{ marginBottom: \"1rem\" }}>\n\t\t\t\t\tФильмов посмотрено: {stats?.movies?.count}, часов просмотра: {stats?.movies?.total_spent_time}\n\t\t\t\t</p>\n\t\t\t\t<p>Популярные жанры:</p>\n\t\t\t\t<GenresChart chartData={stats?.movies?.genres} hidden={stats?.movies?.genres?.length < 1} />\n\t\t\t\t<p>Просмотренные фильмы по году выпуска:</p>\n\t\t\t\t<YearsChart chartData={stats?.movies?.years} hidden={stats?.movies?.years?.length < 1} />\n\t\t\t</div>\n\t\t\t<div hidden={!stats?.episodes}>\n\t\t\t\t<h3>Сериалы</h3>\n\t\t\t\t<p style={{ marginBottom: \"1rem\" }}>\n\t\t\t\t\tСерий сериалов посмотрено: {stats?.episodes?.count}, часов просмотра: {stats?.episodes?.total_spent_time}\n\t\t\t\t</p>\n\t\t\t\t<GenresChart chartData={stats?.episodes?.genres} hidden={stats?.episodes?.genres?.length < 1} />\n\t\t\t\t<p>Просмотренные сериалы по году выпуска:</p>\n\t\t\t\t<YearsChart chartData={stats?.episodes?.years} hidden={stats?.episodes?.years?.length < 1} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default StatisticsBlock;\n","import StatisticsBlock from \"./StatisticsBlock\";\n\nexport default StatisticsBlock;\n","import UserPage from \"./UserPage\";\n\nexport default UserPage;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\nimport { FaLock } from \"react-icons/fa\";\nimport { useQueryParam, StringParam, withDefault } from \"use-query-params\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nimport AuthStore from '../../store/AuthStore';\nimport UserStore from '../../store/UserStore';\nimport GameBlock from './views/ItemsBlock/GameBlock';\nimport FriendBlock from '../../shared/FriendBlock';\nimport MovieBlock from './views/ItemsBlock/MovieBlock';\nimport UserLogs from './views/UserLogs';\nimport CategoriesTab from '../../shared/CategoriesTab';\nimport ShowBlock from './views/ItemsBlock/ShowBlock';\nimport StatisticsBlock from './views/StatisticsBlock';\n\nimport \"./user-page.sass\";\n\n/**\n * Основная страница приложения\n */\nconst UserPage = observer((props) => {\n\tconst { currentUser } = AuthStore;\n\tconst { user, userState, requestUser, setUserStatus, requestUserLogs, userLogs, userLogsState, requestUserFriendsLogs, userFriendsLogs, userFriendsLogsState, deleteUserLog, isCurrentUser } =\n\t\tUserStore;\n\n\tlet { userID } = useParams();\n\tconst [activeCategory, setActiveCategory] = useQueryParam(\"сategory\", withDefault(StringParam, \"Лента\"));\n\tconst [lastActivity, setLastActivity] = useState(\"\");\n\n\tuseEffect(\n\t\t() => {\n\t\t\trequestUser(userID);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[userID, requestUser]\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.title = user.username ? \"Профиль \" + user.username : 'Interests';\n\t\tif (user.last_activity) {\n\t\t\tlet date = new Date(user.last_activity);\n\t\t\tlet options = { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", hour: \"numeric\", minute: \"numeric\" };\n\t\t\tsetLastActivity(date.toLocaleString(\"ru-RU\", options));\n\t\t} else setLastActivity(\"\");\n\t}, [user]);\n\n\treturn (\n\t\t<div className='user-page'>\n\t\t\t<LoadingOverlay active={userState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t<div className='user-page__body'>\n\t\t\t\t\t<div className='user-page__header'>\n\t\t\t\t\t\t<div className='user-page__user-card'>\n\t\t\t\t\t\t\t<div className='user-page__user-avatar' style={{ backgroundImage: `url(${\"https://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }} />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h2 className='user-page__username'>{user.username}</h2>\n\t\t\t\t\t\t\t\t<div hidden={!user.is_available} className='user-page__last-activity'>\n\t\t\t\t\t\t\t\t\tПоследняя активность {lastActivity}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\thidden={isCurrentUser || !user.is_available}\n\t\t\t\t\t\t\tclassName='user-page__subscribe-button'\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetUserStatus({ is_following: user.is_followed ? false : true }, user.id);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{user.is_followed ? \"Отписаться\" : \"Подписаться\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<CategoriesTab categories={[\"Лента\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Статистика\", \"Друзья\"]} activeCategory={activeCategory} onChangeCategory={setActiveCategory}>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Лента\"}>\n\t\t\t\t\t\t\t<div hidden={!user.is_available}>\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userLogsState === \"pending\" && userState !== \"pending\"} spinner text='Загрузка активности...'>\n\t\t\t\t\t\t\t\t\t<UserLogs userID={userID} logs={userLogs} requestUserLogs={requestUserLogs} currentUser={isCurrentUser} onDeleteLog={deleteUserLog} logsType={\"user\"} />\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<h4 hidden={user.is_available || userState === \"pending\"}>\n\t\t\t\t\t\t\t\t<FaLock style={{ marginRight: \"1rem\" }} />\n\t\t\t\t\t\t\t\tПрофиль скрыт настройками приватности\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Игры\"}>\n\t\t\t\t\t\t\t<GameBlock games={user.games} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Фильмы\"}>\n\t\t\t\t\t\t\t<MovieBlock movies={user.movies} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Сериалы\"}>\n\t\t\t\t\t\t\t<ShowBlock shows={user.shows} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Статистика\"}>\n\t\t\t\t\t\t\t<StatisticsBlock stats={user.stats} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Друзья\"}>\n\t\t\t\t\t\t\t<FriendBlock users={user.followed_users ? user.followed_users : []} />\n\t\t\t\t\t\t\t<div hidden={currentUser.username !== user.username}>\n\t\t\t\t\t\t\t\t<h4 className='user-page__friends-header'>Активность друзей: </h4>\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userFriendsLogsState === \"pending\" && userState !== \"pending\"} spinner text='Загрузка активности...'>\n\t\t\t\t\t\t\t\t\t<UserLogs userID={userID} logs={userFriendsLogs} requestUserLogs={requestUserFriendsLogs} currentUser={isCurrentUser} showUsername={true} logsType={\"userFriends\"} />\n\t\t\t\t\t\t\t\t</LoadingOverlay>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CategoriesTab>\n\t\t\t\t</div>\n\t\t\t</LoadingOverlay>\n\t\t</div>\n\t);\n});\n\nexport default UserPage;\n","import { makeAutoObservable } from 'mobx';\n//import remotedev from 'mobx-remotedev';\nimport * as userRequests from '../services/userRequests';\nimport * as showRequests from '../services/showRequests';\n\ntype IPendingState = 'done' | 'pending' | string;\n\nexport interface ICalendar {\n\t[key: string]: any,\n}\n\nexport interface ISettings {\n\t[key: string]: any,\n}\n\nexport interface ICurrentUser {\n\tcalendar: ICalendar,\n\tsettings: ISettings,\n\tunwatched: any,\n\tcalendarState: IPendingState,\n\tsettingsState: IPendingState,\n\tunwatchedState: IPendingState,\n\tsaveSettingsState: IPendingState,\n}\n\nclass CurrentUser {\n\tcalendar = {};\n\tsettings = {};\n\tunwatched = [];\n\tcalendarState = 'done';\n\tsettingsState = 'done';\n\tunwatchedState = 'done';\n\tsaveSettingsState = 'done';\n\n\tconstructor() {\n\t\tmakeAutoObservable(this);\n\t}\n\n\trequestCalendar = async () => {\n\t\tthis.calendarState = 'pending';\n\t\tuserRequests.getUserCalendar().then(this.requestCalendarSuccess, this.requestCalendarFailure);\n\t};\n\trequestCalendarSuccess = (result: ICalendar) => {\n\t\tthis.calendar = result;\n\t\tthis.calendarState = 'done';\n\t};\n\trequestCalendarFailure = (error: string) => {\n\t\tthis.calendarState = 'error: ' + error;\n\t};\n\n\trequestSettings = async () => {\n\t\tthis.settingsState = 'pending';\n\t\tuserRequests.getUserSettings().then(this.requestSettingsSuccess, this.requestSettingsFailure);\n\t};\n\trequestSettingsSuccess = (result: ISettings) => {\n\t\tthis.settings = result;\n\t\tthis.settingsState = 'done';\n\t};\n\trequestSettingsFailure = (error: string) => {\n\t\tthis.settingsState = 'error: ' + error;\n\t};\n\n\trequestUnwatched = async () => {\n\t\tthis.unwatchedState = 'pending';\n\t\tshowRequests.getUnwatchedEpisodes().then(this.requestUnwatchedSuccess, this.requestUnwatchedFailure);\n\t};\n\trequestUnwatchedSuccess = (result: any) => {\n\t\tthis.unwatched = result;\n\t\tthis.unwatchedState = 'done';\n\t};\n\trequestUnwatchedFailure = (error: string) => {\n\t\tthis.unwatchedState = 'error: ' + error;\n\t};\n\n\tpatchSettings = async (settings: ISettings) => {\n\t\tthis.saveSettingsState = 'pending';\n\t\tuserRequests.patchUserSettings(settings).then(this.patchSettingsSuccess, this.patchSettingsFailure);\n\t};\n\tpatchSettingsReset = () => {\n\t\tthis.saveSettingsState = 'done';\n\t};\n\tpatchSettingsSuccess = (result: ISettings) => {\n\t\tthis.saveSettingsState = 'saved';\n\t\tthis.settings = result;\n\t\tsetTimeout(this.patchSettingsReset, 1000);\n\t};\n\tpatchSettingsFailure = (error: string) => {\n\t\tthis.saveSettingsState = 'error: ' + error;\n\t};\n}\n\nconst CurrentUserStore = new CurrentUser();\n//export default remotedev(CurrentUserStore, { name: 'CurrentUser' });\nexport default CurrentUserStore;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./day-info.sass\";\n\nfunction DayInfo({ day, date }) {\n\tlet history = useHistory();\n\n\treturn (\n\t\t<div className='day-info'>\n\t\t\t<h2 className='day-info__date'>\n\t\t\t\t{date ? date.toLocaleDateString(\"ru-RU\", { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", weekday: \"long\" }) : \"\"}\n\t\t\t</h2>\n\t\t\t<div className='day-info__category' hidden={!(day?.games?.length > 0)}>\n\t\t\t\t<h3 className='day-info__category-header'>Игры</h3>\n\t\t\t\t{day.games?.map((game) => (\n\t\t\t\t\t<div key={game.rawg_id}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName='day-info__link'\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{game.rawg_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className='day-info__category' hidden={!(day?.movies?.length > 0)}>\n\t\t\t\t<h3 className='day-info__category-header'>Фильмы</h3>\n\t\t\t\t{day.movies?.map((movie) => (\n\t\t\t\t\t<div key={movie.tmdb_id}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName='day-info__link'\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{movie.tmdb_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className='day-info__category' hidden={!(day?.episodes?.length > 0)}>\n\t\t\t\t<h3 className='day-info__category-header'>Сериалы</h3>\n\t\t\t\t{day.episodes?.map((episode) => (\n\t\t\t\t\t<div key={episode.tmdb_id}>\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName='day-info__link'\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName='day-info__link'\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default DayInfo;\n","import DayInfo from \"./DayInfo\";\n\nexport default DayInfo;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Timeline, TimelineEvent } from \"react-event-timeline\";\nimport { MdVideogameAsset, MdLocalMovies, MdLiveTv, MdApps } from \"react-icons/md\";\n\nfunction ReleasesList({ calendar }) {\n\tlet history = useHistory();\n\n\tconst myStyle = {\n\t\tbackgroundColor: \"#191A1B\",\n\t\tcolor: \"#F1F1FB\",\n\t\tborder: \"none\",\n\t};\n\n\tfunction getContentForDay(day) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{day.games?.map((game) => (\n\t\t\t\t\t<div key={game.rawg_id}>\n\t\t\t\t\t\tИгра{\" \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{game.rawg_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t\t{day.movies?.map((movie) => (\n\t\t\t\t\t<div key={movie.tmdb_id}>\n\t\t\t\t\t\tФильм{\" \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{movie.tmdb_name}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t\t{day.episodes?.map((episode) => (\n\t\t\t\t\t<div key={episode.tmdb_id}>\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tfunction getIconForDay(day) {\n\t\tif ((day.games?.length > 0) & !(day.movies?.length > 0) & !(day.episodes?.length > 0)) return <MdVideogameAsset />;\n\t\telse if ((day.movies?.length > 0) & !(day.games?.length > 0) & !(day.episodes?.length > 0)) return <MdLocalMovies />;\n\t\telse if ((day.episodes?.length > 0) & !(day.movies?.length > 0) & !(day.games?.length > 0)) return <MdLiveTv />;\n\t\telse return <MdApps />;\n\t}\n\n\tfunction dateDiff(date) {\n\t\tlet now = new Date();\n\t\tlet time = date.getTime();\n\t\tlet timeNow = now.getTime();\n\t\tlet diff = (time - timeNow) / (24 * 3600 * 1000);\n\t\tif (diff < 1)\n\t\t\tif (now.getUTCDay() === date.getUTCDay()) return 0;\n\t\t\telse return 1;\n\t\treturn parseInt(diff) + 1;\n\t}\n\n\tfunction intToDays(number) {\n\t\tif (11 <= number && number <= 14) return \"дней\";\n\t\telse if (number % 10 === 1) return \"день\";\n\t\telse if (2 <= number % 10 && number % 10 <= 4) return \"дня\";\n\t\telse return \"дней\";\n\t}\n\n\tfunction remainedDays(date) {\n\t\tlet days = dateDiff(date);\n\t\tif (days > 0) return `${days} ${intToDays(days)}`;\n\t\telse return \"сегодня\";\n\t}\n\n\treturn (\n\t\t<Timeline style={myStyle} lineColor='#A6A6AB'>\n\t\t\t{calendar?.map((day) => {\n\t\t\t\tlet date = new Date(day[0]);\n\t\t\t\treturn (\n\t\t\t\t\t<TimelineEvent\n\t\t\t\t\t\ttitle={`${remainedDays(date)}, ${date.toLocaleDateString(\"ru-RU\", {\n\t\t\t\t\t\t\tyear: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\",\n\t\t\t\t\t\t\tmonth: \"long\",\n\t\t\t\t\t\t\tday: \"numeric\",\n\t\t\t\t\t\t\tweekday: \"long\",\n\t\t\t\t\t\t})}`}\n\t\t\t\t\t\tkey={day[0]}\n\t\t\t\t\t\tclassName='timelineEvent'\n\t\t\t\t\t\ticon={getIconForDay(day[1])}\n\t\t\t\t\t\tcardHeaderStyle={myStyle}\n\t\t\t\t\t\ticonStyle={{ ...myStyle, fontSize: \"1.2rem\" }}\n\t\t\t\t\t\tbubbleStyle={myStyle}\n\t\t\t\t\t\tcontentStyle={{ ...myStyle, fontSize: \"1.1rem\", marginTop: \"0.2rem\", marginBottom: \"0.2rem\" }}\n\t\t\t\t\t\ttitleStyle={{ ...myStyle, fontSize: \"1.1rem\" }}\n\t\t\t\t\t\tsubtitleStyle={myStyle}>\n\t\t\t\t\t\t{getContentForDay(day[1])}\n\t\t\t\t\t</TimelineEvent>\n\t\t\t\t);\n\t\t\t})}\n\t\t</Timeline>\n\t);\n}\n\nexport default ReleasesList;\n","import ReleasesList from \"./ReleasesList\";\n\nexport default ReleasesList;\n","import React, { useState, useEffect } from \"react\";\nimport { observer } from \"mobx-react\";\nimport classnames from \"classnames\";\nimport { toast } from \"react-toastify\";\nimport Calendar from \"react-calendar\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nimport CurrentUserStore from '../../store/CurrentUserStore';\nimport AuthStore from '../../store/AuthStore';\nimport DayInfo from \"./views/DayInfo\";\nimport ReleasesList from \"./views/ReleasesList\";\n\nimport \"react-calendar/dist/Calendar.css\";\nimport styles from \"./calendar-page.module.sass\";\nimport \"./react-calendar.sass\";\n\nconst CalendarPage = observer(() => {\n\tconst { loggedIn } = AuthStore;\n\tconst { calendar, calendarState, requestCalendar } = CurrentUserStore;\n\n\tconst [value, onChange] = useState(new Date());\n\tconst [currentDay, setCurrentDay] = useState({});\n\n\tuseEffect(() => {\n\t\tif (loggedIn) {\n\t\t\trequestCalendar();\n\t\t}\n\t}, [loggedIn, requestCalendar]);\n\n\tuseEffect(() => {\n\t\tif (calendarState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${calendarState}`);\n\t}, [calendarState]);\n\n\tuseEffect(() => {\n\t\tif (calendar) {\n\t\t\tif (formatDate(value) in calendar) setCurrentDay(calendar[formatDate(value)]);\n\t\t\telse setCurrentDay({});\n\t\t}\n\t}, [value, calendar]);\n\n\tfunction dateToTile({ date, view }) {\n\t\tif (view === \"month\" && formatDate(date) in calendar) {\n\t\t\tlet day = calendar[formatDate(date)];\n\t\t\treturn (\n\t\t\t\t<div className={styles.calendarDay}>\n\t\t\t\t\t<div className={styles.calendarDayBody}>\n\t\t\t\t\t\t<div className={classnames(styles.calendarDayGames, !day?.games?.length > 0 ? styles.calendarDayHidden : \"\")}>{day?.games?.length}</div>\n\t\t\t\t\t\t<div className={classnames(styles.calendarDayMovies, !day?.movies?.length > 0 ? styles.calendarDayHidden : \"\")}>{day?.movies?.length}</div>\n\t\t\t\t\t\t<div className={classnames(styles.calendarDayEpisodes, !day?.episodes?.length > 0 ? styles.calendarDayHidden : \"\")}>{day?.episodes?.length}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className={styles.calendarPage}>\n\t\t\t<div>\n\t\t\t\t<h1 className={styles.pageHeader}>Календарь релизов</h1>\n\t\t\t\t<LoadingOverlay active={calendarState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? <DayInfo day={currentDay} date={value} /> : \"\"}\n\t\t\t\t\t<Calendar onChange={onChange} value={value} defaultView='month' minDetail='decade' locale='ru-RU' minDate={new Date()} tileContent={dateToTile} />\n\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? \"\" : <DayInfo day={currentDay} date={value} />}\n\t\t\t\t\t<ReleasesList calendar={Object.entries(calendar)} />\n\t\t\t\t</LoadingOverlay>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default CalendarPage;\n\nfunction pad(number) {\n\tif (number < 10) {\n\t\treturn \"0\" + number;\n\t}\n\treturn number;\n}\nfunction formatDate(date) {\n\treturn date.getFullYear() + \"-\" + pad(date.getMonth() + 1) + \"-\" + pad(date.getDate());\n}\n","import CalendarPage from \"./CalendarPage\";\nexport default CalendarPage;\n","import SettingsPage from \"./SettingsPage\";\n\nexport default SettingsPage;\n","import React, { useState, useEffect } from \"react\";\nimport { observer } from \"mobx-react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport { toast } from \"react-toastify\";\n\nimport AuthStore from '../../store/AuthStore';\nimport CurrentUserStore from '../../store/CurrentUserStore';\n\nimport \"./settings-page.sass\";\n\nconst SettingsPage = observer((props) => {\n\tconst { loggedIn, user } = AuthStore;\n\tconst { settings, requestSettings, patchSettings, settingsState, saveSettingsState } = CurrentUserStore;\n\n\tconst [gameNotifInput, setGameNotifInput] = useState(false);\n\tconst [movieNotifInput, setMovieNotifInput] = useState(false);\n\tconst [showNotifInput, setShowNotifInput] = useState(false);\n\tconst [privacySelect, setPrivacySelect] = useState(\"Все\");\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestSettings();\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn]\n\t);\n\n\tuseEffect(() => {\n\t\tif (saveSettingsState === \"saved\") toast.success(\"Настройки сохранены!\");\n\t\tif (saveSettingsState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${saveSettingsState}`);\n\t}, [saveSettingsState]);\n\tuseEffect(() => {\n\t\tif (settingsState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${settingsState}`);\n\t}, [settingsState]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (settings.receive_games_releases) setGameNotifInput(settings.receive_games_releases);\n\t\t\tif (settings.receive_movies_releases) setMovieNotifInput(settings.receive_movies_releases);\n\t\t\tif (settings.receive_episodes_releases) setShowNotifInput(settings.receive_episodes_releases);\n\t\t\tif (settings.privacy) setPrivacySelect(settings.privacy);\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[settings]\n\t);\n\n\treturn (\n\t\t<div className='settings-page'>\n\t\t\t<div className='settings-page__body'>\n\t\t\t\t<h1 className='settings-page__header'>Настройки</h1>\n\n\t\t\t\t<LoadingOverlay\n\t\t\t\t\tactive={settingsState === \"pending\"\n\t\t\t\t\t\t|| saveSettingsState === \"pending\"\n\t\t\t\t\t}\n\t\t\t\t\tspinner\n\t\t\t\t\ttext='Загрузка...'\n\t\t\t\t>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 className='settings-page__subheader'>\n\t\t\t\t\t\t\tПодписка на почтовые уведомления:\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName='settings-page__settings-row'\n\t\t\t\t\t\t\tonClick={() => setGameNotifInput(!gameNotifInput)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\tclassName='settings-page__settings-checkbox'\n\t\t\t\t\t\t\t\tchecked={gameNotifInput}\n\t\t\t\t\t\t\t\tonChange={(event) => setGameNotifInput(event.target.checked)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{\" релиз новых игр\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName='settings-page__settings-row'\n\t\t\t\t\t\t\tonClick={() => setMovieNotifInput(!movieNotifInput)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\tclassName='settings-page__settings-checkbox'\n\t\t\t\t\t\t\t\tchecked={movieNotifInput}\n\t\t\t\t\t\t\t\tonChange={(event) => setMovieNotifInput(event.target.checked)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{\" релиз новых фильмов\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName='settings-page__settings-row'\n\t\t\t\t\t\t\tonClick={() => setShowNotifInput(!showNotifInput)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\tclassName='settings-page__settings-checkbox'\n\t\t\t\t\t\t\t\tchecked={showNotifInput}\n\t\t\t\t\t\t\t\tonChange={(event) => setShowNotifInput(event.target.checked)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{\" релиз новых серий сериалов\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className='settings-page__settings-row'>\n\t\t\t\t\t\t\t<label htmlFor='privacySelect'>Кто может видеть мой профиль:</label>\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tid='privacySelect'\n\t\t\t\t\t\t\t\tname='privacySelect'\n\t\t\t\t\t\t\t\tclassName='settings-page__settings-select'\n\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\tsetPrivacySelect(event.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvalue={privacySelect}>\n\t\t\t\t\t\t\t\t<option value='Все'>Все</option>\n\t\t\t\t\t\t\t\t<option value='Никто'>Никто</option>\n\t\t\t\t\t\t\t\t<option value='Друзья'>Мои подписки</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='settings-page__settings-row' hidden={!(settings.privacy !== privacySelect && privacySelect === \"Никто\")}>\n\t\t\t\t\t\t\tВнимание! Полное закрытие профиля удалит вас из подписок других пользователей!\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName='settings-page__save-button'\n\t\t\t\t\t\tdisabled={!loggedIn}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tpatchSettings({ receive_games_releases: gameNotifInput, receive_movies_releases: movieNotifInput, receive_episodes_releases: showNotifInput, privacy: privacySelect });\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tСохранить\n\t\t\t\t\t</button>\n\t\t\t\t</LoadingOverlay>\n\t\t\t\t<p>Ваша почта {user.email}</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default SettingsPage;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Rating from '../../../../shared/Rating';\nimport \"./episode-row.sass\";\n\nfunction DetailedEpisodeRow({ episode, showID, seasonNumber, setShowEpisodeUserStatus, loggedIn }) {\n\tlet history = useHistory();\n\n\tfunction parseDate(date) {\n\t\tlet newDate = new Date(date);\n\t\treturn newDate.toLocaleDateString(\"ru-RU\");\n\t}\n\n\treturn (\n\t\t<div className='episode-row'>\n\t\t\t<p className='episode-row__date'>{parseDate(episode.tmdb_release_date)}</p>\n\t\t\t<div hidden={!loggedIn} className='episode-row__rate'>\n\t\t\t\t<Rating\n\t\t\t\t\twithEye={true}\n\t\t\t\t\treadonly={!loggedIn}\n\t\t\t\t\tinitialRating={-1}\n\t\t\t\t\tonChange={(score) => {\n\t\t\t\t\t\tsetShowEpisodeUserStatus(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tepisodes: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttmdb_id: episode.tmdb_id,\n\t\t\t\t\t\t\t\t\t\tscore: score,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tshowID\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<a\n\t\t\t\tclassName='episode-row__name'\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}\n\t\t\t\ttitle={episode.tmdb_name}>\n\t\t\t\tСерия {episode.tmdb_episode_number} - {episode.tmdb_name}\n\t\t\t</a>\n\t\t</div>\n\t);\n}\n\nexport default DetailedEpisodeRow;\n","import EpisodeRow from \"./EpisodeRow\";\n\nexport default EpisodeRow;\n","import React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport classnames from \"classnames\";\n\nimport EpisodeRow from \"../EpisodeRow\";\n\nimport \"./show-block.sass\";\n\nfunction ShowBlock({ loggedIn, show, setShowEpisodeUserStatus, className }) {\n\tlet history = useHistory();\n\n\tuseEffect(\n\t\t() => {},\n\t\t// eslint-disable-next-line\n\t\t[show]\n\t);\n\n\tfunction getUserSeasonOpen(showID, seasonNumber) {\n\t\tlet localData = localStorage.getItem(`${showID}_${seasonNumber}`);\n\t\treturn localData ? localData === \"true\" : true;\n\t}\n\n\tfunction setUserSeasonOpen(showID, seasonNumber, isOpen) {\n\t\tlocalStorage.setItem(`${showID}_${seasonNumber}`, isOpen);\n\t}\n\n\treturn (\n\t\t<div className={classnames(\"show-block\", className)}>\n\t\t\t<a\n\t\t\t\thref={window.location.origin + \"/show/\" + show.tmdb_id}\n\t\t\t\tonClick={(e) => {\n\t\t\t\t\thistory.push(\"/show/\" + show.tmdb_id);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}>\n\t\t\t\t<h4 className='show-block__name'>{show?.tmdb_name}</h4>\n\t\t\t</a>\n\n\t\t\t{show?.seasons.map((season, counter) => {\n\t\t\t\treturn (\n\t\t\t\t\t<details\n\t\t\t\t\t\topen={getUserSeasonOpen(show.tmdb_id, season.tmdb_season_number)}\n\t\t\t\t\t\tclassName='show-block__season'\n\t\t\t\t\t\tkey={counter}\n\t\t\t\t\t\tonToggle={(e) => setUserSeasonOpen(show.tmdb_id, season.tmdb_season_number, e.target.open)}>\n\t\t\t\t\t\t<summary>{season.tmdb_name}</summary>\n\t\t\t\t\t\t<ul class='show-block__season-ul'>\n\t\t\t\t\t\t\t{season.episodes.map((episode, counter) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li className='show-block__episode' key={counter}>\n\t\t\t\t\t\t\t\t\t\t<EpisodeRow episode={episode} showID={show.tmdb_id} seasonNumber={season.tmdb_season_number} setShowEpisodeUserStatus={setShowEpisodeUserStatus} loggedIn={loggedIn} />\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</details>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n}\n\nexport default ShowBlock;\n","import ShowBlock from \"./ShowBlock\";\n\nexport default ShowBlock;\n","import UnwatchedPage from \"./UnwatchedPage\";\n\nexport default UnwatchedPage;\n","import React, { useEffect } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { toast } from \"react-toastify\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nimport AuthStore from '../../store/AuthStore';\nimport CurrentUserStore from '../../store/CurrentUserStore';\nimport ShowStore from '../../store/ShowStore';\nimport ShowBlock from './views/ShowBlock';\n\nimport \"./unwatched-page.sass\";\n\nconst UnwatchedPage = observer((props) => {\n\tconst { loggedIn } = AuthStore;\n\tconst { unwatched, requestUnwatched, unwatchedState } = CurrentUserStore;\n\tconst { setEpisodesStatus } = ShowStore;\n\n\tuseEffect(() => {\n\t\tif (unwatchedState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${unwatchedState}`);\n\t}, [unwatchedState]);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (loggedIn) requestUnwatched();\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[loggedIn]\n\t);\n\n\treturn (\n\t\t<div className='unwatched-page'>\n\t\t\t<div className='unwatched-page__body'>\n\t\t\t\t<h1 className='unwatched-page__header'>Непросмотренные серии</h1>\n\t\t\t\t<LoadingOverlay active={unwatchedState === \"pending\"} spinner text='Загрузка...'>\n\t\t\t\t\t{unwatched.map((show) => (\n\t\t\t\t\t\t<ShowBlock show={show} setShowEpisodeUserStatus={setEpisodesStatus} loggedIn={loggedIn} key={show.id} className='unwatched-page__show-block' />\n\t\t\t\t\t))}\n\t\t\t\t</LoadingOverlay>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default UnwatchedPage;\n","export default __webpack_public_path__ + \"static/media/wrongPage.58faeb13.png\";","import React, { useEffect, useState } from \"react\";\nimport image from \"./wrongPage.png\";\nimport \"./not-found-page.sass\";\n/**\n * Основная страница приложения\n */\nfunction NotFoundPage() {\n\tconst [angle, setAngle] = useState(0);\n\n\tuseEffect(\n\t\t() => {\n\t\t\twindow.requestAnimationFrame(() => setAngle(angle + 1));\n\t\t},\n\t\t// eslint-disable-next-line\n\t\t[angle]\n\t);\n\n\treturn (\n\t\t<div className='not-found-page'>\n\t\t\t<div className='not-found-page__body'>\n\t\t\t\t<h1>Страница не найдена!</h1>\n\t\t\t\t<div style={{ transform: `rotate(${angle}deg)` }}>\n\t\t\t\t\t<img src={image} alt='Картинка' className='not-found-page__image' />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default NotFoundPage;\n","import NotFoundPage from \"./NotFoundPage\";\n\nexport default NotFoundPage;\n","import * as React from 'react';\nimport { block } from 'bem-cn';\nimport './Button.scss';\nimport {compact} from 'lodash';\n\ninterface IButtonProps extends React.DetailedHTMLProps<\n    React.ButtonHTMLAttributes<HTMLButtonElement>,\n    HTMLButtonElement\n    > {\n    label?: string,\n}\n\nfunction Button(props: IButtonProps) {\n    const bem = block('Button');\n\n    return (\n        <button\n            className={compact([bem(), props.className]).join(' ')}\n            {...props}\n        >\n            {props.label}\n        </button>\n    );\n}\n\nexport default Button;\n","import Button from './Button';\n\nexport default Button;\n","import * as React from 'react';\nimport {block} from 'bem-cn';\nimport {compact} from 'lodash';\nimport './RandomCard.scss';\nimport {useHistory} from 'react-router-dom';\n\ninterface IRandomCardProps {\n    className?: string,\n    winner: any,\n}\n\nfunction RandomCard(props: IRandomCardProps) {\n    const bem = block('RandomCard');\n    const history = useHistory();\n    const {winner} = props;\n\n    const getLink = (item: any) => {\n        switch (item.type) {\n            case 'game':\n                return `/game/${item.rawg_slug}`;\n            case 'movie':\n                return `/movie/${item.tmdb_id}`;\n            case 'show':\n                return `/show/${item.tmdb_id}`;\n        }\n    }\n\n    return (\n        <div className={compact([bem(), props.className]).join(' ')}>\n            <img\n                src={winner?.tmdb_poster_path || winner?.rawg_poster_path}\n                className={bem('poster')}\n                alt='poster'\n            />\n            <div>\n                <a\n                    href={window.location.origin + getLink(winner)}\n                    onClick={(e) => {\n                        history.push(getLink(winner));\n                        e.preventDefault();\n                    }}\n                    className={bem('link')}\n                >\n                    {winner.tmdb_name || winner.rawg_name}\n                </a>\n            </div>\n        </div>\n    );\n}\n\nexport default RandomCard;\n","import RandomCard from './RandomCard';\n\nexport default RandomCard;\n","import React, {useState, useEffect, useCallback} from 'react';\nimport { observer } from \"mobx-react\";\nimport { block } from 'bem-cn';\nimport { useForm } from 'react-hook-form';\nimport { toast } from \"react-toastify\";\nimport Fade from 'react-reveal/Fade';\n\nimport AuthStore from '../../store/AuthStore';\nimport \"./RandomPage.sass\";\nimport {getRoulette} from '../../services/userRequests';\nimport Button from '../../shared/Button';\nimport RandomCard from './views/RandomCard';\nimport RandomCardLoader from './views/RandomCardLoader';\nconst categoriesEnum = [\n    {id: 'games', label: 'Игры'},\n    {id: 'shows', label: 'Сериалы'},\n    {id: 'movies', label: 'Фильмы'},\n]\n\nconst RandomPage = observer(() => {\n    const { loggedIn, user } = AuthStore;\n    const bem = block('RandomPage')\n    const [winner, setWinner] = useState<null | any>(null);\n    const [isLoading, setLoading] = useState(false);\n    const {\n        register,\n        handleSubmit,\n        formState: { errors },\n    } = useForm();\n\n    const onSubmit = useCallback((values: any) => {\n        if (loggedIn) {\n            setWinner(null);\n            setLoading(true);\n            getRoulette(values)\n                .then(newItems => {\n                    setWinner(newItems[0]);\n                })\n                .catch(e => toast.error(`Ошибка сервера ${e.response.data?.error}`));\n        }\n    }, [loggedIn]);\n\n    return (\n        <div className={bem()}>\n            <form\n                onSubmit={handleSubmit(onSubmit)}\n                className={bem('form')}\n            >\n                <h1 className={bem('header')}>\n                    Рандомайзер\n                </h1>\n                <div>\n                    <div className={bem('label')}>\n                        Категории\n                    </div>\n                    {\n                        categoriesEnum.map((category: any) => (\n                            <div key={category.id}>\n                                <input\n                                    type='checkbox'\n                                    value={category.id}\n                                    id={category.id}\n                                    {...register('categories')}\n                                />\n                                <label htmlFor={category.id}>\n                                    {category.label}\n                                </label>\n                            </div>\n                        ))\n                    }\n                </div>\n                <div>\n                    <input\n                        id='endedOnly'\n                        type='checkbox'\n                        {...register('endedOnly')}\n                    />\n                    <label htmlFor='endedOnly'>\n                        Только завершенные сериалы\n                    </label>\n                </div>\n                <Button\n                    type='submit'\n                    label='Крутануть'\n                />\n            </form>\n            <img\n                src={winner?.tmdb_poster_path || winner?.rawg_poster_path}\n                onLoad={() => setLoading(false)}\n                style={{width: 0, height: 0}}\n            />\n            {\n                winner && (\n                    <Fade right duration={500} distance='50px'>\n                        <RandomCard winner={winner} />\n                    </Fade>\n                )\n            }\n            {/*{*/}\n            {/*    isLoading && (*/}\n            {/*        <RandomCardLoader />*/}\n            {/*    )*/}\n            {/*}*/}\n        </div>\n);\n});\n\nexport default RandomPage;\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport HomePage from './routes/HomePage';\nimport GamePage from './routes/GamePage';\nimport MoviePage from './routes/MoviePage';\nimport ShowPage from './routes/ShowPage';\nimport SeasonPage from './routes/ShowSeasonPage';\nimport EpisodePage from './routes/ShowEpisodePage';\nimport SearchPage from './routes/SearchPage';\nimport ConfirmPage from './routes/ConfirmPage';\nimport ConfirmPasswordPage from './routes/ConfirmPasswordPage';\nimport UserPage from './routes/UserPage';\nimport CalendarPage from './routes/CalendarPage';\nimport SettingsPage from './routes/SettingsPage';\nimport UnwatchedPage from './routes/UnwatchedPage';\nimport NotFoundPage from './routes/NotFoundPage';\nimport RandomPage from './routes/RandomPage/RandomPage';\n\nclass Routes extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Switch>\n\t\t\t\t<Route exact path='/' component={HomePage} />\n\t\t\t\t<Route exact path='/game/:id' component={GamePage} />\n\t\t\t\t<Route exact path='/movie/:id' component={MoviePage} />\n\t\t\t\t<Route exact path='/show/:id' component={ShowPage} />\n\t\t\t\t<Route exact path='/show/:show_id/season/:number' component={SeasonPage} />\n\t\t\t\t<Route exact path='/show/:show_id/season/:season_number/episode/:episode_number' component={EpisodePage} />\n\t\t\t\t<Route exact path='/search/:query' component={SearchPage} />\n\t\t\t\t<Route exact path='/confirm/' component={ConfirmPage} />\n\t\t\t\t<Route exact path='/confirm_password/' component={ConfirmPasswordPage} />\n\t\t\t\t<Route exact path='/user/:userID' component={UserPage} />\n\t\t\t\t<Route exact path='/calendar' component={CalendarPage} />\n\t\t\t\t<Route exact path='/settings' component={SettingsPage} />\n\t\t\t\t<Route exact path='/unwatched' component={UnwatchedPage} />\n\t\t\t\t<Route exact path='/random' component={RandomPage} />\n\t\t\t\t<Route component={NotFoundPage} />\n\t\t\t</Switch>\n\t\t);\n\t}\n}\n//\nexport default Routes;\n","import SearchInput from \"./SearchInput\";\n\nexport default SearchInput;\n","import React, { useState } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { useHistory } from \"react-router-dom\";\nimport { MdVideogameAsset, MdLocalMovies, MdLiveTv } from \"react-icons/md\";\nimport classnames from \"classnames\";\n\nimport SearchStore from '../../../../../store/SearchStore';\n\nimport \"./search-input.sass\";\n\nconst SearchInput = observer(({ onSubmit, className }) => {\n\tconst [query, setQuery] = useState(\"\");\n\tlet history = useHistory();\n\tconst { searchHints, hints } = SearchStore;\n\n\treturn (\n\t\t<form\n\t\t\tonSubmit={(event) => {\n\t\t\t\tonSubmit(event);\n\t\t\t\tsetQuery(\"\");\n\t\t\t}}\n\t\t\tclassName={classnames(\"search-input\", className)}>\n\t\t\t<input\n\t\t\t\ttype='text'\n\t\t\t\tplaceholder='Поиск'\n\t\t\t\taria-label='Поиск'\n\t\t\t\tclassName='search-input__input'\n\t\t\t\tid='searchInput'\n\t\t\t\tvalue={query}\n\t\t\t\tonChange={(event) => {\n\t\t\t\t\tsetQuery(event.target.value);\n\t\t\t\t\tsearchHints(event.target.value);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<div className={classnames(\"search-input__hints\", query === \"\" || !(hints.games.length > 0 || hints.movies.length > 0 || hints.shows.length > 0) ? \"search-input__hints_hidden\" : \"\")}>\n\t\t\t\t<div hidden={!hints.games.length > 0}>\n\t\t\t\t\t<MdVideogameAsset />\n\t\t\t\t\t{hints.games.map((hint, key) => (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + hint.rawg_slug}\n\t\t\t\t\t\t\tclassName='search-input__hint'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + hint.rawg_slug);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tsetQuery(\"\");\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{<img src={hint.rawg_backdrop_path} alt={\"\"} />}\n\t\t\t\t\t\t\t{hint.rawg_name}\n\t\t\t\t\t\t\t<div>{hint?.rawg_release_date?.substr(0, 4)}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div hidden={!hints.movies.length > 0}>\n\t\t\t\t\t<MdLocalMovies />\n\t\t\t\t\t{hints.movies.map((hint, key) => (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + hint.tmdb_id}\n\t\t\t\t\t\t\tclassName='search-input__hint'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + hint.tmdb_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tsetQuery(\"\");\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{<img src={hint.tmdb_backdrop_path} alt={\"\"} />}\n\t\t\t\t\t\t\t{hint.tmdb_name}\n\t\t\t\t\t\t\t<div>{hint?.tmdb_release_date?.substr(0, 4)}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div hidden={!hints.shows.length > 0}>\n\t\t\t\t\t<MdLiveTv />\n\t\t\t\t\t{hints.shows.map((hint, key) => (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + hint.tmdb_id}\n\t\t\t\t\t\t\tclassName='search-input__hint'\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + hint.tmdb_id);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tsetQuery(\"\");\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{<img src={hint.tmdb_backdrop_path} alt={\"\"} />}\n\t\t\t\t\t\t\t{hint.tmdb_name}\n\t\t\t\t\t\t\t<div>{hint?.tmdb_release_date?.substr(0, 4)}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t);\n});\n\nexport default SearchInput;\n","import Navbar from \"./Navbar\";\n\nexport default Navbar;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { observer } from 'mobx-react';\nimport classnames from 'classnames';\nimport { FaBars, FaAngleUp, FaAngleDown, FaUserCircle, FaSignInAlt } from 'react-icons/fa';\n\nimport PagesStore from '../../../store/PagesStore';\nimport AuthStore from '../../../store/AuthStore';\nimport useWindowDimensions from '../../../hooks/useWindowDimensions';\nimport SearchInput from './views/SearchInput';\n\nimport './navbar.sass';\n\nconst Navbar = observer((props) => {\n\tconst { toggleSidebar, openLoginForm } = PagesStore;\n\tconst { width } = useWindowDimensions();\n\tconst { loggedIn, user } = AuthStore;\n\n\tlet history = useHistory();\n\n\tconst [collapse, setCollapse] = useState(true);\n\n\tconst toggleCollapse = () => {\n\t\tsetCollapse(!collapse);\n\t};\n\n\tfunction toggleIfSmallScreen() {\n\t\tif (width <= 600) setCollapse(true);\n\t}\n\n\treturn (\n\t\t<div className='navbar'>\n\t\t\t<div className='navbar__left'>\n\t\t\t\t<FaBars onClick={toggleSidebar} className='navbar__sidebar-button' />\n\t\t\t\t<div onClick={() => history.push('/')} className='navbar__logo'>\n\t\t\t\t\tInterests\n\t\t\t\t</div>\n\t\t\t\t<div onClick={toggleCollapse} className='navbar__collapse-button'>\n\t\t\t\t\t{collapse ? <FaAngleDown /> : <FaAngleUp />}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className={classnames('navbar__center', collapse && width <= 600 ? 'navbar__center_collapsed' : '')}>\n\t\t\t\t<SearchInput\n\t\t\t\t\tonSubmit={(event) => {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\thistory.push('/search/' + document.getElementById('searchInput').value);\n\t\t\t\t\t\ttoggleIfSmallScreen();\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='navbar__search-input'\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={classnames('navbar__right', collapse && width <= 600 ? 'navbar__right_collapsed' : '')}>\n\t\t\t\t<div\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\thistory.push(`/user/${user?.id}`);\n\t\t\t\t\t\ttoggleIfSmallScreen();\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='navbar__user-button'\n\t\t\t\t\thidden={!loggedIn}>\n\t\t\t\t\t<FaUserCircle /> {user?.username}\n\t\t\t\t</div>\n\t\t\t\t<div onClick={openLoginForm} className='navbar__user-button' hidden={loggedIn}>\n\t\t\t\t\t<FaSignInAlt /> Войти\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default Navbar;\n","import React from \"react\";\nimport { FaVk, FaDiscord } from \"react-icons/fa\";\nimport classnames from \"classnames\";\nimport \"./footer.sass\";\n\nfunction Footer({ className }) {\n\treturn (\n\t\t<div className={classnames(\"footer\", className)}>\n\t\t\t<div className='footer__body'>\n\t\t\t\t<div>\n\t\t\t\t\t<h2 className='footer__name'>Interests</h2>\n\t\t\t\t\t<p className='footer__email'>info@интерестс.space</p>\n\t\t\t\t\t<p className='footer__date'>2020-2022</p>\n\t\t\t\t</div>\n\t\t\t\t<div className='footer__social-block'>\n\t\t\t\t\t<p>Следите за нами в социальных сетях, чтобы оставаться в курсе последних событий!</p>\n\t\t\t\t\t<a href='https://vk.com/interests_fun' className='footer__social-link'>\n\t\t\t\t\t\t<FaVk />\n\t\t\t\t\t</a>\n\t\t\t\t\t<a href='https://discord.gg/wXkUF5tKee' className='footer__social-link'>\n\t\t\t\t\t\t<FaDiscord />\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div className='footer__social-block'>\n\t\t\t\t\t<p>Сайт был разработан при поддержке</p>\n\t\t\t\t\t<a href='https://rawg.io/' className='footer__rawg-logo'>\n\t\t\t\t\t\tRAWG\n\t\t\t\t\t</a>\n\t\t\t\t\t<a href='https://www.themoviedb.org/'>\n\t\t\t\t\t\t<div className='footer__tmdb-logo' />\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Footer;\n","import Footer from \"./Footer\";\n\nexport default Footer;\n","import Sidebar from \"./Sidebar\";\n\nexport default Sidebar;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { observer } from 'mobx-react';\nimport {\n\tFaSignInAlt,\n\tFaUserCircle,\n\tFaUserFriends,\n\tFaCalendar,\n\tFaSignOutAlt,\n\tFaUserPlus,\n\tFaArrowRight,\n\tFaArrowLeft,\n\tFaRandom\n} from 'react-icons/fa';\nimport { MdLiveTv, MdSettings } from 'react-icons/md';\nimport {\n\tProSidebar,\n\tMenu,\n\tMenuItem,\n\t//SubMenu,\n\tSidebarFooter,\n} from 'react-pro-sidebar';\n\nimport AuthStore from '../../../store/AuthStore';\nimport PagesStore from '../../../store/PagesStore';\nimport useWindowDimensions from '../../../hooks/useWindowDimensions';\n\nimport './sidebar.sass';\n//import 'react-pro-sidebar/dist/css/styles.css';\n\n/**\n * Основная страница приложения\n */\nconst Sidebar = observer((props) => {\n\tconst history = useHistory();\n\tconst { width } = useWindowDimensions();\n\n\tconst { loggedIn, user, resetAuthorization } = AuthStore;\n\tconst { sidebarIsCollapsed, sidebarIsToggled, collapseSidebar, toggleSidebar, openLoginForm, openRegistrateForm } = PagesStore;\n\n\tfunction toggleSidebarIfSmallScreen() {\n\t\tif (width < 1780 && width > 1440 && !sidebarIsCollapsed) collapseSidebar();\n\t\tif (width <= 1440) toggleSidebar();\n\t}\n\n\treturn (\n\t\t<ProSidebar className='sidebar' collapsed={sidebarIsCollapsed} hidden={!sidebarIsToggled}>\n\t\t\t<Menu iconShape='round' hidden={!loggedIn}>\n\t\t\t\t<MenuItem icon={<FaUserCircle />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/user/${user?.id}`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/user/${user?.id}`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tПрофиль\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<FaUserFriends />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/user/${user.id}?сategory=Друзья`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/user/${user?.id}?сategory=Друзья`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tДрузья\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\n\t\t\t\t<MenuItem icon={<MdLiveTv />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/unwatched`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/unwatched`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tНепросмотренное\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<FaCalendar />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/calendar`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/calendar`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tКалендарь\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<FaRandom />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/random`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/random`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tРандомайзер\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<MdSettings />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/settings`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\thistory.push(`/settings`);\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tНастройки\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<FaSignOutAlt />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tresetAuthorization();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tВыход\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t</Menu>\n\t\t\t<Menu iconShape='round' hidden={loggedIn}>\n\t\t\t\t<MenuItem icon={<FaSignInAlt />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\topenLoginForm();\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tВойти\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem icon={<FaUserPlus />}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`/`}\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\topenRegistrateForm();\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tЗарегистрироваться\n\t\t\t\t\t</a>\n\t\t\t\t</MenuItem>\n\t\t\t</Menu>\n\t\t\t<SidebarFooter>\n\t\t\t\t<Menu iconShape='round'>\n\t\t\t\t\t<MenuItem icon={sidebarIsCollapsed ? <FaArrowRight /> : <FaArrowLeft />} onClick={collapseSidebar}>\n\t\t\t\t\t\tСвернуть\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</Menu>\n\t\t\t</SidebarFooter>\n\t\t</ProSidebar>\n\t);\n});\n\nexport default Sidebar;\n","import React from \"react\";\nimport classnames from \"classnames\";\n\nimport \"./modal.sass\";\n\ninterface IModalProps {\n\tclassName?: string,\n\tchildren?: any,\n\tisOpen?: boolean,\n\ttoggle?: () => any,\n}\n\nfunction Modal({ className, children, isOpen, toggle }: IModalProps) {\n\treturn (\n\t\t<div className={classnames(\"modal2\", isOpen ? \"modal2_open\" : \"\")}>\n\t\t\t<div className={classnames(\"modal2__backdrop\")} onClick={toggle} />\n\t\t\t<div className={classnames(\"modal2__content\", className)}>{children}</div>\n\t\t</div>\n\t);\n}\n\nexport default Modal;\n","import Modal from \"./Modal\";\n\nexport default Modal;\n","import React, {useEffect, useState} from 'react';\nimport { observer } from 'mobx-react';\n\nimport AuthStore from '../../../store/AuthStore';\nimport PagesStore from '../../../store/PagesStore';\nimport Modal from '../../Modal';\n\nimport './login-form.sass';\n\n/**\n * КОмпонент формы авторизации\n * @param {number} Параметр, при изменении которого компонент открывается\n */\nconst LoginForm = observer(() => {\n\tconst { tryAuth, authState } = AuthStore;\n\tconst { LoginFormIsOpen, closeLoginForm, openResetPasswordForm, openRegistrateForm } = PagesStore;\n\n\tconst [password, setPassword] = useState('');\n\tconst [login, setLogin] = useState('');\n\n\tuseEffect(() => {\n\t\tif (authState === \"done\"){\n\t\t\tcloseLoginForm();\n\t\t}\n\t}, [authState, closeLoginForm]);\n\n\tconst onSubmit = async (event: any) => {\n\t\tevent.preventDefault();\n\t\tawait tryAuth(login, password);\n\t};\n\n\tconst onPasswordRecovery = async () => {\n\t\tawait closeLoginForm();\n\t\tawait openResetPasswordForm();\n\t}\n\n\tconst onRegistration = async () => {\n\t\tawait closeLoginForm();\n\t\tawait openRegistrateForm();\n\t}\n\n\treturn (\n\t\t<Modal isOpen={LoginFormIsOpen} toggle={closeLoginForm} className='login-form'>\n\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t<h2 className='login-form__header'>\n\t\t\t\t\tВойти\n\t\t\t\t</h2>\n\t\t\t\t<p\n\t\t\t\t\tclassName='login-form__fail'\n\t\t\t\t\thidden={!authState.startsWith(\"error:\")}\n\t\t\t\t>\n\t\t\t\t\t{authState}\n\t\t\t\t</p>\n\n\t\t\t\t<label\n\t\t\t\t\thtmlFor='loginInput'\n\t\t\t\t\tclassName='grey-text'\n\t\t\t\t>\n\t\t\t\t\tЛогин\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='text'\n\t\t\t\t\tid='loginInput'\n\t\t\t\t\tclassName='login-form__input'\n\t\t\t\t\tvalue={login}\n\t\t\t\t\tonChange={(e) => setLogin(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<label\n\t\t\t\t\thtmlFor='passwordInput'\n\t\t\t\t\tclassName='grey-text'\n\t\t\t\t>\n\t\t\t\t\tПароль\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='password'\n\t\t\t\t\tid='passwordInput'\n\t\t\t\t\tclassName='login-form__input'\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<div className='text-center mt-4'>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tclassName='login-form__auth-button'\n\t\t\t\t\t>\n\t\t\t\t\t\t{authState !== \"pending\" ? \"Войти\" : \"Загрузка...\"}\n\t\t\t\t\t</button>\n\t\t\t\t\t<label\n\t\t\t\t\t\tclassName='login-form__link-label'\n\t\t\t\t\t\tonClick={onPasswordRecovery}>\n\t\t\t\t\t\tВосстановить пароль\n\t\t\t\t\t</label>\n\t\t\t\t\t<label\n\t\t\t\t\t\tclassName='login-form__link-label'\n\t\t\t\t\t\tonClick={onRegistration}>\n\t\t\t\t\t\tЗарегистрироваться\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n});\n\nexport default LoginForm;\n","import LoginForm from './LoginForm';\n\nexport default LoginForm;\n","import RegisterForm from \"./RegisterForm\";\n\nexport default RegisterForm;\n","import React, {useState} from 'react';\nimport { observer } from 'mobx-react';\nimport classnames from 'classnames';\n\nimport AuthStore from '../../../store/AuthStore';\nimport PagesStore from '../../../store/PagesStore';\nimport Modal from '../../Modal';\n\nimport './register-form.sass';\n\n/**\n * КОмпонент формы авторизации\n * @param {number} Параметр, при изменении которого компонент открывается\n */\nconst RegisterForm = observer(() => {\n\tconst { register, registrateState, user } = AuthStore;\n\tconst { RegistrateFormIsOpen, closeRegistrateForm } = PagesStore;\n\n\tconst [passwordConfirm, setPasswordConfirm] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [email, setEmail] = useState('');\n\tconst [login, setLogin] = useState('');\n\n\tconst onRegistration = () => register(login, email, password);\n\n\treturn (\n\t\t<Modal\n\t\t\tisOpen={RegistrateFormIsOpen}\n\t\t\ttoggle={closeRegistrateForm}\n\t\t\tclassName='register-form'\n\t\t>\n\t\t\t<form>\n\t\t\t\t<p\n\t\t\t\t\tclassName='register-form__fail'\n\t\t\t\t\thidden={!registrateState.startsWith('error:')}\n\t\t\t\t>\n\t\t\t\t\t{registrateState}\n\t\t\t\t</p>\n\t\t\t\t<p\n\t\t\t\t\tclassName='register-form__success'\n\t\t\t\t\thidden={user?.email === ''}\n\t\t\t\t>\n\t\t\t\t\t{user.login}, добро пожаловать! Осталось только подтвердить вашу почту\n\t\t\t\t</p>\n\t\t\t\t<h2 className='register-form__header'>\n\t\t\t\t\tРегистрация\n\t\t\t\t</h2>\n\n\t\t\t\t<label htmlFor='loginInput'>\n\t\t\t\t\tНикнейм\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='text'\n\t\t\t\t\tclassName='register-form__input'\n\t\t\t\t\tvalue={login}\n\t\t\t\t\tonChange={(e) => setLogin(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<label htmlFor='emailInput'>\n\t\t\t\t\tЭлектронная почта\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='email'\n\t\t\t\t\tclassName='register-form__input'\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<label htmlFor='passwordInput'>\n\t\t\t\t\tПароль\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='password'\n\t\t\t\t\tclassName='register-form__input'\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<label htmlFor='passwordConfirmInput'>\n\t\t\t\t\tПодтверждение пароля\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='password'\n\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t'register-form__input',\n\t\t\t\t\t\tpasswordConfirm\n\t\t\t\t\t\t\t? passwordConfirm === password\n\t\t\t\t\t\t\t\t? 'register-form__input_right'\n\t\t\t\t\t\t\t\t: 'register-form__input_wrong'\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t)}\n\t\t\t\t\tvalue={passwordConfirm}\n\t\t\t\t\tonChange={(e) => setPasswordConfirm(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<div className='text-center mt-4'>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\tclassName='register-form__auth-button'\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\tpassword !== passwordConfirm\n\t\t\t\t\t\t\t\t|| login.length < 1\n\t\t\t\t\t\t\t\t|| email.length < 1\n\t\t\t\t\t\t\t\t|| password.length < 1\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={onRegistration}\n\t\t\t\t\t>\n\t\t\t\t\t\t{registrateState !== 'pending' ? 'Зарегистрироваться' : 'Загрузка...'}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n});\n\nexport default RegisterForm;\n","import React, {useState} from 'react';\nimport { observer } from 'mobx-react';\n\nimport AuthStore from '../../../store/AuthStore';\nimport PagesStore from '../../../store/PagesStore';\nimport Modal from '../../Modal';\n\nimport './reset-password-form.sass';\n\n/**\n * КОмпонент формы сброса пароля\n * @param {number} Параметр, при изменении которого компонент открывается\n */\nconst ResetPasswordForm = observer(() => {\n\tconst { resetPassword, resetPasswordState } = AuthStore;\n\tconst { ResetPasswordFormIsOpen, closeResetPasswordForm } = PagesStore;\n\n\tconst [email, setEmail] = useState('');\n\n\tconst onSubmit = async (event: any) => {\n\t\tevent.preventDefault();\n\t\tawait resetPassword(email);\n\t};\n\n\treturn (\n\t\t<Modal isOpen={ResetPasswordFormIsOpen} toggle={closeResetPasswordForm} className='reset-password-form'>\n\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t<h2 className='reset-password-form__header'>\n\t\t\t\t\tСбросить пароль\n\t\t\t\t</h2>\n\t\t\t\t<p\n\t\t\t\t\tclassName='reset-password-form__fail'\n\t\t\t\t\thidden={!resetPasswordState.startsWith('error:')}\n\t\t\t\t>\n\t\t\t\t\t{resetPasswordState}\n\t\t\t\t</p>\n\t\t\t\t<p\n\t\t\t\t\tclassName='reset-password-form__success'\n\t\t\t\t\thidden={resetPasswordState !== 'done'}\n\t\t\t\t>\n\t\t\t\t\tНа вашу почту отправлено письмо\n\t\t\t\t</p>\n\n\t\t\t\t<label htmlFor='emailInput'>\n\t\t\t\t\tПочта\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype='text'\n\t\t\t\t\tclassName='reset-password-form__input'\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t/>\n\n\t\t\t\t<button type='submit' className='reset-password-form__button'>\n\t\t\t\t\t{resetPasswordState !== 'pending' ? 'Сбросить' : 'Загрузка...'}\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n});\n\nexport default ResetPasswordForm;\n","import ResetPasswordForm from \"./ResetPasswordForm\";\n\nexport default ResetPasswordForm;\n","import React, { useEffect } from \"react\";\nimport {BrowserRouter} from 'react-router-dom';\nimport { QueryParamProvider } from 'use-query-params';\nimport { observer } from 'mobx-react';\nimport { ToastContainer } from 'react-toastify';\nimport Routes from './Routes';\nimport AuthStore from './store/AuthStore';\nimport Navbar from './shared/app/Navbar';\nimport Footer from './shared/app/Footer';\nimport Sidebar from './shared/app/Sidebar';\nimport LoginForm from './shared/Modals/LoginForm';\nimport RegisterForm from './shared/Modals/RegisterForm';\nimport ResetPasswordForm from './shared/Modals/ResetPasswordForm';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './app.sass';\nimport {ReactRouter5Adapter} from 'use-query-params/adapters/react-router-5';\n\nconst App = observer(() => {\n\tconst { checkAuth } = AuthStore;\n\n\tuseEffect(() => {\n\t\tcheckAuth();\n\t}, [checkAuth]);\n\n\treturn (\n\t\t<div className='app'>\n\t\t\t<div className='app__body'>\n\t\t\t\t<BrowserRouter>\n\t\t\t\t\t<QueryParamProvider adapter={ReactRouter5Adapter}>\n\t\t\t\t\t\t<Navbar />\n\t\t\t\t\t\t<Sidebar />\n\t\t\t\t\t\t<Routes />\n\t\t\t\t\t\t<Footer className='app__footer' />\n\t\t\t\t\t</QueryParamProvider>\n\t\t\t\t</BrowserRouter>\n\t\t\t</div>\n\t\t\t<ToastContainer position='top-center' hideProgressBar newestOnTop closeOnClick autoClose={3000} />\n\t\t\t<LoginForm />\n\t\t\t<RegisterForm />\n\t\t\t<ResetPasswordForm />\n\t\t</div>\n\t);\n});\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === \"localhost\" ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === \"[::1]\" ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener(\"load\", () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\"New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { \"Service-Worker\": \"script\" },\n\t})\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get(\"content-type\");\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\"No internet connection found. App is running in offline mode.\");\n\t\t});\n}\n\nexport function unregister() {\n\tif (\"serviceWorker\" in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t\t.then((registration) => {\n\t\t\t\tregistration.unregister();\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error.message);\n\t\t\t});\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\nserviceWorker.register();\n"],"sourceRoot":""}
