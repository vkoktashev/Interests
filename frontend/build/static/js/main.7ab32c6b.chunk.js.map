{"version":3,"sources":["settings.js","services/jwtAuth.js","store/AuthStore.js","store/PagesStore.js","hooks/useWindowDimensions.js","http/index.js","services/userRequests.js","services/gameRequests.js","services/movieRequests.js","services/showRequests.js","store/SearchStore.js","components/Common/SearchInput/SearchInput.js","components/Navbar/Navbar.js","components/Footer/Footer.js","components/Sidebar/Sidebar.js","components/Modals/LoginForm/LoginForm.js","components/Modals/RegisterForm/RegisterForm.js","components/Modals/ResetPasswordForm/ResetPasswordForm.js","components/HomePage/HomePage.js","store/GameStore.js","components/Common/StatusButtonGroup/StatusButtonGroup.js","components/Common/FriendsActivity/FriendActivity.js","components/Common/FriendsActivity/FriendsActivity.js","components/Game/TimeToBeat/TimeToBeat.js","components/Common/ScoreBlock/ScoreBlock.js","components/Common/Rating/Rating.js","components/Common/InputNumber/InputNumber.js","components/Game/GamePage/GamePage.js","store/MovieStore.js","store/CurrentUserStore.js","components/Movie/MoviePage/MoviePage.js","store/ShowStore.js","components/Show/Blocks/DetailEpisodeRow/DetailEpisodeRow.js","components/Show/Blocks/SeasonBlock/SeasonBlock.js","components/Show/Blocks/SeasonsBlock/SeasonsBlock.js","components/Show/Pages/ShowPage/ShowPage.js","components/Show/Pages/SeasonPage/SeasonPage.js","components/Show/Pages/EpisodePage/EpisodePage.js","components/Search/SearchCards/SearchCard/SearchCard.js","components/Search/SearchCards/SearchCardsBlock/SearchCardsBlock.js","components/Search/SearchCards/GameCards.js","components/Search/SearchCards/MovieCards.js","components/Search/SearchCards/ShowCards.js","components/Common/CardUser/CardUser.js","components/Common/FriendBlock/FriendBlock.js","components/Search/SearchCards/UserCards.js","components/Common/CategoriesTab/CategoriesTab.js","components/Search/SearchPage/SearchPage.js","components/ConfirmPage/ConfirmPage.js","components/ConfirmPasswordPage/ConfirmPasswordPage.js","store/UserStore.js","components/Common/SelectMulti/SelectMulti.js","components/User/ItemsBlock/ItemRow/ItemRow.js","components/User/ItemsBlock/ItemBlock/ItemBlock.js","components/User/ItemsBlock/GameBlock.js","components/User/ItemsBlock/MovieBlock.js","components/User/Logs/LogRow/LogRow.js","components/User/Logs/LogsByDay/LogsByDay.js","components/User/Logs/UserLogs/UserLogs.js","components/User/ItemsBlock/ShowBlock.js","components/User/Statistics/Colors.js","components/User/Statistics/GenresChart/GenresChart.js","components/User/Statistics/ChartBlock/ChartBlock.js","components/User/Statistics/StatisticsBlock/StatisticsBlock.js","components/User/UserPage/UserPage.js","components/Calendar/DayInfo/DayInfo.js","components/Calendar/ReleasesList/ReleasesList.js","components/Calendar/CalendarPage/CalendarPage.js","components/Settings/SettingsPage/SettingsPage.js","components/Unwatched/EpisodeRow/EpisodeRow.js","components/Unwatched/ShowBlock/ShowBlock.js","components/Unwatched/UnwatchedPage/UnwatchedPage.js","components/NotFoundPage/wrongPage.png","components/NotFoundPage/NotFoundPage.js","Routes.js","App.js","serviceWorker.js","index.js"],"names":["BACKEND_URL","GET_TOKEN_URL","REFRESH_TOKEN_URL","REGISTRATE_URL","CONFIRM_URL","RESET_PASSWORD_URL","CONFIRM_PASSWORD_URL","GET_GAME_URL","SEARCH_GAMES_URL","SEARCH_GAMES_FAST_URL","GET_MOVIE_URL","SEARCH_MOVIES_URL","SEARCH_MOVIES_FAST_URL","GET_SHOW_URL","SEARCH_SHOWS_URL","SEARCH_SHOWS_FAST_URL","GET_UNWATCHED_EPISODES_URL","USER_INFO_URL","USER_CALENDAR_URL","SEARCH_USERS_URL","USER_SETTINGS_URL","getToken","username","password","a","axios","post","urls","res","userData","jwt_decode","data","access","user","id","user_id","email","token","refreshToken","refresh","updateToken","console","log","registration","status","confirmation","uid64","patch","resetPassword","put","confirmPassword","AuthStore","loggedIn","authState","registrateState","confirmEmailState","resetPasswordState","confirmPasswordState","tryAuth","login","auth","then","authSuccess","authFailure","localStorage","setItem","error","response","detail","resetAuthorization","removeItem","register","registerSuccess","registerFailure","result","errors","error2","confirmEmail","confirmEmailSuccess","confirmEmailFailure","resetPasswordSuccess","resetPasswordFailure","confirmPasswordSuccess","confirmPasswordFailure","checkAuth","getItem","checkAuthSuccess","makeAutoObservable","this","PagesStore","LoginFormIsOpen","RegistrateFormIsOpen","ResetPasswordFormIsOpen","saveEpisodesBlockIsOpen","sidebarIsToggled","sidebarIsCollapsed","toggleSidebar","collapseSidebar","openLoginForm","closeLoginForm","openRegistrateForm","closeRegistrateForm","openResetPasswordForm","closeResetPasswordForm","setSaveEpisodes","getWindowDimensions","window","width","innerWidth","height","innerHeight","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","api","create","baseURL","interceptors","request","use","config","headers","Authorization","originalRequest","_isRetry","getUserInfo","userID","get","searchUsers","query","params","setUserStatus","is_following","getUserLog","page","resultsOnPage","filters","page_size","deleteUserLog","logType","logID","delete","type","getUserFriendsLog","getUserCalendar","getUserSettings","patchUserSettings","settings","getGame","setGameStatus","gameSlug","user_info","searchGames","gamesCount","searchGamesFast","getGameUserInfo","slug","getMovie","setMovieStatus","searchMovies","searchMoviesFast","getMovieUserInfo","getShow","getShowSeason","showID","seasonNumber","getShowEpisode","episodeNumber","setShowStatus","setShowSeasonStatus","setShowEpisodesStatus","episodesList","searchShows","searchShowsFast","getShowUserInfo","getShowSeasonUserInfo","seasonID","getShowEpisodeUserInfo","episodeID","getUnwatchedEpisodes","defaults","common","SearchStore","games","movies","shows","users","hints","currentQuery","gamesState","moviesState","showsState","usersState","searchHints","gameRequests","searchGamesHintsSuccess","movieRequests","searchMoviesHintsSuccess","showRequests","searchShowsHintsSuccess","searchGamesSuccess","searchGamesFailure","searchMoviesSuccess","searchMoviesFailure","results","searchShowsSuccess","searchShowsFailure","userRequests","searchUsersSuccess","searchUsersFailure","SearchInput","observer","onSubmit","className","setQuery","history","useHistory","event","classnames","placeholder","aria-label","value","onChange","target","hidden","length","icon","map","hint","key","href","location","origin","rawg_slug","onClick","e","push","preventDefault","src","rawg_backdrop_path","alt","rawg_name","rawg_release_date","substr","tmdb_id","tmdb_backdrop_path","tmdb_name","tmdb_release_date","Navbar","props","collapse","setCollapse","toggleIfSmallScreen","document","getElementById","Footer","fab","Sidebar","toggleSidebarIfSmallScreen","collapsed","iconShape","LoginForm","setPassword","setLogin","isOpen","toggle","size","centered","startsWith","htmlFor","RegisterForm","passwordConfirm","setPasswordConfirm","setEmail","style","outlineColor","disabled","ResetPasswordForm","HomePage","GameStore","game","gameState","userInfo","review","score","spent_time","friendsInfo","userInfoState","setStatusState","requestGame","requestGameSuccess","requestGameFailure","statusText","requestUserInfo","requestUserInfoSuccess","requestUserInfoFailure","friends_info","setGameStatusSuccess","setGameStatusFailure","StatusButtonGroup","statuses","onChangeStatus","userStatus","counter","intToHours","number","FriendActivity","info","stop","emptySymbol","far","fullSymbol","n","title","initialRating","readonly","FriendsActivity","friendInfo","TimeToBeat","hltbInfo","gameplay_main","gameplay_main_extra","gameplay_completionist","gameplay_main_unit","gameplay_main_extra_unit","gameplay_completionist_unit","ScoreBlock","text","getColor","RatingBlock","fontSize","InputNumber","max","min","dataList","parseFloat","toString","GamePage","anyError","useParams","setReview","spentTime","setSpentTime","userRate","setUserRate","setClearUI","strToFloat","cleanStr","indexOf","name","toast","backgroundImage","background","active","spinner","poster","developers","release_date","genres","platforms","hltb","playtime","Rating","metacritic","dangerouslySetInnerHTML","__html","overview","newData","hltbToDatalist","MovieStore","movie","tmdb","poster_path","movieState","requestMovie","requestMovieSuccess","requestMovieFailure","setMovieStatusSuccess","setMovieStatusFailure","CurrentUserStore","calendar","unwatched","calendarState","settingsState","unwatchedState","saveSettingsState","requestCalendar","requestCalendarSuccess","requestCalendarFailure","requestSettings","requestSettingsSuccess","requestSettingsFailure","requestUnwatched","requestUnwatchedSuccess","requestUnwatchedFailure","patchSettings","patchSettingsSuccess","patchSettingsFailure","patchSettingsReset","setTimeout","MoviePage","success","backdrop_path","original_name","runtime","production_companies","tagline","cast","directors","ShowStore","show","showState","showSeasons","showSeasonsState","showSeasonsUserInfo","showSeasonsUserInfoState","requestShow","requestShowSuccess","requestShowFailure","requestSeason","requestSeasonSuccess","requestSeasonFailure","requestSeasons","requestSeasonsSuccess","requestSeasonsFailure","requestEpisode","requestEpisodeSuccess","requestEpisodeFailure","requestShowUserInfo","requestShowUserInfoSuccess","requestShowUserInfoFailure","requestSeasonUserInfo","requestSeasonUserInfoSuccess","requestSeasonUserInfoFailure","user_watched_show","episodes","episodes_user_info","requestSeasonsUserInfo","requestSeasonsUserInfoSuccess","requestSeasonsUserInfoFailure","requestEpisodeUserInfo","requestEpisodeUserInfoSuccess","requestEpisodeUserInfoFailure","setShowStatusSuccess","setShowStatusFailure","setSeasonStatus","setEpisodesStatus","seasonsToUpdate","season","getShowSeasonState","getEpisodesUserInfo","episode","DetailEpisodeRow","setEpisodeUserStatus","checkAll","userWatchedShow","isChecked","setIsChecked","checked","date","newDate","Date","toLocaleDateString","parseDate","air_date","start","concat","season_number","episode_number","SeasonBlock","showSeason","computed","showSeasonState","showUserInfo","getEpisodeByID","open","reverse","SeasonsBlock","seasons","anySeasonLoading","toJS","sendAllEpisodes","currentValue","cbValue","sendEpisodes","ShowPage","first_air_date","last_air_date","episode_runtime","episode_run_time","seasons_count","episodes_count","paddingTop","SeasonPage","show_id","chartData","setChartData","vote_average","Оценка","tmdb_original_name","outline","body","clientHeight","clientWidth","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","dataKey","interval","tick","fill","tickLine","domain","tickCount","contentStyle","color","backgroundColor","stroke","fillOpacity","layout","EpisodePage","still_path","SearchCard","link","SearchCardsBlock","objects","currentPage","onPaginate","hasNextPage","object","GameCards","gamesPage","useMemo","reduce","newObjects","background_image","released","mas","split","MovieCards","moviesPage","ShowCards","showsPage","CardUser","FriendBlock","UserCards","CategoriesTab","categories","onChangeCategory","activeCategory","children","category","SearchPage","queryText","setQueryText","setGamesPage","setMoviesPage","setShowsPage","setActiveCategory","ConfirmPage","search","URLSearchParams","ConfirmPasswordPage","UserStore","userLogs","userFriendsLogs","userState","userLogsState","userFriendsLogsState","setUserStatusState","requestUser","requestUserSuccess","requestUserFailure","requestUserLogs","requestLogsSuccess","requestLogsFailure","deleteUserLogSuccess","deleteUserLogFailure","newLogs","filter","requestUserFriendsLogs","requestFriendsLogsSuccess","requestFriendsLogsFailure","setUserStatusSuccess","setUserStatusFailure","is_followed","parseInt","SelectMulti","options","classNamePrefix","isMulti","ItemRow","fields","display","undefined","find","field","ItemBlock","items","pageSize","setPageSize","setPage","filteredItems","setFilteresItems","sortIsAsc","setSortIsAsc","statusFilters","setStatusFilters","sortItems","isNumber","newItems","item","toLowerCase","includes","sort","b","obj","slice","total","current","separator","filename","GameBlock","label","MovieBlock","LogRow","showUsername","onDeleteLog","created","toLocaleTimeString","hour","minute","action","actionResult","translateActionType","action_type","action_result","actionType","translateType","parent_name","nameToLink","target_id","actionResultToStr","UserLogs","logs","currentUser","logsByDay","setLogsByDay","i","getDay","groupLogsByDay","dayLog","logsType","setCurrentPage","setFilters","LogsByDay","count","ShowBlock","COLORS","ChartBlock","test","navigator","userAgent","tickMargin","itemStyle","borderRadius","cursor","entry","index","Math","angle","stats","total_spent_time","cx","cy","outerRadius","labelLine","minAngle","verticalAlign","horizontalAlign","StatisticsBlock","gameChartData","setGameChartData","movieChartData","setMovieChartData","showChartData","setShowChartData","getGenresChartData","genre","spent_time_percent","Процент","GenresChart","UserPage","isCurrentUser","lastActivity","setLastActivity","last_activity","year","getFullYear","month","day","toLocaleString","is_available","marginRight","followed_users","DayInfo","weekday","rawg_id","tmdb_show","tmdb_season_number","tmdb_episode_number","ReleasesList","myStyle","border","getContentForDay","getIconForDay","remainedDays","days","now","diff","getTime","getUTCDay","dateDiff","lineColor","cardHeaderStyle","iconStyle","bubbleStyle","marginTop","marginBottom","titleStyle","subtitleStyle","CalendarPage","currentDay","setCurrentDay","formatDate","defaultView","minDetail","locale","minDate","tileContent","view","Object","entries","pad","getMonth","getDate","SettingsPage","gameNotifInput","setGameNotifInput","movieNotifInput","setMovieNotifInput","showNotifInput","setShowNotifInput","privacySelect","setPrivacySelect","receive_games_releases","receive_movies_releases","receive_episodes_releases","privacy","DetailedEpisodeRow","setShowEpisodeUserStatus","getUserSeasonOpen","localData","onToggle","class","EpisodeRow","UnwatchedPage","NotFoundPage","setAngle","requestAnimationFrame","transform","image","Routes","exact","path","component","React","Component","App","position","hideProgressBar","newestOnTop","closeOnClick","autoClose","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","ReactDOM","render","URL","process","fetch","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.7ab32c6b.chunk.js","sourcesContent":["/** Время жизни токена в миллисекундах, после истечения которого будет запрошен новый токен*/\r\nexport const TOKEN_LIFETIME = 290000;\r\n/**Адрес сервера*/\r\nexport const BACKEND_URL = \"https://interests.fun/api/\";\r\n/**Адрес получения токена */\r\nexport const GET_TOKEN_URL = BACKEND_URL + \"users/auth/login/\";\r\n/**Адрес обновления токена */\r\nexport const REFRESH_TOKEN_URL = BACKEND_URL + \"users/auth/refresh-token/\";\r\n/**Адрес регистрации */\r\nexport const REGISTRATE_URL = BACKEND_URL + \"users/auth/signup/\";\r\n/**Адрес подтверждения почты */\r\nexport const CONFIRM_URL = BACKEND_URL + \"users/auth/confirm_email/\";\r\n/**Адрес сброса пароля */\r\nexport const RESET_PASSWORD_URL = BACKEND_URL + \"users/auth/password_reset/\";\r\n/**Адрес подтверждения сброса пароля */\r\nexport const CONFIRM_PASSWORD_URL = BACKEND_URL + \"users/auth/confirm_password_reset/\";\r\n/**Адрес запроса игры */\r\nexport const GET_GAME_URL = \"games/game/\";\r\n/**Адрес поиска игр */\r\nexport const SEARCH_GAMES_URL = \"games/search/rawg/\";\r\n/**Адрес быстрого поиска игр */\r\nexport const SEARCH_GAMES_FAST_URL = \"games/search/\";\r\n/**Адрес запроса фильма */\r\nexport const GET_MOVIE_URL = \"movies/movie/\";\r\n/**Адрес поиска фильмов */\r\nexport const SEARCH_MOVIES_URL = \"movies/search/tmdb/\";\r\n/**Адрес быстрого поиска игр */\r\nexport const SEARCH_MOVIES_FAST_URL = \"movies/search/\";\r\n/**Адрес запроса сериала */\r\nexport const GET_SHOW_URL = \"shows/show/\";\r\n/**Адрес поиска сериалов */\r\nexport const SEARCH_SHOWS_URL = \"shows/search/tmdb/\";\r\n/**Адрес быстрого поиска сериалов */\r\nexport const SEARCH_SHOWS_FAST_URL = \"shows/search/\";\r\n/**Адрес запроса непросмотренных серий */\r\nexport const GET_UNWATCHED_EPISODES_URL = \"shows/show/unwatched_episodes/\";\r\n/**Адрес получения информации о пользователе */\r\nexport const USER_INFO_URL = \"users/user/\";\r\n/**Адрес получения календаря релизов пользователя */\r\nexport const USER_CALENDAR_URL = \"users/user/release_calendar/\";\r\n/**Адрес поиска пользователей */\r\nexport const SEARCH_USERS_URL = \"users/search/\";\r\n/**Адрес сохранения настроек */\r\nexport const USER_SETTINGS_URL = \"users/user/user_settings/\";\r\n","import axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport * as urls from \"../settings\";\r\n\r\n/**\r\n * ПОлучение токена авторизации. Токен сохраняется в localStorage\r\n * @param {string} username Имя пользователя\r\n * @param {string} password Пароль\r\n */\r\nexport async function getToken(username, password) {\r\n\tconst res = await axios.post(urls.GET_TOKEN_URL, {\r\n\t\tusername: username,\r\n\t\tpassword: password,\r\n\t});\r\n\r\n\tlet userData = jwt_decode(res.data.access);\r\n\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\treturn { token: res.data.access, refreshToken: res.data.refresh, user: user };\r\n}\r\n\r\n/**\r\n * Функция обновления токена\r\n */\r\nexport async function updateToken(refreshToken) {\r\n\tif ((typeof refreshToken !== \"undefined\") & (refreshToken != null)) {\r\n\t\ttry {\r\n\t\t\tconst res = await axios.post(urls.REFRESH_TOKEN_URL, { refresh: refreshToken });\r\n\t\t\tlet userData = jwt_decode(res.data.access);\r\n\t\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\t\t\treturn { token: res.data.access, user: user };\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(\"axios error: \" + e);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nexport async function registration(username, email, password) {\r\n\tconst res = await axios.post(urls.REGISTRATE_URL, {\r\n\t\tusername: username,\r\n\t\temail: email,\r\n\t\tpassword: password,\r\n\t});\r\n\tlet data = res.data;\r\n\tdata.status = res.status;\r\n\treturn data;\r\n}\r\n\r\nexport async function confirmation(uid64, token) {\r\n\tconst res = await axios.patch(urls.CONFIRM_URL + \"?uid64=\" + uid64 + \"&token=\" + token);\r\n\treturn res;\r\n}\r\n\r\nexport async function resetPassword(email) {\r\n\tconst res = await axios.put(urls.RESET_PASSWORD_URL, { email: email });\r\n\treturn res;\r\n}\r\n\r\nexport async function confirmPassword(token, password) {\r\n\tconst res = await axios.patch(urls.CONFIRM_PASSWORD_URL + \"?reset_token=\" + token, { password: password });\r\n\treturn res;\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport * as auth from \"../services/jwtAuth\";\r\n\r\nclass Auth {\r\n\tloggedIn = false;\r\n\tuser = {\r\n\t\tusername: \"\",\r\n\t\temail: \"\",\r\n\t\tid: null,\r\n\t};\r\n\tauthState = \"\";\r\n\tregistrateState = \"\";\r\n\tconfirmEmailState = \"\";\r\n\tresetPasswordState = \"\";\r\n\tconfirmPasswordState = \"\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\ttryAuth = async (login, password) => {\r\n\t\tthis.authState = \"pending\";\r\n\t\tauth.getToken(login, password).then(this.authSuccess, this.authFailure);\r\n\t};\r\n\tauthSuccess = (res) => {\r\n\t\tlocalStorage.setItem(\"refreshToken\", res.refreshToken);\r\n\t\tlocalStorage.setItem(\"token\", res.token);\r\n\t\tthis.loggedIn = true;\r\n\t\tthis.user = res.user;\r\n\t\tthis.authState = \"done\";\r\n\t};\r\n\tauthFailure = (error) => {\r\n\t\tthis.authState = \"error: \" + error.response.data.detail;\r\n\t};\r\n\r\n\tresetAuthorization = async () => {\r\n\t\tthis.loggedIn = false;\r\n\t\tthis.user = { username: \"\", id: null, email: \"\" };\r\n\t\tlocalStorage.removeItem(\"refreshToken\");\r\n\t\tlocalStorage.removeItem(\"token\");\r\n\t};\r\n\r\n\tregister = async (username, email, password) => {\r\n\t\tthis.registrateState = \"pending\";\r\n\t\tauth.registration(username, email, password).then(this.registerSuccess, this.registerFailure);\r\n\t};\r\n\tregisterSuccess = (result) => {\r\n\t\tthis.user = { login: result.username, email: result.email };\r\n\t\tthis.registrateState = \"done\";\r\n\t};\r\n\tregisterFailure = (error) => {\r\n\t\tlet errors = \"\";\r\n\t\tfor (let error2 in error.response.data) errors += error.response.data[error2] + \"\\n\";\r\n\t\tthis.registrateState = \"error: \" + errors;\r\n\t};\r\n\r\n\tconfirmEmail = async (uid64, token) => {\r\n\t\tthis.confirmEmailState = \"pending\";\r\n\t\tauth.confirmation(uid64, token).then(this.confirmEmailSuccess, this.confirmEmailFailure);\r\n\t};\r\n\tconfirmEmailSuccess = (result) => {\r\n\t\tthis.confirmEmailState = \"done\";\r\n\t};\r\n\tconfirmEmailFailure = (error) => {\r\n\t\tlet errors = \"\";\r\n\t\tfor (let error2 in error.response.data) errors += error.response.data[error2] + \"\\n\";\r\n\t\tthis.confirmEmailState = \"error: \" + errors;\r\n\t};\r\n\r\n\tresetPassword = async (email) => {\r\n\t\tthis.resetPasswordState = \"pending\";\r\n\t\tauth.resetPassword(email).then(this.resetPasswordSuccess, this.resetPasswordFailure);\r\n\t};\r\n\tresetPasswordSuccess = (result) => {\r\n\t\tthis.resetPasswordState = \"done\";\r\n\t};\r\n\tresetPasswordFailure = (error) => {\r\n\t\tthis.resetPasswordState = \"error: \" + error;\r\n\t};\r\n\r\n\tconfirmPassword = async (token, password) => {\r\n\t\tthis.confirmPasswordState = \"\";\r\n\t\tauth.confirmPassword(token, password).then(this.confirmPasswordSuccess, this.confirmPasswordFailure);\r\n\t};\r\n\tconfirmPasswordSuccess = (result) => {\r\n\t\tthis.confirmPasswordState = \"done\";\r\n\t};\r\n\tconfirmPasswordFailure = (error) => {\r\n\t\tlet errors = \"\";\r\n\t\tfor (let error2 in error.response.data) errors += error.response.data[error2] + \"\\n\";\r\n\t\tthis.confirmPasswordState = \"error: \" + errors;\r\n\t};\r\n\r\n\t/**\r\n\t * Проверка авторизации\r\n\t */\r\n\tcheckAuth = async () => {\r\n\t\tthis.authState = \"pending\";\r\n\t\tauth.updateToken(localStorage.getItem(\"refreshToken\")).then(this.checkAuthSuccess, this.authFailure);\r\n\t};\r\n\tcheckAuthSuccess = (res) => {\r\n\t\tlocalStorage.setItem(\"token\", res?.token);\r\n\t\tthis.loggedIn = true;\r\n\t\tthis.user = res?.user;\r\n\t\tthis.authState = \"done\";\r\n\t};\r\n\r\n\tget currentUser() {\r\n\t\treturn this.user;\r\n\t}\r\n}\r\n\r\nconst AuthStore = new Auth();\r\n//export default remotedev(AuthStore, { name: \"Auth\" });\r\nexport default AuthStore;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\n\r\nclass Pages {\r\n\tLoginFormIsOpen = false;\r\n\tRegistrateFormIsOpen = false;\r\n\tResetPasswordFormIsOpen = false;\r\n\tsaveEpisodesBlockIsOpen = false;\r\n\tsidebarIsToggled = localStorage.getItem(\"sidebarToggled\") === \"true\";\r\n\tsidebarIsCollapsed = localStorage.getItem(\"sidebarCollapsed\") === \"true\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\ttoggleSidebar = async () => {\r\n\t\tthis.sidebarIsToggled = !this.sidebarIsToggled;\r\n\t\tif (!this.sidebarIsToggled) this.sidebarIsCollapsed = false;\r\n\t\tlocalStorage.setItem(\"sidebarToggled\", this.sidebarIsToggled);\r\n\t};\r\n\r\n\tcollapseSidebar = async () => {\r\n\t\tthis.sidebarIsCollapsed = !this.sidebarIsCollapsed;\r\n\t\tlocalStorage.setItem(\"sidebarCollapsed\", this.sidebarIsCollapsed);\r\n\t};\r\n\r\n\topenLoginForm = async () => {\r\n\t\tthis.LoginFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseLoginForm = async () => {\r\n\t\tthis.LoginFormIsOpen = false;\r\n\t};\r\n\r\n\topenRegistrateForm = async () => {\r\n\t\tthis.RegistrateFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseRegistrateForm = async () => {\r\n\t\tthis.RegistrateFormIsOpen = false;\r\n\t};\r\n\r\n\topenResetPasswordForm = async () => {\r\n\t\tthis.ResetPasswordFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseResetPasswordForm = async () => {\r\n\t\tthis.ResetPasswordFormIsOpen = false;\r\n\t};\r\n\r\n\tsetSaveEpisodes = (status) => (this.saveEpisodesBlockIsOpen = status);\r\n}\r\n\r\nconst PagesStore = new Pages();\r\n//export default remotedev(PagesStore, { name: \"Pages\" });\r\nexport default PagesStore;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nfunction getWindowDimensions() {\r\n\tconst { innerWidth: width, innerHeight: height } = window;\r\n\treturn {\r\n\t\twidth,\r\n\t\theight,\r\n\t};\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n\tconst [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n\tuseEffect(() => {\r\n\t\tfunction handleResize() {\r\n\t\t\tsetWindowDimensions(getWindowDimensions());\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"resize\", handleResize);\r\n\t\treturn () => window.removeEventListener(\"resize\", handleResize);\r\n\t}, []);\r\n\r\n\treturn windowDimensions;\r\n}","import axios from \"axios\";\r\nimport { BACKEND_URL, REFRESH_TOKEN_URL } from \"../settings\";\r\n\r\nconst api = axios.create({\r\n\tbaseURL: BACKEND_URL,\r\n});\r\n\r\napi.interceptors.request.use((config) => {\r\n\tconfig.headers.Authorization = `Bearer ${localStorage.getItem(\"token\")}`;\r\n\treturn config;\r\n});\r\n\r\napi.interceptors.response.use(\r\n\t(config) => {\r\n\t\treturn config;\r\n\t},\r\n\tasync (error) => {\r\n\t\tconst originalRequest = error.config;\r\n\t\tif (error.response.status === 401 && error.config && !error.config._isRetry) {\r\n\t\t\toriginalRequest._isRetry = true;\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await axios.post(BACKEND_URL + REFRESH_TOKEN_URL, {\r\n\t\t\t\t\trefresh: localStorage.getItem(\"refreshToken\"),\r\n\t\t\t\t});\r\n\t\t\t\tlocalStorage.setItem(\"token\", response.data.access);\r\n\t\t\t\treturn api.request(originalRequest);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(\"НЕ АВТОРИЗОВАН\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tthrow error;\r\n\t}\r\n);\r\n\r\nexport default api;\r\n","import api from \"../http\";\r\nimport { USER_INFO_URL, SEARCH_USERS_URL, USER_CALENDAR_URL, USER_SETTINGS_URL } from \"../settings\";\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о пользователе\r\n * @param {string} userID ID пользователя\r\n * @returns {object} Информация о пользователе\r\n */\r\nexport async function getUserInfo(userID) {\r\n\tconst res = await api.get(USER_INFO_URL + userID + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск пользователей\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchUsers(query) {\r\n\tconst res = await api.get(SEARCH_USERS_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса пользовтеля (добавить в друзья и тд)\r\n * @param {boolean} is_following Статус фильма\r\n * @param {string} userID ID пользовтеля\r\n */\r\nexport async function setUserStatus(is_following, userID) {\r\n\tconst res = await api.put(USER_INFO_URL + userID + \"/follow/\", is_following);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {string} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserLog(userID, page, resultsOnPage, query, filters) {\r\n\tconst res = await api.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage, query: query, filters: filters } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {string} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function deleteUserLog(userID, logType, logID) {\r\n\tconst res = await api.delete(USER_INFO_URL + userID + \"/log/\", { data: { type: logType, id: logID } });\r\n\treturn res;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог друзей пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {int} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserFriendsLog(page, resultsOnPage, query, filters) {\r\n\tconst res = await api.get(USER_INFO_URL + \"friends_log/\", { params: { page: page, page_size: resultsOnPage, query: query, filters: filters } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий календарь релизов пользователя\r\n */\r\nexport async function getUserCalendar() {\r\n\tconst res = await api.get(USER_CALENDAR_URL);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий настройки пользователя\r\n */\r\nexport async function getUserSettings() {\r\n\tconst res = await api.get(USER_SETTINGS_URL);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, изменяющий настройки пользователя\r\n */\r\nexport async function patchUserSettings(settings) {\r\n\tconst res = await api.patch(USER_SETTINGS_URL, settings);\r\n\treturn res.data;\r\n}\r\n","import api from \"../http\";\r\nimport { GET_GAME_URL, SEARCH_GAMES_URL, SEARCH_GAMES_FAST_URL } from \"../settings\";\r\n\r\napi.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об игре\r\n * @param {string} id ID игры\r\n * @returns {object} Информация об игре\r\n */\r\nexport async function getGame(id) {\r\n\tconst res = await api.get(GET_GAME_URL + id + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса игры\r\n * @param {object} user_info Статус игры\r\n * @param {string} gameSlug Слаг игры\r\n */\r\nexport async function setGameStatus(gameSlug, user_info) {\r\n\tconst res = await api.put(GET_GAME_URL + gameSlug + \"/\", user_info);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск игр\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchGames(query, page, gamesCount) {\r\n\tconst res = await api.get(SEARCH_GAMES_URL, { params: { query: query, page: page, page_size: gamesCount } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск локльных игр\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchGamesFast(query) {\r\n\tconst res = await api.get(SEARCH_GAMES_FAST_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для игры\r\n * @param {string} slug slug игры\r\n * @param {int} page страница\r\n */\r\nexport async function getGameUserInfo(slug) {\r\n\tconst res = await api.get(GET_GAME_URL + slug + \"/user_info/\");\r\n\treturn res.data;\r\n}\r\n","import api from \"../http\";\r\nimport { SEARCH_MOVIES_URL, SEARCH_MOVIES_FAST_URL, GET_MOVIE_URL } from \"../settings\";\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о фильме\r\n * @param {string} id ID фильма\r\n * @returns {object} Информация о фильме\r\n */\r\nexport async function getMovie(id) {\r\n\tconst res = await api.get(GET_MOVIE_URL + id + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса фильма\r\n * @param {object} user_info Статус фильма\r\n * @param {string} movieID ID фильма\r\n */\r\nexport async function setMovieStatus(id, user_info) {\r\n\tconst res = await api.put(GET_MOVIE_URL + id + \"/\", user_info);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск фильмов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchMovies(query, page) {\r\n\tconst res = await api.get(SEARCH_MOVIES_URL, { params: { query: query, page: page } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск локальных фильмов\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchMoviesFast(query) {\r\n\tconst res = await api.get(SEARCH_MOVIES_FAST_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для фильма\r\n * @param {string} id id фильма\r\n */\r\nexport async function getMovieUserInfo(id) {\r\n\tconst res = await api.get(GET_MOVIE_URL + id + \"/user_info/\");\r\n\treturn res.data;\r\n}\r\n","import api from \"../http\";\r\nimport { SEARCH_SHOWS_URL, SEARCH_SHOWS_FAST_URL, GET_SHOW_URL, GET_UNWATCHED_EPISODES_URL } from \"../settings\";\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сериале\r\n * @param {string} id ID сериала\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShow(id) {\r\n\tconst res = await api.get(GET_SHOW_URL + id + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сезоне сериала\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowSeason(showID, seasonNumber) {\r\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о серии сериала\r\n * @param {string} showID ID сериала\r\n * @param {string} seasonNumber номер сезона\r\n * @param {string} episodeNumber номер эпизода\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowEpisode(showID, seasonNumber, episodeNumber) {\r\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сериала\r\n * @param {object} user_info Статус сериала\r\n * @param {string} id ID сериала\r\n */\r\nexport async function setShowStatus(id, user_info) {\r\n\tconst res = await api.put(GET_SHOW_URL + id + \"/\", user_info);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {object} user_info Статус сезона сериала\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n */\r\nexport async function setShowSeasonStatus(showID, seasonNumber, user_info) {\r\n\tconst res = await api.put(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\", user_info);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {object} episodesList Список объектов эпизодов\r\n * @param {string} showID ID сериала\r\n */\r\nexport async function setShowEpisodesStatus(showID, episodesList) {\r\n\tconst res = await api.put(GET_SHOW_URL + showID + \"/episodes/\", episodesList);\r\n\treturn res;\r\n}\r\n\r\n/**\r\n * Запрос на поиск сериалов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchShows(query, page) {\r\n\tconst res = await api.get(SEARCH_SHOWS_URL, { params: { query: query, page: page } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск локальных сериалов\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchShowsFast(query) {\r\n\tconst res = await api.get(SEARCH_SHOWS_FAST_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowUserInfo(showID) {\r\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/user_info/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сезона сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowSeasonUserInfo(showID, seasonID) {\r\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/user_info/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для эпизода сериала\r\n * @param {string} showID id сериала\r\n * @param {int} page страница\r\n */\r\nexport async function getShowEpisodeUserInfo(showID, seasonID, episodeID) {\r\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/episode/\" + episodeID + \"/user_info/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сериале\r\n * @returns {Array} Список эпизодов\r\n */\r\nexport async function getUnwatchedEpisodes() {\r\n\tconst res = await api.get(GET_UNWATCHED_EPISODES_URL);\r\n\treturn res.data;\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport * as userRequests from \"../services/userRequests\";\r\nimport * as gameRequests from \"../services/gameRequests\";\r\nimport * as movieRequests from \"../services/movieRequests\";\r\nimport * as showRequests from \"../services/showRequests\";\r\n\r\nclass Search {\r\n\tgames = [];\r\n\tmovies = [];\r\n\tshows = [];\r\n\tusers = [];\r\n\thints = { games: [], shows: [], movies: [] };\r\n\tcurrentQuery = \"\";\r\n\tgamesState = \"done\";\r\n\tmoviesState = \"done\";\r\n\tshowsState = \"done\";\r\n\tusersState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\tsearchHints = async (query) => {\r\n\t\tif (this.currentQuery !== query) {\r\n\t\t\tthis.currentQuery = query;\r\n\t\t\tgameRequests.searchGamesFast(query).then(this.searchGamesHintsSuccess);\r\n\t\t\tmovieRequests.searchMoviesFast(query).then(this.searchMoviesHintsSuccess);\r\n\t\t\tshowRequests.searchShowsFast(query).then(this.searchShowsHintsSuccess);\r\n\t\t}\r\n\t};\r\n\tsearchGamesHintsSuccess = (result) => {\r\n\t\tthis.hints.games = result;\r\n\t};\r\n\tsearchMoviesHintsSuccess = (result) => {\r\n\t\tthis.hints.movies = result;\r\n\t};\r\n\tsearchShowsHintsSuccess = (result) => {\r\n\t\tthis.hints.shows = result;\r\n\t};\r\n\r\n\tsearchGames = async (query, page, gamesCount) => {\r\n\t\tthis.gamesState = \"pending\";\r\n\t\tgameRequests.searchGames(query, page, gamesCount).then(this.searchGamesSuccess, this.searchGamesFailure);\r\n\t};\r\n\tsearchGamesSuccess = (result) => {\r\n\t\tthis.games = result;\r\n\t\tthis.gamesState = \"done\";\r\n\t};\r\n\tsearchGamesFailure = (error) => {\r\n\t\tthis.gamesState = \"error: \" + error;\r\n\t};\r\n\r\n\tsearchMovies = async (query, page) => {\r\n\t\tthis.moviesState = \"pending\";\r\n\t\tmovieRequests.searchMovies(query, page).then(this.searchMoviesSuccess, this.searchMoviesFailure);\r\n\t};\r\n\tsearchMoviesSuccess = (result) => {\r\n\t\tthis.movies = result.results;\r\n\t\tthis.moviesState = \"done\";\r\n\t};\r\n\tsearchMoviesFailure = (error) => {\r\n\t\tthis.moviesState = \"error: \" + error;\r\n\t};\r\n\r\n\tsearchShows = async (query, page) => {\r\n\t\tthis.showsState = \"pending\";\r\n\t\tshowRequests.searchShows(query, page).then(this.searchShowsSuccess, this.searchShowsFailure);\r\n\t};\r\n\tsearchShowsSuccess = (result) => {\r\n\t\tthis.shows = result.results;\r\n\t\tthis.showsState = \"done\";\r\n\t};\r\n\tsearchShowsFailure = (error) => {\r\n\t\tthis.showsState = \"error: \" + error;\r\n\t};\r\n\r\n\tsearchUsers = async (query) => {\r\n\t\tthis.usersState = \"pending\";\r\n\t\tuserRequests.searchUsers(query).then(this.searchUsersSuccess, this.searchUsersFailure);\r\n\t};\r\n\tsearchUsersSuccess = (result) => {\r\n\t\tthis.users = result;\r\n\t\tthis.usersState = \"done\";\r\n\t};\r\n\tsearchUsersFailure = (error) => {\r\n\t\tthis.usersState = \"error: \" + error;\r\n\t};\r\n}\r\n\r\nconst SearchStore = new Search();\r\n//export default remotedev(SearchStore, { name: \"Search\" });\r\nexport default SearchStore;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport SearchStore from \"../../../store/SearchStore\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport classnames from \"classnames\";\r\nimport \"./search-input.sass\";\r\n\r\nconst SearchInput = observer(({ onSubmit, className }) => {\r\n\tconst [query, setQuery] = useState(\"\");\r\n\tlet history = useHistory();\r\n\tconst { searchHints, hints } = SearchStore;\r\n\r\n\treturn (\r\n\t\t<form\r\n\t\t\tonSubmit={(event) => {\r\n\t\t\t\tonSubmit(event);\r\n\t\t\t\tsetQuery(\"\");\r\n\t\t\t}}\r\n\t\t\tclassName={classnames(\"search-input\", className)}>\r\n\t\t\t<input\r\n\t\t\t\ttype='text'\r\n\t\t\t\tplaceholder='Поиск'\r\n\t\t\t\taria-label='Поиск'\r\n\t\t\t\tclassName='search-input__input'\r\n\t\t\t\tid='searchInput'\r\n\t\t\t\tvalue={query}\r\n\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\tsetQuery(event.target.value);\r\n\t\t\t\t\tsearchHints(event.target.value);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<div className='search-input__hints' hidden={query === \"\" || !(hints.games.length > 0 || hints.movies.length > 0 || hints.shows.length > 0)}>\r\n\t\t\t\t<div hidden={!hints.games.length > 0}>\r\n\t\t\t\t\t<MDBIcon icon='gamepad' />\r\n\t\t\t\t\t{hints.games.map((hint, key) => (\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + hint.rawg_slug}\r\n\t\t\t\t\t\t\tclassName='search-input__hint'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + hint.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tsetQuery(\"\");\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{<img src={hint.rawg_backdrop_path} alt={\"\"} />}\r\n\t\t\t\t\t\t\t{hint.rawg_name}\r\n\t\t\t\t\t\t\t<div>{hint?.rawg_release_date?.substr(0, 4)}</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div hidden={!hints.movies.length > 0}>\r\n\t\t\t\t\t<MDBIcon icon='film' />\r\n\t\t\t\t\t{hints.movies.map((hint, key) => (\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + hint.tmdb_id}\r\n\t\t\t\t\t\t\tclassName='search-input__hint'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + hint.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tsetQuery(\"\");\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{<img src={hint.tmdb_backdrop_path} alt={\"\"} />}\r\n\t\t\t\t\t\t\t{hint.tmdb_name}\r\n\t\t\t\t\t\t\t<div>{hint?.tmdb_release_date?.substr(0, 4)}</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div hidden={!hints.shows.length > 0}>\r\n\t\t\t\t\t<MDBIcon icon='tv' />\r\n\t\t\t\t\t{hints.shows.map((hint, key) => (\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + hint.tmdb_id}\r\n\t\t\t\t\t\t\tclassName='search-input__hint'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + hint.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tsetQuery(\"\");\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{<img src={hint.tmdb_backdrop_path} alt={\"\"} />}\r\n\t\t\t\t\t\t\t{hint.tmdb_name}\r\n\t\t\t\t\t\t\t<div>{hint?.tmdb_release_date?.substr(0, 4)}</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n});\r\n\r\nexport default SearchInput;\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport useWindowDimensions from \"../../hooks/useWindowDimensions\";\r\nimport SearchInput from \"../Common/SearchInput/SearchInput\";\r\nimport classnames from \"classnames\";\r\n\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport \"./navbar.sass\";\r\n\r\nconst Navbar = observer((props) => {\r\n\tconst { toggleSidebar, openLoginForm } = PagesStore;\r\n\tconst { width } = useWindowDimensions();\r\n\tconst { loggedIn, user } = AuthStore;\r\n\r\n\tlet history = useHistory();\r\n\r\n\tconst [collapse, setCollapse] = useState(true);\r\n\r\n\tconst toggleCollapse = () => {\r\n\t\tsetCollapse(!collapse);\r\n\t};\r\n\r\n\tfunction toggleIfSmallScreen() {\r\n\t\tif (width <= 600) setCollapse(true);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='navbar'>\r\n\t\t\t<div className='navbar__left'>\r\n\t\t\t\t<div onClick={toggleSidebar} className='navbar__sidebar-button'>\r\n\t\t\t\t\t<MDBIcon icon='bars' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div onClick={() => history.push(\"/\")} className='navbar__logo'>\r\n\t\t\t\t\tInterests\r\n\t\t\t\t</div>\r\n\t\t\t\t<div onClick={toggleCollapse} className='navbar__collapse-button'>\r\n\t\t\t\t\t{collapse ? <MDBIcon icon='angle-down' /> : <MDBIcon icon='angle-up' />}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className={classnames(\"navbar__center\", collapse && width <= 600 ? \"navbar__center_collapsed\" : \"\")}>\r\n\t\t\t\t<SearchInput\r\n\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput\").value);\r\n\t\t\t\t\t\ttoggleIfSmallScreen();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='navbar__search-input'\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className={classnames(\"navbar__right\", collapse && width <= 600 ? \"navbar__right_collapsed\" : \"\")}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\thistory.push(`/user/${user.id}`);\r\n\t\t\t\t\t\ttoggleIfSmallScreen();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='navbar__user-button'\r\n\t\t\t\t\thidden={!loggedIn}>\r\n\t\t\t\t\t<MDBIcon icon='user-circle' /> {user.username}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div onClick={openLoginForm} className='navbar__user-button' hidden={loggedIn}>\r\n\t\t\t\t\t<MDBIcon icon='sign-in-alt' /> Войти\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default Navbar;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport classnames from \"classnames\";\r\nimport \"./footer.sass\";\r\n\r\nfunction Footer({ className }) {\r\n\treturn (\r\n\t\t<div className={classnames(\"footer\", className)}>\r\n\t\t\t<div className='footer__body'>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2 className='footer__name'>Interests</h2>\r\n\t\t\t\t\t<p>info@interests.fun</p>\r\n\t\t\t\t\t2020-2021\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='footer__social-block'>\r\n\t\t\t\t\t<p>Следите за нами в социальных сетях, чтобы оставаться в курсе последних событий!</p>\r\n\t\t\t\t\t<a href='https://vk.com/interests_fun' className='footer__social-link'>\r\n\t\t\t\t\t\t<MDBIcon fab icon='vk' />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a href='https://discord.gg/wXkUF5tKee' className='footer__social-link'>\r\n\t\t\t\t\t\t<MDBIcon fab icon='discord' />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='footer__social-block'>\r\n\t\t\t\t\t<h5>Сайт был разработан при поддержке</h5>\r\n\t\t\t\t\t<a href='https://rawg.io/' className='footer__rawg-logo'>\r\n\t\t\t\t\t\tRAWG\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a href='https://www.themoviedb.org/'>\r\n\t\t\t\t\t\t<div className='footer__tmdb-logo' />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport useWindowDimensions from \"../../hooks/useWindowDimensions\";\r\nimport \"./sidebar.sass\";\r\n\r\nimport {\r\n\tProSidebar,\r\n\tMenu,\r\n\tMenuItem,\r\n\t//SubMenu,\r\n\tSidebarFooter,\r\n} from \"react-pro-sidebar\";\r\n//import \"react-pro-sidebar/dist/css/styles.css\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst Sidebar = observer((props) => {\r\n\tconst history = useHistory();\r\n\tconst { width } = useWindowDimensions();\r\n\r\n\tconst { loggedIn, user, resetAuthorization } = AuthStore;\r\n\tconst { sidebarIsCollapsed, sidebarIsToggled, collapseSidebar, toggleSidebar, openLoginForm, openRegistrateForm } = PagesStore;\r\n\r\n\tfunction toggleSidebarIfSmallScreen() {\r\n\t\tif (width < 1780 && width > 1440 && !sidebarIsCollapsed) collapseSidebar();\r\n\t\tif (width <= 1440) toggleSidebar();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ProSidebar className='sidebar' collapsed={sidebarIsCollapsed} hidden={!sidebarIsToggled}>\r\n\t\t\t<Menu iconShape='round' hidden={!loggedIn}>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='user-circle' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/user/${user.id}`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/user/${user.id}`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tПрофиль\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='user-friends' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/user/${user.id}/Друзья`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/user/${user.id}/Друзья`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tДрузья\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='tv' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/unwatched`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/unwatched`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tНепросмотренное\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='calendar-day' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/calendar`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/calendar`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tКалендарь\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='cog' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/settings`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/settings`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tНастройки\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='sign-out-alt' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\tresetAuthorization();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tВыход\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t\t<Menu iconShape='round' hidden={loggedIn}>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='sign-in-alt' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='user-plus' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\topenRegistrateForm();\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t\t<SidebarFooter>\r\n\t\t\t\t<Menu iconShape='round'>\r\n\t\t\t\t\t<MenuItem icon={sidebarIsCollapsed ? <MDBIcon icon='arrow-right' /> : <MDBIcon icon='arrow-left' />} onClick={collapseSidebar}>\r\n\t\t\t\t\t\tСвернуть\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t</Menu>\r\n\t\t\t</SidebarFooter>\r\n\t\t</ProSidebar>\r\n\t);\r\n});\r\n\r\nexport default Sidebar;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../../store/AuthStore\";\r\nimport PagesStore from \"../../../store/PagesStore\";\r\nimport \"./login-form.sass\";\r\n\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst LoginForm = observer((props) => {\r\n\tconst { tryAuth, authState } = AuthStore;\r\n\tconst { LoginFormIsOpen, closeLoginForm, openResetPasswordForm, openRegistrateForm } = PagesStore;\r\n\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (authState === \"done\") closeLoginForm();\r\n\t}, [authState, closeLoginForm]);\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={LoginFormIsOpen} toggle={closeLoginForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='login-form'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\ttryAuth(login, password);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Войти</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger login-form__fail' hidden={!authState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t\t\t\t{authState}\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tЛогин\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='login-form__input' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПароль\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='login-form__input' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='login-form__auth-button'>\r\n\t\t\t\t\t\t\t\t\t\t{authState !== \"pending\" ? \"Войти\" : \"Загрузка...\"}\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\tclassName='login-form__link-label'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tcloseLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\topenResetPasswordForm();\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tВосстановить пароль\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\tclassName='login-form__link-label'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tcloseLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\topenRegistrateForm();\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n});\r\n\r\nexport default LoginForm;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../../store/AuthStore\";\r\nimport PagesStore from \"../../../store/PagesStore\";\r\nimport \"./register-form.sass\";\r\n\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst RegisterForm = observer((props) => {\r\n\tconst { register, registrateState, user } = AuthStore;\r\n\tconst { RegistrateFormIsOpen, closeRegistrateForm } = PagesStore;\r\n\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={RegistrateFormIsOpen} toggle={closeRegistrateForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='register-form'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger register-form__fail' hidden={!registrateState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t\t\t\t{registrateState}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success register-form__success' hidden={user.email === \"\"}>\r\n\t\t\t\t\t\t\t\t\t{user.login}, добро пожаловать! Осталось только подтвердить вашу почту\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<h4>Регистрация</h4>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput'>Никнейм</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='register-form__input' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput'>Электронная почта</label>\r\n\t\t\t\t\t\t\t\t<input type='email' id='emailInput' className='register-form__input' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput'>Пароль</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='register-form__input' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordConfirmInput'>Подтверждение пароля</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\t\tid='passwordConfirmInput'\r\n\t\t\t\t\t\t\t\t\tclassName='register-form__input'\r\n\t\t\t\t\t\t\t\t\tstyle={passwordConfirm === password ? { outlineColor: \"green\" } : { outlineColor: \"red\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={passwordConfirm}\r\n\t\t\t\t\t\t\t\t\tonChange={(event) => setPasswordConfirm(event.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn\r\n\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\tclassName='register-form__auth-button'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={password !== passwordConfirm || login.length < 1 || email.length < 1 || password.length < 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => register(login, email, password)}>\r\n\t\t\t\t\t\t\t\t\t\t{registrateState !== \"pending\" ? \"Зарегистрироваться\" : \"Загрузка...\"}\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n});\r\n\r\nexport default RegisterForm;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../../store/AuthStore\";\r\nimport PagesStore from \"../../../store/PagesStore\";\r\nimport \"./reset-password-form.sass\";\r\n\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\n\r\n/**\r\n * КОмпонент формы сброса пароля\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst ResetPasswordForm = observer((props) => {\r\n\tconst { resetPassword, resetPasswordState } = AuthStore;\r\n\tconst { ResetPasswordFormIsOpen, closeResetPasswordForm } = PagesStore;\r\n\r\n\tconst [email, setEmail] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={ResetPasswordFormIsOpen} toggle={closeResetPasswordForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='reset-password-form'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\tresetPassword(email);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Сбросить пароль</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger reset-password-form__fail' hidden={!resetPasswordState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t\t\t\t{resetPasswordState}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success reset-password-form__success' hidden={resetPasswordState !== \"done\"}>\r\n\t\t\t\t\t\t\t\t\tНа вашу почту отправлено письмо\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПочта\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='emailInput' className='reset-password-form__input' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='reset-password-form__button'>\r\n\t\t\t\t\t\t\t\t\t\t{resetPasswordState !== \"pending\" ? \"Сбросить\" : \"Загрузка...\"}\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n});\r\n\r\nexport default ResetPasswordForm;\r\n","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./home-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst HomePage = observer((props) => {\r\n\tlet history = useHistory();\r\n\tconst { user, loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\r\n\treturn (\r\n\t\t<div className='home-page'>\r\n\t\t\t<div className='home-page__body'>\r\n\t\t\t\t<h2>Добро пожаловать на Interests!</h2>\r\n\t\t\t\t<br />\r\n\t\t\t\t<h3>Что это?</h3>\r\n\t\t\t\t<h5>Interests - сайт для отслеживания фильмов, сериалов и видеоигр. </h5>\r\n\t\t\t\t<br />\r\n\t\t\t\t<h3>Какой функционал у сайта?</h3>\r\n\t\t\t\t<h5>Здесь можно вести персональный список интересного вам контента, выставлять ему оценки и писать отзывы, а также отслеживать активность ваших друзей.</h5>\r\n\t\t\t\t<h5>\r\n\t\t\t\t\tВ{\" \"}\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={\"/user/\" + user.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\thistory.push(\"/user/\" + user.id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tпрофиле\r\n\t\t\t\t\t</a>{\" \"}\r\n\t\t\t\t\tсобраны все добавленные игры, фильмы и сериалы, а также ваша персональная статистика.\r\n\t\t\t\t</h5>\r\n\t\t\t\t<h5>\r\n\t\t\t\t\tC помощью <a href='/search/example'>поиска</a> можно найти интересущий вас тайтл или человека.\r\n\t\t\t\t</h5>\r\n\t\t\t\t<h5>\r\n\t\t\t\t\tВ <a href={\"/calendar/\"}>календаре</a> отображены все грядущие релизы из вашего списка. Вы можете подписаться на email уведомления о новых релизах в <a href={\"/settings/\"}>настройках</a>\r\n\t\t\t\t</h5>\r\n\t\t\t\t<h5>\r\n\t\t\t\t\tРаздел <a href={\"/unwatched/\"}>непросмотренное</a> предназначен для отслеживания непрсмотренных серий ваших сериалов.\r\n\t\t\t\t</h5>\r\n\t\t\t\t<br />\r\n\t\t\t\t<h3>Что такое статус контента</h3>\r\n\t\t\t\t<h5>\r\n\t\t\t\t\tНа странице фильма, сериала или игры есть блок кнопок, состоящий из различных статусов. При выборе любого статуса, кроме \"Не смотрел\" или \"Не играл\", тайтл добавляется к вам в профиль.\r\n\t\t\t\t</h5>\r\n\t\t\t\t<h5>\r\n\t\t\t\t\tВ зависимости от статуса, тайтл будет по разному восприниматься системой. Например, тайтлы со статусом \"Буду смотреть\" не учитываются при подсчете статистики. Или сериалы со статусом\r\n\t\t\t\t\t\"Дропнул\" не будут выводиться в разделах Непросмотренное и Календарь.\r\n\t\t\t\t</h5>\r\n\t\t\t\t<br />\r\n\t\t\t\t<h3>Зачем нужна подписка на пользователя</h3>\r\n\t\t\t\t<h5>После подписки на пользователя вы будете видеть активность всех своих друзей в разделе Профиль, во вкладке Друзья.</h5>\r\n\t\t\t\t<h5>На странице любого тайтла будут отображены отзывы ваших друзей, если они оценили его ранее.</h5>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default HomePage;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport * as gameRequests from \"../services/gameRequests\";\r\n\r\nclass Game {\r\n\tgame = {};\r\n\tgameState = \"done\";\r\n\r\n\tuserInfo = { status: null, review: \"\", score: 0, spent_time: 0 };\r\n\tfriendsInfo = [];\r\n\tuserInfoState = \"done\";\r\n\r\n\tsetStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestGame = async (id) => {\r\n\t\tthis.gameState = \"pending\";\r\n\t\tgameRequests.getGame(id).then(this.requestGameSuccess, this.requestGameFailure);\r\n\t};\r\n\trequestGameSuccess = (result) => {\r\n\t\tthis.game = result;\r\n\t\tthis.gameState = \"done\";\r\n\t};\r\n\trequestGameFailure = (error) => {\r\n\t\tthis.gameState = \"error: \" + error.response.statusText;\r\n\t};\r\n\r\n\trequestUserInfo = async (slug) => {\r\n\t\tthis.userInfoState = \"pending\";\r\n\t\tgameRequests.getGameUserInfo(slug).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\r\n\t};\r\n\trequestUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetGameStatus = async (userInfo) => {\r\n\t\tthis.setStatusState = \"pending\";\r\n\t\tgameRequests.setGameStatus(this.game.slug, userInfo).then(this.setGameStatusSuccess, this.setGameStatusFailure);\r\n\t};\r\n\tsetGameStatusSuccess = (result) => {\r\n\t\tthis.setStatusState = \"done\";\r\n\t};\r\n\tsetGameStatusFailure = (error) => {\r\n\t\tthis.setStatusState = \"error: \" + error;\r\n\t};\r\n\r\n\tget anyError() {\r\n\t\tif (this.gameState.startsWith(\"error:\")) return this.gameState;\r\n\t\tif (this.userInfoState.startsWith(\"error:\")) return this.userInfoState;\r\n\t\tif (this.setStatusState.startsWith(\"error:\")) return this.setStatusState;\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nconst GameStore = new Game();\r\n//export default remotedev(GameStore, { name: \"Game\" });\r\nexport default GameStore;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport \"./status-button-group.sass\";\r\n\r\nfunction StatusButtonGroup({ statuses, onChangeStatus, userStatus, className }) {\r\n\treturn (\r\n\t\t<div className={classnames(\"content-statuses\", className)}>\r\n\t\t\t{statuses.map((status, counter) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={classnames(\"content-statuses__content-status\", userStatus === status ? \"content-statuses__content-status_active\" : \"\")}\r\n\t\t\t\t\tkey={status}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonChangeStatus(status);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{status}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default StatusButtonGroup;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport classnames from \"classnames\";\r\nimport \"./friends-activity.sass\";\r\n\r\nfunction FriendActivity({ info, className }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className={classnames(\"friend-activity\", className)}>\r\n\t\t\t<h5 className='friend-activity__user'>\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={window.location.origin + \"/user/\" + info.user.id}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\thistory.push(\"/user/\" + info.user.id);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{info.user.username}\r\n\t\t\t\t</a>\r\n\t\t\t</h5>\r\n\t\t\t<div className='friend-activity__info'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t\tinitialRating={info.score}\r\n\t\t\t\t\tclassName='friend-activity__info-text'\r\n\t\t\t\t\treadonly={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<p className='friend-activity__info-text'>Статус: {info.status} </p>\r\n\t\t\t\t<p className='friend-activity__info-text' hidden={!info.spent_time}>\r\n\t\t\t\t\tВремя проходения: {info.spent_time} {intToHours(info.spent_time)}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='friend-activity__info-text' hidden={info.review === \"\"}>\r\n\t\t\t\t\tОтзыв: {info.review}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default FriendActivity;\r\n","import React from \"react\";\r\nimport FriendActivity from \"./FriendActivity\";\r\n\r\nfunction FriendsActivity({ info }) {\r\n\treturn (\r\n\t\t<div className='friends-activity'>\r\n\t\t\t{info?.map((friendInfo) => (\r\n\t\t\t\t<FriendActivity info={friendInfo} key={friendInfo.user.id} className='friends-activity__element' />\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FriendsActivity;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport \"./time-to-beat.sass\";\r\n\r\nfunction TimeToBeat({ hltbInfo }) {\r\n\treturn (\r\n\t\t<div className='time-to-beat' hidden={!hltbInfo || hltbInfo === \"0 часов\" || (hltbInfo?.gameplay_main < 0 && hltbInfo?.gameplay_main_extra < 0 && hltbInfo?.gameplay_completionist < 0)}>\r\n\t\t\t<p className='time-to-beat__element'>Время прохождения: </p>\r\n\t\t\t<div hidden={hltbInfo?.gameplay_main === -1} className='time-to-beat__element'>\r\n\t\t\t\t<MDBIcon far icon='clock' className='time-to-beat__icon time-to-beat__icon_green' title={\"Главный сюжет\"} />\r\n\t\t\t\t{hltbInfo?.gameplay_main ? hltbInfo?.gameplay_main : hltbInfo} {hltbInfo?.gameplay_main_unit}\r\n\t\t\t</div>\r\n\t\t\t<div hidden={hltbInfo?.gameplay_main_extra === -1} className='time-to-beat__element'>\r\n\t\t\t\t<MDBIcon far icon='clock' className='time-to-beat__icon time-to-beat__icon_yellow' title={\"Главный сюжет + побочные задания\"} />\r\n\t\t\t\t{hltbInfo?.gameplay_main_extra} {hltbInfo?.gameplay_main_extra_unit}\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!hltbInfo || hltbInfo?.gameplay_completionist === -1} className='time-to-beat__element'>\r\n\t\t\t\t<MDBIcon far icon='clock' className='time-to-beat__icon time-to-beat__icon_red' title={\"Полное прохождение\"} />\r\n\t\t\t\t{hltbInfo?.gameplay_completionist} {hltbInfo?.gameplay_completionist_unit}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TimeToBeat;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport \"./score-block.sass\";\r\n\r\nfunction ScoreBlock({ score, text, className }) {\r\n\tfunction getColor(score) {\r\n\t\tswitch (true) {\r\n\t\t\tcase score >= 80:\r\n\t\t\t\treturn \"green\";\r\n\t\t\tcase score >= 60 && score < 80:\r\n\t\t\t\treturn \"yellow\";\r\n\t\t\tcase score < 60:\r\n\t\t\t\treturn \"red\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"green\";\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div hidden={!score} className={classnames(\"score-block\", className)}>\r\n\t\t\t<div className={classnames(\"score-block__body\", \"score-block__body_\" + getColor(score))}>\r\n\t\t\t\t<p>{score}</p>\r\n\t\t\t</div>\r\n\t\t\t<p className='score-block__text'>{text}</p>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ScoreBlock;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nimport Rating from \"react-rating\";\r\n\r\nfunction RatingBlock({ initialRating, readonly, onChange, size, className }) {\r\n\treturn (\r\n\t\t<Rating\r\n\t\t\tstop={10}\r\n\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: size }} />}\r\n\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: size }} title={n} />\r\n\t\t\t))}\r\n\t\t\tinitialRating={initialRating}\r\n\t\t\treadonly={readonly}\r\n\t\t\tonChange={onChange}\r\n\t\t\tclassName={className}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default RatingBlock;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport \"./input-number.sass\";\r\n\r\nfunction InputNumber({ value, max, min, onChange, className, dataList }) {\r\n\treturn (\r\n\t\t<div className={classnames(\"input-number\", className)}>\r\n\t\t\t<button\r\n\t\t\t\tclassName='input-number__minus'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (!min || parseFloat(value) > min + 1) onChange(parseFloat(value) - 1);\r\n\t\t\t\t}}>\r\n\t\t\t\t-\r\n\t\t\t</button>\r\n\t\t\t<input\r\n\t\t\t\ttype='number'\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tmax={max ? max : \"\"}\r\n\t\t\t\tmin={min ? min : \"\"}\r\n\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\tif ((!min || event.target.value > min) && (!max || event.target.value < max)) onChange(parseFloat(event.target.value));\r\n\t\t\t\t}}\r\n\t\t\t\tclassName='input-number__input'\r\n\t\t\t\tstyle={{ width: `${value.toString().length * 15}px` }}\r\n\t\t\t/>\r\n\t\t\t<button\r\n\t\t\t\tclassName='input-number__plus'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (!max || value < max - 1) onChange(parseFloat(value) + 1);\r\n\t\t\t\t}}>\r\n\t\t\t\t+\r\n\t\t\t</button>\r\n\t\t\t<div className='input-number__hints'>\r\n\t\t\t\t{dataList?.map((data, counter) => (\r\n\t\t\t\t\t<div key={counter} onClick={() => onChange(parseFloat(data))} className='input-number__hint'>\r\n\t\t\t\t\t\t{data}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default InputNumber;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport \"./game-page.sass\";\r\nimport GameStore from \"../../../store/GameStore\";\r\nimport AuthStore from \"../../../store/AuthStore\";\r\nimport PagesStore from \"../../../store/PagesStore\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport StatusButtonGroup from \"../../Common/StatusButtonGroup/StatusButtonGroup\";\r\nimport FriendsActivity from \"../../Common/FriendsActivity/FriendsActivity\";\r\nimport TimeToBeat from \"../TimeToBeat/TimeToBeat\";\r\nimport ScoreBlock from \"../../Common/ScoreBlock/ScoreBlock\";\r\nimport Rating from \"../../Common/Rating/Rating\";\r\nimport InputNumber from \"../../Common/InputNumber/InputNumber\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst GamePage = observer((props) => {\r\n\tconst { game, gameState, requestGame, setGameStatus, userInfo, friendsInfo, userInfoState, requestUserInfo, anyError } = GameStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [spentTime, setSpentTime] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не играл\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClearUI();\r\n\t\t\trequestGame(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestGame]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, loggedIn]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = game.name;\r\n\t}, [game]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetSpentTime(userInfo.spent_time);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (anyError) toast.error(anyError);\r\n\t}, [anyError]);\r\n\r\n\tfunction setClearUI() {\r\n\t\tsetReview(\"\");\r\n\t\tsetSpentTime(\"\");\r\n\t\tsetUserStatus(\"Не играл\");\r\n\t\tsetUserRate(0);\r\n\t}\r\n\r\n\tfunction strToFloat(text) {\r\n\t\tlet cleanStr = text;\r\n\t\tif (cleanStr && cleanStr !== -1)\r\n\t\t\tif (cleanStr.indexOf(\"½\") + 1) return parseFloat(cleanStr) + 0.5;\r\n\t\t\telse return parseFloat(cleanStr);\r\n\t}\r\n\r\n\tfunction hltbToDatalist(hltbInfo) {\r\n\t\tlet newData = [];\r\n\t\tif (!(!hltbInfo || hltbInfo === \"0 часов\" || hltbInfo?.gameplay_main === -1)) newData.push(strToFloat(hltbInfo?.gameplay_main ? hltbInfo?.gameplay_main : hltbInfo));\r\n\t\tif (hltbInfo?.gameplay_main_extra !== -1) newData.push(strToFloat(hltbInfo?.gameplay_main_extra));\r\n\t\tif (hltbInfo?.gameplay_completionist !== -1) newData.push(strToFloat(hltbInfo?.gameplay_completionist));\r\n\r\n\t\treturn newData;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='game-page'>\r\n\t\t\t<div style={{ backgroundImage: `url(${game.background})` }} className='game-page__background' />\r\n\t\t\t<LoadingOverlay active={gameState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='game-page__body'>\r\n\t\t\t\t\t<div className='game-page__header'>\r\n\t\t\t\t\t\t<div className='game-page__poster'>\r\n\t\t\t\t\t\t\t<img src={game.poster} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='game-page__info'>\r\n\t\t\t\t\t\t\t<h1 className='game-page__info-header'>{game.name}</h1>\r\n\t\t\t\t\t\t\t<div className='game-page__info-body'>\r\n\t\t\t\t\t\t\t\t<p>Разработчики: {game.developers}</p>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {game.release_date}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {game.genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Платформы: {game.platforms}</p>\r\n\t\t\t\t\t\t\t\t<TimeToBeat hltbInfo={game.hltb || game.playtime} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\tsetGameStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize='1.5rem'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не играл\", \"Буду играть\", \"Играю\", \"Дропнул\", \"Прошел\"]}\r\n\t\t\t\t\t\t\t\t\tclassName='game-page__info-statuses'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не играл\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={game.metacritic} text='Metascore' className='game-page__info-score' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='game-page__overview'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{/* <video width='800' height='450' controls='controls' poster={game.rawg?.clip?.preview} src={game.rawg?.clip?.clip} type='video' /> */}\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: game.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h3 className='game-page__review-header'>Отзыв</h3>\r\n\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t<div className='game-page__review-body' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t\t<div className='game-page__review'>\r\n\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='game-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className='game-page__review-time'>\r\n\t\t\t\t\t\t\t\t\tВремя прохождения (часы)\r\n\t\t\t\t\t\t\t\t\t<InputNumber className='game-page__time-input' value={spentTime} min={0} max={100000} onChange={(value) => setSpentTime(value)} dataList={hltbToDatalist(game.hltb)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='game-page__review-save-button'\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ review: review, spent_time: spentTime });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t<div className='game-page__friends' hidden={!loggedIn | (friendsInfo?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default GamePage;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport * as movieRequests from \"../services/movieRequests\";\r\n\r\nclass Movie {\r\n\tmovie = { tmdb: { title: \"\", poster_path: \"\", developers: [{}] } };\r\n\tmovieState = \"done\";\r\n\r\n\tuserInfo = { status: null, review: \"\", score: 0, friends_info: [] };\r\n\tfriendsInfo = [];\r\n\tuserInfoState = \"done\";\r\n\r\n\tsetStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestMovie = async (id) => {\r\n\t\tthis.movieState = \"pending\";\r\n\t\tmovieRequests.getMovie(id).then(this.requestMovieSuccess, this.requestMovieFailure);\r\n\t};\r\n\trequestMovieSuccess = (result) => {\r\n\t\tthis.movie = result;\r\n\t\tthis.movieState = \"done\";\r\n\t};\r\n\trequestMovieFailure = (error) => {\r\n\t\tthis.movieState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUserInfo = async (id) => {\r\n\t\tthis.userInfoState = \"pending\";\r\n\t\tmovieRequests.getMovieUserInfo(id).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\r\n\t};\r\n\trequestUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetMovieStatus = async (userInfo) => {\r\n\t\tthis.setStatusState = \"pending\";\r\n\t\tmovieRequests.setMovieStatus(this.movie.id, userInfo).then(this.setMovieStatusSuccess, this.setMovieStatusFailure);\r\n\t};\r\n\tsetMovieStatusSuccess = (result) => {\r\n\t\tthis.setStatusState = \"done\";\r\n\t};\r\n\tsetMovieStatusFailure = (error) => {\r\n\t\tthis.setStatusState = \"error: \" + error;\r\n\t};\r\n\r\n\tget anyError() {\r\n\t\tif (this.movieState.startsWith(\"error:\")) return this.movieState;\r\n\t\tif (this.userInfoState.startsWith(\"error:\")) return this.userInfoState;\r\n\t\tif (this.setStatusState.startsWith(\"error:\")) return this.setStatusState;\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nconst MovieStore = new Movie();\r\n//export default remotedev(MovieStore, { name: \"Movie\" });\r\nexport default MovieStore;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport * as userRequests from \"../services/userRequests\";\r\nimport * as showRequests from \"../services/showRequests\";\r\n\r\nclass CurrentUser {\r\n\tcalendar = {};\r\n\tsettings = {};\r\n\tunwatched = [];\r\n\tcalendarState = \"done\";\r\n\tsettingsState = \"done\";\r\n\tunwatchedState = \"done\";\r\n\tsaveSettingsState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestCalendar = async () => {\r\n\t\tthis.calendarState = \"pending\";\r\n\t\tuserRequests.getUserCalendar().then(this.requestCalendarSuccess, this.requestCalendarFailure);\r\n\t};\r\n\trequestCalendarSuccess = (result) => {\r\n\t\tthis.calendar = result;\r\n\t\tthis.calendarState = \"done\";\r\n\t};\r\n\trequestCalendarFailure = (error) => {\r\n\t\tthis.calendarState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSettings = async () => {\r\n\t\tthis.settingsState = \"pending\";\r\n\t\tuserRequests.getUserSettings().then(this.requestSettingsSuccess, this.requestSettingsFailure);\r\n\t};\r\n\trequestSettingsSuccess = (result) => {\r\n\t\tthis.settings = result;\r\n\t\tthis.settingsState = \"done\";\r\n\t};\r\n\trequestSettingsFailure = (error) => {\r\n\t\tthis.settingsState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUnwatched = async () => {\r\n\t\tthis.unwatchedState = \"pending\";\r\n\t\tshowRequests.getUnwatchedEpisodes().then(this.requestUnwatchedSuccess, this.requestUnwatchedFailure);\r\n\t};\r\n\trequestUnwatchedSuccess = (result) => {\r\n\t\tthis.unwatched = result;\r\n\t\tthis.unwatchedState = \"done\";\r\n\t};\r\n\trequestUnwatchedFailure = (error) => {\r\n\t\tthis.unwatchedState = \"error: \" + error;\r\n\t};\r\n\r\n\tpatchSettings = async (settings) => {\r\n\t\tthis.saveSettingsState = \"pending\";\r\n\t\tuserRequests.patchUserSettings(settings).then(this.patchSettingsSuccess, this.patchSettingsFailure);\r\n\t};\r\n\tpatchSettingsReset = () => {\r\n\t\tthis.saveSettingsState = \"done\";\r\n\t};\r\n\tpatchSettingsSuccess = (result) => {\r\n\t\tthis.saveSettingsState = \"saved\";\r\n\t\tthis.settings = result;\r\n\t\tsetTimeout(this.patchSettingsReset, 1000);\r\n\t};\r\n\tpatchSettingsFailure = (error) => {\r\n\t\tthis.saveSettingsState = \"error: \" + error;\r\n\t};\r\n}\r\n\r\nconst CurrentUserStore = new CurrentUser();\r\n//export default remotedev(CurrentUserStore, { name: \"CurrentUser\" });\r\nexport default CurrentUserStore;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport MovieStore from \"../../../store/MovieStore\";\r\nimport AuthStore from \"../../../store/AuthStore\";\r\nimport PagesStore from \"../../../store/PagesStore\";\r\nimport CurrentUserStore from \"../../../store/CurrentUserStore\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport StatusButtonGroup from \"../../Common/StatusButtonGroup/StatusButtonGroup\";\r\nimport FriendsActivity from \"../../Common/FriendsActivity/FriendsActivity\";\r\nimport ScoreBlock from \"../../Common/ScoreBlock/ScoreBlock\";\r\nimport Rating from \"../../Common/Rating/Rating\";\r\nimport \"./movie-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst MoviePage = observer((props) => {\r\n\tconst { movie, movieState, requestMovie, setMovieStatus, userInfo, friendsInfo, userInfoState, requestUserInfo, anyError } = MovieStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { saveSettingsState } = CurrentUserStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestMovie(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestMovie]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = movie.name;\r\n\t}, [movie]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (anyError) toast.error(anyError);\r\n\t}, [anyError]);\r\n\tuseEffect(() => {\r\n\t\tif (saveSettingsState.startsWith(\"error:\")) toast.error(`Ошибка фона! ${saveSettingsState}`);\r\n\t\telse if (saveSettingsState === \"saved\") toast.success(`Фон установлен!`);\r\n\t}, [saveSettingsState]);\r\n\r\n\treturn (\r\n\t\t<div className='movie-page'>\r\n\t\t\t<div className='movie-page__background' style={{ backgroundImage: `url(${movie.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='movie-page__body'>\r\n\t\t\t\t\t<div className='movie-page__header'>\r\n\t\t\t\t\t\t<div className='movie-page__poster'>\r\n\t\t\t\t\t\t\t<img src={movie.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movie-page__info'>\r\n\t\t\t\t\t\t\t<h1 className='movie-page__info-header'>{movie.name}</h1>\r\n\t\t\t\t\t\t\t<h5 className='movie-page__info-subheader'>{movie.original_name}</h5>\r\n\t\t\t\t\t\t\t<div className='movie-page__info-body'>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {movie.release_date}</p>\r\n\t\t\t\t\t\t\t\t<p>Продолжительность (мин): {movie.runtime}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {movie.genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Компания: {movie.production_companies}</p>\r\n\t\t\t\t\t\t\t\t<p>Слоган: {movie.tagline}</p>\r\n\t\t\t\t\t\t\t\t<p>В ролях: {movie.cast}</p>\r\n\t\t\t\t\t\t\t\t<p>Режиссер: {movie.directors}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize='1.5rem'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tclassName='movie-page__info-statuses'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={movie.score} text='TMDB score' className='movie-page__info-score' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='movie-page__overview'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: movie.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h3 className='movie-page__review-header'>Отзыв</h3>\r\n\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t<div className='game-page__review-body' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t\t<div className='movie-page__review'>\r\n\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='movie-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='movie-page__review-save-button'\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ review: review });\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t<div className='movie-page__friends' hidden={!loggedIn || friendsInfo?.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default MoviePage;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport * as showRequests from \"../services/showRequests\";\r\n\r\nclass Show {\r\n\tshow = {};\r\n\tshowState = \"done\";\r\n\tuserInfo = { status: null, review: \"\", score: 0 };\r\n\tfriendsInfo = [];\r\n\tuserInfoState = \"done\";\r\n\r\n\tshowSeasons = {};\r\n\tshowSeasonsState = {};\r\n\tshowSeasonsUserInfo = {};\r\n\tshowSeasonsUserInfoState = {};\r\n\r\n\tsetStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestShow = async (id) => {\r\n\t\tthis.showState = \"pending\";\r\n\t\tshowRequests.getShow(id).then(this.requestShowSuccess, this.requestShowFailure);\r\n\t};\r\n\trequestShowSuccess = (result) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = \"done\";\r\n\t};\r\n\trequestShowFailure = (error) => {\r\n\t\tthis.showState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeason = async (showID, seasonNumber) => {\r\n\t\tthis.showState = \"pending\";\r\n\t\tshowRequests.getShowSeason(showID, seasonNumber).then(this.requestSeasonSuccess, this.requestSeasonFailure);\r\n\t};\r\n\trequestSeasonSuccess = (result) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = \"done\";\r\n\t};\r\n\trequestSeasonFailure = (error) => {\r\n\t\tthis.showState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeasons = async (showID, seasonNumber) => {\r\n\t\tthis.showSeasonsState[seasonNumber] = \"pending\";\r\n\t\tthis.showSeasons[seasonNumber] = {};\r\n\t\tshowRequests.getShowSeason(showID, seasonNumber).then(\r\n\t\t\t(res) => this.requestSeasonsSuccess(res, seasonNumber),\r\n\t\t\t(res) => this.requestSeasonsFailure(res, seasonNumber)\r\n\t\t);\r\n\t};\r\n\trequestSeasonsSuccess = (result, seasonNumber) => {\r\n\t\tthis.showSeasons[seasonNumber] = result;\r\n\t\tthis.showSeasonsState[seasonNumber] = \"done\";\r\n\t};\r\n\trequestSeasonsFailure = (error, seasonNumber) => {\r\n\t\tthis.showSeasonsState[seasonNumber] = \"error: \" + error;\r\n\t};\r\n\r\n\trequestEpisode = async (showID, seasonNumber, episodeNumber) => {\r\n\t\tthis.showState = \"pending\";\r\n\t\tshowRequests.getShowEpisode(showID, seasonNumber, episodeNumber).then(this.requestEpisodeSuccess, this.requestEpisodeFailure);\r\n\t};\r\n\trequestEpisodeSuccess = (result) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = \"done\";\r\n\t};\r\n\trequestEpisodeFailure = (error) => {\r\n\t\tthis.showState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestShowUserInfo = async (id) => {\r\n\t\tthis.userInfoState = \"pending\";\r\n\t\tshowRequests.getShowUserInfo(id).then(this.requestShowUserInfoSuccess, this.requestShowUserInfoFailure);\r\n\t};\r\n\trequestShowUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestShowUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeasonUserInfo = async (showID, seasonID) => {\r\n\t\tthis.userInfoState = \"pending\";\r\n\t\tshowRequests.getShowSeasonUserInfo(showID, seasonID).then(this.requestSeasonUserInfoSuccess, this.requestSeasonUserInfoFailure);\r\n\t};\r\n\trequestSeasonUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info };\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestSeasonUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeasonsUserInfo = async (showID, seasonID) => {\r\n\t\tthis.showSeasonsUserInfo[seasonID] = {};\r\n\t\tthis.showSeasonsUserInfoState[seasonID] = \"pending\";\r\n\t\tshowRequests.getShowSeasonUserInfo(showID, seasonID).then(\r\n\t\t\t(res) => this.requestSeasonsUserInfoSuccess(res, seasonID),\r\n\t\t\t(res) => this.requestSeasonsUserInfoFailure(res, seasonID)\r\n\t\t);\r\n\t};\r\n\trequestSeasonsUserInfoSuccess = (result, seasonID) => {\r\n\t\tthis.showSeasonsUserInfoState[seasonID] = \"done\";\r\n\t\tthis.showSeasonsUserInfo[seasonID] = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\r\n\t};\r\n\trequestSeasonsUserInfoFailure = (error, seasonID) => {\r\n\t\tthis.showSeasonsUserInfoState[seasonID] = \"error: \" + error;\r\n\t};\r\n\r\n\trequestEpisodeUserInfo = async (showID, seasonID, episodeID) => {\r\n\t\tthis.userInfoState = \"pending\";\r\n\t\tshowRequests.getShowEpisodeUserInfo(showID, seasonID, episodeID).then(this.requestEpisodeUserInfoSuccess, this.requestEpisodeUserInfoFailure);\r\n\t};\r\n\trequestEpisodeUserInfoSuccess = (result) => {\r\n\t\tthis.userInfoState = \"done\";\r\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show };\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t};\r\n\trequestEpisodeUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetShowStatus = async (userInfo) => {\r\n\t\tthis.setStatusState = \"pending\";\r\n\t\tshowRequests.setShowStatus(this.show.id, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\r\n\t};\r\n\tsetShowStatusSuccess = (result) => {\r\n\t\tthis.setStatusState = \"done\";\r\n\t};\r\n\tsetShowStatusFailure = (error) => {\r\n\t\tthis.setStatusState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetSeasonStatus = async (userInfo, showID, seasonNumber) => {\r\n\t\tthis.setStatusState = \"pending\";\r\n\t\tshowRequests.setShowSeasonStatus(showID, seasonNumber, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\r\n\t};\r\n\r\n\tsetEpisodesStatus = async (episodesList, showID, seasonsToUpdate = []) => {\r\n\t\tthis.setStatusState = \"pending\";\r\n\t\tshowRequests.setShowEpisodesStatus(showID, episodesList).then((result) => {\r\n\t\t\tif (seasonsToUpdate) for (let season in seasonsToUpdate) this.requestSeasonsUserInfo(showID, seasonsToUpdate[season]);\r\n\t\t\tthis.setShowStatusSuccess();\r\n\t\t}, this.setShowStatusFailure);\r\n\t};\r\n\r\n\tgetShowSeason = (seasonNumber) => {\r\n\t\treturn this.showSeasons[seasonNumber];\r\n\t};\r\n\r\n\tgetShowSeasonState = (seasonNumber) => {\r\n\t\treturn this.showSeasonsState[seasonNumber];\r\n\t};\r\n\r\n\tgetShowSeasonUserInfo = (seasonNumber) => {\r\n\t\treturn this.showSeasonsUserInfo[seasonNumber];\r\n\t};\r\n\r\n\tgetEpisodesUserInfo = (season, id) => {\r\n\t\tfor (let episodeNumber in this.showSeasonsUserInfo[season].episodes) {\r\n\t\t\tlet episode = this.showSeasonsUserInfo[season].episodes[episodeNumber];\r\n\t\t\tif (episode.tmdb_id === id) return episode;\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tget anySeasonLoading() {\r\n\t\tfor (let season in this.showSeasonsState) if (this.showSeasonsState[season] === \"pending\") return true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tget anyError() {\r\n\t\tif (this.showState.startsWith(\"error:\")) return this.gameState;\r\n\t\tif (this.userInfoState.startsWith(\"error:\")) return this.userInfoState;\r\n\t\tif (this.setStatusState.startsWith(\"error:\")) return this.setStatusState;\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nconst ShowStore = new Show();\r\n//export default remotedev(ShowStore, { name: \"Show\" });\r\nexport default ShowStore;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport \"./detail-episode-row.sass\";\r\n\r\nfunction DetailEpisodeRow({ episode, showID, setEpisodeUserStatus, loggedIn, userInfo, checkAll, userWatchedShow, setSaveEpisodes }) {\r\n\tlet history = useHistory();\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [isChecked, setIsChecked] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUserRate(userInfo?.score);\r\n\t\tsetIsChecked(userInfo?.score > -1);\r\n\t}, [userInfo]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (checkAll === -1) {\r\n\t\t\t\tsetIsChecked(false);\r\n\t\t\t} else if (checkAll === 1) {\r\n\t\t\t\tsetIsChecked(true);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[checkAll]\r\n\t);\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date).toLocaleDateString(\"ru-RU\");\r\n\t\tif (newDate !== \"Invalid Date\") return newDate;\r\n\t\telse return \"TBA\";\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='detail-episode-row'>\r\n\t\t\t<input\r\n\t\t\t\ttype='checkbox'\r\n\t\t\t\tid={`cbEpisode${episode.id}`}\r\n\t\t\t\tchecked={isChecked}\r\n\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\tsetIsChecked(res.target.checked);\r\n\t\t\t\t}}\r\n\t\t\t\thidden={!loggedIn || !userWatchedShow}\r\n\t\t\t/>\r\n\t\t\t<p className='detail-episode-row__date'>{parseDate(episode.air_date)}</p>\r\n\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='detail-episode-row__rate'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstart={-1}\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' />))}\r\n\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' title={n} />))}\r\n\t\t\t\t\treadonly={!loggedIn}\r\n\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\tsetIsChecked(score > -1);\r\n\t\t\t\t\t\tsetEpisodeUserStatus({ episodes: [{ tmdb_id: episode.id, score: score }] }, showID);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<a\r\n\t\t\t\tclassName='detail-episode-row__name'\r\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={episode.name}>\r\n\t\t\t\tСерия {episode.episode_number} - {episode.name}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailEpisodeRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport { computed } from \"mobx\";\r\nimport AuthStore from \"../../../../store/AuthStore\";\r\nimport ShowStore from \"../../../../store/ShowStore\";\r\nimport PagesStore from \"../../../../store/PagesStore\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport DetailEpisodeRow from \"../DetailEpisodeRow/DetailEpisodeRow\";\r\nimport Rating from \"../../../Common/Rating/Rating\";\r\nimport classnames from \"classnames\";\r\nimport \"./season-block.sass\";\r\n\r\nconst SeasonBlock = observer(\r\n\t({\r\n\t\tshowID,\r\n\t\tseasonNumber,\r\n\t\t//onChangeStatus,\r\n\t\tuserWatchedShow,\r\n\t\tclassName,\r\n\t}) => {\r\n\t\tconst { loggedIn } = AuthStore;\r\n\t\tconst { openLoginForm, setSaveEpisodes } = PagesStore;\r\n\t\tconst { requestSeasons, requestSeasonsUserInfo, setEpisodesStatus, setSeasonStatus } = ShowStore;\r\n\t\tconst showSeason = computed(() => ShowStore.getShowSeason(seasonNumber)).get();\r\n\t\tconst showSeasonState = computed(() => ShowStore.getShowSeasonState(seasonNumber)).get();\r\n\t\tconst showUserInfo = computed(() => ShowStore.getShowSeasonUserInfo(seasonNumber)).get();\r\n\r\n\t\tlet history = useHistory();\r\n\t\tconst [isChecked, setIsChecked] = useState(0);\r\n\t\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\trequestSeasons(showID, seasonNumber);\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[showID, seasonNumber, requestSeasons]\r\n\t\t);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tif (loggedIn) requestSeasonsUserInfo(showID, seasonNumber);\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[loggedIn, showID, seasonNumber]\r\n\t\t);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tif (showUserInfo?.score) {\r\n\t\t\t\t\tsetUserRate(showUserInfo.score);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[showUserInfo]\r\n\t\t);\r\n\r\n\t\tfunction getEpisodeByID(episodes, id) {\r\n\t\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<LoadingOverlay active={showSeasonState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div key={showSeason?.id} className={classnames(\"season-block\", className)}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName='season-block__name'>\r\n\t\t\t\t\t\t<h5> {showSeason?.name} </h5>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='season-block__rate'>\r\n\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, showID, seasonNumber);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<details open={true} className='season-block__episodes'>\r\n\t\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='season-block__check-all'>\r\n\t\t\t\t\t\t\tВыбрать все&nbsp;\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\tchecked={isChecked > 0}\r\n\t\t\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul className='season-block__episodes-ul'>\r\n\t\t\t\t\t\t\t{showSeason?.episodes\r\n\t\t\t\t\t\t\t\t?.map((episode, counter) => (\r\n\t\t\t\t\t\t\t\t\t<li className='season-block__episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t<DetailEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\tshowID={showID}\r\n\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(showUserInfo?.episodes, episode?.id)}\r\n\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\r\n\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\r\n\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\r\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t.reverse()}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</details>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nexport default SeasonBlock;\r\n","import React from \"react\";\r\nimport { toJS } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport ShowStore from \"../../../../store/ShowStore\";\r\nimport PagesStore from \"../../../../store/PagesStore\";\r\nimport AuthStore from \"../../../../store/AuthStore\";\r\n\r\nimport SeasonBlock from \"../SeasonBlock/SeasonBlock\";\r\nimport \"./seasons-block.sass\";\r\n\r\nconst SeasonsBlock = observer(({ showID, seasons, userWatchedShow }) => {\r\n\tconst { showSeasonsUserInfo, showSeasons, setEpisodesStatus, setStatusState, anySeasonLoading } = ShowStore;\r\n\tconst { saveEpisodesBlockIsOpen, setSaveEpisodes } = PagesStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\r\n\tfunction getEpisodeByID(episodes, id) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t}\r\n\r\n\tfunction sendEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tlet seasons = [];\r\n\t\tfor (let season in showSeasons) {\r\n\t\t\tfor (let episode in showSeasons[season].episodes) {\r\n\t\t\t\tlet currentValue = getEpisodeByID(showSeasonsUserInfo[season].episodes, showSeasons[season].episodes[episode].id);\r\n\t\t\t\tlet cbValue = document.getElementById(`cbEpisode${showSeasons[season].episodes[episode].id}`).checked;\r\n\t\t\t\tlet currentStatus = currentValue?.score > -1;\r\n\t\t\t\tif (cbValue !== currentStatus) {\r\n\t\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: cbValue ? 0 : -1 });\r\n\t\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\tfunction sendAllEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tlet seasons = [];\r\n\t\tfor (let season in showSeasons) {\r\n\t\t\tconsole.log(toJS(showSeasons));\r\n\t\t\tif (showSeasons[season].name !== \"Спецматериалы\")\r\n\t\t\t\tfor (let episode in showSeasons[season].episodes) {\r\n\t\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: 0 });\r\n\t\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='seasons-block'>\r\n\t\t\t<LoadingOverlay active={setStatusState === \"pending\"} spinner text='Обновление...'>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='seasons-block__all-button'\r\n\t\t\t\t\thidden={!loggedIn | !userWatchedShow}\r\n\t\t\t\t\tdisabled={anySeasonLoading}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsendAllEpisodes();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tПосмотрел весь сериал\r\n\t\t\t\t</button>\r\n\t\t\t\t{seasons\r\n\t\t\t\t\t?.map((season) => <SeasonBlock className='seasons-block__season-block' showID={showID} seasonNumber={season.season_number} key={season.season_number} userWatchedShow={userWatchedShow} />)\r\n\t\t\t\t\t.reverse()}\r\n\t\t\t\t<div className='seasons-block__save-episodes-block' hidden={!saveEpisodesBlockIsOpen}>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='seasons-block__save-episodes-button'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsendEpisodes();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SeasonsBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../../../store/AuthStore\";\r\nimport PagesStore from \"../../../../store/PagesStore\";\r\nimport ShowStore from \"../../../../store/ShowStore\";\r\nimport CurrentUserStore from \"../../../../store/CurrentUserStore\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Rating from \"../../../Common/Rating/Rating\";\r\nimport StatusButtonGroup from \"../../../Common/StatusButtonGroup/StatusButtonGroup\";\r\nimport FriendsActivity from \"../../../Common/FriendsActivity/FriendsActivity\";\r\nimport SeasonsBlock from \"../../Blocks/SeasonsBlock/SeasonsBlock\";\r\nimport ScoreBlock from \"../../../Common/ScoreBlock/ScoreBlock\";\r\n\r\nimport \"./show-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ShowPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\tconst { saveSettingsState } = CurrentUserStore;\r\n\tconst { requestShow, show, showState, setShowStatus, requestShowUserInfo, userInfo, friendsInfo, userInfoState, anyError } = ShowStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShow(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestShow]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (anyError) toast.error(anyError);\r\n\t}, [anyError]);\r\n\tuseEffect(() => {\r\n\t\tif (saveSettingsState.startsWith(\"error:\")) toast.error(`Ошибка фона! ${saveSettingsState}`);\r\n\t\telse if (saveSettingsState === \"saved\") toast.success(`Фон установлен!`);\r\n\t}, [saveSettingsState]);\r\n\r\n\treturn (\r\n\t\t<div className='show-page'>\r\n\t\t\t<div className='show-page__background' style={{ backgroundImage: `url(${show.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='show-page__body'>\r\n\t\t\t\t\t<div className='show-page__header'>\r\n\t\t\t\t\t\t<div className='show-page__poster'>\r\n\t\t\t\t\t\t\t<img src={show.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='show-page__info'>\r\n\t\t\t\t\t\t\t<h1 className='show-page__info-header'>{show.name}</h1>\r\n\t\t\t\t\t\t\t<h5 className='show-page__info-subheader'>{show.original_name}</h5>\r\n\t\t\t\t\t\t\t<div className='show-page__info-body'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.genres}>Жанр: {show.genres}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.production_companies}>Компания: {show.production_companies}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.first_air_date}>Дата выхода первой серии: {show.first_air_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.last_air_date}>Дата выхода последней серии: {show.last_air_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={show.episode_runtime === null}>Продолжительность (мин): {show.episode_run_time}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество сезонов: {show.seasons_count}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество серий: {show.episodes_count}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.status}>Статус: {show.status}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize='1.5rem'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Смотрю\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tclassName='show-page__info-statuses'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={show.score} text='TMDB score' className='show-page__info-score' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='show-page__overview'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='show-page__seasons'>\r\n\t\t\t\t\t\t\t<h3>Список серий</h3>\r\n\t\t\t\t\t\t\t<SeasonsBlock showID={show.id} seasons={show.seasons} userWatchedShow={userStatus !== \"Не смотрел\"} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='show-page__review' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзыв</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<div className='show-page__review'>\r\n\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' value={review} onChange={(event) => setReview(event.target.value)} className='show-page__review-input' />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='show-page__review-save-button'\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ review: review });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='show-page__friends' hidden={!loggedIn || friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ShowPage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../../../store/AuthStore\";\r\nimport ShowStore from \"../../../../store/ShowStore\";\r\nimport PagesStore from \"../../../../store/PagesStore\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Rating from \"../../../Common/Rating/Rating\";\r\nimport FriendsActivity from \"../../../Common/FriendsActivity/FriendsActivity\";\r\nimport DetailEpisodeRow from \"../../Blocks/DetailEpisodeRow/DetailEpisodeRow\";\r\nimport \"./season-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst SeasonPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { requestSeason, show, showState, setSeasonStatus, setEpisodesStatus, requestSeasonUserInfo, userInfo, userInfoState, friendsInfo, setStatusState } = ShowStore;\r\n\tconst { openLoginForm, setSaveEpisodes, saveEpisodesBlockIsOpen } = PagesStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { show_id, number } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [chartData, setChartData] = useState([]);\r\n\tconst [isChecked, setIsChecked] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\tsetIsChecked(0);\r\n\t\t\trequestSeason(show_id, number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, number, requestSeason]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestSeasonUserInfo(show_id, number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.show?.tmdb_name + \" - \" + show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (show.episodes)\r\n\t\t\tif (show.episodes.length > 0) {\r\n\t\t\t\tlet newData = [];\r\n\t\t\t\tfor (let episode in show.episodes) {\r\n\t\t\t\t\tif (show.episodes[episode].vote_average > 0) newData.push({ name: \"Ep \" + show.episodes[episode].episode_number, Оценка: show.episodes[episode].vote_average });\r\n\t\t\t\t}\r\n\t\t\t\tsetChartData(newData);\r\n\t\t\t}\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (userInfo?.score) setUserRate(userInfo.score);\r\n\t\t\telse setUserRate(0);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\r\n\t}, [showState]);\r\n\tuseEffect(() => {\r\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\r\n\t}, [userInfoState]);\r\n\tuseEffect(() => {\r\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\r\n\t}, [setStatusState]);\r\n\r\n\tfunction getEpisodeByID(episodes, id) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t}\r\n\r\n\tfunction sendEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tfor (let episode in userInfo.episodes) {\r\n\t\t\tlet currentValue = userInfo.episodes[episode];\r\n\t\t\tlet cbValue = document.getElementById(`cbEpisode${currentValue.tmdb_id}`).checked;\r\n\t\t\tlet currentStatus = currentValue?.score > -1;\r\n\t\t\tif (cbValue !== currentStatus) episodes.push({ tmdb_id: currentValue.tmdb_id, score: cbValue ? 0 : -1 });\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, show_id);\r\n\t\trequestSeasonUserInfo(show_id, number);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='season-page'>\r\n\t\t\t<div className='season-page__background' style={{ backgroundImage: `url(${show.show?.tmdb_backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='season-page__body'>\r\n\t\t\t\t\t<div className='season-page__header'>\r\n\t\t\t\t\t\t<div className='season-page__poster'>\r\n\t\t\t\t\t\t\t<img src={show.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='season-page__info'>\r\n\t\t\t\t\t\t\t<h1 className='season-page__info-header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show.show?.id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show.show?.tmdb_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{show.show?.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + show.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 className='season-page__info-subheader'>{show.show?.tmdb_original_name + \" - Season \" + show.season_number}</h5>\r\n\t\t\t\t\t\t\t<div className='season-page__info-body'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.air_date}>Дата выхода: {show.air_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.episodes}>Количество серий: {show.episodes?.length}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, show_id, show.season_number);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tsize='1.5rem'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div className='season-page__review'>\r\n\t\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='season-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='season-page__review-save-button'\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSeasonStatus({ review: document.getElementById(\"reviewInput\").value }, show_id, show.season_number);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='season-page__overview'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='season-page__episodes'>\r\n\t\t\t\t\t\t\t<h3 className='season-page__episodes-header'>Список серий</h3>\r\n\t\t\t\t\t\t\t<details open={false} className='season-page__episodes-body'>\r\n\t\t\t\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t\t\t\t<div hidden={!loggedIn || !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t\tВыбрать все&nbsp;\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\t\tchecked={isChecked > 0}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<ul className='season-page__episodes-ul'>\r\n\t\t\t\t\t\t\t\t\t{show.episodes\r\n\t\t\t\t\t\t\t\t\t\t? show.episodes.map((episode, counter) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li className='season-page__episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DetailEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowID={show_id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(userInfo.episodes, episode.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</details>\r\n\t\t\t\t\t\t\t<div hidden={!(chartData.length > 0)}>\r\n\t\t\t\t\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={200}>\r\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t<XAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={chartData.length * 30}>\r\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }} layout='vertical'>\r\n\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t<YAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} type='category' />\r\n\t\t\t\t\t\t\t\t\t\t\t<XAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} type='number' />\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='season-page__friends' hidden={friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t\t<div className='season-page__save-episodes-block' hidden={!saveEpisodesBlockIsOpen}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='season-page__save-episodes-button'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsendEpisodes();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tСохранить\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SeasonPage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../../../store/AuthStore\";\r\nimport ShowStore from \"../../../../store/ShowStore\";\r\nimport PagesStore from \"../../../../store/PagesStore\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport FriendsActivity from \"../../../Common/FriendsActivity/FriendsActivity\";\r\nimport ScoreBlock from \"../../../Common/ScoreBlock/ScoreBlock\";\r\nimport \"./episode-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst EpisodePage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\tconst { requestEpisode, show, showState, setEpisodesStatus, requestEpisodeUserInfo, userInfo, userInfoState, friendsInfo, setStatusState } = ShowStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { show_id, season_number, episode_number } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(-1);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(-1);\r\n\t\t\trequestEpisode(show_id, season_number, episode_number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, season_number, episode_number, requestEpisode]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestEpisodeUserInfo(show_id, season_number, episode_number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(-1);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, season_number, episode_number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.show?.tmdb_name + \" - \" + show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (userInfo?.score > -1) setUserRate(userInfo.score);\r\n\t\t\telse setUserRate(-1);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\r\n\t}, [showState]);\r\n\tuseEffect(() => {\r\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\r\n\t}, [userInfoState]);\r\n\tuseEffect(() => {\r\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\r\n\t}, [setStatusState]);\r\n\r\n\treturn (\r\n\t\t<div className='episode-page'>\r\n\t\t\t<div className='episode-page__background' style={{ backgroundImage: `url(${show.show?.tmdb_backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='episode-page__body'>\r\n\t\t\t\t\t<div className='episode-page__header'>\r\n\t\t\t\t\t\t<div className='episode-page__poster'>\r\n\t\t\t\t\t\t\t<img src={show.still_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='episode-page__info'>\r\n\t\t\t\t\t\t\t<h1 className='episode-page__info-header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{show.show?.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + show.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 className='episode-page__info-subheader'>{show.show?.tmdb_original_name + \" - Season \" + show.season_number + \" - Episode \" + show.episode_number}</h5>\r\n\t\t\t\t\t\t\t<div className='episode-page__info-body'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.air_date}>Дата выхода: {show.air_date}</p>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id + \"/season/\" + season_number}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id + \"/season/\" + season_number);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСезон: {show.season_number}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tstart={-1}\r\n\t\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />))}\r\n\t\t\t\t\t\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />))}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show.id, score: score }] }, show_id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div className='episode-page__review'>\r\n\t\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='episode-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='episode-page__review-save-button'\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show.id, review: review }] }, show_id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<ScoreBlock score={show.score} text='TMDB score' className='episode-page__info-score' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='episode-page__overview'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='episode-page__friends' hidden={friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default EpisodePage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport classnames from \"classnames\";\r\nimport \"./search-card.sass\";\r\n\r\nfunction SearchCard({ info, className }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className={classnames(\"search-card\", className)}>\r\n\t\t\t<div className='search-card__poster' style={{ backgroundImage: info.poster }} />\r\n\t\t\t<div className='search-card__body'>\r\n\t\t\t\t<div className='search-card__name'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + info.link}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(info.link);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={info.name}>\r\n\t\t\t\t\t\t<h4>{info.name}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{info.release_date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SearchCard;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport SearchCard from \"../SearchCard/SearchCard\";\r\nimport \"./search-cards.sass\";\r\n\r\nfunction SearchCardsBlock({ name, objects, currentPage, onPaginate, hasNextPage, hidden, className }) {\r\n\treturn (\r\n\t\t<div hidden={hidden} className={classnames(\"search-cards\", className)}>\r\n\t\t\t<h3>{name}</h3>\r\n\t\t\t<div className='search-cards__body'>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='search-cards__pagination'\r\n\t\t\t\t\tdisabled={currentPage === 1}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(currentPage - 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&lt;\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className='search-cards__cards'>\r\n\t\t\t\t\t{objects?.map((object) => (\r\n\t\t\t\t\t\t<SearchCard info={object} key={object.id} className='search-cards__card' />\r\n\t\t\t\t\t))}\r\n\t\t\t\t\t{objects?.length < 1 ? `${name} не найдены` : \"\"}\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='search-cards__pagination'\r\n\t\t\t\t\tdisabled={!hasNextPage}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(currentPage + 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&gt;\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n//onMouseDown={mouseDownHandler}\r\n\r\nexport default SearchCardsBlock;\r\n","import React, { useMemo } from \"react\";\r\nimport SearchCardsBlock from \"./SearchCardsBlock/SearchCardsBlock\";\r\n\r\nfunction GameCards({ games, gamesPage, onPaginate, hidden }) {\r\n\tconst objects = useMemo(\r\n\t\t() =>\r\n\t\t\tgames?.reduce((newObjects, game) => {\r\n\t\t\t\tlet object = {\r\n\t\t\t\t\tname: game.name,\r\n\t\t\t\t\tid: game.id,\r\n\t\t\t\t\tposter: `url(${game.background_image})`,\r\n\t\t\t\t\tlink: \"/game/\" + game.slug,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (game.released) {\r\n\t\t\t\t\tlet mas = game.released.split(\"-\");\r\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\t\t\tobject.release_date = newDate;\r\n\t\t\t\t} else object.release_date = \"\";\r\n\r\n\t\t\t\tif (object) newObjects.push(object);\r\n\t\t\t\treturn newObjects;\r\n\t\t\t}, []),\r\n\t\t[games]\r\n\t);\r\n\r\n\treturn <SearchCardsBlock name='Игры' hidden={hidden} objects={objects} currentPage={gamesPage} onPaginate={onPaginate} hasNextPage={objects.length === 6} />;\r\n}\r\n\r\nexport default GameCards;\r\n","import React, { useMemo } from \"react\";\r\nimport SearchCardsBlock from \"./SearchCardsBlock/SearchCardsBlock\";\r\n\r\nfunction MovieCards({ movies, moviesPage, onPaginate, hidden }) {\r\n\tconst objects = useMemo(\r\n\t\t() =>\r\n\t\t\tmovies?.reduce((newObjects, movie) => {\r\n\t\t\t\tlet object = {\r\n\t\t\t\t\tname: movie.title,\r\n\t\t\t\t\tid: movie.id,\r\n\t\t\t\t\tposter: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + movie.poster_path})`,\r\n\t\t\t\t\tlink: \"/movie/\" + movie.id,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (movie.release_date) {\r\n\t\t\t\t\tlet mas = movie.release_date.split(\"-\");\r\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\t\t\tobject.release_date = newDate;\r\n\t\t\t\t} else object.release_date = \"\";\r\n\r\n\t\t\t\tif (object) newObjects.push(object);\r\n\t\t\t\treturn newObjects;\r\n\t\t\t}, []),\r\n\t\t[movies]\r\n\t);\r\n\r\n\treturn <SearchCardsBlock name='Фильмы' hidden={hidden} objects={objects} currentPage={moviesPage} onPaginate={onPaginate} hasNextPage={objects.length > 19} />;\r\n}\r\n\r\nexport default MovieCards;\r\n","import React, { useMemo } from \"react\";\r\nimport SearchCardsBlock from \"./SearchCardsBlock/SearchCardsBlock\";\r\n\r\nfunction ShowCards({ shows, showsPage, onPaginate, hidden }) {\r\n\tconst objects = useMemo(\r\n\t\t() =>\r\n\t\t\tshows?.reduce((newObjects, show) => {\r\n\t\t\t\tlet object = {\r\n\t\t\t\t\tname: show.name,\r\n\t\t\t\t\tid: show.id,\r\n\t\t\t\t\tposter: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + show.poster_path})`,\r\n\t\t\t\t\tlink: \"/show/\" + show.id,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (show.release_date) {\r\n\t\t\t\t\tlet mas = show.release_date.split(\"-\");\r\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\t\t\tobject.release_date = newDate;\r\n\t\t\t\t} else object.release_date = \"\";\r\n\r\n\t\t\t\tif (object) newObjects.push(object);\r\n\t\t\t\treturn newObjects;\r\n\t\t\t}, []),\r\n\t\t[shows]\r\n\t);\r\n\r\n\treturn <SearchCardsBlock name='Сериалы' hidden={hidden} objects={objects} currentPage={showsPage} onPaginate={onPaginate} hasNextPage={objects.length > 19} />;\r\n}\r\n\r\nexport default ShowCards;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./card-user.sass\";\r\n\r\nfunction CardUser({ user, className }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<a\r\n\t\t\thref={window.location.origin + \"/user/\" + user.id}\r\n\t\t\tonClick={(e) => {\r\n\t\t\t\thistory.push(\"/user/\" + user.id);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}}\r\n\t\t\tclassName={classnames(\"card-user\", className)}>\r\n\t\t\t<div className='card-user__image' style={{ backgroundImage: `url(${\"https://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }} />\r\n\t\t\t<div className='card-user__text'>\r\n\t\t\t\t<h4>{user.username}</h4>\r\n\t\t\t</div>\r\n\t\t</a>\r\n\t);\r\n}\r\n\r\nexport default CardUser;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport \"./friend-block.sass\";\r\n\r\nimport CardUser from \"../CardUser/CardUser\";\r\n\r\nfunction FriendBlock({ users, className }) {\r\n\treturn (\r\n\t\t<div className={classnames(\"friends-block\", className)}>\r\n\t\t\t{users.map((user) => (\r\n\t\t\t\t<CardUser user={user} key={user.id} className='friends-block__friend' />\r\n\t\t\t))}\r\n\t\t\t{users.length < 1 ? \"Пользователи не найдены\" : \"\"}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FriendBlock;\r\n","import React from \"react\";\r\nimport FriendBlock from \"../../Common/FriendBlock/FriendBlock\";\r\n\r\nfunction UserCards({ users, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t<h3>Пользователи</h3>\r\n\t\t\t<FriendBlock users={users} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserCards;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport \"./categories-tab.sass\";\r\n\r\nfunction CategoriesTab({ categories, onChangeCategory, activeCategory, hidden, children, className }) {\r\n\treturn (\r\n\t\t<div hidden={hidden} className={classnames(\"categories-tabs\", className)}>\r\n\t\t\t<div className='categories-tabs__body'>\r\n\t\t\t\t{categories.map((category, counter) => (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={classnames(\"categories-tabs__tab\", activeCategory === category ? \"categories-tabs__tab_active\" : \"\")}\r\n\t\t\t\t\t\tkey={counter}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tonChangeCategory(category);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{category}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='categories-tabs__content'>{children}</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CategoriesTab;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport SearchStore from \"../../../store/SearchStore\";\r\n\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\nimport GameCards from \"../SearchCards/GameCards\";\r\nimport MovieCards from \"../SearchCards/MovieCards\";\r\nimport ShowCards from \"../SearchCards/ShowCards\";\r\nimport UserCards from \"../SearchCards/UserCards\";\r\nimport CategoriesTab from \"../../Common/CategoriesTab/CategoriesTab\";\r\n\r\nimport \"./search-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst SearchPage = observer((props) => {\r\n\tconst { gamesState, searchGames, games, moviesState, searchMovies, movies, showsState, searchShows, shows, usersState, searchUsers, users } = SearchStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { query } = useParams();\r\n\tconst [queryText, setQueryText] = useState(\"\");\r\n\tconst [gamesPage, setGamesPage] = useState(1);\r\n\tconst [moviesPage, setMoviesPage] = useState(1);\r\n\tconst [showsPage, setShowsPage] = useState(1);\r\n\r\n\tconst [activeCategory, setActiveCategory] = useState(\"Всё\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Игры\") searchGames(query, 1, 6);\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Фильмы\") searchMovies(query, 1);\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Сериалы\") searchShows(query, 1);\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Пользователи\") searchUsers(query);\r\n\t\t\tsetQueryText(query);\r\n\t\t\tdocument.title = \"Поиск\";\r\n\t\t\tsetGamesPage(1);\r\n\t\t\tsetMoviesPage(1);\r\n\t\t\tsetShowsPage(1);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[query, searchGames, searchMovies, searchUsers, searchShows, activeCategory]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (gamesState.startsWith(\"error:\")) toast.error(`Ошибка поиска игр! ${gamesState}`);\r\n\t}, [gamesState]);\r\n\tuseEffect(() => {\r\n\t\tif (moviesState.startsWith(\"error:\")) toast.error(`Ошибка поиска фильмов! ${moviesState}`);\r\n\t}, [moviesState]);\r\n\tuseEffect(() => {\r\n\t\tif (showsState.startsWith(\"error:\")) toast.error(`Ошибка поиска серилов! ${showsState}`);\r\n\t}, [showsState]);\r\n\tuseEffect(() => {\r\n\t\tif (usersState.startsWith(\"error:\")) toast.error(`Ошибка поиска пользователей! ${usersState}`);\r\n\t}, [usersState]);\r\n\r\n\treturn (\r\n\t\t<div className='search-page'>\r\n\t\t\t<div className='search-page__body'>\r\n\t\t\t\t<form\r\n\t\t\t\t\tclassName='search-page__form'\r\n\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput2\").value);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<h1>Поиск</h1>\r\n\t\t\t\t\t<MDBIcon icon='search' className='search-page__name-icon' />\r\n\t\t\t\t\t<input className='search-page__name-input' type='text' placeholder='Найти' id='searchInput2' value={queryText} onChange={(event) => setQueryText(event.target.value)} />\r\n\t\t\t\t</form>\r\n\t\t\t\t<CategoriesTab\r\n\t\t\t\t\tcategories={[\"Всё\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Пользователи\"]}\r\n\t\t\t\t\tactiveCategory={activeCategory}\r\n\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<LoadingOverlay active={gamesState === \"pending\"} spinner text='Ищем игры...'>\r\n\t\t\t\t\t\t<GameCards\r\n\t\t\t\t\t\t\tgames={games}\r\n\t\t\t\t\t\t\tgamesPage={gamesPage}\r\n\t\t\t\t\t\t\tonPaginate={(page) => {\r\n\t\t\t\t\t\t\t\tsetGamesPage(page);\r\n\t\t\t\t\t\t\t\tsearchGames(query, page, 6);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\thidden={activeCategory !== \"Всё\" && activeCategory !== \"Игры\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t<LoadingOverlay active={moviesState === \"pending\"} spinner text='Ищем фильмы...'>\r\n\t\t\t\t\t\t<MovieCards\r\n\t\t\t\t\t\t\tmovies={movies}\r\n\t\t\t\t\t\t\tmoviesPage={moviesPage}\r\n\t\t\t\t\t\t\tonPaginate={(page) => {\r\n\t\t\t\t\t\t\t\tsetMoviesPage(page);\r\n\t\t\t\t\t\t\t\tsearchMovies(query, page);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\thidden={activeCategory !== \"Всё\" && activeCategory !== \"Фильмы\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t<LoadingOverlay active={showsState === \"pending\"} spinner text='Ищем сериалы...'>\r\n\t\t\t\t\t\t<ShowCards\r\n\t\t\t\t\t\t\tshows={shows}\r\n\t\t\t\t\t\t\tshowsPage={showsPage}\r\n\t\t\t\t\t\t\tonPaginate={(page) => {\r\n\t\t\t\t\t\t\t\tsetShowsPage(page);\r\n\t\t\t\t\t\t\t\tsearchShows(query, page);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\thidden={activeCategory !== \"Всё\" && activeCategory !== \"Сериалы\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t<LoadingOverlay active={usersState === \"pending\"} spinner text='Ищем пользователей...'>\r\n\t\t\t\t\t\t<UserCards users={users} hidden={activeCategory !== \"Всё\" && activeCategory !== \"Пользователи\"} />\r\n\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t</CategoriesTab>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SearchPage;\r\n","import React, { useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport \"./confirm-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ConfirmPage = observer((props) => {\r\n\tconst { confirmEmail, confirmEmailState } = AuthStore;\r\n\tlet history = useHistory();\r\n\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet uid64 = params.get(\"uid64\");\r\n\tlet token = params.get(\"token\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tconfirmEmail(uid64, token);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (confirmEmailState.startsWith(\"error\")) history.push(`/404page`);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[confirmEmailState]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='confirm-page'>\r\n\t\t\t<h1 hidden={confirmEmailState !== \"done\"} className='confirm-page__success'>\r\n\t\t\t\tВаша почта подтверждена!\r\n\t\t\t</h1>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ConfirmPage;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport \"./confirm-password-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ConfirmPasswordPage = observer((props) => {\r\n\tconst { confirmPassword, confirmPasswordState } = AuthStore;\r\n\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet token = params.get(\"token\");\r\n\r\n\treturn (\r\n\t\t<div className='confirm-password-page'>\r\n\t\t\t<div className='confirm-password-page__body'>\r\n\t\t\t\t<form\r\n\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\tconfirmPassword(token, password);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<p className='h4'>Обновить пароль</p>\r\n\t\t\t\t\t<p className='note note-danger confirm-password-page__fail' hidden={!confirmPasswordState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t{confirmPasswordState}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p className='note note-success confirm-password-page__success' hidden={confirmPasswordState !== \"done\"}>\r\n\t\t\t\t\t\tПароль обновлен!\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<label htmlFor='passwordInput'>Новый пароль</label>\r\n\t\t\t\t\t<input type='password' id='passwordInput' className='confirm-password-page__input' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t<label htmlFor='passwordConfurmInput'>Подтверждение пароля</label>\r\n\t\t\t\t\t<input type='password' id='passwordConfurmInput' className='confirm-password-page__input' value={passwordConfirm} onChange={(event) => setPasswordConfirm(event.target.value)} />\r\n\r\n\t\t\t\t\t<button type='submit' className='confirm-password-page__button' disabled={(password !== passwordConfirm) | (password.length < 1)}>\r\n\t\t\t\t\t\tОбновить\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ConfirmPasswordPage;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport * as userRequests from \"../services/userRequests\";\r\nimport AuthStore from \"./AuthStore\";\r\n\r\nclass User {\r\n\tuser = {};\r\n\tuserLogs = {};\r\n\tuserFriendsLogs = { log: [] };\r\n\tuserState = \"done\";\r\n\tuserLogsState = \"done\";\r\n\tuserFriendsLogsState = \"done\";\r\n\tsetUserStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\tget isCurrentUser() {\r\n\t\treturn AuthStore.loggedIn && parseInt(this.user.id) === parseInt(AuthStore.user.id);\r\n\t}\r\n\r\n\trequestUser = async (username) => {\r\n\t\tthis.userState = \"pending\";\r\n\t\tuserRequests.getUserInfo(username).then(this.requestUserSuccess, this.requestUserFailure);\r\n\t};\r\n\trequestUserSuccess = (result) => {\r\n\t\tthis.user = result;\r\n\t\tthis.userState = \"done\";\r\n\t};\r\n\trequestUserFailure = (error) => {\r\n\t\tthis.userState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUserLogs = async (userID, page, resultsOnPage, query, filters) => {\r\n\t\tthis.userLogsState = \"pending\";\r\n\t\tuserRequests.getUserLog(userID, page, resultsOnPage, query, filters).then(this.requestLogsSuccess, this.requestLogsFailure);\r\n\t};\r\n\trequestLogsSuccess = (result) => {\r\n\t\tthis.userLogs = result;\r\n\t\tthis.userLogsState = \"done\";\r\n\t};\r\n\trequestLogsFailure = (error) => {\r\n\t\tif (error.response.status === 403) this.userLogsState = \"forbidden\";\r\n\t\telse this.userLogsState = \"error: \" + error;\r\n\t};\r\n\tdeleteUserLog = async (logType, logID) => {\r\n\t\tthis.userLogsState = \"pending\";\r\n\t\tuserRequests.deleteUserLog(this.user.id, logType, logID).then(() => this.deleteUserLogSuccess(logType, logID), this.deleteUserLogFailure);\r\n\t};\r\n\tdeleteUserLogSuccess = (logType, logID) => {\r\n\t\tlet newLogs = this.userLogs.log.filter((log) => {\r\n\t\t\treturn !(log.id === logID && log.type === logType);\r\n\t\t});\r\n\t\tthis.userLogs = { ...this.userLogs, log: newLogs };\r\n\t\tthis.userLogsState = \"done\";\r\n\t};\r\n\tdeleteUserLogFailure = (error) => {\r\n\t\tif (error.response.status === 403) this.userLogsState = \"forbidden\";\r\n\t\telse this.userLogsState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUserFriendsLogs = async (userID, page, resultsOnPage, query, filters) => {\r\n\t\tthis.userFriendsLogsState = \"pending\";\r\n\t\tuserRequests.getUserFriendsLog(page, resultsOnPage, query, filters).then(this.requestFriendsLogsSuccess, this.requestFriendsLogsFailure);\r\n\t};\r\n\trequestFriendsLogsSuccess = (result) => {\r\n\t\tthis.userFriendsLogs = result;\r\n\t\tthis.userFriendsLogsState = \"done\";\r\n\t};\r\n\trequestFriendsLogsFailure = (error) => {\r\n\t\tthis.userFriendsLogsState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetUserStatus = async (is_following, userID) => {\r\n\t\tthis.setUserStatusState = \"pending\";\r\n\t\tuserRequests.setUserStatus(is_following, userID).then(this.setUserStatusSuccess, this.setUserStatusFailure);\r\n\t};\r\n\tsetUserStatusSuccess = (result) => {\r\n\t\tthis.user.is_followed = result.is_following;\r\n\t\tthis.setUserStatusState = \"done\";\r\n\t};\r\n\tsetUserStatusFailure = (error) => {\r\n\t\tthis.setUserStatusState = \"error: \" + error;\r\n\t};\r\n}\r\n\r\nconst UserStore = new User();\r\n//export default remotedev(UserStore, { name: \"User\" });\r\nexport default UserStore;\r\n","import React from \"react\";\r\nimport Select from \"react-select\";\r\nimport \"./select-multi.sass\";\r\n\r\nfunction SelectMulti({ placeholder, options, onChange, hidden }) {\r\n\tif (hidden) return \"\";\r\n\telse return <Select className='react-select-container' classNamePrefix={\"multiselect\"} isMulti={true} placeholder={placeholder} onChange={onChange} options={options} hidden={hidden} />;\r\n}\r\n\r\nexport default SelectMulti;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport \"./item-row.sass\";\r\n\r\nfunction ItemRow({ data, fields }) {\r\n\treturn (\r\n\t\t<div className='item-row'>\r\n\t\t\t<div className='item-row__review' style={{ display: data.review ? \"block\" : \"none\" }}>\r\n\t\t\t\tОтзыв\r\n\t\t\t\t<div className='item-row__review-body'>{data.review}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='item-row__body'>\r\n\t\t\t\t<div className='item-row__body-left'>\r\n\t\t\t\t\t<div className='item-row__poster' style={{ backgroundImage: `url(${data.poster})` }} />\r\n\t\t\t\t\t<div className='item-row__name'>\r\n\t\t\t\t\t\t<a href={data.link}> {data.name} </a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='item-row__body-right'>\r\n\t\t\t\t\t<div className='item-row__status-block'>\r\n\t\t\t\t\t\tстатус\r\n\t\t\t\t\t\t<div className='item-row__status'>{data.status}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='item-row__score'>\r\n\t\t\t\t\t\t<div>{data.score}/10</div>\r\n\t\t\t\t\t\t<MDBIcon icon='star' className='item-row__score-icon' />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{fields.find((field) => field.key === \"spent_time\") === undefined ? (\r\n\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className='item-row__time'>\r\n\t\t\t\t\t\t\t<div>{data.spent_time}</div>\r\n\t\t\t\t\t\t\t<MDBIcon icon='clock' className='item-row__time-icon' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ItemRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { CSVLink } from \"react-csv\";\r\nimport InputNumber from \"../../../Common/InputNumber/InputNumber\";\r\nimport SelectMulti from \"../../../Common/SelectMulti/SelectMulti\";\r\nimport ItemRow from \"../ItemRow/ItemRow\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport Pagination from \"rc-pagination\";\r\nimport useWindowDimensions from \"../../../../hooks/useWindowDimensions\";\r\nimport \"./item-block.sass\";\r\n\r\nfunction ItemBlock({ items, statuses, fields, name }) {\r\n\tconst [query, setQuery] = useState(\"\");\r\n\tconst [pageSize, setPageSize] = useState(10);\r\n\tconst [page, setPage] = useState(1);\r\n\tconst [filteredItems, setFilteresItems] = useState([]);\r\n\tconst [sortIsAsc, setSortIsAsc] = useState(false);\r\n\tconst [statusFilters, setStatusFilters] = useState([]);\r\n\tconst [collapse, setCollapse] = useState(true);\r\n\tconst { width } = useWindowDimensions();\r\n\r\n\tconst toggleCollapse = () => {\r\n\t\tsetCollapse(!collapse);\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetFilteresItems(items?.filter((item) => item.name.toLowerCase().includes(query.toLowerCase()) && (statusFilters.includes(item.status) || statusFilters.length < 1)));\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[items, page, pageSize, query, statusFilters]\r\n\t);\r\n\r\n\tfunction sortItems(field, isNumber) {\r\n\t\tlet newItems = items\r\n\t\t\t?.filter((item) => item.name.toLowerCase().includes(query.toLowerCase()) && (statusFilters.includes(item.status) || statusFilters.length < 1))\r\n\t\t\t.sort((a, b) => {\r\n\t\t\t\tif (isNumber ? parseFloat(a[field]) > parseFloat(b[field]) : a[field] > b[field]) {\r\n\t\t\t\t\treturn sortIsAsc ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t\tif (isNumber ? parseFloat(a[field]) < parseFloat(b[field]) : a[field] < b[field]) {\r\n\t\t\t\t\treturn sortIsAsc ? -1 : 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n\t\tsetFilteresItems(newItems);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='item-block'>\r\n\t\t\t<div className='item-block__header'>\r\n\t\t\t\t<div className='item-block__header-left'>\r\n\t\t\t\t\t<div className='item-block__header-first-row'>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tplaceholder='Поиск'\r\n\t\t\t\t\t\t\taria-label='Поиск'\r\n\t\t\t\t\t\t\tclassName='item-block__search-input'\r\n\t\t\t\t\t\t\tvalue={query}\r\n\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\tsetQuery(event.target.value);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button className='item-block__mobile-expand' onClick={toggleCollapse}>\r\n\t\t\t\t\t\t\t{collapse ? <MDBIcon icon='angle-down' /> : <MDBIcon icon='angle-up' />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='item-block__sort-buttons' hidden={collapse && width <= 515}>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='item-block__sort-button'\r\n\t\t\t\t\t\t\thidden={fields.find((field) => field.key === \"score\") === undefined}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsortItems(\"score\", true);\r\n\t\t\t\t\t\t\t\tsetSortIsAsc(!sortIsAsc);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='star' /> <MDBIcon icon='arrows-alt-v' />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='item-block__sort-button'\r\n\t\t\t\t\t\t\thidden={fields.find((field) => field.key === \"spent_time\") === undefined}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsortItems(\"spent_time\", true);\r\n\t\t\t\t\t\t\t\tsetSortIsAsc(!sortIsAsc);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='clock' /> <MDBIcon icon='arrows-alt-v' />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<SelectMulti\r\n\t\t\t\t\t\thidden={collapse && width <= 515}\r\n\t\t\t\t\t\tplaceholder={\"Cтатус\"}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tsetStatusFilters(e.map((obj) => obj.value));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\toptions={statuses}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='item-block__header-right' hidden={collapse && width <= 515}>\r\n\t\t\t\t\t<label className='item-block__label'>Записей на странице</label>\r\n\t\t\t\t\t<InputNumber value={pageSize} max={100} min={1} onChange={(value) => setPageSize(value)} dataList={[5, 10, 25, 50, 100]} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='item-block__rows'>\r\n\t\t\t\t{filteredItems?.slice((page - 1) * pageSize, page * pageSize).map((item, counter) => (\r\n\t\t\t\t\t<ItemRow data={item} fields={fields} key={counter} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='item-block__footer'>\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\ttotal={filteredItems?.length}\r\n\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\tsetPage(e);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tcurrent={page}\r\n\t\t\t\t/>\r\n\t\t\t\t<CSVLink data={items ? items : []} headers={fields} separator={\";\"} filename={`interests ${name}.csv`}>\r\n\t\t\t\t\tСкачать CSV\r\n\t\t\t\t</CSVLink>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ItemBlock;\r\n","import React from \"react\";\r\nimport ItemBlock from \"./ItemBlock/ItemBlock\";\r\n\r\nfunction GameBlock({ games }) {\r\n\treturn (\r\n\t\t<ItemBlock\r\n\t\t\titems={games?.map((game) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlink: window.location.origin + \"/game/\" + game.game.rawg_slug,\r\n\t\t\t\t\tname: game.game.rawg_name,\r\n\t\t\t\t\tstatus: game.status,\r\n\t\t\t\t\tscore: game.score,\r\n\t\t\t\t\treview: game.review,\r\n\t\t\t\t\tspent_time: parseFloat(game.spent_time),\r\n\t\t\t\t\tposter: game.game.rawg_backdrop_path,\r\n\t\t\t\t};\r\n\t\t\t})}\r\n\t\t\tstatuses={[\r\n\t\t\t\t{ value: \"Буду играть\", label: \"Буду играть\" },\r\n\t\t\t\t{ value: \"Играю\", label: \"Играю\" },\r\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\r\n\t\t\t\t{ value: \"Прошел\", label: \"Прошел\" },\r\n\t\t\t]}\r\n\t\t\tfields={[\r\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\r\n\t\t\t\t{ label: \"Название\", key: \"name\" },\r\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\r\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\r\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\r\n\t\t\t\t{ label: \"Время прохождения\", key: \"spent_time\" },\r\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\r\n\t\t\t]}\r\n\t\t\tname={\"Игры\"}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default GameBlock;\r\n","import React from \"react\";\r\nimport ItemBlock from \"./ItemBlock/ItemBlock\";\r\n\r\nfunction MovieBlock({ movies }) {\r\n\treturn (\r\n\t\t<ItemBlock\r\n\t\t\titems={movies?.map((movie) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlink: window.location.origin + \"/movie/\" + movie.movie.tmdb_id,\r\n\t\t\t\t\tname: movie.movie.tmdb_name,\r\n\t\t\t\t\tstatus: movie.status,\r\n\t\t\t\t\tscore: movie.score,\r\n\t\t\t\t\treview: movie.review,\r\n\t\t\t\t\tposter: movie.movie.tmdb_backdrop_path,\r\n\t\t\t\t};\r\n\t\t\t})}\r\n\t\t\tstatuses={[\r\n\t\t\t\t{ value: \"Буду смотреть\", label: \"Буду смотреть\" },\r\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\r\n\t\t\t\t{ value: \"Посмотрел\", label: \"Посмотрел\" },\r\n\t\t\t]}\r\n\t\t\tfields={[\r\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\r\n\t\t\t\t{ label: \"Название\", key: \"name\" },\r\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\r\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\r\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\r\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\r\n\t\t\t]}\r\n\t\t\tname={\"Фильмы\"}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default MovieBlock;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport classnames from \"classnames\";\r\nimport \"./log-row.sass\";\r\n\r\nfunction LogRow({ log, showUsername, onDeleteLog, className }) {\r\n\tlet history = useHistory();\r\n\r\n\tfunction translateActionType(action, actionResult) {\r\n\t\tswitch (action) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tswitch (actionResult) {\r\n\t\t\t\t\tcase \"0\":\r\n\t\t\t\t\t\treturn \"посмотрел(а)\";\r\n\t\t\t\t\tcase \"-1\":\r\n\t\t\t\t\t\treturn \"не смотрела(а)\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"оценил(а)\";\r\n\t\t\t\t}\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn \"изменил(а) статус\";\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn \"оставил(а) отзыв на\";\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn \"изменил(а) время прохождения\";\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\tif (actionResult > 0) return \"посмотрел(а) \" + actionResult + \" серий\";\r\n\t\t\t\telse return \"не смотрел(а) \" + actionResult * -1 + \" серий\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\tif (actionResult === \"True\") return \"подписан(а) на\";\r\n\t\t\t\telse return \"отписан(а) от\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn action;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction translateType(type, actionType) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"игру\";\r\n\t\t\t\telse return \"игры\";\r\n\t\t\tcase \"movie\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"фильм\";\r\n\t\t\t\telse return \"фильма\";\r\n\t\t\tcase \"show\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"сериал\";\r\n\t\t\t\telse return \"сериала\";\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn \"пользователя\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn type;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction nameToLink(name, type, id) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + id}\r\n\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"movie\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + id}\r\n\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"show\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id}\r\n\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number}\r\n\t\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number}\r\n\t\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t[s{id.season_number}e{id.episode_number}] серию\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/user/\" + id}\r\n\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/user/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tdefault:\r\n\t\t\t\treturn name;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction userToLink(username, userID) {\r\n\t\treturn (\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + \"/user/\" + userID}\r\n\t\t\t\tclassName='log-row__link'\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/user/\" + userID);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}>\r\n\t\t\t\t{username}\r\n\t\t\t</a>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction actionResultToStr(actionType, actionResult, target) {\r\n\t\tswitch (actionType) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tif ((target !== \"episode\") | (actionResult > 0))\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\tinitialRating={actionResult}\r\n\t\t\t\t\t\t\treadonly={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\telse return \"\";\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn actionResult + \" \" + intToHours(actionResult);\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn actionResult;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\tlet options = { hour: \"numeric\", minute: \"numeric\" };\r\n\t\treturn newDate.toLocaleTimeString(\"ru-RU\", options);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classnames(\"log-row\", className)}>\r\n\t\t\t{parseDate(log.created)}&thinsp;\r\n\t\t\t{showUsername ? userToLink(log.user, log.user_id) : \"\"}&thinsp;\r\n\t\t\t{translateActionType(log.action_type, log.action_result)}&thinsp;\r\n\t\t\t{translateType(log.type, log.action_type)}&thinsp;\r\n\t\t\t{nameToLink(log.target, log.type, log.target_id)}\r\n\t\t\t{(log.type === \"user\") | (log.action_type === \"episodes\") | (log.action_result === \"0\") | (log.action_result === \"-1\") ? \"\" : \":\"}&thinsp;\r\n\t\t\t{actionResultToStr(log.action_type, log.action_result, log.type)}\r\n\t\t\t<button\r\n\t\t\t\tclassName={classnames(\"log-row__delete-button\", showUsername ? \"log-row__delete-button_hidden\" : \"\")}\r\n\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\tonDeleteLog(log.type, log.id);\r\n\t\t\t\t}}>\r\n\t\t\t\tx\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default LogRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport LogRow from \"../LogRow/LogRow\";\r\nimport \"./logs-by-day.sass\";\r\n\r\nfunction UserLogs({ logs, showUsername, currentUser, onDeleteLog }) {\r\n\tconst [logsByDay, setLogsByDay] = useState([]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetLogsByDay(groupLogsByDay(logs.log));\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[logs]\r\n\t);\r\n\r\n\tfunction groupLogsByDay(logs) {\r\n\t\tlet newLogs = [];\r\n\r\n\t\tfor (let i in logs) {\r\n\t\t\tlet date = new Date(logs[i].created);\r\n\r\n\t\t\tif (newLogs.length === 0)\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t\telse if (date.getDay() === newLogs[newLogs.length - 1].date.getDay()) newLogs[newLogs.length - 1].logs.push(logs[i]);\r\n\t\t\telse\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn newLogs;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='logs-by-day'>\r\n\t\t\t{logsByDay.map((dayLog, counter) => (\r\n\t\t\t\t<div key={counter} className='logs-by-day__day'>\r\n\t\t\t\t\t<h5 className='logs-by-day__date'>{dayLog.date.toLocaleDateString(\"ru-RU\")}</h5>\r\n\t\t\t\t\t<div className='logs-by-day__logs'>\r\n\t\t\t\t\t\t{dayLog.logs.map((log) => (\r\n\t\t\t\t\t\t\t<LogRow log={log} showUsername={showUsername} key={log.id + log.created} currentUser={currentUser} onDeleteLog={onDeleteLog} className='logs-by-day__log' />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserLogs;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Pagination from \"rc-pagination\";\r\nimport SelectMulti from \"../../../Common/SelectMulti/SelectMulti\";\r\nimport InputNumber from \"../../../Common/InputNumber/InputNumber\";\r\nimport LogsByDay from \"../LogsByDay/LogsByDay\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport useWindowDimensions from \"../../../../hooks/useWindowDimensions\";\r\nimport \"./user-logs.sass\";\r\n\r\nfunction UserLogs({ userID, logs, showUsername, requestUserLogs, currentUser, onDeleteLog, logsType }) {\r\n\tconst [currentPage, setCurrentPage] = useState(1);\r\n\tconst [pageSize, setPageSize] = useState(15);\r\n\tconst [query, setQuery] = useState(\"\");\r\n\tconst [filters, setFilters] = useState([]);\r\n\tconst [collapse, setCollapse] = useState(true);\r\n\tconst { width } = useWindowDimensions();\r\n\r\n\tconst toggleCollapse = () => {\r\n\t\tsetCollapse(!collapse);\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (logsType === \"user\" || (logsType === \"userFriends\" && currentUser)) requestUserLogs(userID, currentPage, pageSize, query, filters);\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[userID, currentPage, currentUser, logsType, pageSize, filters]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='user-logs'>\r\n\t\t\t<div className='user-logs__header'>\r\n\t\t\t\t<div className='user-logs__header-left'>\r\n\t\t\t\t\t<div className='user-logs__header-first-row'>\r\n\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\trequestUserLogs(userID, currentPage, pageSize, query, filters);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tplaceholder='Поиск'\r\n\t\t\t\t\t\t\t\taria-label='Поиск'\r\n\t\t\t\t\t\t\t\tclassName='user-logs__search-input'\r\n\t\t\t\t\t\t\t\tvalue={query}\r\n\t\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\t\tsetQuery(event.target.value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<button className='user-logs__mobile-expand' onClick={toggleCollapse}>\r\n\t\t\t\t\t\t\t{collapse ? <MDBIcon icon='angle-down' /> : <MDBIcon icon='angle-up' />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<SelectMulti\r\n\t\t\t\t\t\tplaceholder={\"Тип логов\"}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tsetFilters(e.map((obj) => obj.value));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t{ value: \"game\", label: \"Игры\" },\r\n\t\t\t\t\t\t\t{ value: \"movie\", label: \"Фильмы\" },\r\n\t\t\t\t\t\t\t{ value: \"show\", label: \"Сериал\" },\r\n\t\t\t\t\t\t\t{ value: \"user\", label: \"Пользователи\" },\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\thidden={collapse && width < 748}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='user-logs__page-size' hidden={collapse && width < 748}>\r\n\t\t\t\t\t<label className='user-logs__page-size-label'> Записей на странице</label>\r\n\t\t\t\t\t<InputNumber value={pageSize} max={100} min={1} onChange={(value) => setPageSize(value)} dataList={[5, 10, 25, 50, 100]} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<LogsByDay logs={logs} showUsername={showUsername} currentUser={currentUser} onDeleteLog={onDeleteLog} />\r\n\t\t\t<Pagination\r\n\t\t\t\ttotal={logs.count}\r\n\t\t\t\tpageSize={pageSize}\r\n\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\tsetCurrentPage(e);\r\n\t\t\t\t}}\r\n\t\t\t\tcurrent={currentPage}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserLogs;\r\n","import React from \"react\";\r\nimport ItemBlock from \"./ItemBlock/ItemBlock\";\r\n\r\nfunction ShowBlock({ shows }) {\r\n\treturn (\r\n\t\t<ItemBlock\r\n\t\t\titems={shows?.map((show) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlink: window.location.origin + \"/show/\" + show.show.tmdb_id,\r\n\t\t\t\t\tname: show.show.tmdb_name,\r\n\t\t\t\t\tstatus: show.status,\r\n\t\t\t\t\tscore: show.score,\r\n\t\t\t\t\treview: show.review,\r\n\t\t\t\t\tposter: show.show.tmdb_backdrop_path,\r\n\t\t\t\t\tspent_time: show.spent_time,\r\n\t\t\t\t};\r\n\t\t\t})}\r\n\t\t\tstatuses={[\r\n\t\t\t\t{ value: \"Буду смотреть\", label: \"Буду смотреть\" },\r\n\t\t\t\t{ value: \"Смотрю\", label: \"Смотрю\" },\r\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\r\n\t\t\t\t{ value: \"Посмотрел\", label: \"Посмотрел\" },\r\n\t\t\t]}\r\n\t\t\tfields={[\r\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\r\n\t\t\t\t{ label: \"Название\", key: \"name\" },\r\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\r\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\r\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\r\n\t\t\t\t{ label: \"Время просмотра\", key: \"spent_time\" },\r\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\r\n\t\t\t]}\r\n\t\t\tname={\"Сериалы\"}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default ShowBlock;\r\n","export const COLORS = [\r\n\t\"rgb(43,206,72)\",\r\n\t\"rgb(240,163,255)\",\r\n\t\"rgb(0,117,220)\",\r\n\t\"rgb(153,63,0)\",\r\n\t\"rgb(76,0,92)\",\r\n\t\"rgb(225,225,225)\",\r\n\t\"rgb(0,92,49)\",\r\n\t\"rgb(255,204,153)\",\r\n\t\"rgb(128,128,128)\",\r\n\t\"rgb(148,255,181)\",\r\n\t\"rgb(143,124,0)\",\r\n\t\"rgb(157,204,0)\",\r\n\t\"rgb(194,0,136)\",\r\n\t\"rgb(0,51,128)\",\r\n\t\"rgb(255,164,5)\",\r\n\t\"rgb(255,168,187)\",\r\n\t\"rgb(66,102,0)\",\r\n\t\"rgb(255,0,16)\",\r\n\t\"rgb(94,241,242)\",\r\n\t\"rgb(0,153,143)\",\r\n\t\"rgb(224,255,102)\",\r\n\t\"rgb(116,10,255)\",\r\n\t\"rgb(153,0,0)\",\r\n\t\"rgb(255,255,128)\",\r\n\t\"rgb(255,255,0)\",\r\n\t\"rgb(255,80,)\",\r\n];\r\n","import React from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"../Colors\";\r\n\r\nfunction ChartBlock({ chartData, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (\r\n\t\t\t\t<BarChart width={document.body.clientWidth - 50} height={chartData.length * 40} data={chartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Bar>\r\n\t\t\t\t</BarChart>\r\n\t\t\t) : (\r\n\t\t\t\t<BarChart width={Math.min(chartData.length * 100, document.body.clientWidth - 50)} height={300} data={chartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\r\n\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Bar>\r\n\t\t\t\t</BarChart>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ChartBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { PieChart, Pie, Legend, Cell, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"../Colors\";\r\n\r\nfunction ChartBlock({ stats }) {\r\n\tconst [chartData, setChartData] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (stats?.games) {\r\n\t\t\tlet newData = [];\r\n\t\t\tif (stats?.games?.total_spent_time > 0) newData.push({ name: \"Часов в играх\", value: stats?.games?.total_spent_time });\r\n\t\t\tif (stats?.movies?.total_spent_time > 0) newData.push({ name: \"Часов в фильмах\", value: stats?.movies?.total_spent_time });\r\n\t\t\tif (stats?.episodes?.total_spent_time > 0) newData.push({ name: \"Часов в сериалах\", value: stats?.episodes?.total_spent_time });\r\n\t\t\tsetChartData(newData);\r\n\t\t}\r\n\t}, [stats]);\r\n\r\n\treturn (\r\n\t\t<div hidden={chartData.length < 1}>\r\n\t\t\t<PieChart width={350} height={260} hidden={chartData.length < 1}>\r\n\t\t\t\t<Pie dataKey='value' data={chartData} cx='50%' cy='50%' outerRadius={80} fill='#8884d8' labelLine={true} label minAngle={5}>\r\n\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Pie>\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\tcursor={false}\r\n\t\t\t\t/>\r\n\t\t\t\t<Legend verticalAlign='bottom' horizontalAlign='center' />\r\n\t\t\t</PieChart>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ChartBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport GenresChart from \"../GenresChart/GenresChart\";\r\nimport ChartBlock from \"../ChartBlock/ChartBlock\";\r\n\r\nfunction StatisticsBlock({ stats }) {\r\n\tconst [gameChartData, setGameChartData] = useState([]);\r\n\tconst [movieChartData, setMovieChartData] = useState([]);\r\n\tconst [showChartData, setShowChartData] = useState([]);\r\n\r\n\tfunction getGenresChartData(genres) {\r\n\t\tif (genres) {\r\n\t\t\tlet newData = [];\r\n\t\t\tlet counter = 0;\r\n\t\t\tfor (let genre in genres.sort((a, b) => (a.spent_time_percent > b.spent_time_percent ? -1 : 1)))\r\n\t\t\t\tif (genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\tnewData.push({ name: genres[genre].name, Процент: genres[genre].spent_time_percent });\r\n\t\t\t\t\tcounter++;\r\n\t\t\t\t}\r\n\t\t\treturn newData;\r\n\t\t}\r\n\t\treturn [];\r\n\t}\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetMovieChartData(getGenresChartData(stats?.movies?.genres));\r\n\t\t\tsetGameChartData(getGenresChartData(stats?.games?.genres));\r\n\t\t\tsetShowChartData(getGenresChartData(stats?.episodes?.genres));\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<ChartBlock stats={stats} />\r\n\t\t\t<div hidden={!stats?.games}>\r\n\t\t\t\t<h3>Игры</h3>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tИгр сыграно: {stats?.games?.count}, часов наиграно: {stats?.games?.total_spent_time}\r\n\t\t\t\t</p>\r\n\t\t\t\t<GenresChart chartData={gameChartData} hidden={gameChartData.length < 1} />\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!stats?.movies}>\r\n\t\t\t\t<h3>Фильмы</h3>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tФильмов посмотрено: {stats?.movies?.count}, часов просмотра: {stats?.movies?.total_spent_time}\r\n\t\t\t\t</p>\r\n\t\t\t\t<GenresChart chartData={movieChartData} hidden={movieChartData.length < 1} />\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!stats?.episodes}>\r\n\t\t\t\t<h3>Сериалы</h3>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tСерий сериалов посмотрено: {stats?.episodes?.count}, часов просмотра: {stats?.episodes?.total_spent_time}\r\n\t\t\t\t</p>\r\n\t\t\t\t<GenresChart chartData={showChartData} hidden={showChartData.length < 1} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default StatisticsBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../../store/AuthStore\";\r\nimport UserStore from \"../../../store/UserStore\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport GameBlock from \"../ItemsBlock/GameBlock\";\r\nimport FriendBlock from \"../../Common/FriendBlock/FriendBlock\";\r\nimport MovieBlock from \"../ItemsBlock/MovieBlock\";\r\nimport UserLogs from \"../Logs/UserLogs/UserLogs\";\r\nimport CategoriesTab from \"../../Common/CategoriesTab/CategoriesTab\";\r\nimport ShowBlock from \"../ItemsBlock/ShowBlock\";\r\nimport StatisticsBlock from \"../Statistics/StatisticsBlock/StatisticsBlock\";\r\n\r\nimport \"./user-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst UserPage = observer((props) => {\r\n\tconst { currentUser } = AuthStore;\r\n\tconst { user, userState, requestUser, setUserStatus, requestUserLogs, userLogs, userLogsState, requestUserFriendsLogs, userFriendsLogs, userFriendsLogsState, deleteUserLog, isCurrentUser } =\r\n\t\tUserStore;\r\n\r\n\tlet { userID, category } = useParams();\r\n\tconst [activeCategory, setActiveCategory] = useState(\"Лента\");\r\n\tconst [lastActivity, setLastActivity] = useState(\"\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trequestUser(userID);\r\n\t\t\tsetActiveCategory(\"Лента\");\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userID, requestUser]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (category) setActiveCategory(category);\r\n\t\t\telse setActiveCategory(\"Лента\");\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[category]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = \"Профиль \" + user.username;\r\n\t\tif (user.last_activity) {\r\n\t\t\tlet date = new Date(user.last_activity);\r\n\t\t\tlet options = { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", hour: \"numeric\", minute: \"numeric\" };\r\n\t\t\tsetLastActivity(date.toLocaleString(\"ru-RU\", options));\r\n\t\t} else setLastActivity(\"\");\r\n\t}, [user]);\r\n\r\n\treturn (\r\n\t\t<div className='user-page'>\r\n\t\t\t<LoadingOverlay active={userState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='user-page__body'>\r\n\t\t\t\t\t<div className='user-page__header'>\r\n\t\t\t\t\t\t<div className='user-page__user-card'>\r\n\t\t\t\t\t\t\t<div className='user-page__user-avatar' style={{ backgroundImage: `url(${\"https://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }} />\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h2 className='user-page__username'>{user.username}</h2>\r\n\t\t\t\t\t\t\t\t<div hidden={!user.is_available} className='user-page__last-activity'>\r\n\t\t\t\t\t\t\t\t\tПоследняя активность {lastActivity}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\thidden={isCurrentUser || !user.is_available}\r\n\t\t\t\t\t\t\tclassName='user-page__subscribe-button'\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetUserStatus({ is_following: user.is_followed ? false : true }, user.id);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{user.is_followed ? \"Отписаться\" : \"Подписаться\"}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<CategoriesTab\r\n\t\t\t\t\t\tcategories={[\"Лента\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Статистика\", \"Друзья\"]}\r\n\t\t\t\t\t\tactiveCategory={activeCategory}\r\n\t\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Лента\"}>\r\n\t\t\t\t\t\t\t<div hidden={!user.is_available}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userLogsState === \"pending\" && userState !== \"pending\"} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<UserLogs userID={userID} logs={userLogs} requestUserLogs={requestUserLogs} currentUser={isCurrentUser} onDeleteLog={deleteUserLog} logsType={\"user\"} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<h4 hidden={user.is_available || userState === \"pending\"}>\r\n\t\t\t\t\t\t\t\t<MDBIcon icon='lock' style={{ marginRight: \"1rem\" }} />\r\n\t\t\t\t\t\t\t\tПрофиль скрыт настройками приватности\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Игры\"}>\r\n\t\t\t\t\t\t\t<GameBlock games={user.games} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Фильмы\"}>\r\n\t\t\t\t\t\t\t<MovieBlock movies={user.movies} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Сериалы\"}>\r\n\t\t\t\t\t\t\t<ShowBlock shows={user.shows} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Статистика\"}>\r\n\t\t\t\t\t\t\t<StatisticsBlock stats={user.stats} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Друзья\"}>\r\n\t\t\t\t\t\t\t<FriendBlock users={user.followed_users ? user.followed_users : []} />\r\n\t\t\t\t\t\t\t<div hidden={currentUser.username !== user.username}>\r\n\t\t\t\t\t\t\t\t<h4>Активность друзей: </h4>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userFriendsLogsState === \"pending\" && userState !== \"pending\"} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<UserLogs userID={userID} logs={userFriendsLogs} requestUserLogs={requestUserFriendsLogs} currentUser={isCurrentUser} showUsername={true} logsType={\"userFriends\"} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</CategoriesTab>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default UserPage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./day-info.sass\";\r\n\r\nfunction DayInfo({ day, date }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className='day-info'>\r\n\t\t\t<div></div>\r\n\t\t\t<h3 className='day-info__date'>\r\n\t\t\t\t{date ? date.toLocaleDateString(\"ru-RU\", { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", weekday: \"long\" }) : \"\"}\r\n\t\t\t</h3>\r\n\t\t\t<div className='day-info__category' hidden={!(day?.games?.length > 0)}>\r\n\t\t\t\t<h3>Игры</h3>\r\n\t\t\t\t{day.games?.map((game) => (\r\n\t\t\t\t\t<div key={game.rawg_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{game.rawg_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='day-info__category' hidden={!(day?.movies?.length > 0)}>\r\n\t\t\t\t<h3>Фильмы</h3>\r\n\t\t\t\t{day.movies?.map((movie) => (\r\n\t\t\t\t\t<div key={movie.tmdb_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{movie.tmdb_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='day-info__category' hidden={!(day?.episodes?.length > 0)}>\r\n\t\t\t\t<h3>Сериалы</h3>\r\n\t\t\t\t{day.episodes?.map((episode) => (\r\n\t\t\t\t\t<div key={episode.tmdb_id}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DayInfo;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Timeline, TimelineEvent } from \"react-event-timeline\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction ReleasesList({ calendar }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst myStyle = {\r\n\t\tbackgroundColor: \"#191A1B\",\r\n\t\tcolor: \"#F1F1FB\",\r\n\t\tborder: \"none\",\r\n\t};\r\n\r\n\tfunction getContentForDay(day) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{day.games?.map((game) => (\r\n\t\t\t\t\t<div key={game.rawg_id}>\r\n\t\t\t\t\t\tИгра{\" \"}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{game.rawg_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t{day.movies?.map((movie) => (\r\n\t\t\t\t\t<div key={movie.tmdb_id}>\r\n\t\t\t\t\t\tФильм{\" \"}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{movie.tmdb_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t{day.episodes?.map((episode) => (\r\n\t\t\t\t\t<div key={episode.tmdb_id}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction getIconForDay(day) {\r\n\t\tif ((day.games?.length > 0) & !(day.movies?.length > 0) & !(day.episodes?.length > 0)) return <MDBIcon icon='gamepad' />;\r\n\t\telse if ((day.movies?.length > 0) & !(day.games?.length > 0) & !(day.episodes?.length > 0)) return <MDBIcon icon='film' />;\r\n\t\telse if ((day.episodes?.length > 0) & !(day.movies?.length > 0) & !(day.games?.length > 0)) return <MDBIcon icon='tv' />;\r\n\t\telse return <MDBIcon icon='dice-d6' />;\r\n\t}\r\n\r\n\tfunction dateDiff(date) {\r\n\t\tlet now = new Date();\r\n\t\tlet time = date.getTime();\r\n\t\tlet timeNow = now.getTime();\r\n\t\tlet diff = (time - timeNow) / (24 * 3600 * 1000);\r\n\t\tif (diff < 1)\r\n\t\t\tif (now.getUTCDay() === date.getUTCDay()) return 0;\r\n\t\t\telse return 1;\r\n\t\treturn parseInt(diff) + 1;\r\n\t}\r\n\r\n\tfunction intToDays(number) {\r\n\t\tif (11 <= number && number <= 14) return \"дней\";\r\n\t\telse if (number % 10 === 1) return \"день\";\r\n\t\telse if (2 <= number % 10 && number % 10 <= 4) return \"дня\";\r\n\t\telse return \"дней\";\r\n\t}\r\n\r\n\tfunction remainedDays(date) {\r\n\t\tlet days = dateDiff(date);\r\n\t\tif (days > 0) return `${days} ${intToDays(days)}`;\r\n\t\telse return \"сегодня\";\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Timeline style={myStyle} lineColor='#A6A6AB'>\r\n\t\t\t{calendar?.map((day) => {\r\n\t\t\t\tlet date = new Date(day[0]);\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<TimelineEvent\r\n\t\t\t\t\t\ttitle={`${remainedDays(date)}, ${date.toLocaleDateString(\"ru-RU\", {\r\n\t\t\t\t\t\t\tyear: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\",\r\n\t\t\t\t\t\t\tmonth: \"long\",\r\n\t\t\t\t\t\t\tday: \"numeric\",\r\n\t\t\t\t\t\t\tweekday: \"long\",\r\n\t\t\t\t\t\t})}`}\r\n\t\t\t\t\t\tkey={day[0]}\r\n\t\t\t\t\t\tclassName='timelineEvent'\r\n\t\t\t\t\t\ticon={getIconForDay(day[1])}\r\n\t\t\t\t\t\tcardHeaderStyle={myStyle}\r\n\t\t\t\t\t\ticonStyle={{ ...myStyle, fontSize: \"1.2rem\" }}\r\n\t\t\t\t\t\tbubbleStyle={myStyle}\r\n\t\t\t\t\t\tcontentStyle={{ ...myStyle, fontSize: \"1.1rem\", marginTop: \"0.2rem\", marginBottom: \"0.2rem\" }}\r\n\t\t\t\t\t\ttitleStyle={{ ...myStyle, fontSize: \"1.1rem\" }}\r\n\t\t\t\t\t\tsubtitleStyle={myStyle}>\r\n\t\t\t\t\t\t{getContentForDay(day[1])}\r\n\t\t\t\t\t</TimelineEvent>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</Timeline>\r\n\t);\r\n}\r\n\r\nexport default ReleasesList;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport CurrentUserStore from \"../../../store/CurrentUserStore\";\r\nimport AuthStore from \"../../../store/AuthStore\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport Calendar from \"react-calendar\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"react-calendar/dist/Calendar.css\";\r\nimport DayInfo from \"../DayInfo/DayInfo\";\r\nimport ReleasesList from \"../ReleasesList/ReleasesList\";\r\n\r\nimport \"./calendar-page.sass\";\r\n\r\nconst CalendarPage = observer(() => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { calendar, calendarState, requestCalendar } = CurrentUserStore;\r\n\r\n\tconst [value, onChange] = useState(new Date());\r\n\tconst [currentDay, setCurrentDay] = useState({});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (loggedIn) {\r\n\t\t\trequestCalendar();\r\n\t\t}\r\n\t}, [loggedIn, requestCalendar]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (calendarState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${calendarState}`);\r\n\t}, [calendarState]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (calendar) {\r\n\t\t\tif (formatDate(value) in calendar) setCurrentDay(calendar[formatDate(value)]);\r\n\t\t\telse setCurrentDay({});\r\n\t\t}\r\n\t}, [value, calendar]);\r\n\r\n\tfunction dateToTile({ date, view }) {\r\n\t\tif (view === \"month\" && formatDate(date) in calendar) {\r\n\t\t\tlet day = calendar[formatDate(date)];\r\n\t\t\treturn (\r\n\t\t\t\t<div className='calendar-day'>\r\n\t\t\t\t\t<div className='calendar-day__body'>\r\n\t\t\t\t\t\t<div className='calendar-day__games' hidden={!(day?.games?.length > 0)}>\r\n\t\t\t\t\t\t\t{day?.games?.length}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='calendar-day__movies' hidden={!(day?.movies?.length > 0)}>\r\n\t\t\t\t\t\t\t{day?.movies?.length}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='calendar-day__episodes' hidden={!(day?.episodes?.length > 0)}>\r\n\t\t\t\t\t\t\t{day?.episodes?.length}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='calendar-page'>\r\n\t\t\t<div className='calendar-page__body'>\r\n\t\t\t\t<h1 className='calendar-page__header'>Календарь релизов</h1>\r\n\t\t\t\t<LoadingOverlay active={calendarState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? <DayInfo day={currentDay} date={value} /> : \"\"}\r\n\t\t\t\t\t<Calendar onChange={onChange} value={value} defaultView='month' minDetail='decade' locale='ru-RU' minDate={new Date()} tileContent={dateToTile} />\r\n\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? \"\" : <DayInfo day={currentDay} date={value} />}\r\n\t\t\t\t\t<ReleasesList calendar={Object.entries(calendar)} />\r\n\t\t\t\t</LoadingOverlay>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default CalendarPage;\r\n\r\nfunction pad(number) {\r\n\tif (number < 10) {\r\n\t\treturn \"0\" + number;\r\n\t}\r\n\treturn number;\r\n}\r\nfunction formatDate(date) {\r\n\treturn date.getFullYear() + \"-\" + pad(date.getMonth() + 1) + \"-\" + pad(date.getDate());\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../../store/AuthStore\";\r\nimport CurrentUserStore from \"../../../store/CurrentUserStore\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"./settings-page.sass\";\r\n\r\nconst SettingsPage = observer((props) => {\r\n\tconst { loggedIn, user } = AuthStore;\r\n\tconst { settings, requestSettings, patchSettings, settingsState, saveSettingsState } = CurrentUserStore;\r\n\r\n\tconst [gameNotifInput, setGameNotifInput] = useState(false);\r\n\tconst [movieNotifInput, setMovieNotifInput] = useState(false);\r\n\tconst [showNotifInput, setShowNotifInput] = useState(false);\r\n\tconst [privacySelect, setPrivacySelect] = useState(\"Все\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestSettings();\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (saveSettingsState === \"saved\") toast.success(\"Настройки сохранены!\");\r\n\t\tif (saveSettingsState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${saveSettingsState}`);\r\n\t}, [saveSettingsState]);\r\n\tuseEffect(() => {\r\n\t\tif (settingsState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${settingsState}`);\r\n\t}, [settingsState]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (settings.receive_games_releases) setGameNotifInput(settings.receive_games_releases);\r\n\t\t\tif (settings.receive_movies_releases) setMovieNotifInput(settings.receive_movies_releases);\r\n\t\t\tif (settings.receive_episodes_releases) setShowNotifInput(settings.receive_episodes_releases);\r\n\t\t\tif (settings.privacy) setPrivacySelect(settings.privacy);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[settings]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='settings-page'>\r\n\t\t\t<div className='settings-page__body'>\r\n\t\t\t\t<h1 className='settings-page__header'>Настройки</h1>\r\n\r\n\t\t\t\t<LoadingOverlay active={settingsState === \"pending\" || saveSettingsState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h3>Подписка на почтовые уведомления:</h3>\r\n\t\t\t\t\t\t<div className='settings-page__settings-row' onClick={() => setGameNotifInput(!gameNotifInput)}>\r\n\t\t\t\t\t\t\t<input type='checkbox' className='settings-page__settings-checkbox' checked={gameNotifInput} onChange={(event) => setGameNotifInput(event.target.checked)} />\r\n\t\t\t\t\t\t\t{\" релиз новых игр\"}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='settings-page__settings-row' onClick={() => setMovieNotifInput(!movieNotifInput)}>\r\n\t\t\t\t\t\t\t<input type='checkbox' className='settings-page__settings-checkbox' checked={movieNotifInput} onChange={(event) => setMovieNotifInput(event.target.checked)} />\r\n\t\t\t\t\t\t\t{\" релиз новых фильмов\"}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='settings-page__settings-row' onClick={() => setShowNotifInput(!showNotifInput)}>\r\n\t\t\t\t\t\t\t<input type='checkbox' className='settings-page__settings-checkbox' checked={showNotifInput} onChange={(event) => setShowNotifInput(event.target.checked)} />\r\n\t\t\t\t\t\t\t{\" релиз новых серий сериалов\"}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className='settings-page__settings-row'>\r\n\t\t\t\t\t\t\t<label htmlFor='privacySelect'>Кто может видеть мой профиль:</label>\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tid='privacySelect'\r\n\t\t\t\t\t\t\t\tname='privacySelect'\r\n\t\t\t\t\t\t\t\tclassName='settings-page__settings-select'\r\n\t\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\t\tsetPrivacySelect(event.target.value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tvalue={privacySelect}>\r\n\t\t\t\t\t\t\t\t<option value='Все'>Все</option>\r\n\t\t\t\t\t\t\t\t<option value='Никто'>Никто</option>\r\n\t\t\t\t\t\t\t\t<option value='Друзья'>Мои подписки</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='settings-page__settings-row' hidden={!(settings.privacy !== privacySelect && privacySelect === \"Никто\")}>\r\n\t\t\t\t\t\t\tВнимание! Полное закрытие профиля удалит вас из подписок других пользователей!\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='settings-page__save-button'\r\n\t\t\t\t\t\tdisabled={!loggedIn}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tpatchSettings({ receive_games_releases: gameNotifInput, receive_movies_releases: movieNotifInput, receive_episodes_releases: showNotifInput, privacy: privacySelect });\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t<p>Ваша почта {user.email}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SettingsPage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport \"./episode-row.sass\";\r\n\r\nfunction DetailedEpisodeRow({ episode, showID, seasonNumber, setShowEpisodeUserStatus, loggedIn }) {\r\n\tlet history = useHistory();\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleDateString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='episode-row'>\r\n\t\t\t<p className='episode-row__date'>{parseDate(episode.tmdb_release_date)}</p>\r\n\t\t\t<div hidden={!loggedIn} className='episode-row__rate'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstart={-1}\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' />))}\r\n\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' title={n} />))}\r\n\t\t\t\t\treadonly={!loggedIn}\r\n\t\t\t\t\tinitialRating={-1}\r\n\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\tsetShowEpisodeUserStatus(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tepisodes: [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttmdb_id: episode.tmdb_id,\r\n\t\t\t\t\t\t\t\t\t\tscore: score,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tshowID\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<a\r\n\t\t\t\tclassName='episode-row__name'\r\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={episode.tmdb_name}>\r\n\t\t\t\tСерия {episode.tmdb_episode_number} - {episode.tmdb_name}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailedEpisodeRow;\r\n","import React, { useEffect } from \"react\";\r\nimport EpisodeRow from \"../EpisodeRow/EpisodeRow\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport classnames from \"classnames\";\r\nimport \"./show-block.sass\";\r\n\r\nfunction ShowBlock({ loggedIn, show, setShowEpisodeUserStatus, className }) {\r\n\tlet history = useHistory();\r\n\r\n\tuseEffect(\r\n\t\t() => {},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show]\r\n\t);\r\n\r\n\tfunction getUserSeasonOpen(showID, seasonNumber) {\r\n\t\tlet localData = localStorage.getItem(`${showID}_${seasonNumber}`);\r\n\t\treturn localData ? localData === \"true\" : true;\r\n\t}\r\n\r\n\tfunction setUserSeasonOpen(showID, seasonNumber, isOpen) {\r\n\t\tlocalStorage.setItem(`${showID}_${seasonNumber}`, isOpen);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classnames(\"show-block\", className)}>\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + \"/show/\" + show.tmdb_id}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + show.tmdb_id);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}>\r\n\t\t\t\t<h4>{show?.tmdb_name}</h4>\r\n\t\t\t</a>\r\n\r\n\t\t\t{show?.seasons.map((season, counter) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<details\r\n\t\t\t\t\t\topen={getUserSeasonOpen(show.tmdb_id, season.tmdb_season_number)}\r\n\t\t\t\t\t\tclassName='show-block__season'\r\n\t\t\t\t\t\tkey={counter}\r\n\t\t\t\t\t\tonToggle={(e) => setUserSeasonOpen(show.tmdb_id, season.tmdb_season_number, e.target.open)}>\r\n\t\t\t\t\t\t<summary>{season.tmdb_name}</summary>\r\n\t\t\t\t\t\t<ul class='show-block__season-ul'>\r\n\t\t\t\t\t\t\t{season.episodes.map((episode, counter) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<li className='show-block__episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t<EpisodeRow episode={episode} showID={show.tmdb_id} seasonNumber={season.tmdb_season_number} setShowEpisodeUserStatus={setShowEpisodeUserStatus} loggedIn={loggedIn} />\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</details>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ShowBlock;\r\n","import React, { useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../../store/AuthStore\";\r\nimport CurrentUserStore from \"../../../store/CurrentUserStore\";\r\nimport ShowStore from \"../../../store/ShowStore\";\r\nimport \"./unwatched-page.sass\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport ShowBlock from \"../ShowBlock/ShowBlock\";\r\n\r\nconst UnwatchedPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { unwatched, requestUnwatched, unwatchedState } = CurrentUserStore;\r\n\tconst { setEpisodesStatus } = ShowStore;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (unwatchedState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${unwatchedState}`);\r\n\t}, [unwatchedState]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUnwatched();\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='unwatched-page'>\r\n\t\t\t<div className='unwatched-page__body'>\r\n\t\t\t\t<h1>Непросмотренные серии</h1>\r\n\t\t\t\t<LoadingOverlay active={unwatchedState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t{unwatched.map((show) => (\r\n\t\t\t\t\t\t<ShowBlock show={show} setShowEpisodeUserStatus={setEpisodesStatus} loggedIn={loggedIn} key={show.id} className='unwatched-page__show-block' />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</LoadingOverlay>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default UnwatchedPage;\r\n","export default __webpack_public_path__ + \"static/media/wrongPage.58faeb13.png\";","import React, { useEffect, useState } from \"react\";\r\nimport image from \"./wrongPage.png\";\r\nimport \"./not-found-page.sass\";\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction NotFoundPage() {\r\n\tconst [angle, setAngle] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\twindow.requestAnimationFrame(() => setAngle(angle + 1));\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[angle]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='not-found-page'>\r\n\t\t\t<div className='not-found-page__body'>\r\n\t\t\t\t<h1>Страница не найдена!</h1>\r\n\t\t\t\t<div style={{ transform: `rotate(${angle}deg)` }}>\r\n\t\t\t\t\t<img src={image} alt='Картинка' className='not-found-page__image' />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default NotFoundPage;\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport HomePage from \"./components/HomePage/HomePage\";\r\nimport GamePage from \"./components/Game/GamePage/GamePage\";\r\nimport MoviePage from \"./components/Movie/MoviePage/MoviePage\";\r\nimport ShowPage from \"./components/Show/Pages/ShowPage/ShowPage\";\r\nimport SeasonPage from \"./components/Show/Pages/SeasonPage/SeasonPage\";\r\nimport EpisodePage from \"./components/Show/Pages/EpisodePage/EpisodePage\";\r\nimport SearchPage from \"./components/Search/SearchPage/SearchPage\";\r\nimport ConfirmPage from \"./components/ConfirmPage/ConfirmPage\";\r\nimport ConfirmPasswordPage from \"./components/ConfirmPasswordPage/ConfirmPasswordPage\";\r\nimport UserPage from \"./components/User/UserPage/UserPage\";\r\nimport CalendarPage from \"./components/Calendar/CalendarPage/CalendarPage\";\r\nimport SettingsPage from \"./components/Settings/SettingsPage/SettingsPage\";\r\nimport UnwatchedPage from \"./components/Unwatched/UnwatchedPage/UnwatchedPage\";\r\nimport NotFoundPage from \"./components/NotFoundPage/NotFoundPage\";\r\n\r\nclass Routes extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route exact path='/' component={HomePage} />\r\n\t\t\t\t<Route exact path='/game/:id' component={GamePage} />\r\n\t\t\t\t<Route exact path='/movie/:id' component={MoviePage} />\r\n\t\t\t\t<Route exact path='/show/:id' component={ShowPage} />\r\n\t\t\t\t<Route exact path='/show/:show_id/season/:number' component={SeasonPage} />\r\n\t\t\t\t<Route exact path='/show/:show_id/season/:season_number/episode/:episode_number' component={EpisodePage} />\r\n\t\t\t\t<Route exact path='/search/:query' component={SearchPage} />\r\n\t\t\t\t<Route exact path='/confirm/' component={ConfirmPage} />\r\n\t\t\t\t<Route exact path='/confirm_password/' component={ConfirmPasswordPage} />\r\n\t\t\t\t<Route exact path='/user/:userID' component={UserPage} />\r\n\t\t\t\t<Route exact path='/user/:userID/:category' component={UserPage} />\r\n\t\t\t\t<Route exact path='/calendar' component={CalendarPage} />\r\n\t\t\t\t<Route exact path='/settings' component={SettingsPage} />\r\n\t\t\t\t<Route exact path='/unwatched' component={UnwatchedPage} />\r\n\t\t\t\t<Route component={NotFoundPage} />\r\n\t\t\t</Switch>\r\n\t\t);\r\n\t}\r\n}\r\n//\r\nexport default Routes;\r\n","import React, { useEffect } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"./store/AuthStore\";\r\nimport \"./app.sass\";\r\n\r\nimport Navbar from \"./components/Navbar/Navbar\";\r\nimport Footer from \"./components/Footer/Footer\";\r\nimport Sidebar from \"./components/Sidebar/Sidebar\";\r\nimport LoginForm from \"./components/Modals/LoginForm/LoginForm\";\r\nimport RegisterForm from \"./components/Modals/RegisterForm/RegisterForm\";\r\nimport ResetPasswordForm from \"./components/Modals/ResetPasswordForm/ResetPasswordForm\";\r\nimport { ToastContainer } from \"react-toastify\";\r\n\r\nimport Routes from \"./Routes\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst App = observer((props) => {\r\n\tconst { checkAuth } = AuthStore;\r\n\r\n\tuseEffect(() => {\r\n\t\tcheckAuth();\r\n\t}, [checkAuth]);\r\n\r\n\treturn (\r\n\t\t<div className='app'>\r\n\t\t\t<div className='app__body'>\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<Navbar />\r\n\t\t\t\t\t<Sidebar />\r\n\t\t\t\t\t<Routes />\r\n\t\t\t\t\t<Footer className='app__footer' />\r\n\t\t\t\t</Router>\r\n\t\t\t</div>\r\n\t\t\t<ToastContainer position='top-center' hideProgressBar newestOnTop closeOnClick autoClose={3000} />\r\n\t\t\t<LoginForm />\r\n\t\t\t<RegisterForm />\r\n\t\t\t<ResetPasswordForm />\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === \"localhost\" ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === \"[::1]\" ||\r\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"load\", () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA\");\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then((registration) => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\"New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { \"Service-Worker\": \"script\" },\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get(\"content-type\");\r\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\"No internet connection found. App is running in offline mode.\");\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif (\"serviceWorker\" in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then((registration) => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\nimport \"mdbreact/dist/css/mdb.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\nserviceWorker.register();\r\n"],"sourceRoot":""}