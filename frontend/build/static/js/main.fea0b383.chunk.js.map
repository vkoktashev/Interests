{"version":3,"sources":["store/actionTypes.js","store/reducers.js","components/HomePage.js","settings.js","services/jwtAuth.js","services/userRequests.js","services/gameRequests.js","services/movieRequests.js","services/showRequests.js","store/actions.js","components/Common/StatusButtonGroup.js","components/Common/FriendsActivityRow.js","components/Common/FriendsActivity.js","components/Game/TimeToBeat.js","components/Common/ScoreBlock.js","components/Game/GamePage.js","components/Movie/MoviePage.js","components/Show/DetailedEpisodeRow.js","components/Show/SeasonBlock.js","components/Show/SeasonsBlock.js","components/Show/ShowPage.js","components/Show/SeasonPage.js","components/Show/EpisodePage.js","components/Search/CardGame.js","components/Search/CardMovie.js","components/Search/CardShow.js","components/Common/CardUser.js","components/Common/CategoriesTab.js","components/Search/SearchPage.js","components/Modals/LoginForm.js","components/Modals/RegistrationForm.js","components/Modals/ResetPasswordForm.js","components/ConfirmPage.js","components/ConfirmPasswordPage.js","components/UserPage/Colors.js","components/UserPage/Calendar/DayInfo.js","components/UserPage/Calendar/CalendarBlock.js","components/UserPage/GameBlock.js","components/UserPage/FriendBlock.js","components/UserPage/MovieBlock.js","components/UserPage/LogRow.js","components/UserPage/UserLogBlock.js","components/UserPage/ShowBlock.js","components/UserPage/UserPage.js","components/Navbar.js","Routes.js","App.js","serviceWorker.js","index.js"],"names":["SET_USER","SET_AUTH","SET_LOGINFORM","SET_REGISTRATEFORM","SET_RESET_PASSWORD_FORM","SET_CONTENT_GAME","SET_CONTENT_GAME_USER_INFO","SET_CONTENT_MOVIE","SET_CONTENT_MOVIE_USER_INFO","SET_CONTENT_SHOW_SEASONS","SET_CONTENT_SHOW_SEASONS_USER_INFO","SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE","SET_CONTENT_SHOW","SET_CONTENT_SHOW_USER_INFO","SET_SEARCH_CONTENT_GAMES","SET_SEARCH_CONTENT_MOVIES","SET_SEARCH_CONTENT_SHOWS","SET_SEARCH_CONTENT_USERS","SET_USER_PAGE_CONTENT","SET_USER_PAGE_FOLLOWING","SET_USER_PAGE_LOGs","SET_USER_PAGE_FRIENDS_LOGS","SET_USER_PAGE_CALENDAR","SET_IS_LOADING_CONTENT_GAME","SET_IS_LOADING_CONTENT_GAME_USER_INFO","SET_IS_LOADING_CONTENT_MOVIE","SET_IS_LOADING_CONTENT_MOVIE_USER_INFO","SET_IS_LOADING_CONTENT_SHOW","SET_IS_LOADING_CONTENT_SHOW_USER_INFO","SET_IS_LOADING_CONTENT_SHOW_SEASONS","SET_IS_LOADING_SEARCH_GAMES","SET_IS_LOADING_SEARCH_MOVIES","SET_IS_LOADING_SEARCH_SHOWS","SET_IS_LOADING_SEARCH_USERS","SET_IS_LOADING_USER_PAGE_CONTENT","SET_IS_LOADING_USER_PAGE_LOGS","SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS","SET_IS_LOADING_USER_PAGE_CALENDAR","AUTH_ERROR","REGISTRATE_ERROR","GAME_REQUEST_ERROR","MOVIE_REQUEST_ERROR","SHOW_REQUEST_ERROR","USER_PAGE_ERROR","RESET_PASSWORD_ERROR","CONFIRM_PASSWORD_ERROR","initialState","Map","auth","loggedIn","user","username","email","id","content","game","main_info","rawg","name","background_image","background_image_additional","developers","hltb","game_image_url","user_info","status","review","score","spent_time","friends_info","movie","tmdb","title","poster_path","show","episode_run_time","showSeasons","searchContent","games","movies","shows","users","userPageContent","stats","userLogs","log","userFriendsLogs","calendar","openedPages","LoginForm","RegistrateForm","ResetPasswordForm","errors","registrate","gameRequest","movieRequest","userPage","resetPassword","confirmPassword","isLoading","contentGame","contentGameUserInfo","contentMovie","contentMovieUserInfo","contentShow","contentShowUserInfo","contentShowSeasons","userPageLogs","userPageFriendsLogs","userPageCalendar","searchGames","searchMovies","searchShows","searchUsers","getLoggedIn","state","get","getUser","getContentGame","getContentGameUserInfo","getContentMovie","getContentMovieUserInfo","getContentShow","getContentShowUserInfo","getContentShowSeasons","seasonNumber","getContentShowSeasonsUserInfo","getSearchContentGames","getSearchContentMovies","getSearchContentShows","getSearchContentUsers","getUserPageContent","getUserPageLogs","getUserPageFriendsLogs","getUserPageCalendar","getAuthError","getRegistrateError","getGameRequestError","getMovieRequestError","getShowRequestError","showRequest","getResetPasswordError","getConfirmPasswordError","getLoginForm","getRegistrateForm","getResetPasswordForm","getIsLoadingContentGame","getIsLoadingContentGameUserInfo","getIsLoadingContentMovie","getIsLoadingContentMovieUserInfo","getIsLoadingContentShow","getIsLoadingContentShowUserInfo","getIsLoadingContentShowSeasons","getIsLoadingSearchGames","getIsLoadingSearchMovies","getIsLoadingSearchShows","getIsLoadingSearchUsers","getIsLoadingUserPageContent","getIsLoadingUserPageLogs","getIsLoadingUserPageFriendsLogs","connect","selectors","className","style","marginTop","marginLeft","href","fontWeight","src","alt","BACKEND_URL","GET_TOKEN_URL","REFRESH_TOKEN_URL","REGISTRATE_URL","CONFIRM_URL","RESET_PASSWORD_URL","CONFIRM_PASSWORD_URL","GET_GAME_URL","SEARCH_GAMES_URL","GET_MOVIE_URL","SEARCH_MOVIES_URL","GET_SHOW_URL","SEARCH_SHOWS_URL","USER_INFO_URL","USER_CALENDAR_URL","SEARCH_USERS_URL","axiosConfig","headers","getToken","password","a","axios","post","urls","res","userData","jwt_decode","data","access","user_id","token","refreshToken","refresh","console","updateToken","registration","response","confirmation","uid64","patch","put","getUserInfo","userID","AuthStr","Authorization","query","params","setUserStatus","is_following","getUserLog","page","resultsOnPage","page_size","getUserFriendsLog","getUserCalendar","getGame","setGameStatus","gameSlug","gamesCount","getGameUserInfo","slug","getMovie","setMovieStatus","getMovieUserInfo","getShow","getShowSeason","showID","getShowEpisode","episodeNumber","setShowStatus","setShowSeasonStatus","setShowEpisodesStatus","episodesList","getShowUserInfo","getShowSeasonUserInfo","seasonID","getShowEpisodeUserInfo","episodeID","checkAuthorization","dispatch","localStorage","getItem","Date","now","type","actionTypes","setItem","resetAuthorization","removeItem","requestShowSeasonsUserInfo","showRequests","then","result","newResult","user_watched_show","episodes","episodes_user_info","toast","error","needUpdate","seasons","episode","indexOf","season_number","push","season","openLoginForm","isOpen","setLoading","setError","isError","defaults","common","StatusButtonGroup","statuses","activeColor","onChangeStatus","userStatus","map","backgroundColor","onClick","intToHours","number","FriendsActivityRow","info","history","useHistory","window","location","origin","e","preventDefault","stop","emptySymbol","far","icon","size","fullSymbol","n","initialRating","readonly","hidden","FriendsActivity","friendInfo","TimeToBeat","hltbInfo","display","gameplay_main","gameplay_main_unit","gameplay_main_extra","gameplay_main_extra_unit","gameplay_completionist","gameplay_completionist_unit","ScoreBlock","text","getColor","requestError","gameIsLoading","gameUserInfo","gameUserInfoIsLoading","requestGame","gameRequests","actions","requestGameUserInfo","getState","useParams","useState","genres","setGenres","setReview","spentTime","setSpentTime","userRate","setUserRate","setDevelopers","date","setDate","gameplay_comletionist","setHtlbInfo","setClear","setClearUI","useEffect","newGenres","i","length","playtime","newDevelopers","released","mas","split","newDate","document","backgroundImage","active","spinner","fontSize","onChange","marginBottom","metacritic","paddingTop","dangerouslySetInnerHTML","__html","description","label","value","event","target","outline","disabled","getElementById","movieIsLoading","movieUserInfo","movieUserInfoIsLoading","requestMovie","movieRequests","requestMovieUserInfo","companies","setCompanies","cast","setCast","director","setDirector","production_companies","newCompanies","newCast","crew","newDirector","job","backdrop_path","original_title","release_date","runtime","tagline","vote_average","overview","DetailedEpisodeRow","setShowEpisodeUserStatus","userInfo","checkAll","userWatchedShow","isChecked","setIsChecked","addEpisode","episode_number","checked","air_date","toLocaleDateString","start","concat","ownProps","showSeason","showSeasonIsLoading","showUserInfo","requestShowSeason","requestShowSeasonUserInfo","setShowSeasonUserStatus","getEpisodeByNumber","open","counter","reverse","SeasonsBlock","needHeader","setNeedHeader","changedEpisodes","setChangedEpisodes","onChangeEpisodes","newChangedEpisodes","index","findIndex","splice","updateEpisodes","showIsLoading","showUserInfoIsLoading","requestShow","setShowUserStatus","requestShowUserInfo","showStatus","firstDate","setFirstDate","lastDate","setLastDate","first_air_date","last_air_date","original_name","number_of_seasons","number_of_episodes","show_id","chartData","setChartData","show_name","newData","Оценка","show_original_name","body","clientHeight","clientWidth","width","height","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","dataKey","interval","tick","fill","tickLine","domain","tickCount","contentStyle","color","stroke","fillOpacity","layout","showEpisode","showEpisodeIsLoading","requestShowEpisode","setEpisodeUserStatus","requestShowEpisodeUserInfo","still_path","CardGame","CardMovie","CardShow","CardUser","CategoriesTab","categories","onChangeCategory","activeCategory","category","gamesIsLoading","moviesIsLoading","showsIsLoading","usersIsLoading","searchGame","searchMovie","results","searchShow","userRequests","queryText","setQueryText","gamesCards","setGamesCards","moviesCards","setMoviesCards","showsCards","setShowsCards","usersCards","setUsersCards","gamesPage","setGamesPage","moviesPage","setMoviesPage","showsPage","setShowsPage","setActiveCategory","md","onSubmit","placeholder","aria-label","authError","closeForm","logIn","login","openResetPasswordForm","setPassword","setLogin","toggle","centered","htmlFor","registrateArror","passwordConfirm","setPasswordConfirm","setEmail","outlineColor","resetPasswordError","confirmEmailRequest","success","search","URLSearchParams","confirmPasswordError","COLORS","DayInfo","day","year","month","weekday","rawg_slug","rawg_name","rawg_id","tmdb_id","tmdb_name","tmdb_show","tmdb_season_number","tmdb_episode_number","CalendarBlock","currentDay","setCurrentDay","formatDate","defaultView","minDetail","locale","minDate","tileContent","activeStartDate","view","pad","getFullYear","getMonth","getDate","GameBlock","gameChartData","setGameChartData","gameColumns","field","sort","columns","rows","gameTableData","setGameTableData","name2","parseFloat","genre","spent_time_percent","Процент","b","count","total_spent_time","striped","bordered","small","barReverse","noBottomColumns","noRecordsFoundLabel","paginationLabel","entriesLabel","searchLabel","responsive","Math","min","angle","tickMargin","itemStyle","borderRadius","cursor","entry","FriendBlock","MovieBlock","movieChartData","setMovieChartData","movieColumns","movieTableData","setMovieTableData","LogRow","showUsername","created","toLocaleTimeString","action","actionResult","translateActionType","action_type","action_result","actionType","translateType","parent_name","nameToLink","target_id","actionResultToStr","UserLogBlock","logs","onChangePage","logsByDay","setLogsByDay","currentPage","setCurrentPage","newLogs","getDay","groupLogsByDay","dayLog","has_next_page","ShowBlock","showChartData","setShowChartData","showColumns","showTableData","setShowTableData","userIsLoading","userLogsIsLoading","userFriendsLogsIsLoading","currentUserInfo","userCalendar","getUserLogs","getUserFriendsLogs","section","lastActivity","setLastActivity","String","last_activity","toLocaleString","is_followed","undefined","cx","cy","outerRadius","labelLine","minAngle","verticalAlign","horizontalAlign","pageNumber","followed_users","onLoginClick","onLogoutClick","onRegistrationClick","dark","expand","fixed","to","nav","caret","Routes","exact","path","component","HomePage","GamePage","MoviePage","ShowPage","SeasonPage","EpisodePage","SearchPage","ConfirmPage","ConfirmPasswordPage","UserPage","render","position","hideProgressBar","newestOnTop","closeOnClick","React","Component","onLoad","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","types","setIn","applyMiddleware","thunk","ReactDOM","URL","process","addEventListener","fetch","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.fea0b383.chunk.js","sourcesContent":["export const SET_USER = \"SET_USER\";\r\nexport const SET_AUTH = \"SET_AUTH\";\r\n\r\nexport const SET_LOGINFORM = \"SET_LOGINFORM\";\r\nexport const SET_REGISTRATEFORM = \"SET_REGISTRATEFORM\";\r\nexport const SET_RESET_PASSWORD_FORM = \"SET_RESET_PASSWORD_FORM\";\r\n\r\nexport const SET_CONTENT_GAME = \"SET_CONTENT_GAME\";\r\nexport const SET_CONTENT_GAME_USER_INFO = \"SET_CONTENT_GAME_USER_INFO\";\r\n\r\nexport const SET_CONTENT_MOVIE = \"SET_CONTENT_MOVIE\";\r\nexport const SET_CONTENT_MOVIE_USER_INFO = \"SET_CONTENT_MOVIE_USER_INFO\";\r\n\r\nexport const SET_CONTENT_SHOW_SEASONS = \"SET_CONTENT_SHOW_SEASONS\";\r\nexport const SET_CONTENT_SHOW_SEASONS_USER_INFO = \"SET_CONTENT_SHOW_SEASONS_USER_INFO\";\r\nexport const SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE = \"SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE\";\r\n\r\nexport const SET_CONTENT_SHOW = \"SET_CONTENT_SHOW\";\r\nexport const SET_CONTENT_SHOW_USER_INFO = \"SET_CONTENT_SHOW_USER_INFO\";\r\n\r\nexport const SET_SEARCH_CONTENT_GAMES = \"SET_SEARCH_CONTENT_GAMES\";\r\nexport const SET_SEARCH_CONTENT_MOVIES = \"SET_SEARCH_CONTENT_MOVIES\";\r\nexport const SET_SEARCH_CONTENT_SHOWS = \"SET_SEARCH_CONTENT_SHOWS\";\r\nexport const SET_SEARCH_CONTENT_USERS = \"SET_SEARCH_CONTENT_USERS\";\r\n\r\nexport const SET_USER_PAGE_CONTENT = \"SET_USER_PAGE_CONTENT\";\r\nexport const SET_USER_PAGE_FOLLOWING = \"SET_USER_PAGE_FOLLOWING\";\r\nexport const SET_USER_PAGE_LOGs = \"SET_USER_PAGE_LOGs\";\r\nexport const SET_USER_PAGE_FRIENDS_LOGS = \"SET_USER_PAGE_FRIENDS_LOGS\";\r\nexport const SET_USER_PAGE_CALENDAR = \"SET_USER_PAGE_CALENDAR\";\r\n\r\nexport const SET_IS_LOADING_CONTENT_GAME = \"SET_IS_LOADING_CONTENT_GAME\";\r\nexport const SET_IS_LOADING_CONTENT_GAME_USER_INFO = \"SET_IS_LOADING_CONTENT_GAME_USER_INFO\";\r\nexport const SET_IS_LOADING_CONTENT_MOVIE = \"SET_IS_LOADING_CONTENT_MOVIE\";\r\nexport const SET_IS_LOADING_CONTENT_MOVIE_USER_INFO = \"SET_IS_LOADING_CONTENT_MOVIE_USER_INFO\";\r\nexport const SET_IS_LOADING_CONTENT_SHOW = \"SET_IS_LOADING_CONTENT_SHOW\";\r\nexport const SET_IS_LOADING_CONTENT_SHOW_USER_INFO = \"SET_IS_LOADING_CONTENT_SHOW_USER_INFO\";\r\nexport const SET_IS_LOADING_CONTENT_SHOW_SEASONS = \"SET_IS_LOADING_CONTENT_SHOW_SEASONS\";\r\nexport const SET_IS_LOADING_SEARCH_GAMES = \"SET_IS_LOADING_SEARCH_GAMES\";\r\nexport const SET_IS_LOADING_SEARCH_MOVIES = \"SET_IS_LOADING_SEARCH_MOVIES\";\r\nexport const SET_IS_LOADING_SEARCH_SHOWS = \"SET_IS_LOADING_SEARCH_SHOWS\";\r\nexport const SET_IS_LOADING_SEARCH_USERS = \"SET_IS_LOADING_SEARCH_USERS\";\r\nexport const SET_IS_LOADING_USER_PAGE_CONTENT = \"SET_IS_LOADING_USER_PAGE_CONTENT\";\r\nexport const SET_IS_LOADING_USER_PAGE_LOGS = \"SET_IS_LOADING_USER_PAGE_LOGS\";\r\nexport const SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS = \"SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS\";\r\nexport const SET_IS_LOADING_USER_PAGE_CALENDAR = \"SET_IS_LOADING_USER_PAGE_CALENDAR\";\r\n\r\nexport const AUTH_ERROR = \"AUTH_ERROR\";\r\nexport const REGISTRATE_ERROR = \"REGISTRATE_ERROR\";\r\nexport const GAME_REQUEST_ERROR = \"GAME_REQUEST_ERROR\";\r\nexport const MOVIE_REQUEST_ERROR = \"MOVIE_REQUEST_ERROR\";\r\nexport const SHOW_REQUEST_ERROR = \"SHOW_REQUEST_ERROR\";\r\nexport const USER_PAGE_ERROR = \"USER_PAGE_ERROR\";\r\nexport const RESET_PASSWORD_ERROR = \"RESET_PASSWORD_ERROR\";\r\nexport const CONFIRM_PASSWORD_ERROR = \"CONFIRM_PASSWORD_ERROR\";\r\n","import * as types from \"./actionTypes\";\r\nimport { Map } from \"immutable\";\r\n\r\n// Создаем reducer с начальным состоянием.\r\nconst initialState = Map({\r\n\tauth: { loggedIn: false },\r\n\tuser: { username: \"\", email: \"\", id: null },\r\n\tcontent: {\r\n\t\tgame: {\r\n\t\t\tmain_info: { rawg: { name: \"\", background_image: \"\", background_image_additional: \"\", developers: [{}] }, hltb: { game_image_url: \"\" } },\r\n\t\t\tuser_info: { status: null, review: \"\", score: 0, spent_time: 0, friends_info: [] },\r\n\t\t},\r\n\t\tmovie: { main_info: { tmdb: { title: \"\", poster_path: \"\", developers: [{}] } }, user_info: { status: null, review: \"\", score: 0, friends_info: [] } },\r\n\t\tshow: { main_info: { tmdb: { title: \"\", poster_path: \"\", developers: [{}], episode_run_time: [] } }, user_info: { status: null, review: \"\", score: 0, friends_info: [] } },\r\n\t\tshowSeasons: {},\r\n\t},\r\n\tsearchContent: { games: [], movies: [], shows: [], users: [] },\r\n\tuserPageContent: {\r\n\t\tuser: {\r\n\t\t\tstats: {},\r\n\t\t},\r\n\t\tuserLogs: { log: [] },\r\n\t\tuserFriendsLogs: { log: [] },\r\n\t\tcalendar: {},\r\n\t},\r\n\topenedPages: { LoginForm: false, RegistrateForm: false, ResetPasswordForm: false },\r\n\terrors: { auth: false, registrate: false, gameRequest: false, movieRequest: false, userPage: false, resetPassword: false, confirmPassword: false },\r\n\tisLoading: {\r\n\t\tcontentGame: false,\r\n\t\tcontentGameUserInfo: false,\r\n\t\tcontentMovie: false,\r\n\t\tcontentMovieUserInfo: false,\r\n\t\tcontentShow: false,\r\n\t\tcontentShowUserInfo: false,\r\n\t\tcontentShowSeasons: {},\r\n\t\tuserPageContent: false,\r\n\t\tuserPageLogs: false,\r\n\t\tuserPageFriendsLogs: false,\r\n\t\tuserPageCalendar: false,\r\n\t\tsearchGames: false,\r\n\t\tsearchMovies: false,\r\n\t\tsearchShows: false,\r\n\t\tsearchUsers: false,\r\n\t},\r\n});\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\t//Редьюсеры пользовательской информации\r\n\t\tcase types.SET_USER:\r\n\t\t\treturn state.setIn([\"user\"], action.user);\r\n\t\tcase types.SET_AUTH:\r\n\t\t\treturn state.setIn([\"auth\"], action.auth);\r\n\r\n\t\t//Редьюсеры информации об игре\r\n\t\tcase types.SET_CONTENT_GAME:\r\n\t\t\treturn state.setIn([\"content\", \"game\", \"main_info\"], action.game);\r\n\t\tcase types.SET_CONTENT_GAME_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"game\", \"user_info\"], action.user_info);\r\n\r\n\t\t//Редьюсеры информации о фильме\r\n\t\tcase types.SET_CONTENT_MOVIE:\r\n\t\t\treturn state.setIn([\"content\", \"movie\", \"main_info\"], action.movie);\r\n\t\tcase types.SET_CONTENT_MOVIE_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"movie\", \"user_info\"], action.user_info);\r\n\r\n\t\t//Редьюсеры информации о сериале\r\n\t\tcase types.SET_CONTENT_SHOW:\r\n\t\t\treturn state.setIn([\"content\", \"show\", \"main_info\"], action.show);\r\n\t\tcase types.SET_CONTENT_SHOW_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"show\", \"user_info\"], action.user_info);\r\n\r\n\t\t//Редьюсеры информации о сезонах сериала\r\n\t\tcase types.SET_CONTENT_SHOW_SEASONS:\r\n\t\t\treturn state.setIn([\"content\", \"showSeasons\", action.seasonNumber, \"main_info\"], action.info);\r\n\t\tcase types.SET_CONTENT_SHOW_SEASONS_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"showSeasons\", action.seasonNumber, \"user_info\"], action.user_info);\r\n\t\tcase types.SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE:\r\n\t\t\treturn state.setIn([\"content\", \"showSeasons\", action.seasonNumber, \"user_info\", \"episodes\", action.episodeNumber, \"score\"], action.score);\r\n\r\n\t\t//Редьюсеры результатов поиска\r\n\t\tcase types.SET_SEARCH_CONTENT_GAMES:\r\n\t\t\treturn state.setIn([\"searchContent\", \"games\"], action.games);\r\n\t\tcase types.SET_SEARCH_CONTENT_MOVIES:\r\n\t\t\treturn state.setIn([\"searchContent\", \"movies\"], action.movies);\r\n\t\tcase types.SET_SEARCH_CONTENT_SHOWS:\r\n\t\t\treturn state.setIn([\"searchContent\", \"shows\"], action.shows);\r\n\t\tcase types.SET_SEARCH_CONTENT_USERS:\r\n\t\t\treturn state.setIn([\"searchContent\", \"users\"], action.users);\r\n\r\n\t\t//Редьюсеры страницы профиля\r\n\t\tcase types.SET_USER_PAGE_CONTENT:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"user\"], action.content);\r\n\t\tcase types.SET_USER_PAGE_FOLLOWING:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"user\", \"is_followed\"], action.is_following);\r\n\t\tcase types.SET_USER_PAGE_LOGs:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"userLogs\"], action.logs);\r\n\t\tcase types.SET_USER_PAGE_FRIENDS_LOGS:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"userFriendsLogs\"], action.logs);\r\n\t\tcase types.SET_USER_PAGE_CALENDAR:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"calendar\"], action.data);\r\n\r\n\t\t//Редьюсеры состояния всплывающих окон\r\n\t\tcase types.SET_LOGINFORM:\r\n\t\t\treturn state.setIn([\"openedPages\", \"LoginForm\"], action.isOpen);\r\n\t\tcase types.SET_REGISTRATEFORM:\r\n\t\t\treturn state.setIn([\"openedPages\", \"RegistrateForm\"], action.isOpen);\r\n\t\tcase types.SET_RESET_PASSWORD_FORM:\r\n\t\t\treturn state.setIn([\"openedPages\", \"ResetPasswordForm\"], action.isOpen);\r\n\r\n\t\t//Редьюсеры ошибок\r\n\t\tcase types.AUTH_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"auth\"], action.error);\r\n\t\tcase types.REGISTRATE_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"registrate\"], action.error);\r\n\t\tcase types.GAME_REQUEST_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"gameRequest\"], action.error);\r\n\t\tcase types.MOVIE_REQUEST_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"movieRequest\"], action.error);\r\n\t\tcase types.SHOW_REQUEST_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"showRequest\"], action.error);\r\n\t\tcase types.USER_PAGE_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"userPage\"], action.error);\r\n\t\tcase types.RESET_PASSWORD_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"resetPassword\"], action.error);\r\n\t\tcase types.CONFIRM_PASSWORD_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"confirmPassword\"], action.error);\r\n\r\n\t\t//Редьюсеры состояния загрузки\r\n\t\tcase types.SET_IS_LOADING_CONTENT_GAME:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentGame\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_GAME_USER_INFO:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentGameUserInfo\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_MOVIE:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentMovie\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_MOVIE_USER_INFO:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentMovieUserInfo\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_SHOW:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentShow\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_SHOW_USER_INFO:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentShowUserInfo\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_SHOW_SEASONS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentShowSeasons\", action.seasonNumber], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_GAMES:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchGames\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_MOVIES:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchMovies\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_SHOWS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchShows\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_USERS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchUsers\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_PAGE_CONTENT:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userPageContent\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_PAGE_LOGS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userPageLogs\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userPageFriendsLogs\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_PAGE_CALENDAR:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userPageCalendar\"], action.isLoading);\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n//Селекторы пользовательской информации\r\nexport function getLoggedIn(state) {\r\n\treturn state.get(\"auth\").loggedIn;\r\n}\r\nexport function getAuth(state) {\r\n\treturn state.get(\"auth\");\r\n}\r\nexport function getUser(state) {\r\n\treturn state.get(\"user\");\r\n}\r\n\r\n//Селекторы информации о контенте\r\nexport function getContentGame(state) {\r\n\treturn state.get(\"content\").game.main_info;\r\n}\r\nexport function getContentGameUserInfo(state) {\r\n\treturn state.get(\"content\").game.user_info;\r\n}\r\nexport function getContentMovie(state) {\r\n\treturn state.get(\"content\").movie.main_info;\r\n}\r\nexport function getContentMovieUserInfo(state) {\r\n\treturn state.get(\"content\").movie.user_info;\r\n}\r\nexport function getContentShow(state) {\r\n\treturn state.get(\"content\").show.main_info;\r\n}\r\nexport function getContentShowUserInfo(state) {\r\n\treturn state.get(\"content\").show.user_info;\r\n}\r\nexport function getContentShowSeasons(state, seasonNumber) {\r\n\treturn state.get(\"content\").showSeasons[seasonNumber]?.main_info;\r\n}\r\nexport function getContentShowSeasonsUserInfo(state, seasonNumber) {\r\n\treturn state.get(\"content\").showSeasons[seasonNumber]?.user_info;\r\n}\r\n\r\n//Селекторы поисковых результатов\r\nexport function getSearchContentGames(state) {\r\n\treturn state.get(\"searchContent\").games;\r\n}\r\nexport function getSearchContentMovies(state) {\r\n\treturn state.get(\"searchContent\").movies;\r\n}\r\nexport function getSearchContentShows(state) {\r\n\treturn state.get(\"searchContent\").shows;\r\n}\r\nexport function getSearchContentUsers(state) {\r\n\treturn state.get(\"searchContent\").users;\r\n}\r\n\r\n//Селекторы страницы профиля\r\nexport function getUserPageContent(state) {\r\n\treturn state.get(\"userPageContent\").user;\r\n}\r\nexport function getUserPageLogs(state) {\r\n\treturn state.get(\"userPageContent\").userLogs;\r\n}\r\nexport function getUserPageFriendsLogs(state) {\r\n\treturn state.get(\"userPageContent\").userFriendsLogs;\r\n}\r\nexport function getUserPageCalendar(state) {\r\n\treturn state.get(\"userPageContent\").calendar;\r\n}\r\n\r\n//Селекторы ошибок\r\nexport function getAuthError(state) {\r\n\treturn state.get(\"errors\").auth;\r\n}\r\nexport function getRegistrateError(state) {\r\n\treturn state.get(\"errors\").registrate;\r\n}\r\nexport function getGameRequestError(state) {\r\n\treturn state.get(\"errors\").gameRequest;\r\n}\r\nexport function getMovieRequestError(state) {\r\n\treturn state.get(\"errors\").movieRequest;\r\n}\r\nexport function getShowRequestError(state) {\r\n\treturn state.get(\"errors\").showRequest;\r\n}\r\nexport function getUserPageError(state) {\r\n\treturn state.get(\"errors\").userPage;\r\n}\r\nexport function getResetPasswordError(state) {\r\n\treturn state.get(\"errors\").resetPassword;\r\n}\r\nexport function getConfirmPasswordError(state) {\r\n\treturn state.get(\"errors\").confirmPassword;\r\n}\r\n\r\n//Селекторы состояния высплывающих окон\r\nexport function getLoginForm(state) {\r\n\treturn state.get(\"openedPages\").LoginForm;\r\n}\r\nexport function getRegistrateForm(state) {\r\n\treturn state.get(\"openedPages\").RegistrateForm;\r\n}\r\nexport function getResetPasswordForm(state) {\r\n\treturn state.get(\"openedPages\").ResetPasswordForm;\r\n}\r\n\r\n//Селекторы состояния загрузки\r\nexport function getIsLoadingContentGame(state) {\r\n\treturn state.get(\"isLoading\").contentGame;\r\n}\r\nexport function getIsLoadingContentGameUserInfo(state) {\r\n\treturn state.get(\"isLoading\").contentGameUserInfo;\r\n}\r\nexport function getIsLoadingContentMovie(state) {\r\n\treturn state.get(\"isLoading\").contentMovie;\r\n}\r\nexport function getIsLoadingContentMovieUserInfo(state) {\r\n\treturn state.get(\"isLoading\").contentMovieUserInfo;\r\n}\r\nexport function getIsLoadingContentShow(state) {\r\n\treturn state.get(\"isLoading\").contentShow;\r\n}\r\nexport function getIsLoadingContentShowUserInfo(state) {\r\n\treturn state.get(\"isLoading\").contentShowUserInfo;\r\n}\r\nexport function getIsLoadingContentShowSeasons(state, seasonNumber) {\r\n\treturn state.get(\"isLoading\").contentShowSeasons[seasonNumber];\r\n}\r\nexport function getIsLoadingSearchGames(state) {\r\n\treturn state.get(\"isLoading\").searchGames;\r\n}\r\nexport function getIsLoadingSearchMovies(state) {\r\n\treturn state.get(\"isLoading\").searchMovies;\r\n}\r\nexport function getIsLoadingSearchShows(state) {\r\n\treturn state.get(\"isLoading\").searchShows;\r\n}\r\nexport function getIsLoadingSearchUsers(state) {\r\n\treturn state.get(\"isLoading\").searchUsers;\r\n}\r\nexport function getIsLoadingSearchAll(state) {\r\n\treturn state.get(\"isLoading\").searchUsers || state.get(\"isLoading\").searchMovies || state.get(\"isLoading\").searchGames;\r\n}\r\nexport function getIsLoadingUserPageContent(state) {\r\n\treturn state.get(\"isLoading\").userPageContent;\r\n}\r\nexport function getIsLoadingUserPageLogs(state) {\r\n\treturn state.get(\"isLoading\").userPageLogs;\r\n}\r\nexport function getIsLoadingUserPageFriendsLogs(state) {\r\n\treturn state.get(\"isLoading\").userPageFriendsLogs;\r\n}\r\nexport function getIsLoadingUserPageCalendar(state) {\r\n\treturn state.get(\"isLoading\").userPageCalendar;\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../store/reducers\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction HomePage({ user }) {\r\n\treturn (\r\n\t\t<div className='bg'>\r\n\t\t\t<h2 style={{ marginTop: \"70px\", marginLeft: \"30px\" }}>Добро пожаловать на Interests!</h2>\r\n\t\t\t<h4 style={{ marginLeft: \"30px\" }}>\r\n\t\t\t\tГлавная страница ещё не готова, однако можно воспользоваться{\" \"}\r\n\t\t\t\t<a href='/search/example' style={{ fontWeight: \"600\" }}>\r\n\t\t\t\t\tпоиском\r\n\t\t\t\t</a>{\" \"}\r\n\t\t\t\tили проверить свой{\" \"}\r\n\t\t\t\t<a href={\"/user/\" + user.id} style={{ fontWeight: \"600\" }}>\r\n\t\t\t\t\tпрофиль\r\n\t\t\t\t</a>\r\n\t\t\t\t, если вы уже зарегистрированы\r\n\t\t\t</h4>\r\n\t\t\t<img src='images/logo192.png' style={{ marginLeft: \"20px\" }} alt='Картинка' />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: selectors.getUser(state),\r\n});\r\n\r\nconst mapDispatchToProps = () => {\r\n\treturn {};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePage);\r\n","/** Время жизни токена в миллисекундах, после истечения которого будет запрошен новый токен*/\r\nexport const TOKEN_LIFETIME = 290000;\r\n/**Адрес сервера*/\r\nexport const BACKEND_URL = \"http://35.193.124.214:8001/\";\r\n/**Адрес получения токена */\r\nexport const GET_TOKEN_URL = BACKEND_URL + \"users/auth/login/\";\r\n/**Адрес обновления токена */\r\nexport const REFRESH_TOKEN_URL = BACKEND_URL + \"users/auth/refresh-token/\";\r\n/**Адрес регистрации */\r\nexport const REGISTRATE_URL = BACKEND_URL + \"users/auth/signup/\";\r\n/**Адрес подтверждения почты */\r\nexport const CONFIRM_URL = BACKEND_URL + \"users/auth/confirm_email/\";\r\n/**Адрес сброса пароля */\r\nexport const RESET_PASSWORD_URL = BACKEND_URL + \"users/auth/password_reset/\";\r\n/**Адрес подтверждения сброса пароля */\r\nexport const CONFIRM_PASSWORD_URL = BACKEND_URL + \"users/auth/confirm_password_reset/\";\r\n/**Адрес запроса игры */\r\nexport const GET_GAME_URL = BACKEND_URL + \"games/game/\";\r\n/**Адрес поиска игр */\r\nexport const SEARCH_GAMES_URL = BACKEND_URL + \"games/search/\";\r\n/**Адрес запроса фильма */\r\nexport const GET_MOVIE_URL = BACKEND_URL + \"movies/movie/\";\r\n/**Адрес поиска фильмов */\r\nexport const SEARCH_MOVIES_URL = BACKEND_URL + \"movies/search/\";\r\n/**Адрес запроса сериала */\r\nexport const GET_SHOW_URL = BACKEND_URL + \"shows/show/\";\r\n/**Адрес поиска сериалов */\r\nexport const SEARCH_SHOWS_URL = BACKEND_URL + \"shows/search/\";\r\n/**Адрес получения информации о пользователе */\r\nexport const USER_INFO_URL = BACKEND_URL + \"users/user/\";\r\n/**Адрес получения календаря релизов пользователя */\r\nexport const USER_CALENDAR_URL = BACKEND_URL + \"users/user/release_calendar/\";\r\n/**Адрес поиска пользователей */\r\nexport const SEARCH_USERS_URL = BACKEND_URL + \"users/search/\";\r\n","import axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport * as urls from \"../settings\";\r\n\r\nlet axiosConfig = {\r\n\theaders: {\r\n\t\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n\t},\r\n};\r\n\r\n/**\r\n * ПОлучение токена авторизации. Токен сохраняется в localStorage\r\n * @param {string} username Имя пользователя\r\n * @param {string} password Пароль\r\n */\r\nexport async function getToken(username, password) {\r\n\ttry {\r\n\t\tconst res = await axios.post(\r\n\t\t\turls.GET_TOKEN_URL,\r\n\t\t\t{\r\n\t\t\t\tusername: username,\r\n\t\t\t\tpassword: password,\r\n\t\t\t},\r\n\t\t\taxiosConfig\r\n\t\t);\r\n\r\n\t\tlet userData = jwt_decode(res.data.access);\r\n\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\t\treturn { token: res.data.access, refreshToken: res.data.refresh, user: user };\r\n\t} catch (e) {\r\n\t\tconsole.log(\"axios error: \" + e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Функция обновления токена\r\n */\r\nexport async function updateToken(refreshToken) {\r\n\tif ((typeof refreshToken !== \"undefined\") & (refreshToken != null))\r\n\t\ttry {\r\n\t\t\tconst res = await axios.post(\r\n\t\t\t\turls.REFRESH_TOKEN_URL,\r\n\t\t\t\t{\r\n\t\t\t\t\trefresh: refreshToken,\r\n\t\t\t\t},\r\n\t\t\t\taxiosConfig\r\n\t\t\t);\r\n\r\n\t\t\tlet userData = jwt_decode(res.data.access);\r\n\t\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\t\t\treturn { token: res.data.access, user: user };\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(\"exios error: \" + e);\r\n\t\t\treturn null;\r\n\t\t}\r\n\treturn null;\r\n}\r\n\r\nexport async function registration(username, email, password) {\r\n\ttry {\r\n\t\tconst res = await axios.post(\r\n\t\t\turls.REGISTRATE_URL,\r\n\t\t\t{\r\n\t\t\t\tusername: username,\r\n\t\t\t\temail: email,\r\n\t\t\t\tpassword: password,\r\n\t\t\t},\r\n\t\t\taxiosConfig\r\n\t\t);\r\n\t\tlet data = res.data;\r\n\t\tdata.status = res.status;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n\r\nexport async function confirmation(uid64, token) {\r\n\ttry {\r\n\t\tconst res = await axios.patch(urls.CONFIRM_URL + \"?uid64=\" + uid64 + \"&token=\" + token);\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n\r\nexport async function resetPassword(email) {\r\n\ttry {\r\n\t\tconst res = await axios.put(urls.RESET_PASSWORD_URL, { email: email }, axiosConfig);\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n\r\nexport async function confirmPassword(token, password) {\r\n\ttry {\r\n\t\tconst res = await axios.patch(urls.CONFIRM_PASSWORD_URL + \"?reset_token=\" + token, { password: password }, axiosConfig);\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n","import axios from \"axios\";\r\nimport { USER_INFO_URL, SEARCH_USERS_URL, USER_CALENDAR_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о пользователе\r\n * @param {string} token Токен доступа\r\n * @param {string} userID ID пользователя\r\n * @returns {object} Информация о пользователе\r\n */\r\nexport async function getUserInfo(token, userID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/\");\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск пользователей\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchUsers(query) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_USERS_URL, { params: { query: query } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса пользовтеля (добавить в друзья и тд)\r\n * @param {string} token Токен доступа\r\n * @param {boolean} is_following Статус фильма\r\n * @param {string} userID ID пользовтеля\r\n */\r\nexport async function setUserStatus(token, is_following, userID) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(USER_INFO_URL + userID + \"/follow/\", is_following, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {string} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserLog(token, userID, page, resultsOnPage) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage } }, { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage } });\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог друзей пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {int} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserFriendsLog(token, userID, page, resultsOnPage) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/friends_log/\", { params: { page: page, page_size: resultsOnPage }, headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий календарь релизов пользователя\r\n */\r\nexport async function getUserCalendar(token) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(USER_CALENDAR_URL, { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t\t/*return {\r\n\t\t\t\"2021-02-01\": {\r\n\t\t\t\tgames: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 572,\r\n\t\t\t\t\t\trawg_name: \"В тылу врага 2: Братья по оружию\",\r\n\t\t\t\t\t\trawg_slug: \"2-28\",\r\n\t\t\t\t\t\trawg_id: 37986,\r\n\t\t\t\t\t\thltb_name: \"\",\r\n\t\t\t\t\t\thltb_id: null,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 572,\r\n\t\t\t\t\t\trawg_name: \"Minecraft: Dungeons\",\r\n\t\t\t\t\t\trawg_slug: \"minecraft-dungeons\",\r\n\t\t\t\t\t\trawg_id: 257195,\r\n\t\t\t\t\t\thltb_name: \"\",\r\n\t\t\t\t\t\thltb_id: null,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tmovies: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 309,\r\n\t\t\t\t\t\timdb_id: \"tt1630029\",\r\n\t\t\t\t\t\ttmdb_id: 76600,\r\n\t\t\t\t\t\ttmdb_original_name: \"Avatar 2\",\r\n\t\t\t\t\t\ttmdb_name: \"Аватар 2\",\r\n\t\t\t\t\t\ttmdb_runtime: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tepisodes: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tshow_name: \"Теория  большого взрыва\",\r\n\t\t\t\t\t\tshow_id: 1418,\r\n\t\t\t\t\t\tseason_number: 0,\r\n\t\t\t\t\t\tepisode_number: 1,\r\n\t\t\t\t\t\tid: 64739,\r\n\t\t\t\t\t\tname: \"Эпизод 1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t};*/\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n","import axios from \"axios\";\r\nimport { GET_GAME_URL, SEARCH_GAMES_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об игре\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID игры\r\n * @returns {object} Информация об игре\r\n */\r\nexport async function getGame(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_GAME_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_GAME_URL + id + \"/\");\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса игры\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус игры\r\n * @param {string} gameSlug Слаг игры\r\n */\r\nexport async function setGameStatus(token, gameSlug, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\r\n\t\tconst res = await axios.put(GET_GAME_URL + gameSlug + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск игр\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchGames(query, page, gamesCount) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_GAMES_URL, { params: { query: query, page: page, page_size: gamesCount } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для игры\r\n * @param {string} slug slug игры\r\n * @param {int} page страница\r\n */\r\nexport async function getGameUserInfo(token, slug) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_GAME_URL + slug + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n","import axios from \"axios\";\r\nimport { SEARCH_MOVIES_URL, GET_MOVIE_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о фильме\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID фильма\r\n * @returns {object} Информация о фильме\r\n */\r\nexport async function getMovie(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/\");\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса фильма\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус фильма\r\n * @param {string} movieID ID фильма\r\n */\r\nexport async function setMovieStatus(token, id, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_MOVIE_URL + id + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск фильмов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchMovies(query, page) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_MOVIES_URL, { params: { query: query, page: page } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для фильма\r\n * @param {string} id id фильма\r\n */\r\nexport async function getMovieUserInfo(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n","import axios from \"axios\";\r\nimport { SEARCH_SHOWS_URL, GET_SHOW_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сериале\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID сериала\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShow(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + id + \"/\");\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сезоне сериала\r\n * @param {string} token Токен доступа\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowSeason(token, showID, seasonNumber) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber, { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber);\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о серии сериала\r\n * @param {string} token Токен доступа\r\n * @param {string} showID ID сериала\r\n * @param {string} seasonNumber номер сезона\r\n * @param {string} episodeNumber номер эпизода\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowEpisode(token, showID, seasonNumber, episodeNumber) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber, { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber);\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус сериала\r\n * @param {string} id ID сериала\r\n */\r\nexport async function setShowStatus(token, id, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_SHOW_URL + id + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус сезона сериала\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n */\r\nexport async function setShowSeasonStatus(token, showID, seasonNumber, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} episodesList Список объектов эпизодов\r\n * @param {string} showID ID сериала\r\n */\r\nexport async function setShowEpisodesStatus(token, showID, episodesList) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_SHOW_URL + showID + \"/episodes/\", episodesList, { headers: { Authorization: AuthStr } });\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск сериалов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchShows(query, page) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_SHOWS_URL, { params: { query: query, page: page } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowUserInfo(token, showID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сезона сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowSeasonUserInfo(token, showID, seasonID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для эпизода сериала\r\n * @param {string} showID id сериала\r\n * @param {int} page страница\r\n */\r\nexport async function getShowEpisodeUserInfo(token, showID, seasonID, episodeID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/episode/\" + episodeID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n","import * as actionTypes from \"./actionTypes\";\r\nimport * as selectors from \"./reducers\";\r\nimport * as auth from \"../services/jwtAuth\";\r\nimport { TOKEN_LIFETIME } from \"../settings\";\r\nimport * as userRequests from \"../services/userRequests\";\r\nimport * as gameRequests from \"../services/gameRequests\";\r\nimport * as movieRequests from \"../services/movieRequests\";\r\nimport * as showRequests from \"../services/showRequests\";\r\nimport { toast } from \"react-toastify\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nexport function tryAuth(login, password) {\r\n\treturn async (dispatch) => {\r\n\t\tsetError(dispatch, actionTypes.AUTH_ERROR, false);\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await auth.getToken(login, password);\r\n\t\t\tif (res !== null) {\r\n\t\t\t\tlocalStorage.setItem(\"refreshToken\", res.refreshToken);\r\n\t\t\t\tlocalStorage.setItem(\"token\", res.token);\r\n\t\t\t\tlocalStorage.setItem(\"tokenTime\", Date.now());\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\t\t\tauth: { loggedIn: true },\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\t\tuser: res.user,\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_LOGINFORM,\r\n\t\t\t\t\tisOpen: false,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsetError(dispatch, actionTypes.AUTH_ERROR, true);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetError(dispatch, actionTypes.AUTH_ERROR, true);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function checkAuthorization() {\r\n\treturn async (dispatch) => {\r\n\t\tif ((localStorage.getItem(\"token\") === null) | (Date.now() - localStorage.getItem(\"tokenTime\") > TOKEN_LIFETIME)) {\r\n\t\t\tconst res = await auth.updateToken(localStorage.getItem(\"refreshToken\"));\r\n\t\t\tif (res !== null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\t\t\tauth: { loggedIn: true },\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\t\tuser: res.user,\r\n\t\t\t\t});\r\n\t\t\t\tlocalStorage.setItem(\"token\", res.token);\r\n\t\t\t\tlocalStorage.setItem(\"tokenTime\", Date.now());\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\t//toast.warn(\"Произошла ошибка авторизации. Зайдите ещё раз\");\r\n\t\t\t\tdispatch(resetAuthorization());\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet userData = jwt_decode(localStorage.getItem(\"token\"));\r\n\t\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\tuser: user,\r\n\t\t\t});\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\t\tauth: { loggedIn: true },\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function resetAuthorization() {\r\n\treturn async (dispatch) => {\r\n\t\tlocalStorage.removeItem(\"refreshToken\");\r\n\t\tlocalStorage.removeItem(\"token\");\r\n\t\tlocalStorage.removeItem(\"tokenTime\");\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\tauth: { loggedIn: false },\r\n\t\t});\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\tuser: { username: \"\", id: null, email: \"\" },\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function registrationRequest(username, email, password) {\r\n\treturn async (dispatch) => {\r\n\t\tsetError(dispatch, actionTypes.REGISTRATE_ERROR, false);\r\n\t\tauth.registration(username, email, password).then((result) => {\r\n\t\t\tif ((result.status === 201) | (result.status === 200)) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\t\tuser: { login: result.username, email: result.email },\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tfor (let error in result.data) toast.error(result.data[error][0]);\r\n\r\n\t\t\t\tsetError(dispatch, actionTypes.REGISTRATE_ERROR, true);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function confirmEmailRequest(uid64, token) {\r\n\treturn async () => {\r\n\t\tauth.confirmation(uid64, token).then((result) => {\r\n\t\t\tif (result.status === 200) {\r\n\t\t\t\ttoast.success(\"Почта подтверждена!\");\r\n\t\t\t} else {\r\n\t\t\t\tif (result.data) toast.error(result.data.error);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestGame(id) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME, true);\r\n\t\tsetError(dispatch, actionTypes.GAME_REQUEST_ERROR, false);\r\n\t\tgameRequests.getGame(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_GAME,\r\n\t\t\t\t\tgame: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Игра не найдена!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.GAME_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestGameUserInfo(slug) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME_USER_INFO, true);\r\n\t\tgameRequests.getGameUserInfo(localStorage.getItem(\"token\"), slug).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_GAME_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestMovie(id) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE, true);\r\n\t\tsetError(dispatch, actionTypes.MOVIE_REQUEST_ERROR, false);\r\n\t\tmovieRequests.getMovie(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_MOVIE,\r\n\t\t\t\t\tmovie: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Фильм не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.MOVIE_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestMovieUserInfo(id) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE_USER_INFO, true);\r\n\t\tmovieRequests.getMovieUserInfo(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_MOVIE_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShow(id) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, true);\r\n\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, false);\r\n\t\tshowRequests.getShow(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW,\r\n\t\t\t\t\tshow: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Сериал не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowSeason(showID, seasonNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, true);\r\n\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, false);\r\n\t\tshowRequests.getShowSeason(localStorage.getItem(\"token\"), showID, seasonNumber).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW,\r\n\t\t\t\t\tshow: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Сериал не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowSeasons(showID, seasonNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\tseasonNumber: seasonNumber,\r\n\t\t\tisLoading: true,\r\n\t\t});\r\n\t\tshowRequests.getShowSeason(localStorage.getItem(\"token\"), showID, seasonNumber).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_SEASONS,\r\n\t\t\t\t\tseasonNumber: seasonNumber,\r\n\t\t\t\t\tinfo: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Сериал не найден!\");\r\n\t\t\t}\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\t\tseasonNumber: seasonNumber,\r\n\t\t\t\tisLoading: false,\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowEpisode(showID, seasonNumber, episodeNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, true);\r\n\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, false);\r\n\t\tshowRequests.getShowEpisode(localStorage.getItem(\"token\"), showID, seasonNumber, episodeNumber).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW,\r\n\t\t\t\t\tshow: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Серия не найдена!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowUserInfo(id) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, true);\r\n\t\tshowRequests.getShowUserInfo(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowSeasonUserInfo(showID, seasonID) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, true);\r\n\t\tshowRequests.getShowSeasonUserInfo(localStorage.getItem(\"token\"), showID, seasonID).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowSeasonsUserInfo(showID, seasonID) {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\tseasonNumber: seasonID,\r\n\t\t\tisLoading: true,\r\n\t\t});\r\n\t\tshowRequests.getShowSeasonUserInfo(localStorage.getItem(\"token\"), showID, seasonID).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_SEASONS_USER_INFO,\r\n\t\t\t\t\tseasonNumber: seasonID,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки сезона!\");\r\n\t\t\t}\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\t\tseasonNumber: seasonID,\r\n\t\t\t\tisLoading: false,\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowEpisodeUserInfo(showID, seasonID, episodeID) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, true);\r\n\t\tshowRequests.getShowEpisodeUserInfo(localStorage.getItem(\"token\"), showID, seasonID, episodeID).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, user_watched_show: result.user_watched_show, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function setGameStatus(user_info) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tgameRequests.setGameStatus(localStorage.getItem(\"token\"), selectors.getContentGame(getState()).rawg.slug, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_GAME_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function requestUserPageContent(username) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_CONTENT, true);\r\n\t\tsetError(dispatch, actionTypes.USER_PAGE_ERROR, false);\r\n\t\tuserRequests.getUserInfo(localStorage.getItem(\"token\"), username).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_CONTENT,\r\n\t\t\t\t\tcontent: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Профиль не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.USER_PAGE_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_CONTENT, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestUserPageLogs(userID, page, resultsOnPage) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_LOGS, true);\r\n\t\tuserRequests.getUserLog(localStorage.getItem(\"token\"), userID, page, resultsOnPage).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_LOGs,\r\n\t\t\t\t\tlogs: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_LOGS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestUserPageFriendsLogs(userID, page, resultsOnPage) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS, true);\r\n\t\tuserRequests.getUserFriendsLog(localStorage.getItem(\"token\"), userID, page, resultsOnPage).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_FRIENDS_LOGS,\r\n\t\t\t\t\tlogs: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки активности друзей!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestUserPageCalendar() {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_CALENDAR, true);\r\n\t\tuserRequests.getUserCalendar(localStorage.getItem(\"token\")).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_CALENDAR,\r\n\t\t\t\t\tdata: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки календаря!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_CALENDAR, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function searchGames(query, page, gamesCount) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_GAMES, true);\r\n\t\tgameRequests.searchGames(query, page, gamesCount).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_GAMES,\r\n\t\t\t\t\tgames: result,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_GAMES, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function searchMovies(query, page) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_MOVIES, true);\r\n\t\tmovieRequests.searchMovies(query, page).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска фильмов\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_MOVIES,\r\n\t\t\t\t\tmovies: result.results,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_MOVIES, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function searchShows(query, page) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_SHOWS, true);\r\n\t\tshowRequests.searchShows(query, page).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска сериалов\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_SHOWS,\r\n\t\t\t\t\tshows: result.results,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_SHOWS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function setMovieStatus(user_info) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tmovieRequests.setMovieStatus(localStorage.getItem(\"token\"), selectors.getContentMovie(getState()).tmdb.id, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_MOVIE_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setShowStatus(user_info) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tshowRequests.setShowStatus(localStorage.getItem(\"token\"), selectors.getContentShow(getState()).tmdb.id, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_SHOW_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setShowSeasonStatus(user_info, showID, seasonNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tshowRequests.setShowSeasonStatus(localStorage.getItem(\"token\"), showID, seasonNumber, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_SHOW_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setShowEpisodesStatus(episodesList, showID, needUpdate = false) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tshowRequests.setShowEpisodesStatus(localStorage.getItem(\"token\"), showID, episodesList).then((result) => {\r\n\t\t\t\tif ((result.status !== 204) & (result.status !== 200) & (result.status !== 201)) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (needUpdate) {\r\n\t\t\t\t\t\tlet seasons = [];\r\n\t\t\t\t\t\tfor (let episode in episodesList.episodes) if (seasons.indexOf(episodesList.episodes[episode].season_number) === -1) seasons.push(episodesList.episodes[episode].season_number);\r\n\r\n\t\t\t\t\t\tfor (let season in seasons) dispatch(requestShowSeasonsUserInfo(showID, seasons[season]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function searchUsers(query) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_USERS, true);\r\n\t\tuserRequests.searchUsers(query).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_USERS,\r\n\t\t\t\t\tusers: result,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_USERS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function setUserStatus(is_following, userID) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tuserRequests.setUserStatus(localStorage.getItem(\"token\"), is_following, userID).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_FOLLOWING,\r\n\t\t\t\t\t\tis_following: result.is_following,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function resetPassword(email) {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.RESET_PASSWORD_ERROR,\r\n\t\t\terror: false,\r\n\t\t});\r\n\t\tauth.resetPassword(email).then((result) => {\r\n\t\t\tif (result.status !== 200) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.RESET_PASSWORD_ERROR,\r\n\t\t\t\t\terror: result.data.error,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.RESET_PASSWORD_ERROR,\r\n\t\t\t\t\terror: \"ok\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function confirmPassword(token, password) {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.CONFIRM_PASSWORD_ERROR,\r\n\t\t\terror: false,\r\n\t\t});\r\n\t\tauth.confirmPassword(token, password).then((result) => {\r\n\t\t\tif (result.status !== 200) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.CONFIRM_PASSWORD_ERROR,\r\n\t\t\t\t\terror: result.data.error ? result.data.error : \"Неизвестная ошибка\",\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.CONFIRM_PASSWORD_ERROR,\r\n\t\t\t\t\terror: \"ok\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function setUser(user) {\r\n\treturn { type: actionTypes.SET_USER, user: user };\r\n}\r\n\r\nexport function openLoginForm() {\r\n\treturn { type: actionTypes.SET_LOGINFORM, isOpen: true };\r\n}\r\n\r\nexport function closeLoginForm() {\r\n\treturn { type: actionTypes.SET_LOGINFORM, isOpen: false };\r\n}\r\n\r\nexport function openRegistrateForm() {\r\n\treturn { type: actionTypes.SET_REGISTRATEFORM, isOpen: true };\r\n}\r\n\r\nexport function closeRegistrateForm() {\r\n\treturn { type: actionTypes.SET_REGISTRATEFORM, isOpen: false };\r\n}\r\n\r\nexport function openResetPasswordForm() {\r\n\treturn { type: actionTypes.SET_RESET_PASSWORD_FORM, isOpen: true };\r\n}\r\n\r\nexport function closeResetPasswordForm() {\r\n\treturn { type: actionTypes.SET_RESET_PASSWORD_FORM, isOpen: false };\r\n}\r\n\r\nfunction setLoading(dispatch, type, isLoading) {\r\n\tdispatch({\r\n\t\ttype: type,\r\n\t\tisLoading: isLoading,\r\n\t});\r\n}\r\n\r\nfunction setError(dispatch, type, isError) {\r\n\tdispatch({\r\n\t\ttype: type,\r\n\t\terror: isError,\r\n\t});\r\n}\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nfunction StatusButtonGroup({ statuses, activeColor, onChangeStatus, userStatus }) {\r\n\treturn (\r\n\t\t<div className='contentStatuses'>\r\n\t\t\t{statuses.map((status) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={\"contentStatus\"}\r\n\t\t\t\t\tkey={status}\r\n\t\t\t\t\tstyle={{ backgroundColor: userStatus === status ? activeColor : \"#000000\" }}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonChangeStatus(status);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{status}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default StatusButtonGroup;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction FriendsActivityRow({ info }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className='fActivityBlock'>\r\n\t\t\t<h5 className='fActivityUser'>\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={window.location.origin + \"/user/\" + info.user.id}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\thistory.push(\"/user/\" + info.user.id);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{info.user.username}\r\n\t\t\t\t</a>\r\n\t\t\t</h5>\r\n\t\t\t<div className='fActivityInfo'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t\tinitialRating={info.score}\r\n\t\t\t\t\tclassName='fActivityInfoText'\r\n\t\t\t\t\treadonly={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<p className='fActivityInfoText'>Статус: {info.status} </p>\r\n\t\t\t\t<p className='fActivityInfoText' hidden={!info.spent_time}>\r\n\t\t\t\t\tВремя проходения: {info.spent_time} {intToHours(info.spent_time)}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='fActivityInfoText' hidden={info.review === \"\"}>\r\n\t\t\t\t\tОтзыв: {info.review}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default FriendsActivityRow;\r\n","import React from \"react\";\r\nimport FriendsActivityRow from \"./FriendsActivityRow\";\r\n\r\nfunction FriendsActivity({ info }) {\r\n\treturn <div className='friendsBlock'>{typeof info !== \"undefined\" ? info?.map((friendInfo) => <FriendsActivityRow info={friendInfo} key={friendInfo.user.id} />) : \"\"}</div>;\r\n}\r\n\r\nexport default FriendsActivity;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction TimeToBeat({ hltbInfo }) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p style={{ display: \"inline\" }}>Время прохождения: </p>\r\n\t\t\t<div hidden={hltbInfo.gameplay_main < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='light-green-text' title={\"Главный сюжет\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo.gameplay_main} {hltbInfo.gameplay_main_unit}\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t</div>{\" \"}\r\n\t\t\t<p style={{ display: \"inline\" }}> </p>\r\n\t\t\t<div hidden={hltbInfo.gameplay_main_extra < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='yellow-text' title={\"Главный сюжет + побочные задания\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo.gameplay_main_extra} {hltbInfo.gameplay_main_extra_unit}\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t</div>{\" \"}\r\n\t\t\t<p style={{ display: \"inline\" }}> </p>\r\n\t\t\t<div hidden={hltbInfo.gameplay_completionist < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='red-text' title={\"Полное прохождение\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo.gameplay_completionist} {hltbInfo.gameplay_completionist_unit}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TimeToBeat;\r\n","import React from \"react\";\r\n\r\nfunction ScoreBlock({ score, text, className }) {\r\n\tfunction getColor(score) {\r\n\t\tswitch (true) {\r\n\t\t\tcase score >= 80:\r\n\t\t\t\treturn \"metacriticGreen\";\r\n\t\t\tcase score >= 60 && score < 80:\r\n\t\t\t\treturn \"metacriticYellow\";\r\n\t\t\tcase score < 60:\r\n\t\t\t\treturn \"metacriticRed\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"metacriticGreen\";\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div hidden={!score} className={className}>\r\n\t\t\t<div className={\"metacritic \" + getColor(score)}>\r\n\t\t\t\t<p>{score}</p>\r\n\t\t\t</div>\r\n\t\t\t<p className='metacriticText'>{text}</p>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ScoreBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport TimeToBeat from \"./TimeToBeat\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction GamePage({ requestGame, openLoginForm, setGameStatus, requestGameUserInfo, loggedIn, game, gameIsLoading, gameUserInfo, gameUserInfoIsLoading }) {\r\n\tlet { id } = useParams();\r\n\tconst [genres, setGenres] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [spentTime, setSpentTime] = useState(0);\r\n\tconst [userStatus, setUserStatus] = useState(\"Не играл\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [developers, setDevelopers] = useState(\"\");\r\n\tconst [date, setDate] = useState(\"\");\r\n\tconst [hltbInfo, setHtlbInfo] = useState({ gameplay_main_extra: -1, gameplay_main: -1, gameplay_comletionist: -1 });\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetClearUI();\r\n\t\t\trequestGame(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestGame]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestGameUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, loggedIn]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (game.rawg.genres) {\r\n\t\t\tlet newGenres = \"\";\r\n\t\t\tfor (let i = 0; i < game.rawg.genres.length; i++) {\r\n\t\t\t\tnewGenres += game.rawg.genres[i].name;\r\n\t\t\t\tif (i !== game.rawg.genres.length - 1) newGenres += \", \";\r\n\t\t\t}\r\n\t\t\tsetGenres(newGenres);\r\n\t\t}\r\n\r\n\t\tif (game.hltb) {\r\n\t\t\tsetHtlbInfo(game.hltb);\r\n\t\t} else if (game.rawg.playtime) {\r\n\t\t\tsetHtlbInfo({ gameplay_main_extra: game.rawg.playtime, gameplay_main: -1, gameplay_completionist: -1 });\r\n\t\t}\r\n\r\n\t\tif (game.rawg.developers) {\r\n\t\t\tlet newDevelopers = \"\";\r\n\t\t\tfor (let i = 0; i < game.rawg.developers.length; i++) {\r\n\t\t\t\tnewDevelopers += game.rawg.developers[i].name;\r\n\t\t\t\tif (i !== game.rawg.developers.length - 1) newDevelopers += \", \";\r\n\t\t\t}\r\n\t\t\tsetDevelopers(newDevelopers);\r\n\t\t}\r\n\r\n\t\tif (game.rawg.released) {\r\n\t\t\tlet mas = game.rawg.released.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = game.rawg.name;\r\n\t}, [game]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (gameUserInfo?.status) {\r\n\t\t\t\tsetReview(gameUserInfo.review);\r\n\t\t\t\tsetSpentTime(gameUserInfo.spent_time);\r\n\t\t\t\tsetUserStatus(gameUserInfo.status);\r\n\t\t\t\tsetUserRate(gameUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[gameUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetGenres(\"\");\r\n\t\tsetHtlbInfo({ gameplay_main_extra: -1, gameplay_main: -1, gameplay_completionist: -1 });\r\n\t\tsetDevelopers(\"\");\r\n\t\tsetDate(\"\");\r\n\t}\r\n\r\n\tfunction setClearUI() {\r\n\t\tsetReview(\"\");\r\n\t\tsetSpentTime(0);\r\n\t\tsetUserStatus(\"Не играл\");\r\n\t\tsetUserRate(0);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${game.rawg.background_image_additional ? game.rawg.background_image_additional : game.rawg.background_image})` }} />\r\n\t\t\t<LoadingOverlay active={gameIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='gameContentPage'>\r\n\t\t\t\t\t<div className='gameContentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock'>\r\n\t\t\t\t\t\t\t<img src={game.rawg.background_image} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='gameInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{game.rawg.name}</h1>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p className='header'>Разработчики: {developers}</p>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {date}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {genres}</p>\r\n\t\t\t\t\t\t\t\t<TimeToBeat hltbInfo={hltbInfo} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={gameUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: \"10px\" }}\r\n\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не играл\", \"Буду играть\", \"Играю\", \"Дропнул\", \"Прошел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не играл\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={game?.rawg?.metacritic} text='Metascore' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='gameContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{/* <video width='800' height='450' controls='controls' poster={game.rawg?.clip?.preview} src={game.rawg?.clip?.clip} type='video' /> */}\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: game.rawg.description }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='gameReviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={gameUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<MDBInput type='number' id='spentTimeInput' label='Время прохождения (часы)' value={spentTime} onChange={(event) => setSpentTime(event.target.value)} />\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ review: document.getElementById(\"reviewInput\").value, spent_time: document.getElementById(\"spentTimeInput\").value });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='gameFriendsBlock' hidden={!loggedIn | (gameUserInfo?.friends_info?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={gameUserInfo?.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getGameRequestError(state),\r\n\tgame: selectors.getContentGame(state),\r\n\tgameIsLoading: selectors.getIsLoadingContentGame(state),\r\n\tgameUserInfo: selectors.getContentGameUserInfo(state),\r\n\tgameUserInfoIsLoading: selectors.getIsLoadingContentGameUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestGame: (id) => {\r\n\t\t\tdispatch(actions.requestGame(id));\r\n\t\t},\r\n\t\trequestGameUserInfo: (slug) => {\r\n\t\t\tdispatch(actions.requestGameUserInfo(slug));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tsetGameStatus: (status) => {\r\n\t\t\tdispatch(actions.setGameStatus(status));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GamePage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction MoviePage({ requestMovie, movie, movieIsLoading, setMovieStatus, requestMovieUserInfo, movieUserInfo, movieUserInfoIsLoading, loggedIn, openLoginForm }) {\r\n\tlet { id } = useParams();\r\n\tconst [genres, setGenres] = useState(\"\");\r\n\tconst [companies, setCompanies] = useState(\"\");\r\n\tconst [cast, setCast] = useState(\"\");\r\n\tconst [director, setDirector] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestMovie(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestMovie]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestMovieUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (movie.tmdb.genres) {\r\n\t\t\tlet newGenres = \"\";\r\n\t\t\tfor (let i = 0; i < movie.tmdb.genres.length; i++) {\r\n\t\t\t\tnewGenres += movie.tmdb.genres[i].name;\r\n\t\t\t\tif (i !== movie.tmdb.genres.length - 1) newGenres += \", \";\r\n\t\t\t}\r\n\t\t\tsetGenres(newGenres);\r\n\t\t}\r\n\r\n\t\tif (movie.tmdb.production_companies) {\r\n\t\t\tlet newCompanies = \"\";\r\n\t\t\tfor (let i = 0; i < movie.tmdb.production_companies.length; i++) {\r\n\t\t\t\tnewCompanies += movie.tmdb.production_companies[i].name;\r\n\t\t\t\tif (i !== movie.tmdb.production_companies.length - 1) newCompanies += \", \";\r\n\t\t\t}\r\n\t\t\tsetCompanies(newCompanies);\r\n\t\t}\r\n\r\n\t\tif (movie.tmdb.cast) {\r\n\t\t\tlet newCast = \"\";\r\n\t\t\tlet length = movie.tmdb.cast.length > 5 ? 5 : movie.tmdb.cast.length;\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tnewCast += movie.tmdb.cast[i].name;\r\n\t\t\t\tif (i !== length - 1) newCast += \", \";\r\n\t\t\t}\r\n\t\t\tsetCast(newCast);\r\n\t\t}\r\n\r\n\t\tif (movie.tmdb.crew) {\r\n\t\t\tlet newDirector = \"\";\r\n\t\t\tfor (let i = 0; i < movie.tmdb.crew.length; i++) {\r\n\t\t\t\tif (movie.tmdb.crew[i].job === \"Director\") {\r\n\t\t\t\t\tnewDirector = movie.tmdb.crew[i].name;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetDirector(newDirector);\r\n\t\t}\r\n\r\n\t\tdocument.title = movie.tmdb.title;\r\n\t}, [movie]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (movieUserInfo?.status) {\r\n\t\t\t\tsetReview(movieUserInfo.review);\r\n\t\t\t\tsetUserStatus(movieUserInfo.status);\r\n\t\t\t\tsetUserRate(movieUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[movieUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetDirector(\"\");\r\n\t\tsetCast(\"\");\r\n\t\tsetCompanies(\"\");\r\n\t\tsetGenres(\"\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + movie.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={movieIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='movieContentPage'>\r\n\t\t\t\t\t<div className='movieContentHeader'>\r\n\t\t\t\t\t\t<div className='moviePosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + movie.tmdb.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{movie.tmdb.title}</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{movie.tmdb.original_title}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {movie.tmdb.release_date}</p>\r\n\t\t\t\t\t\t\t\t<p>Продолжительность (мин): {movie.tmdb.runtime}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Компания: {companies}</p>\r\n\t\t\t\t\t\t\t\t<p>Слоган: {movie.tmdb.tagline}</p>\r\n\t\t\t\t\t\t\t\t<p>В ролях: {cast}</p>\r\n\t\t\t\t\t\t\t\t<p>Режиссер: {director}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={movieUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={movie.tmdb.vote_average * 10} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='movieContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: movie.tmdb.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieReviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={movieUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ review: document.getElementById(\"reviewInput\").value });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieFriendsBlock' hidden={!loggedIn | (movieUserInfo?.friends_info?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={movieUserInfo?.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getMovieRequestError(state),\r\n\tmovie: selectors.getContentMovie(state),\r\n\tmovieIsLoading: selectors.getIsLoadingContentMovie(state),\r\n\tmovieUserInfo: selectors.getContentMovieUserInfo(state),\r\n\tmovieUserInfoIsLoading: selectors.getIsLoadingContentMovieUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestMovie: (id) => {\r\n\t\t\tdispatch(actions.requestMovie(id));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tsetMovieStatus: (status) => {\r\n\t\t\tdispatch(actions.setMovieStatus(status));\r\n\t\t},\r\n\t\trequestMovieUserInfo: (id) => {\r\n\t\t\tdispatch(actions.requestMovieUserInfo(id));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MoviePage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./style.css\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction DetailedEpisodeRow({ episode, showID, setShowEpisodeUserStatus, loggedIn, userInfo, onChangeStatus, checkAll, userWatchedShow }) {\r\n\tlet history = useHistory();\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [isChecked, setIsChecked] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUserRate(userInfo?.score);\r\n\t\tsetIsChecked(userInfo?.score > -1);\r\n\t}, [userInfo]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (checkAll === -1) {\r\n\t\t\t\tsetIsChecked(false);\r\n\t\t\t\tonChangeStatus({\r\n\t\t\t\t\taddEpisode: userRate > -1,\r\n\t\t\t\t\tepisode: {\r\n\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\tscore: -1,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t} else if (checkAll === 1) {\r\n\t\t\t\tsetIsChecked(true);\r\n\t\t\t\tonChangeStatus({\r\n\t\t\t\t\taddEpisode: !(userRate > -1),\r\n\t\t\t\t\tepisode: {\r\n\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\tscore: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[checkAll]\r\n\t);\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleDateString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='episodeRow detailRow'>\r\n\t\t\t<div className='episodeRowCheckDate'>\r\n\t\t\t\t<div className='episodeRowCheck' hidden={!loggedIn || typeof onChangeStatus === \"undefined\" || !userWatchedShow}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\tchecked={isChecked}\r\n\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\tsetIsChecked(res.target.checked);\r\n\t\t\t\t\t\t\tonChangeStatus({\r\n\t\t\t\t\t\t\t\taddEpisode: res.target.checked === !(userRate > -1),\r\n\t\t\t\t\t\t\t\tepisode: {\r\n\t\t\t\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\t\t\t\tscore: res.target.checked ? 0 : -1,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className='episodeRowDate'>{parseDate(episode.air_date)}</p>\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='episodeRowRate'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstart={-1}\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' />))}\r\n\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' title={n} />))}\r\n\t\t\t\t\treadonly={!loggedIn}\r\n\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\tsetIsChecked(score > -1);\r\n\t\t\t\t\t\t/*if (typeof onChangeStatus!=='undefined')\r\n                                onChangeStatus({\r\n                                    addEpisode: (score>-1) !== (userRate > -1),\r\n                                    episode: {\r\n                                        season_number: episode.season_number,\r\n                                        episode_number: episode.episode_number,\r\n                                        score: (score>-1)?0:-1\r\n                                    } \r\n                                });*/\r\n\t\t\t\t\t\tsetShowEpisodeUserStatus(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tepisodes: [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\t\t\t\t\tscore: score,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tshowID\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<a\r\n\t\t\t\tclassName='episodeRowName episodeLink detailRow'\r\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={episode.name}>\r\n\t\t\t\tСерия {episode.episode_number} - {episode.name}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailedEpisodeRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport DetailedEpisodeRow from \"./DetailedEpisodeRow\";\r\nimport Rating from \"react-rating\";\r\n\r\nfunction SeasonBlock({\r\n\tshowID,\r\n\tseasonNumber,\r\n\tloggedIn,\r\n\topenLoginForm,\r\n\tshowSeason,\r\n\tshowSeasonIsLoading,\r\n\tshowUserInfo,\r\n\trequestShowSeason,\r\n\trequestShowSeasonUserInfo,\r\n\tsetShowEpisodeUserStatus,\r\n\tonChangeStatus,\r\n\tsetShowSeasonUserStatus,\r\n\tuserWatchedShow,\r\n}) {\r\n\tlet history = useHistory();\r\n\tconst [isChecked, setIsChecked] = useState(0);\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetIsChecked(0);\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShowSeason(showID, seasonNumber);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showID, seasonNumber, requestShowSeason]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetIsChecked(0);\r\n\t\t\tsetUserRate(0);\r\n\t\t\tif (loggedIn) requestShowSeasonUserInfo(showID, seasonNumber);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, showID, seasonNumber]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.score) {\r\n\t\t\t\tsetUserRate(showUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction getEpisodeByNumber(episodes, number) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].episode_number === number) return episodes[episode];\r\n\t}\r\n\r\n\treturn (\r\n\t\t<LoadingOverlay active={showSeasonIsLoading} spinner text='Загрузка...'>\r\n\t\t\t<div key={showSeason?.tmdb?.id} className='seasonBlock'>\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='seasonBlockName'>\r\n\t\t\t\t\t<h5> {showSeason?.tmdb?.name} </h5>\r\n\t\t\t\t</a>\r\n\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='seasonBlockName'>\r\n\t\t\t\t\t<Rating\r\n\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\tsetShowSeasonUserStatus({ score: score }, showID, seasonNumber);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\t\t\t\t<details open={true} className='episodeRows'>\r\n\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t<div style={{ marginLeft: \"5px\" }} hidden={!loggedIn || !userWatchedShow}>\r\n\t\t\t\t\t\tВыбрать все&nbsp;\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\tchecked={isChecked > 0}\r\n\t\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{showSeason?.tmdb?.episodes\r\n\t\t\t\t\t\t\t?.map((episode, counter) => (\r\n\t\t\t\t\t\t\t\t<li className='episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t<DetailedEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\tshowID={showID}\r\n\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByNumber(showUserInfo?.episodes, episode?.episode_number)}\r\n\t\t\t\t\t\t\t\t\t\tsetShowEpisodeUserStatus={setShowEpisodeUserStatus}\r\n\t\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => onChangeStatus(status)}\r\n\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\r\n\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t.reverse()}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</details>\r\n\t\t\t</div>\r\n\t\t</LoadingOverlay>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tshowSeason: selectors.getContentShowSeasons(state, ownProps.seasonNumber),\r\n\tshowSeasonIsLoading: selectors.getIsLoadingContentShowSeasons(state, ownProps.seasonNumber),\r\n\tshowUserInfo: selectors.getContentShowSeasonsUserInfo(state, ownProps.seasonNumber),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShowSeason: (showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.requestShowSeasons(showID, seasonNumber));\r\n\t\t},\r\n\t\trequestShowSeasonUserInfo: (showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.requestShowSeasonsUserInfo(showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowSeasonUserStatus: (status, showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.setShowSeasonStatus(status, showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SeasonBlock);\r\n","import React, { useState } from \"react\";\r\nimport \"./style.css\";\r\nimport SeasonBlock from \"./SeasonBlock\";\r\n\r\nfunction SeasonsBlock({ showID, seasons, setShowEpisodeUserStatus, userWatchedShow }) {\r\n\tconst [needHeader, setNeedHeader] = useState(false);\r\n\tconst [changedEpisodes, setChangedEpisodes] = useState([]);\r\n\r\n\tfunction updateEpisodes(episode) {\r\n\t\tlet newChangedEpisodes = changedEpisodes;\r\n\t\tif (episode.addEpisode) newChangedEpisodes.push(episode.episode);\r\n\t\telse {\r\n\t\t\tconst index = newChangedEpisodes.findIndex((i) => i.episode_number === episode.episode.episode_number && i.season_number === episode.episode.season_number);\r\n\t\t\tif (index > -1) newChangedEpisodes.splice(index, 1);\r\n\t\t}\r\n\t\tsetNeedHeader(newChangedEpisodes.length > 0);\r\n\t\tsetChangedEpisodes(newChangedEpisodes);\r\n\t\tconsole.log(newChangedEpisodes);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{seasons\r\n\t\t\t\t?.map((season) => (\r\n\t\t\t\t\t<SeasonBlock\r\n\t\t\t\t\t\tshowID={showID}\r\n\t\t\t\t\t\tseasonNumber={season.season_number}\r\n\t\t\t\t\t\tonChangeEpisodes={(episodes) => {\r\n\t\t\t\t\t\t\tconsole.log(episodes);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tkey={season.season_number}\r\n\t\t\t\t\t\tonChangeStatus={(status) => updateEpisodes(status)}\r\n\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))\r\n\t\t\t\t.reverse()}\r\n\t\t\t<div className='saveEpisodesHeader' hidden={!needHeader}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='saveEpisodesButton'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetShowEpisodeUserStatus({ episodes: changedEpisodes }, showID);\r\n\t\t\t\t\t\tsetNeedHeader(false);\r\n\t\t\t\t\t\tsetChangedEpisodes([]);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tСохранить\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SeasonsBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport SeasonsBlock from \"./SeasonsBlock\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ShowPage({ requestShow, show, showIsLoading, setShowUserStatus, setShowEpisodeUserStatus, requestShowUserInfo, showUserInfo, showUserInfoIsLoading, loggedIn, openLoginForm }) {\r\n\tlet { id } = useParams();\r\n\tconst [genres, setGenres] = useState(\"\");\r\n\tconst [companies, setCompanies] = useState(\"\");\r\n\tconst [showStatus, setShowStatus] = useState(\"\");\r\n\tconst [firstDate, setFirstDate] = useState(\"\");\r\n\tconst [lastDate, setLastDate] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShow(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestShow]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (show.tmdb.genres) {\r\n\t\t\tlet newGenres = \"\";\r\n\t\t\tfor (let i = 0; i < show.tmdb.genres.length; i++) {\r\n\t\t\t\tnewGenres += show.tmdb.genres[i].name;\r\n\t\t\t\tif (i !== show.tmdb.genres.length - 1) newGenres += \", \";\r\n\t\t\t}\r\n\t\t\tsetGenres(newGenres);\r\n\t\t}\r\n\r\n\t\tif (show.tmdb.production_companies) {\r\n\t\t\tlet newCompanies = \"\";\r\n\t\t\tfor (let i = 0; i < show.tmdb.production_companies.length; i++) {\r\n\t\t\t\tnewCompanies += show.tmdb.production_companies[i].name;\r\n\t\t\t\tif (i !== show.tmdb.production_companies.length - 1) newCompanies += \", \";\r\n\t\t\t}\r\n\t\t\tsetCompanies(newCompanies);\r\n\t\t}\r\n\r\n\t\tswitch (show.tmdb.status) {\r\n\t\t\tcase \"Ended\":\r\n\t\t\t\tsetShowStatus(\"Окончен\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Returning Series\":\r\n\t\t\t\tsetShowStatus(\"Продолжается\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Pilot\":\r\n\t\t\t\tsetShowStatus(\"Пилот\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Canceled\":\r\n\t\t\t\tsetShowStatus(\"Отменен\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"In Production\":\r\n\t\t\t\tsetShowStatus(\"В производстве\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Planned\":\r\n\t\t\t\tsetShowStatus(\"Запланирован\");\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tsetShowStatus(show.tmdb.status);\r\n\t\t}\r\n\r\n\t\tif (show.tmdb.first_air_date) {\r\n\t\t\tlet mas = show.tmdb.first_air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetFirstDate(newDate);\r\n\t\t}\r\n\r\n\t\tif (show.tmdb.last_air_date) {\r\n\t\t\tlet mas = show.tmdb.last_air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetLastDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = show.tmdb.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.status) {\r\n\t\t\t\tsetReview(showUserInfo.review);\r\n\t\t\t\tsetUserStatus(showUserInfo.status);\r\n\t\t\t\tsetUserRate(showUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetLastDate(\"\");\r\n\t\tsetFirstDate(\"\");\r\n\t\tsetShowStatus(\"\");\r\n\t\tsetCompanies(\"\");\r\n\t\tsetGenres(\"\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + show.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='showContentPage'>\r\n\t\t\t\t\t<div className='showContentHeader'>\r\n\t\t\t\t\t\t<div className='showPosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + show.tmdb.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{show.tmdb.name}</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{show.tmdb.original_name}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Компания: {companies}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={firstDate === \"\"}>Дата выхода первой серии: {firstDate}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={lastDate === \"\"}>Дата выхода последней серии: {lastDate}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={show.tmdb.episode_run_time ? false : true}>Продолжительность (мин): {show.tmdb.episode_run_time ? show.tmdb.episode_run_time[0] : 0}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество сезонов: {show.tmdb.number_of_seasons}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество серий: {show.tmdb.number_of_episodes}</p>\r\n\t\t\t\t\t\t\t\t<p>Статус: {showStatus}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Смотрю\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={show.tmdb.vote_average * 10} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='showContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.tmdb.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showSeasonsBody'>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Список серий</h3>\r\n\t\t\t\t\t\t\t<SeasonsBlock showID={show.tmdb.id} seasons={show.tmdb.seasons} setShowEpisodeUserStatus={setShowEpisodeUserStatus} userWatchedShow={userStatus !== \"Не смотрел\"} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showReviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ review: document.getElementById(\"reviewInput\").value });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showFriendsBlock' hidden={showUserInfo.friends_info.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={showUserInfo.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getShowRequestError(state),\r\n\tshow: selectors.getContentShow(state),\r\n\tshowIsLoading: selectors.getIsLoadingContentShow(state),\r\n\tshowUserInfo: selectors.getContentShowUserInfo(state),\r\n\tshowUserInfoIsLoading: selectors.getIsLoadingContentShowUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShow: (id) => {\r\n\t\t\tdispatch(actions.requestShow(id));\r\n\t\t},\r\n\t\tsetShowUserStatus: (status) => {\r\n\t\t\tdispatch(actions.setShowStatus(status));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\trequestShowUserInfo: (id) => {\r\n\t\t\tdispatch(actions.requestShowUserInfo(id));\r\n\t\t},\r\n\t\tsetShowEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID, true));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowPage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport DetailedEpisodeRow from \"./DetailedEpisodeRow\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ShowPage({\r\n\trequestShowSeason,\r\n\tshowSeason,\r\n\tshowSeasonIsLoading,\r\n\tsetShowUserStatus,\r\n\tsetShowEpisodeUserStatus,\r\n\trequestShowSeasonUserInfo,\r\n\tshowUserInfo,\r\n\tshowUserInfoIsLoading,\r\n\tloggedIn,\r\n\topenLoginForm,\r\n}) {\r\n\tlet history = useHistory();\r\n\tlet { show_id, number } = useParams();\r\n\tconst [date, setDate] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [chartData, setChartData] = useState([]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShowSeason(show_id, number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, number, requestShowSeason]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowSeasonUserInfo(show_id, number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (showSeason.tmdb.air_date) {\r\n\t\t\tlet mas = showSeason.tmdb.air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = showSeason.tmdb.show_name + \" - \" + showSeason.tmdb.name;\r\n\t}, [showSeason]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (showSeason.tmdb.episodes)\r\n\t\t\tif (showSeason.tmdb.episodes.length > 0) {\r\n\t\t\t\tlet newData = [];\r\n\t\t\t\tfor (let episode in showSeason.tmdb.episodes) {\r\n\t\t\t\t\tif (showSeason.tmdb.episodes[episode].vote_average > 0)\r\n\t\t\t\t\t\tnewData.push({ name: \"Ep \" + showSeason.tmdb.episodes[episode].episode_number, Оценка: showSeason.tmdb.episodes[episode].vote_average });\r\n\t\t\t\t}\r\n\t\t\t\tsetChartData(newData);\r\n\t\t\t}\r\n\t}, [showSeason]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.review) setReview(showUserInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (showUserInfo?.score) setUserRate(showUserInfo.score);\r\n\t\t\telse setUserRate(0);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetDate(\"\");\r\n\t}\r\n\r\n\tfunction getEpisodeByNumber(episodes, number) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].episode_number === number) return episodes[episode];\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + showSeason.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showSeasonIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='showContentPage'>\r\n\t\t\t\t\t<div className='showContentHeader'>\r\n\t\t\t\t\t\t<div className='showPosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + showSeason.tmdb.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{showSeason.tmdb.show_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + showSeason.tmdb.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{showSeason.tmdb.show_original_name + \" - Season \" + showSeason.tmdb.season_number}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={date === \"\"}>Дата выхода: {date}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество серий: {showSeason.tmdb.episodes ? showSeason.tmdb.episodes.length : 0}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !showUserInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ score: score }, show_id, showSeason.tmdb.season_number);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewSeasonInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !showUserInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ review: document.getElementById(\"reviewSeasonInput\").value }, show_id, showSeason.tmdb.season_number);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showContentBody'>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: showSeason.tmdb.overview }} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='showSeasonsBody'>\r\n\t\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Список серий</h3>\r\n\t\t\t\t\t\t\t\t<details open={false} className='episodeRows' style={{ marginBottom: \"15px\" }}>\r\n\t\t\t\t\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t{showSeason.tmdb.episodes\r\n\t\t\t\t\t\t\t\t\t\t\t? showSeason.tmdb.episodes.map((episode) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='episode' key={showSeason.tmdb.id + episode.episode_number}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DetailedEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowID={show_id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByNumber(showUserInfo.episodes, episode.episode_number)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowEpisodeUserStatus={setShowEpisodeUserStatus}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={showUserInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</details>\r\n\t\t\t\t\t\t\t\t<div hidden={!(chartData.length > 0)}>\r\n\t\t\t\t\t\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={200}>\r\n\t\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<XAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={chartData.length * 30}>\r\n\t\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }} layout='vertical'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<YAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} type='category' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<XAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} type='number' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='movieFriendsBlock' hidden={showUserInfo.friends_info.length < 1}>\r\n\t\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t\t<FriendsActivity info={showUserInfo.friends_info} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getShowRequestError(state),\r\n\tshowSeason: selectors.getContentShow(state),\r\n\tshowSeasonIsLoading: selectors.getIsLoadingContentShow(state),\r\n\tshowUserInfo: selectors.getContentShowUserInfo(state),\r\n\tshowUserInfoIsLoading: selectors.getIsLoadingContentShowUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShowSeason: (showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.requestShowSeason(showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowUserStatus: (status, showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.setShowSeasonStatus(status, showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\trequestShowSeasonUserInfo: (showID, seasonID) => {\r\n\t\t\tdispatch(actions.requestShowSeasonUserInfo(showID, seasonID));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowPage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction EpisodePage({ requestShowEpisode, showEpisode, showEpisodeIsLoading, setEpisodeUserStatus, requestShowEpisodeUserInfo, showUserInfo, showUserInfoIsLoading, loggedIn, openLoginForm }) {\r\n\tlet history = useHistory();\r\n\tlet { show_id, season_number, episode_number } = useParams();\r\n\tconst [date, setDate] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShowEpisode(show_id, season_number, episode_number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, season_number, episode_number, requestShowEpisode]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowEpisodeUserInfo(show_id, season_number, episode_number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, season_number, episode_number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (showEpisode.tmdb.air_date) {\r\n\t\t\tlet mas = showEpisode.tmdb.air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = showEpisode.tmdb.show_name + \" - \" + showEpisode.tmdb.name;\r\n\t}, [showEpisode]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.review) setReview(showUserInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (showUserInfo?.score) setUserRate(showUserInfo.score);\r\n\t\t\telse setUserRate(0);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetDate(\"\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + showEpisode.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showEpisodeIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='showContentPage'>\r\n\t\t\t\t\t<div className='showContentHeader'>\r\n\t\t\t\t\t\t<div className='showPosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + showEpisode.tmdb.still_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{showEpisode.tmdb.show_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + showEpisode.tmdb.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>\r\n\t\t\t\t\t\t\t\t{showEpisode.tmdb.show_original_name + \" - Season \" + showEpisode.tmdb.season_number + \" - Episode \" + showEpisode.tmdb.episode_number}{\" \"}\r\n\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={date === \"\"}>Дата выхода: {date}</p>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id + \"/season/\" + season_number}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id + \"/season/\" + season_number);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСезон: {showEpisode.tmdb.season_number}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !showUserInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tstart={-1}\r\n\t\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />))}\r\n\t\t\t\t\t\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />))}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus({ episodes: [{ season_number: season_number, episode_number: episode_number, score: score }] }, show_id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewSeasonInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !showUserInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisodes: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tseason_number: season_number,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode_number: episode_number,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treview: document.getElementById(\"reviewSeasonInput\").value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshow_id\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<ScoreBlock score={showEpisode.tmdb.vote_average * 10} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='showContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: showEpisode.tmdb.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieFriendsBlock' hidden={showUserInfo.friends_info.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={showUserInfo.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getShowRequestError(state),\r\n\tshowEpisode: selectors.getContentShow(state),\r\n\tshowEpisodeIsLoading: selectors.getIsLoadingContentShow(state),\r\n\tshowUserInfo: selectors.getContentShowUserInfo(state),\r\n\tshowUserInfoIsLoading: selectors.getIsLoadingContentShowUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShowEpisode: (showID, seasonNumber, episodeNumber) => {\r\n\t\t\tdispatch(actions.requestShowEpisode(showID, seasonNumber, episodeNumber));\r\n\t\t},\r\n\t\tsetEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\trequestShowEpisodeUserInfo: (showID, seasonID, episodeID) => {\r\n\t\t\tdispatch(actions.requestShowEpisodeUserInfo(showID, seasonID, episodeID));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EpisodePage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardGame({ game }) {\r\n\tlet history = useHistory();\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (game.released) {\r\n\t\t\tlet mas = game.released.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [game]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardGame'>\r\n\t\t\t<div className='searchCardGameImage' style={{ backgroundImage: `url(${game.background_image})` }}>\r\n\t\t\t\t{\" \"}\r\n\t\t\t</div>\r\n\t\t\t<div className='searchCardGameText'>\r\n\t\t\t\t<div className='searchCardGameName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.slug}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + game.slug);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={game.name}>\r\n\t\t\t\t\t\t<h4>{game.name}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n//onMouseDown={mouseDownHandler}\r\n\r\nexport default CardGame;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardMovie({ movie }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (movie.release_date) {\r\n\t\t\tlet mas = movie.release_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [movie]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardMovie'>\r\n\t\t\t<div className='searchCardMovieImage' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + movie.poster_path})` }}>\r\n\t\t\t\t{\" \"}\r\n\t\t\t</div>\r\n\t\t\t<div className='searchCardMovieText'>\r\n\t\t\t\t<div className='searchCardMovieName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={movie.title}>\r\n\t\t\t\t\t\t<h4>{movie.title}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CardMovie;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardShow({ show }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (show.first_air_date) {\r\n\t\t\tlet mas = show.first_air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [show]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardMovie'>\r\n\t\t\t<div className='searchCardMovieImage' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + show.poster_path})` }}>\r\n\t\t\t\t{\" \"}\r\n\t\t\t</div>\r\n\t\t\t<div className='searchCardMovieText'>\r\n\t\t\t\t<div className='searchCardMovieName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + show.id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={show.name}>\r\n\t\t\t\t\t\t<h4>{show.name}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CardShow;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardUser({ user }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<a\r\n\t\t\thref={window.location.origin + \"/user/\" + user.id}\r\n\t\t\tonClick={(e) => {\r\n\t\t\t\thistory.push(\"/user/\" + user.id);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}}>\r\n\t\t\t<div className='cardUser'>\r\n\t\t\t\t<div className='cardUserImage' style={{ backgroundImage: `url(${\"http://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }}>\r\n\t\t\t\t\t{\" \"}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='cardUserText'>\r\n\t\t\t\t\t<h4>{user.username}</h4>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</a>\r\n\t);\r\n}\r\n\r\nexport default CardUser;\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nfunction CategoriesTab({ categories, activeColor, onChangeCategory, activeCategory, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t{categories.map((category, counter) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={\"categoriesTab\"}\r\n\t\t\t\t\tkey={counter}\r\n\t\t\t\t\tstyle={{ color: activeCategory === category ? activeColor : \"rgb(207, 207, 207)\" }}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonChangeCategory(category);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{category}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t\t<hr style={{ backgroundColor: activeColor, height: 2.5, marginTop: \"0px\", marginBottom: \"10px\" }} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CategoriesTab;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { MDBRow, MDBCol, MDBContainer, MDBIcon, MDBFormInline } from \"mdbreact\";\r\nimport \"./style.css\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport CardGame from \"./CardGame\";\r\nimport CardMovie from \"./CardMovie\";\r\nimport CardShow from \"./CardShow\";\r\nimport CardUser from \"../Common/CardUser\";\r\nimport CategoriesTab from \"../Common/CategoriesTab\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction SearchPage({ loggedIn, gamesIsLoading, moviesIsLoading, showsIsLoading, usersIsLoading, searchGame, games, searchMovie, movies, searchShow, shows, searchUsers, users }) {\r\n\tlet history = useHistory();\r\n\tlet { query } = useParams();\r\n\tconst [queryText, setQueryText] = useState(\"\");\r\n\tconst [gamesCards, setGamesCards] = useState(\"\");\r\n\tconst [moviesCards, setMoviesCards] = useState(\"\");\r\n\tconst [showsCards, setShowsCards] = useState(\"\");\r\n\tconst [usersCards, setUsersCards] = useState(\"\");\r\n\tconst [gamesPage, setGamesPage] = useState(1);\r\n\tconst [moviesPage, setMoviesPage] = useState(1);\r\n\tconst [showsPage, setShowsPage] = useState(1);\r\n\r\n\tconst [activeCategory, setActiveCategory] = useState(\"Всё\");\r\n\r\n\tuseEffect(() => {\r\n\t\tsearchGame(query, 1, 6);\r\n\t\tsearchMovie(query, 1);\r\n\t\tsearchShow(query, 1);\r\n\t\tsearchUsers(query);\r\n\t\tsetQueryText(query);\r\n\t\tdocument.title = \"Поиск\";\r\n\t\tsetGamesPage(1);\r\n\t\tsetMoviesPage(1);\r\n\t\tsetShowsPage(1);\r\n\t}, [query, searchGame, searchMovie, searchUsers, searchShow]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetGamesCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{games.map((game) => (\r\n\t\t\t\t\t<CardGame game={game} key={game.id} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [games]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetMoviesCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{movies.map((movie) => (\r\n\t\t\t\t\t<CardMovie movie={movie} key={movie.id} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [movies]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetShowsCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{shows.map((show) => (\r\n\t\t\t\t\t<CardShow show={show} key={show.id} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [shows]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUsersCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{users.map((user) => (\r\n\t\t\t\t\t<CardUser user={user} key={user.username} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [users]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg searchBG' />\r\n\t\t\t<MDBContainer>\r\n\t\t\t\t<MDBRow>\r\n\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t<MDBCol className='searchPage'>\r\n\t\t\t\t\t\t<h1>Поиск</h1>\r\n\t\t\t\t\t\t<MDBFormInline\r\n\t\t\t\t\t\t\tclassName='md-form'\r\n\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput2\").value);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='search' />\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclassName='form-control form-control-sm ml-3 w-50'\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tplaceholder='Найти'\r\n\t\t\t\t\t\t\t\taria-label='Search'\r\n\t\t\t\t\t\t\t\tid='searchInput2'\r\n\t\t\t\t\t\t\t\tvalue={queryText}\r\n\t\t\t\t\t\t\t\tonChange={(event) => setQueryText(event.target.value)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</MDBFormInline>\r\n\r\n\t\t\t\t\t\t<h1>Результаты поиска</h1>\r\n\t\t\t\t\t\t<CategoriesTab\r\n\t\t\t\t\t\t\tcategories={[\"Всё\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Пользователи\"]}\r\n\t\t\t\t\t\t\tactiveColor='#7654de'\r\n\t\t\t\t\t\t\tactiveCategory={activeCategory}\r\n\t\t\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={gamesIsLoading} spinner text='Ищем игры...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Игры\"}>\r\n\t\t\t\t\t\t\t\t<h3>Игры</h3>\r\n\t\t\t\t\t\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={gamesPage === 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchGame(query, gamesPage - 1, 6);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGamesPage(gamesPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&lt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{gamesCards}\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={games.length < 6}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchGame(query, gamesPage + 1, 6);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGamesPage(gamesPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&gt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={moviesIsLoading} spinner text='Ищем фильмы...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Фильмы\"}>\r\n\t\t\t\t\t\t\t\t<h3>Фильмы</h3>\r\n\t\t\t\t\t\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={moviesPage === 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchMovie(query, moviesPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMoviesPage(moviesPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&lt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{moviesCards}\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={movies.length < 20}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchMovie(query, moviesPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMoviesPage(moviesPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&gt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={showsIsLoading} spinner text='Ищем сериалы...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Сериалы\"}>\r\n\t\t\t\t\t\t\t\t<h3>Сериалы</h3>\r\n\t\t\t\t\t\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={showsPage === 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchShow(query, showsPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowsPage(showsPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&lt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{showsCards}\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={shows.length < 20}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchShow(query, showsPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowsPage(showsPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&gt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={usersIsLoading} spinner text='Ищем пользователей...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Пользователи\"}>\r\n\t\t\t\t\t\t\t\t<h3>Пользователи</h3>\r\n\t\t\t\t\t\t\t\t{usersCards}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t</MDBRow>\r\n\t\t\t</MDBContainer>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tgamesIsLoading: selectors.getIsLoadingSearchGames(state),\r\n\tmoviesIsLoading: selectors.getIsLoadingSearchMovies(state),\r\n\tshowsIsLoading: selectors.getIsLoadingSearchShows(state),\r\n\tusersIsLoading: selectors.getIsLoadingSearchUsers(state),\r\n\tgames: selectors.getSearchContentGames(state),\r\n\tmovies: selectors.getSearchContentMovies(state),\r\n\tshows: selectors.getSearchContentShows(state),\r\n\tusers: selectors.getSearchContentUsers(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tsearchGame: (query, page, gamesCount) => {\r\n\t\t\tdispatch(actions.searchGames(query, page, gamesCount));\r\n\t\t},\r\n\t\tsearchMovie: (query, page) => {\r\n\t\t\tdispatch(actions.searchMovies(query, page));\r\n\t\t},\r\n\t\tsearchShow: (query, page) => {\r\n\t\t\tdispatch(actions.searchShows(query, page));\r\n\t\t},\r\n\t\tsearchUsers: (query) => {\r\n\t\t\tdispatch(actions.searchUsers(query));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchPage);\r\n","import React, { useState } from \"react\";\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/actions\";\r\nimport * as selectors from \"../../store/reducers\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nfunction LoginForm({ isOpen, closeForm, logIn, authError, openResetPasswordForm }) {\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={isOpen} toggle={closeForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='loginBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\tlogIn(login, password);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Войти</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!authError}>\r\n\t\t\t\t\t\t\t\t\tНеверный логин или пароль!\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tЛогин\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='form-control' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПароль\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='form-control' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='confirmButton'>\r\n\t\t\t\t\t\t\t\t\t\tВойти\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\tclassName='passwordResetLabel'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tcloseForm();\r\n\t\t\t\t\t\t\t\t\t\t\topenResetPasswordForm();\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tВосстановить пароль\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisOpen: selectors.getLoginForm(state),\r\n\tauthError: selectors.getAuthError(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tcloseForm: () => {\r\n\t\t\tdispatch(actions.closeLoginForm());\r\n\t\t},\r\n\t\tlogIn: (login, password) => {\r\n\t\t\tdispatch(actions.tryAuth(login, password));\r\n\t\t},\r\n\t\topenResetPasswordForm: () => {\r\n\t\t\tdispatch(actions.openResetPasswordForm());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\r\n","import React, { useState } from \"react\";\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/actions\";\r\nimport * as selectors from \"../../store/reducers\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nfunction RegistrationForm({ isOpen, closeForm, registrate, registrateArror, user }) {\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={isOpen} toggle={closeForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='registrationBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!registrateArror}>\r\n\t\t\t\t\t\t\t\t\tОшибка регистрации!\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success' hidden={user.email === \"\"}>\r\n\t\t\t\t\t\t\t\t\t{user.login}, добро пожаловать! Осталось только подтвердить вашу почту\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<h4>Регистрация</h4>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput'>Никнейм</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='form-control' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput'>Электронная почта</label>\r\n\t\t\t\t\t\t\t\t<input type='email' id='emailInput' className='form-control' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput'>Пароль</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='form-control' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordConfirmInput'>Подтверждение пароля</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\t\tid='passwordConfirmInput'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tstyle={passwordConfirm === password ? { outlineColor: \"green\" } : { outlineColor: \"red\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={passwordConfirm}\r\n\t\t\t\t\t\t\t\t\tonChange={(event) => setPasswordConfirm(event.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn\r\n\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\tclassName='confirmButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={password !== passwordConfirm || login.length < 1 || email.length < 1 || password.length < 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => registrate(login, email, password)}>\r\n\t\t\t\t\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisOpen: selectors.getRegistrateForm(state),\r\n\tregistrateArror: selectors.getRegistrateError(state),\r\n\tuser: selectors.getUser(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tcloseForm: () => {\r\n\t\t\tdispatch(actions.closeRegistrateForm());\r\n\t\t},\r\n\t\tregistrate: (login, email, password) => {\r\n\t\t\tdispatch(actions.registrationRequest(login, email, password));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RegistrationForm);\r\n","import React, { useState } from \"react\";\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/actions\";\r\nimport * as selectors from \"../../store/reducers\";\r\n\r\n/**\r\n * КОмпонент формы сброса пароля\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nfunction ResetPasswordForm({ isOpen, closeForm, resetPassword, resetPasswordError }) {\r\n\tconst [email, setEmail] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={isOpen} toggle={closeForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='loginBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\tresetPassword(email);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Сбросить пароль</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!resetPasswordError | (resetPasswordError === \"ok\")}>\r\n\t\t\t\t\t\t\t\t\t{resetPasswordError}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success' hidden={resetPasswordError !== \"ok\"}>\r\n\t\t\t\t\t\t\t\t\tНа вашу почту отправлено письмо\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПочта\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='emailInput' className='form-control' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='confirmButton'>\r\n\t\t\t\t\t\t\t\t\t\tСбросить\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisOpen: selectors.getResetPasswordForm(state),\r\n\tresetPasswordError: selectors.getResetPasswordError(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tcloseForm: () => {\r\n\t\t\tdispatch(actions.closeResetPasswordForm());\r\n\t\t},\r\n\t\tresetPassword: (email) => {\r\n\t\t\tdispatch(actions.resetPassword(email));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResetPasswordForm);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../store/reducers\";\r\nimport * as actions from \"../store/actions\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ConfirmPage({ confirmEmailRequest }) {\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet uid64 = params.get(\"uid64\");\r\n\tlet token = params.get(\"token\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tconfirmEmailRequest(uid64, token);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[]\r\n\t);\r\n\r\n\treturn <div className='bg'></div>;\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tconfirmEmailRequest: (uid64, token) => {\r\n\t\t\tdispatch(actions.confirmEmailRequest(uid64, token));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmPage);\r\n","import React, { useState } from \"react\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../store/actions\";\r\nimport * as selectors from \"../store/reducers\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ConfirmPasswordPage({ confirmPassword, confirmPasswordError }) {\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet token = params.get(\"token\");\r\n\r\n\treturn (\r\n\t\t<div className='bg'>\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconfirmPassword(token, password);\r\n\t\t\t\t}}\r\n\t\t\t\tclassName='confirmPasswordForm'>\r\n\t\t\t\t<p className='h4'>Обновить пароль</p>\r\n\t\t\t\t<p className='note note-danger' hidden={!confirmPasswordError | (confirmPasswordError === \"ok\")}>\r\n\t\t\t\t\t{confirmPasswordError}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='note note-success' hidden={confirmPasswordError !== \"ok\"}>\r\n\t\t\t\t\tПароль обновлен!\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<label htmlFor='passwordInput' className='confirmPasswordLabel'>\r\n\t\t\t\t\tНовый пароль\r\n\t\t\t\t</label>\r\n\t\t\t\t<br />\r\n\t\t\t\t<input type='password' id='passwordInput' className='confirmPasswordInput' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<label htmlFor='passwordConfurmInput' className='confirmPasswordLabel'>\r\n\t\t\t\t\tПодтверждение пароля\r\n\t\t\t\t</label>\r\n\t\t\t\t<br />\r\n\t\t\t\t<input type='password' id='passwordConfurmInput' className='confirmPasswordInput' value={passwordConfirm} onChange={(event) => setPasswordConfirm(event.target.value)} />\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<button type='submit' className='confirmPasswordButton' disabled={(password !== passwordConfirm) | (password.length < 1)}>\r\n\t\t\t\t\tОбновить\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tconfirmPasswordError: selectors.getConfirmPasswordError(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tconfirmPassword: (token, password) => {\r\n\t\t\tdispatch(actions.confirmPassword(token, password));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmPasswordPage);\r\n","export const COLORS = [\r\n\t\"rgb(43,206,72)\",\r\n\t\"rgb(240,163,255)\",\r\n\t\"rgb(0,117,220)\",\r\n\t\"rgb(153,63,0)\",\r\n\t\"rgb(76,0,92)\",\r\n\t\"rgb(225,225,225)\",\r\n\t\"rgb(0,92,49)\",\r\n\t\"rgb(255,204,153)\",\r\n\t\"rgb(128,128,128)\",\r\n\t\"rgb(148,255,181)\",\r\n\t\"rgb(143,124,0)\",\r\n\t\"rgb(157,204,0)\",\r\n\t\"rgb(194,0,136)\",\r\n\t\"rgb(0,51,128)\",\r\n\t\"rgb(255,164,5)\",\r\n\t\"rgb(255,168,187)\",\r\n\t\"rgb(66,102,0)\",\r\n\t\"rgb(255,0,16)\",\r\n\t\"rgb(94,241,242)\",\r\n\t\"rgb(0,153,143)\",\r\n\t\"rgb(224,255,102)\",\r\n\t\"rgb(116,10,255)\",\r\n\t\"rgb(153,0,0)\",\r\n\t\"rgb(255,255,128)\",\r\n\t\"rgb(255,255,0)\",\r\n\t\"rgb(255,80,)\",\r\n];\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction DayInfo({ day, date }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className='dayInfoBlock'>\r\n\t\t\t<h2 className='dayInfoDate'>{date ? date.toLocaleDateString(\"ru-RU\", { year: \"numeric\", month: \"long\", day: \"numeric\", weekday: \"long\" }) : \"\"}</h2>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.games?.length > 0)}>\r\n\t\t\t\t<h3>Игры</h3>\r\n\t\t\t\t{day.games?.map((game) => (\r\n\t\t\t\t\t<div key={game.rawg_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\r\n\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{game.rawg_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.movies?.length > 0)}>\r\n\t\t\t\t<h3>Фильмы</h3>\r\n\t\t\t\t{day.movies?.map((movie) => (\r\n\t\t\t\t\t<div key={movie.tmdb_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\r\n\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{movie.tmdb_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.episodes?.length > 0)}>\r\n\t\t\t\t<h3>Сериалы</h3>\r\n\t\t\t\t{day.episodes?.map((episode) => (\r\n\t\t\t\t\t<div key={episode.tmdb_id}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\r\n\t\t\t\t\t\t\t\tclassName='dayInfoLink'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DayInfo;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Calendar from \"react-calendar\";\r\nimport \"react-calendar/dist/Calendar.css\";\r\nimport DayInfo from \"./DayInfo\";\r\nimport \"./style.css\";\r\n\r\nfunction CalendarBlock({ calendar }) {\r\n\tconst [value, onChange] = useState(new Date());\r\n\tconst [currentDay, setCurrentDay] = useState({});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (calendar) {\r\n\t\t\tif (formatDate(value) in calendar) setCurrentDay(calendar[formatDate(value)]);\r\n\t\t\telse setCurrentDay({});\r\n\t\t}\r\n\t}, [value, calendar]);\r\n\r\n\tfunction dateToTile({ activeStartDate, date, view }) {\r\n\t\tif (view === \"month\" && formatDate(date) in calendar) {\r\n\t\t\tlet day = calendar[formatDate(date)];\r\n\t\t\treturn (\r\n\t\t\t\t<div className='calendarDay'>\r\n\t\t\t\t\t<div className='calendarDayTile Games' hidden={!(day?.games?.length > 0)}>\r\n\t\t\t\t\t\t{day?.games?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='calendarDayTile Movies' hidden={!(day?.movies?.length > 0)}>\r\n\t\t\t\t\t\t{day?.movies?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='calendarDayTile Episodes' hidden={!(day?.episodes?.length > 0)}>\r\n\t\t\t\t\t\t{day?.episodes?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='calendarBlock'>\r\n\t\t\t<Calendar className='calendar' onChange={onChange} value={value} defaultView='month' minDetail='decade' locale='ru-RU' minDate={new Date()} tileContent={dateToTile} />\r\n\t\t\t<DayInfo day={currentDay} date={value} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CalendarBlock;\r\n\r\nfunction pad(number) {\r\n\tif (number < 10) {\r\n\t\treturn \"0\" + number;\r\n\t}\r\n\treturn number;\r\n}\r\nfunction formatDate(date) {\r\n\treturn date.getFullYear() + \"-\" + pad(date.getMonth() + 1) + \"-\" + pad(date.getDate());\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction GameBlock({ games, stats }) {\r\n\tconst [gameChartData, setGameChartData] = useState([]);\r\n\tconst gameColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Время прохождения\",\r\n\t\t\tfield: \"spent_time\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t/*{\r\n\t\t\tlabel: \"Дата выхода\",\r\n\t\t\tfield: \"release_date\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},*/\r\n\t];\r\n\r\n\tconst [gameTableData, setGameTableData] = useState({\r\n\t\tcolumns: gameColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (games) {\r\n\t\t\t\tsetGameTableData({\r\n\t\t\t\t\tcolumns: gameColumns,\r\n\t\t\t\t\trows: games.map((game) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/game/\" + game.game.rawg_slug}>\r\n\t\t\t\t\t\t\t\t\t{game.game.rawg_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: game.game.rawg_name,\r\n\t\t\t\t\t\t\tstatus: game.status,\r\n\t\t\t\t\t\t\tscore: game.score,\r\n\t\t\t\t\t\t\treview: game.review,\r\n\t\t\t\t\t\t\tspent_time: parseFloat(game.spent_time),\r\n\t\t\t\t\t\t\t/*release_date: new Date(game.game.rawg_release_date).toISOString().substr(0, 10).replace(\"-\", \".\"),\r\n\t\t\t\t\t\t\tclickEvent: (e) => {\r\n                                    //window.open('/game/' + game.game.rawg_slug);\r\n                                    history.push('/game/' + game.game.rawg_slug);\r\n                                }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[games]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetGameChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetGameChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tИгр сыграно: {stats?.count}, часов наиграно: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={gameTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать игр на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tclassName='dataTable'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\t\t\t<div hidden={gameChartData.length < 1}>\r\n\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t<BarChart width={Math.min(gameChartData.length * 100, document.body.clientWidth)} height={300} data={gameChartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{gameChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={gameChartData.length * 40} data={gameChartData} margin={{ top: 5, right: 0, left: 25, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{gameChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default GameBlock;\r\n","import React from \"react\";\r\n\r\nimport CardUser from \"../Common/CardUser\";\r\n\r\nfunction FriendBlock({ users }) {\r\n\treturn (\r\n\t\t<div className='friendsBlock'>\r\n\t\t\t{users.map((user) => (\r\n\t\t\t\t<CardUser user={user} key={user.id} />\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FriendBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction MovieBlock({ movies, stats }) {\r\n\tconst [movieChartData, setMovieChartData] = useState([]);\r\n\tconst movieColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t];\r\n\r\n\tconst [movieTableData, setMovieTableData] = useState({\r\n\t\tcolumns: movieColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (movies) {\r\n\t\t\t\tsetMovieTableData({\r\n\t\t\t\t\tcolumns: movieColumns,\r\n\t\t\t\t\trows: movies.map((movie) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/movie/\" + movie.movie.tmdb_id}>\r\n\t\t\t\t\t\t\t\t\t{movie.movie.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: movie.movie.tmdb_name,\r\n\t\t\t\t\t\t\tstatus: movie.status,\r\n\t\t\t\t\t\t\tscore: movie.score,\r\n\t\t\t\t\t\t\treview: movie.review,\r\n\t\t\t\t\t\t\t/*clickEvent: (e) => {\r\n                                //window.open('/game/' + game.game.rawg_slug);\r\n                                history.push('/movie/' + movie.movie.tmdb_id)\r\n                            }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[movies]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetMovieChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetMovieChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tФильмов посмотрено: {stats?.count}, часов просмотра: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={movieTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать фильмов на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\r\n\t\t\t<div hidden={movieChartData.length < 1}>\r\n\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t<BarChart width={Math.min(movieChartData.length * 100, document.body.clientWidth)} height={300} data={movieChartData} margin={{ top: 5, right: 10, left: 10, bottom: 15 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{movieChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={movieChartData.length * 40} data={movieChartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{movieChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default MovieBlock;\r\n","import React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./style.css\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction LogRow({ log, showUsername }) {\r\n\tlet history = useHistory();\r\n\r\n\tuseEffect(() => {}, [log]);\r\n\r\n\tfunction translateActionType(action, actionResult) {\r\n\t\tswitch (action) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tswitch (actionResult) {\r\n\t\t\t\t\tcase \"0\":\r\n\t\t\t\t\t\treturn \"посмотрел(а)\";\r\n\t\t\t\t\tcase \"-1\":\r\n\t\t\t\t\t\treturn \"не смотрела(а)\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"оценил(а)\";\r\n\t\t\t\t}\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn \"изменил(а) статус\";\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn \"оставил(а) отзыв на\";\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn \"изменил(а) время прохождения\";\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\tif (actionResult > 0) return \"посмотрел(а) \" + actionResult + \" серий\";\r\n\t\t\t\telse return \"не смотрел(а) \" + actionResult * -1 + \" серий\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\tif (actionResult === \"True\") return \"подписан(а) на\";\r\n\t\t\t\telse return \"отписан(а) от\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn action;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction translateType(type, actionType) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"игру\";\r\n\t\t\t\telse return \"игры\";\r\n\t\t\tcase \"movie\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"фильм\";\r\n\t\t\t\telse return \"фильма\";\r\n\t\t\tcase \"show\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"сериал\";\r\n\t\t\t\telse return \"сериала\";\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn \"пользователя\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn type;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction nameToLink(name, type, id) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"movie\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"show\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t[s{id.season_number}e{id.episode_number}] серию\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/user/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/user/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tdefault:\r\n\t\t\t\treturn name;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction userToLink(username, userID) {\r\n\t\treturn (\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + \"/user/\" + userID}\r\n\t\t\t\tclassName='logLink'\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/user/\" + userID);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}>\r\n\t\t\t\t{username}\r\n\t\t\t</a>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction actionResultToStr(actionType, actionResult, target) {\r\n\t\tswitch (actionType) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tif ((target !== \"episode\") | (actionResult > 0))\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\tinitialRating={actionResult}\r\n\t\t\t\t\t\t\treadonly={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\telse return \"\";\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn actionResult + \" \" + intToHours(actionResult);\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn actionResult;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleTimeString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='logRow'>\r\n\t\t\t{parseDate(log.created)}&thinsp;\r\n\t\t\t{showUsername ? userToLink(log.user, log.user_id) : \"\"}&thinsp;\r\n\t\t\t{translateActionType(log.action_type, log.action_result)}&thinsp;\r\n\t\t\t{translateType(log.type, log.action_type)}&thinsp;\r\n\t\t\t{nameToLink(log.target, log.type, log.target_id)}\r\n\t\t\t{(log.type === \"user\") | (log.action_type === \"episodes\") | (log.action_result === \"0\") | (log.action_result === \"-1\") ? \"\" : \":\"}&thinsp;\r\n\t\t\t{actionResultToStr(log.action_type, log.action_result, log.type)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default LogRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport LogRow from \"./LogRow\";\r\n\r\nfunction UserLogBlock({ logs, showUsername, onChangePage }) {\r\n\tconst [logsByDay, setLogsByDay] = useState([]);\r\n\tconst [currentPage, setCurrentPage] = useState(1);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetLogsByDay(groupLogsByDay(logs.log));\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[logs]\r\n\t);\r\n\r\n\tfunction groupLogsByDay(logs) {\r\n\t\tlet newLogs = [];\r\n\r\n\t\tfor (let i in logs) {\r\n\t\t\tlet date = new Date(logs[i].created);\r\n\r\n\t\t\tif (newLogs.length === 0)\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t\telse if (date.getDay() === newLogs[newLogs.length - 1].date.getDay()) newLogs[newLogs.length - 1].logs.push(logs[i]);\r\n\t\t\telse\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn newLogs;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{logsByDay.map((dayLog) => (\r\n\t\t\t\t<div key={dayLog.logs[0].id} className='logDay'>\r\n\t\t\t\t\t<h5 className='logDate'>{dayLog.date.toLocaleDateString(\"ru-RU\")}</h5>\r\n\t\t\t\t\t<div className='logRows'>\r\n\t\t\t\t\t\t{dayLog.logs.map((log) => (\r\n\t\t\t\t\t\t\t<LogRow log={log} showUsername={showUsername} key={log.id + log.created} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t\t<button\r\n\t\t\t\tclassName='logPaginationButton'\r\n\t\t\t\tdisabled={!logs.has_next_page}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (logs.has_next_page) {\r\n\t\t\t\t\t\tonChangePage(currentPage + 1);\r\n\t\t\t\t\t\tsetCurrentPage(currentPage + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<MDBIcon icon='arrow-down' />\r\n\t\t\t</button>\r\n\r\n\t\t\t<button\r\n\t\t\t\tclassName='logPaginationButton'\r\n\t\t\t\tdisabled={currentPage === 1}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (currentPage > 1) {\r\n\t\t\t\t\t\tonChangePage(currentPage - 1);\r\n\t\t\t\t\t\tsetCurrentPage(currentPage - 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<MDBIcon icon='arrow-up' />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserLogBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction ShowBlock({ shows, stats }) {\r\n\tconst [showChartData, setShowChartData] = useState([]);\r\n\r\n\tconst showColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Часов просмотра\",\r\n\t\t\tfield: \"spentTime\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t];\r\n\r\n\tconst [showTableData, setShowTableData] = useState({\r\n\t\tcolumns: showColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (shows) {\r\n\t\t\t\tsetShowTableData({\r\n\t\t\t\t\tcolumns: showColumns,\r\n\t\t\t\t\trows: shows.map((show) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/show/\" + show.show.tmdb_id}>\r\n\t\t\t\t\t\t\t\t\t{show.show.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: show.show.tmdb_name,\r\n\t\t\t\t\t\t\tstatus: show.status,\r\n\t\t\t\t\t\t\tscore: show.score,\r\n\t\t\t\t\t\t\treview: show.review,\r\n\t\t\t\t\t\t\tspentTime: show.spent_time,\r\n\t\t\t\t\t\t\t/*clickEvent: (e) => {\r\n                                //window.open('/game/' + game.game.rawg_slug);\r\n                                history.push('/movie/' + movie.movie.tmdb_id)\r\n                            }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[shows]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetShowChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetShowChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tСерий сериалов посмотрено: {stats?.count}, часов просмотра: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={showTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать сериалов на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\t\t\t<div hidden={showChartData.length < 1}>\r\n\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t<BarChart width={Math.min(showChartData.length * 100, document.body.clientWidth)} height={300} data={showChartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{showChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={showChartData.length * 40} data={showChartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{showChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ShowBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBRow, MDBCol, MDBContainer } from \"mdbreact\";\r\nimport { PieChart, Pie, Legend, Cell, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\nimport \"./style.css\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport CalendarBlock from \"./Calendar/CalendarBlock\";\r\nimport GameBlock from \"./GameBlock\";\r\nimport FriendBlock from \"./FriendBlock\";\r\nimport MovieBlock from \"./MovieBlock\";\r\nimport UserLogBlock from \"./UserLogBlock\";\r\nimport CategoriesTab from \"../Common/CategoriesTab\";\r\nimport ShowBlock from \"./ShowBlock\";\r\n\r\nconst LOG_ROWS_COUNT = 20;\r\n\r\n//const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#FA8542'];\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction UserPage({\r\n\tloggedIn,\r\n\tuserInfo,\r\n\tuserIsLoading,\r\n\tgetUserInfo,\r\n\tcurrentUserInfo,\r\n\tsetUserStatus,\r\n\tgetUserLogs,\r\n\tuserLogs,\r\n\tuserLogsIsLoading,\r\n\tgetUserFriendsLogs,\r\n\tuserFriendsLogs,\r\n\tuserFriendsLogsIsLoading,\r\n\tgetUserCalendar,\r\n\tuserCalendar,\r\n}) {\r\n\tlet { userID, section } = useParams();\r\n\tconst [activeCategory, setActiveCategory] = useState(\"\");\r\n\tconst [lastActivity, setLastActivity] = useState(\"\");\r\n\tconst [chartData, setChartData] = useState([]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tgetUserInfo(userID);\r\n\t\t\tgetUserLogs(userID, 1, LOG_ROWS_COUNT);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userID, getUserInfo, getUserLogs, getUserFriendsLogs]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (section) setActiveCategory(section);\r\n\t\t\telse setActiveCategory(\"Профиль\");\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[section]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) {\r\n\t\t\t\tgetUserFriendsLogs(userID, 1, LOG_ROWS_COUNT);\r\n\t\t\t\tif (String(currentUserInfo.id) === userID) {\r\n\t\t\t\t\tgetUserCalendar();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, userID]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tdocument.title = \"Профиль \" + userInfo.username;\r\n\t\tif (userInfo.stats.games) {\r\n\t\t\tlet newData = [];\r\n\t\t\tif (userInfo.stats.games.total_spent_time > 0) newData.push({ name: \"Часов в играх\", value: userInfo.stats.games.total_spent_time });\r\n\t\t\tif (userInfo.stats.movies.total_spent_time > 0) newData.push({ name: \"Часов в фильмах\", value: userInfo.stats.movies.total_spent_time });\r\n\t\t\tif (userInfo.stats.episodes.total_spent_time > 0) newData.push({ name: \"Часов в сериалах\", value: userInfo.stats.episodes.total_spent_time });\r\n\t\t\tsetChartData(newData);\r\n\t\t}\r\n\t\tif (userInfo.last_activity) {\r\n\t\t\tlet date = new Date(userInfo.last_activity);\r\n\t\t\tDate.now();\r\n\t\t\tsetLastActivity(date.toLocaleString());\r\n\t\t} else setLastActivity(\"\");\r\n\t}, [userInfo]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg searchBG' />\r\n\t\t\t<LoadingOverlay active={userIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t\t<MDBCol className='userPage'>\r\n\t\t\t\t\t\t\t<h1>Информация о пользователе {userInfo.username}</h1>\r\n\t\t\t\t\t\t\t<p>Последняя активность {lastActivity}</p>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\thidden={currentUserInfo.username === userInfo.username}\r\n\t\t\t\t\t\t\t\tclassName='addFriendButton'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetUserStatus({ is_following: userInfo.is_followed ? false : true }, userInfo.id);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{userInfo.is_followed ? \"Отписаться\" : \"Подписаться\"}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<CategoriesTab\r\n\t\t\t\t\t\t\t\tcategories={[\"Профиль\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Друзья\", currentUserInfo.username === userInfo.username ? \"Календарь\" : undefined]}\r\n\t\t\t\t\t\t\t\tactiveColor='#7654de'\r\n\t\t\t\t\t\t\t\tactiveCategory={activeCategory}\r\n\t\t\t\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\thidden={section}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Профиль\"}>\r\n\t\t\t\t\t\t\t\t<h4>Моя активность: </h4>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userLogsIsLoading} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<div hidden={chartData.length < 1}>\r\n\t\t\t\t\t\t\t\t\t\t<PieChart width={350} height={250} hidden={chartData.length < 1}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Pie dataKey='value' data={chartData} cx='50%' cy='50%' outerRadius={80} fill='#8884d8' labelLine={true} label minAngle={5}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t</Pie>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Legend verticalAlign='bottom' horizontalAlign='center' />\r\n\t\t\t\t\t\t\t\t\t\t</PieChart>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<UserLogBlock logs={userLogs} onChangePage={(pageNumber) => getUserLogs(userID, pageNumber, LOG_ROWS_COUNT)} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Игры\"}>\r\n\t\t\t\t\t\t\t\t<GameBlock games={userInfo.games} stats={userInfo.stats.games} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Фильмы\"}>\r\n\t\t\t\t\t\t\t\t<MovieBlock movies={userInfo.movies} stats={userInfo.stats.movies} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Сериалы\"}>\r\n\t\t\t\t\t\t\t\t<ShowBlock shows={userInfo.shows} stats={userInfo.stats.episodes} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Друзья\"}>\r\n\t\t\t\t\t\t\t\t<FriendBlock users={userInfo.followed_users ? userInfo.followed_users : []} />\r\n\t\t\t\t\t\t\t\t<h4>Активность друзей: </h4>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userFriendsLogsIsLoading} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<UserLogBlock logs={userFriendsLogs} onChangePage={(pageNumber) => getUserFriendsLogs(userID, pageNumber, LOG_ROWS_COUNT)} showUsername={true} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Календарь\"}>\r\n\t\t\t\t\t\t\t\t<CalendarBlock calendar={userCalendar} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tuserIsLoading: selectors.getIsLoadingUserPageContent(state),\r\n\tuserInfo: selectors.getUserPageContent(state),\r\n\tuserLogs: selectors.getUserPageLogs(state),\r\n\tuserLogsIsLoading: selectors.getIsLoadingUserPageLogs(state),\r\n\tuserFriendsLogs: selectors.getUserPageFriendsLogs(state),\r\n\tuserFriendsLogsIsLoading: selectors.getIsLoadingUserPageFriendsLogs(state),\r\n\tcurrentUserInfo: selectors.getUser(state),\r\n\tuserCalendar: selectors.getUserPageCalendar(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tgetUserInfo: (user_id) => {\r\n\t\t\tdispatch(actions.requestUserPageContent(user_id));\r\n\t\t},\r\n\t\tsetUserStatus: (is_following, userID) => {\r\n\t\t\tdispatch(actions.setUserStatus(is_following, userID));\r\n\t\t},\r\n\t\tgetUserLogs: (userID, page, resultsOnPage) => {\r\n\t\t\tdispatch(actions.requestUserPageLogs(userID, page, resultsOnPage));\r\n\t\t},\r\n\t\tgetUserFriendsLogs: (userID, page, resultsOnPage) => {\r\n\t\t\tdispatch(actions.requestUserPageFriendsLogs(userID, page, resultsOnPage));\r\n\t\t},\r\n\t\tgetUserCalendar: () => {\r\n\t\t\tdispatch(actions.requestUserPageCalendar());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserPage);\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { MDBNavbar, MDBNavItem, MDBNavbarBrand, MDBNavbarNav, MDBNavLink, MDBIcon, MDBFormInline, MDBDropdown, MDBDropdownItem, MDBDropdownMenu, MDBDropdownToggle } from \"mdbreact\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../store/reducers\";\r\nimport * as actions from \"../store/actions\";\r\n\r\nfunction Navbar({ loggedIn, onLoginClick, onLogoutClick, onRegistrationClick, user }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<MDBNavbar style={{ backgroundColor: \"#4527a0\" }} dark expand='md' fixed='top'>\r\n\t\t\t<MDBNavbarBrand\r\n\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\thistory.push(\"/\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}}>\r\n\t\t\t\t<strong className='white-text' style={{ cursor: \"pointer\" }}>\r\n\t\t\t\t\tInterests\r\n\t\t\t\t</strong>\r\n\t\t\t</MDBNavbarBrand>\r\n\t\t\t<MDBNavbarNav left></MDBNavbarNav>\r\n\r\n\t\t\t<MDBNavbarNav right>\r\n\t\t\t\t<MDBNavItem>\r\n\t\t\t\t\t<MDBFormInline\r\n\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput\").value);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<div className='md-form my-0'>\r\n\t\t\t\t\t\t\t<input className='form-control mr-sm-2' type='text' placeholder='Найти' aria-label='Найти' id='searchInput' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</MDBFormInline>\r\n\t\t\t\t</MDBNavItem>\r\n\r\n\t\t\t\t<MDBNavItem className='font-weight-bold' hidden={loggedIn}>\r\n\t\t\t\t\t<MDBNavLink to='#' onClick={onLoginClick}>\r\n\t\t\t\t\t\t<MDBIcon icon='sign-in-alt' /> Войти\r\n\t\t\t\t\t</MDBNavLink>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t\t<MDBNavItem className='font-weight-bold' hidden={loggedIn}>\r\n\t\t\t\t\t<MDBNavLink to='#' onClick={onRegistrationClick}>\r\n\t\t\t\t\t\t<MDBIcon icon='user-plus' /> Зарегистрироваться\r\n\t\t\t\t\t</MDBNavLink>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t\t<MDBNavItem hidden={!loggedIn} className='font-weight-bold'>\r\n\t\t\t\t\t<MDBDropdown>\r\n\t\t\t\t\t\t<MDBDropdownToggle nav caret>\r\n\t\t\t\t\t\t\t<span className='mr-2'>{user.username}</span>\r\n\t\t\t\t\t\t</MDBDropdownToggle>\r\n\t\t\t\t\t\t<MDBDropdownMenu>\r\n\t\t\t\t\t\t\t<MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={`/user/${user.id}`}\r\n\t\t\t\t\t\t\t\t\tclassName='navDropdownItem'\r\n\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\thistory.push(`/user/${user.id}`);\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<MDBIcon icon='user-circle' /> Профиль\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t<MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={`/user/${user.id}/Календарь`}\r\n\t\t\t\t\t\t\t\t\tclassName='navDropdownItem'\r\n\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\thistory.push(`/user/${user.id}/Календарь`);\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<MDBIcon icon='calendar-day' /> Календарь\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t<MDBDropdownItem>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={`/user/${user.id}/Друзья`}\r\n\t\t\t\t\t\t\t\t\tclassName='navDropdownItem'\r\n\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\thistory.push(`/user/${user.id}/Друзья`);\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<MDBIcon icon='user-friends' /> Друзья\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t\t<MDBDropdownItem onClick={onLogoutClick}>\r\n\t\t\t\t\t\t\t\t<a className='navDropdownItem' href='' onClick={(event) => event.preventDefault()}>\r\n\t\t\t\t\t\t\t\t\t<MDBIcon icon='sign-out-alt' /> Выйти\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t</MDBDropdownMenu>\r\n\t\t\t\t\t</MDBDropdown>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t</MDBNavbarNav>\r\n\t\t</MDBNavbar>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tuser: selectors.getUser(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonLoginClick: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tonLogoutClick: () => {\r\n\t\t\tdispatch(actions.resetAuthorization());\r\n\t\t},\r\n\t\tonRegistrationClick: () => {\r\n\t\t\tdispatch(actions.openRegistrateForm());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar);\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport HomePage from \"./components/HomePage\";\r\nimport GamePage from \"./components/Game/GamePage\";\r\nimport MoviePage from \"./components/Movie/MoviePage\";\r\nimport ShowPage from \"./components/Show/ShowPage\";\r\nimport SeasonPage from \"./components/Show/SeasonPage\";\r\nimport EpisodePage from \"./components/Show/EpisodePage\";\r\nimport SearchPage from \"./components/Search/SearchPage\";\r\nimport LoginForm from \"./components/Modals/LoginForm\";\r\nimport RegistrationForm from \"./components/Modals/RegistrationForm\";\r\nimport ResetPasswordForm from \"./components/Modals/ResetPasswordForm\";\r\nimport ConfirmPage from \"./components/ConfirmPage\";\r\nimport ConfirmPasswordPage from \"./components/ConfirmPasswordPage\";\r\nimport UserPage from \"./components/UserPage/UserPage\";\r\nimport Navbar from \"./components/Navbar\";\r\n\r\nclass Routes extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Navbar />\r\n\t\t\t\t<div className='navbar'></div>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path='/' component={HomePage} />\r\n\t\t\t\t\t<Route exact path='/game/:id' component={GamePage} />\r\n\t\t\t\t\t<Route exact path='/movie/:id' component={MoviePage} />\r\n\t\t\t\t\t<Route exact path='/show/:id' component={ShowPage} />\r\n\t\t\t\t\t<Route exact path='/show/:show_id/season/:number' component={SeasonPage} />\r\n\t\t\t\t\t<Route exact path='/show/:show_id/season/:season_number/episode/:episode_number' component={EpisodePage} />\r\n\t\t\t\t\t<Route exact path='/search/:query' component={SearchPage} />\r\n\t\t\t\t\t<Route exact path='/confirm/' component={ConfirmPage} />\r\n\t\t\t\t\t<Route exact path='/confirm_password/' component={ConfirmPasswordPage} />\r\n\t\t\t\t\t<Route exact path='/user/:userID' component={UserPage} />\r\n\t\t\t\t\t<Route exact path='/user/:userID/:section' component={UserPage} />\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\trender={function () {\r\n\t\t\t\t\t\t\treturn <h1>Not Found</h1>;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Switch>\r\n\t\t\t\t<ToastContainer position='top-center' hideProgressBar newestOnTop closeOnClick />\r\n\t\t\t\t<LoginForm />\r\n\t\t\t\t<RegistrationForm />\r\n\t\t\t\t<ResetPasswordForm />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n//\r\nexport default Routes;\r\n","import React, { useEffect } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport Routes from \"./Routes\";\r\nimport * as actions from \"./store/actions\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nfunction App({ onLoad }) {\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tonLoad();\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<div className='flyout'>\r\n\t\t\t\t<main>\r\n\t\t\t\t\t<Routes />\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t</Router>\r\n\t);\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonLoad: () => {\r\n\t\t\tdispatch(actions.checkAuthorization());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === \"localhost\" ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === \"[::1]\" ||\r\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"load\", () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA\");\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then((registration) => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\"New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { \"Service-Worker\": \"script\" },\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get(\"content-type\");\r\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\"No internet connection found. App is running in offline mode.\");\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif (\"serviceWorker\" in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then((registration) => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\nimport \"mdbreact/dist/css/mdb.css\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport {\r\n\tcreateStore,\r\n\tapplyMiddleware,\r\n\t//combineReducers,\r\n\tcompose,\r\n} from \"redux\";\r\nimport { Provider } from \"react-redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer from \"./store/reducers\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n\r\nexport default store;\r\n"],"sourceRoot":""}