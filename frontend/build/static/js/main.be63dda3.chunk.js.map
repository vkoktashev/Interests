{"version":3,"sources":["routes/CalendarPage/calendar-page.module.sass","settings.ts","services/jwtAuth.js","store/AuthStore.ts","store/PagesStore.ts","routes/HomePage/index.js","routes/HomePage/HomePage.js","http/index.js","services/gameRequests.js","store/GameStore.ts","shared/StatusButtonGroup/StatusButtonGroup.js","shared/StatusButtonGroup/index.js","shared/Rating/Rating.js","shared/Rating/index.js","shared/FriendsActivity/views/FriendActivity/FriendActivity.js","shared/FriendsActivity/views/FriendActivity/index.js","shared/FriendsActivity/FriendsActivity.js","shared/FriendsActivity/index.js","routes/GamePage/views/TimeToBeat/TimeToBeat.js","routes/GamePage/views/TimeToBeat/index.js","shared/ScoreBlock/ScoreBlock.js","shared/ScoreBlock/index.js","shared/InputNumber/InputNumber.js","shared/InputNumber/index.js","routes/GamePage/index.js","routes/GamePage/GamePage.js","services/movieRequests.js","store/MovieStore.ts","routes/MoviePage/index.js","routes/MoviePage/MoviePage.js","services/showRequests.js","store/ShowStore.ts","shared/DetailEpisodeRow/DetailEpisodeRow.js","shared/DetailEpisodeRow/index.js","routes/ShowPage/views/SeasonBlock/index.js","routes/ShowPage/views/SeasonBlock/SeasonBlock.js","routes/ShowPage/views/SeasonsBlock/index.js","routes/ShowPage/views/SeasonsBlock/SeasonsBlock.js","routes/ShowPage/index.js","routes/ShowPage/ShowPage.js","routes/ShowSeasonPage/index.js","routes/ShowSeasonPage/SeasonPage.js","routes/ShowEpisodePage/index.js","routes/ShowEpisodePage/EpisodePage.js","services/userRequests.js","store/SearchStore.ts","routes/SearchPage/views/SearchCard/SearchCard.js","routes/SearchPage/views/SearchCard/index.js","routes/SearchPage/views/SearchCardsBlock/SearchCardsBlock.js","routes/SearchPage/views/SearchCardsBlock/index.js","routes/SearchPage/views/GameCards.js","routes/SearchPage/views/MovieCards.js","routes/SearchPage/views/ShowCards.js","shared/CardUser/CardUser.js","shared/CardUser/index.js","shared/FriendBlock/FriendBlock.js","shared/FriendBlock/index.js","routes/SearchPage/views/UserCards.js","shared/CategoriesTab/CategoriesTab.tsx","shared/CategoriesTab/index.js","routes/SearchPage/SearchPage.tsx","routes/SearchPage/index.js","hooks/useScroll.js","routes/ConfirmPage/index.js","routes/ConfirmPage/ConfirmPage.js","routes/ConfirmPasswordPage/index.js","routes/ConfirmPasswordPage/ConfirmPasswordPage.js","store/UserStore.ts","shared/SelectMulti/SelectMulti.js","shared/SelectMulti/index.js","routes/UserPage/views/ItemsBlock/ItemRow/ItemRow.js","hooks/useWindowDimensions.js","routes/UserPage/views/ItemsBlock/ItemBlock/ItemBlock.js","routes/UserPage/views/ItemsBlock/ItemBlock/index.js","routes/UserPage/views/ItemsBlock/GameBlock.js","routes/UserPage/views/ItemsBlock/MovieBlock.js","routes/UserPage/views/UserLogs/LogRow/LogRow.js","routes/UserPage/views/UserLogs/LogsByDay/LogsByDay.js","routes/UserPage/views/UserLogs/UserLogs.js","routes/UserPage/views/UserLogs/index.js","routes/UserPage/views/ItemsBlock/ShowBlock.js","routes/UserPage/views/StatisticsBlock/Colors.js","routes/UserPage/views/StatisticsBlock/GenresChart/GenresChart.js","routes/UserPage/views/StatisticsBlock/YearsChart/YearsChart.js","routes/UserPage/views/StatisticsBlock/ChartBlock/ChartBlock.js","routes/UserPage/views/StatisticsBlock/StatisticsBlock.js","routes/UserPage/views/StatisticsBlock/index.js","routes/UserPage/index.js","routes/UserPage/UserPage.js","store/CurrentUserStore.ts","routes/CalendarPage/views/DayInfo/DayInfo.js","routes/CalendarPage/views/DayInfo/index.js","routes/CalendarPage/views/ReleasesList/ReleasesList.js","routes/CalendarPage/views/ReleasesList/index.js","routes/CalendarPage/CalendarPage.js","routes/CalendarPage/index.js","routes/SettingsPage/index.js","routes/SettingsPage/SettingsPage.js","routes/UnwatchedPage/views/EpisodeRow/EpisodeRow.js","routes/UnwatchedPage/views/EpisodeRow/index.js","routes/UnwatchedPage/views/ShowBlock/ShowBlock.js","routes/UnwatchedPage/views/ShowBlock/index.js","routes/UnwatchedPage/index.js","routes/UnwatchedPage/UnwatchedPage.js","routes/NotFoundPage/wrongPage.png","routes/NotFoundPage/NotFoundPage.js","routes/NotFoundPage/index.js","Routes.tsx","shared/app/Navbar/views/SearchInput/index.js","shared/app/Navbar/views/SearchInput/SearchInput.js","shared/app/Navbar/index.js","shared/app/Navbar/Navbar.js","shared/app/Footer/Footer.js","shared/app/Footer/index.js","shared/app/Sidebar/index.js","shared/app/Sidebar/Sidebar.js","shared/Modal/Modal.tsx","shared/Modal/index.ts","shared/Modals/LoginForm/index.ts","shared/Modals/LoginForm/LoginForm.tsx","shared/Modals/RegisterForm/index.ts","shared/Modals/RegisterForm/RegisterForm.tsx","shared/Modals/ResetPasswordForm/index.ts","shared/Modals/ResetPasswordForm/ResetPasswordForm.tsx","App.tsx","serviceWorker.js","index.tsx"],"names":["module","exports","BACKEND_URL","GET_TOKEN_URL","REFRESH_TOKEN_URL","REGISTRATE_URL","CONFIRM_URL","RESET_PASSWORD_URL","CONFIRM_PASSWORD_URL","GET_GAME_URL","SEARCH_GAMES_URL","SEARCH_GAMES_FAST_URL","GET_MOVIE_URL","SEARCH_MOVIES_URL","SEARCH_MOVIES_FAST_URL","GET_SHOW_URL","SEARCH_SHOWS_URL","SEARCH_SHOWS_FAST_URL","GET_UNWATCHED_EPISODES_URL","USER_INFO_URL","USER_CALENDAR_URL","SEARCH_USERS_URL","USER_SETTINGS_URL","getToken","username","password","a","axios","post","urls","res","userData","jwt_decode","data","access","user","id","user_id","email","token","refreshToken","refresh","updateToken","registration","status","confirmation","uid64","patch","resetPassword","put","confirmPassword","AuthStore","loggedIn","authState","registrateState","confirmEmailState","resetPasswordState","confirmPasswordState","tryAuth","login","auth","then","authSuccess","authFailure","localStorage","setItem","error","resetAuthorization","response","detail","removeItem","register","registerSuccess","registerFailure","result","errors","error2","confirmEmail","confirmEmailSuccess","confirmEmailFailure","resetPasswordSuccess","resetPasswordFailure","confirmPasswordSuccess","confirmPasswordFailure","checkAuth","getItem","checkAuthSuccess","checkAuthFailure","makeAutoObservable","this","PagesStore","LoginFormIsOpen","RegistrateFormIsOpen","ResetPasswordFormIsOpen","saveEpisodesBlockIsOpen","sidebarIsToggled","sidebarIsCollapsed","toggleSidebar","JSON","stringify","collapseSidebar","openLoginForm","closeLoginForm","openRegistrateForm","closeRegistrateForm","openResetPasswordForm","closeResetPasswordForm","setSaveEpisodes","HomePage","observer","props","history","useHistory","className","href","onClick","e","preventDefault","push","api","create","baseURL","interceptors","request","use","config","headers","Authorization","originalRequest","_isRetry","console","log","getGame","get","setGameStatus","gameSlug","user_info","searchGames","query","page","gamesCount","params","page_size","searchGamesFast","getGameUserInfo","slug","defaults","common","GameStore","game","gameState","userInfo","review","score","spent_time","friendsInfo","userInfoState","setStatusState","setStatusToast","requestGame","gameRequests","requestGameSuccess","requestGameFailure","statusText","requestUserInfo","requestUserInfoSuccess","requestUserInfoFailure","friends_info","setGameStatusSuccess","setGameStatusFailure","setGameReview","toast","autoClose","type","TYPE","INFO","position","setGameReviewSuccess","setGameReviewFailure","update","render","SUCCESS","ERROR","startsWith","StatusButtonGroup","statuses","onChangeStatus","userStatus","classnames","map","counter","RatingBlock","Rating","initialRating","readonly","onChange","withEye","start","stop","emptySymbol","concat","n","fullSymbol","title","quiet","intToHours","number","FriendActivity","info","window","location","origin","hidden","FriendsActivity","friendInfo","TimeToBeat","hltbInfo","gameplay_main","gameplay_main_extra","gameplay_completionist","gameplay_main_unit","gameplay_main_extra_unit","gameplay_completionist_unit","ScoreBlock","text","getColor","InputNumber","value","max","min","dataList","parseFloat","event","target","style","width","toString","length","GamePage","anyError","useParams","useState","setReview","spentTime","setSpentTime","setUserStatus","userRate","setUserRate","setClearUI","strToFloat","cleanStr","indexOf","useEffect","document","name","backgroundImage","background","active","spinner","src","poster","alt","developers","release_date","genres","platforms","hltb","playtime","metacritic","dangerouslySetInnerHTML","__html","overview","newData","hltbToDatalist","disabled","getMovie","setMovieStatus","searchMovies","searchMoviesFast","getMovieUserInfo","MovieStore","movie","movieState","requestMovie","movieRequests","requestMovieSuccess","requestMovieFailure","setMovieStatusSuccess","setMovieStatusFailure","setMovieReview","setMovieReviewSuccess","setMovieReviewFailure","MoviePage","backdrop_path","poster_path","original_name","runtime","production_companies","tagline","cast","directors","showArrows","centerMode","centerSlidePercentage","showThumbs","showStatus","showIndicators","videos","video","index","url","controls","getShow","getShowSeason","showID","seasonNumber","getShowEpisode","episodeNumber","setShowStatus","setShowSeasonStatus","setShowEpisodesStatus","episodesList","searchShows","searchShowsFast","getShowUserInfo","getShowSeasonUserInfo","seasonID","getShowEpisodeUserInfo","episodeID","getUnwatchedEpisodes","ShowStore","show","showState","showSeasons","showSeasonsState","showSeasonsUserInfo","showSeasonsUserInfoState","requestShow","showRequests","requestShowSuccess","requestShowFailure","requestSeason","requestSeasonSuccess","requestSeasonFailure","requestSeasons","requestSeasonsSuccess","requestSeasonsFailure","requestEpisode","requestEpisodeSuccess","requestEpisodeFailure","requestShowUserInfo","requestShowUserInfoSuccess","requestShowUserInfoFailure","requestSeasonUserInfo","requestSeasonUserInfoSuccess","requestSeasonUserInfoFailure","user_watched_show","episodes","episodes_user_info","requestSeasonsUserInfo","requestSeasonsUserInfoSuccess","requestSeasonsUserInfoFailure","requestEpisodeUserInfo","requestEpisodeUserInfoSuccess","requestEpisodeUserInfoFailure","setShowStatusSuccess","setShowStatusFailure","setShowReview","setShowReviewSuccess","setShowReviewFailure","setSeasonStatus","setSeasonReview","setEpisodesStatus","seasonsToUpdate","season","getShowSeasonState","getEpisodesUserInfo","episode","tmdb_id","DetailEpisodeRow","setEpisodeUserStatus","checkAll","userWatchedShow","isChecked","setIsChecked","checked","date","newDate","Date","toLocaleDateString","parseDate","air_date","season_number","episode_number","SeasonBlock","showSeason","computed","showSeasonState","showUserInfo","getEpisodeByID","open","reverse","SeasonsBlock","seasons","anySeasonLoading","toJS","sendAllEpisodes","currentValue","cbValue","getElementById","sendEpisodes","ShowPage","first_air_date","last_air_date","episode_runtime","episode_run_time","seasons_count","episodes_count","SeasonPage","show_id","chartData","setChartData","tmdb_name","vote_average","Оценка","tmdb_backdrop_path","tmdb_original_name","outline","body","clientHeight","clientWidth","height","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","dataKey","interval","tick","fill","tickLine","domain","tickCount","contentStyle","color","backgroundColor","stroke","fillOpacity","layout","EpisodePage","still_path","getUserInfo","userID","searchUsers","is_following","getUserLog","resultsOnPage","filters","deleteUserLog","logType","logID","delete","getUserFriendsLog","getUserCalendar","getUserSettings","patchUserSettings","settings","SearchStore","games","values","movies","shows","users","hints","gamesState","moviesState","showsState","usersState","searchHints","currentQuery","searchGamesHintsSuccess","searchMoviesHintsSuccess","searchShowsHintsSuccess","searchGamesSuccess","searchGamesFailure","isEnd","nextGames","nextGamesSuccess","nextGamesFailure","searchMoviesSuccess","searchMoviesFailure","results","total_pages","nextMovies","nextMoviesSuccess","nextMoviesFailure","searchShowsSuccess","searchShowsFailure","nextShows","nextShowsSuccess","nextShowsFailure","userRequests","searchUsersSuccess","searchUsersFailure","SearchCard","link","tags","SearchCardsBlock","objects","object","GameCards","useMemo","reduce","newObjects","background_image","released","mas","split","previousValue","genre","slice","tag","platform","MovieCards","ShowCards","CardUser","FriendBlock","UserCards","CategoriesTab","categories","onChangeCategory","activeCategory","children","category","SearchPage","store","queryText","setQueryText","parentRef","useRef","childRef","callback","options","root","current","rootMargin","threshold","IntersectionObserver","isIntersecting","observe","unobserve","useScroll","fetchItems","setActiveCategory","onSubmit","placeholder","ref","ConfirmPage","search","URLSearchParams","ConfirmPasswordPage","setPassword","passwordConfirm","setPasswordConfirm","htmlFor","UserStore","userLogs","userFriendsLogs","userState","userLogsState","userFriendsLogsState","setUserStatusState","requestUser","requestUserSuccess","requestUserFailure","requestUserLogs","requestLogsSuccess","requestLogsFailure","deleteUserLogSuccess","deleteUserLogFailure","newLogs","filter","requestUserFriendsLogs","requestFriendsLogsSuccess","requestFriendsLogsFailure","setUserStatusSuccess","setUserStatusFailure","is_followed","parseInt","SelectMulti","classNamePrefix","isMulti","ItemRow","fields","display","undefined","find","field","key","getWindowDimensions","innerWidth","innerHeight","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","addEventListener","removeEventListener","ItemBlock","items","setQuery","pageSize","setPageSize","setPage","filteredItems","setFilteredItems","sort","setSort","statusFilters","setStatusFilters","collapse","setCollapse","item","toLowerCase","includes","b","field1","field2","isAsc","aria-label","obj","total","separator","filename","GameBlock","rawg_slug","rawg_name","rawg_backdrop_path","label","MovieBlock","LogRow","showUsername","onDeleteLog","created","toLocaleTimeString","hour","minute","action","actionResult","translateActionType","action_type","action_result","actionType","translateType","parent_name","nameToLink","target_id","actionResultToStr","UserLogs","logs","currentUser","logsByDay","setLogsByDay","i","getDay","groupLogsByDay","dayLog","year","getFullYear","month","day","logsType","currentPage","setCurrentPage","setFilters","LogsByDay","count","ShowBlock","COLORS","ChartBlock","Процент","spent_time_percent","test","navigator","userAgent","tickMargin","itemStyle","borderRadius","cursor","entry","Math","angle","YearsChart","maxCount","setMaxCount","newMaxCount","array","Количество","allowDataOverflow","stats","total_spent_time","cx","cy","outerRadius","labelLine","minAngle","verticalAlign","horizontalAlign","StatisticsBlock","marginBottom","GenresChart","years","UserPage","isCurrentUser","useQueryParam","withDefault","StringParam","lastActivity","setLastActivity","last_activity","toLocaleString","is_available","marginRight","followed_users","CurrentUserStore","calendar","unwatched","calendarState","settingsState","unwatchedState","saveSettingsState","requestCalendar","requestCalendarSuccess","requestCalendarFailure","requestSettings","requestSettingsSuccess","requestSettingsFailure","requestUnwatched","requestUnwatchedSuccess","requestUnwatchedFailure","patchSettings","patchSettingsSuccess","patchSettingsFailure","patchSettingsReset","setTimeout","DayInfo","weekday","rawg_id","tmdb_show","tmdb_season_number","tmdb_episode_number","ReleasesList","myStyle","border","getContentForDay","getIconForDay","remainedDays","days","now","diff","getTime","getUTCDay","dateDiff","lineColor","icon","cardHeaderStyle","iconStyle","fontSize","bubbleStyle","marginTop","titleStyle","subtitleStyle","pad","formatDate","getMonth","getDate","CalendarPage","currentDay","setCurrentDay","styles","calendarPage","pageHeader","defaultView","minDetail","locale","minDate","tileContent","view","calendarDay","calendarDayBody","calendarDayGames","calendarDayHidden","calendarDayMovies","calendarDayEpisodes","Object","entries","SettingsPage","gameNotifInput","setGameNotifInput","movieNotifInput","setMovieNotifInput","showNotifInput","setShowNotifInput","privacySelect","setPrivacySelect","success","receive_games_releases","receive_movies_releases","receive_episodes_releases","privacy","DetailedEpisodeRow","EpisodeRow","setShowEpisodeUserStatus","tmdb_release_date","getUserSeasonOpen","localData","onToggle","isOpen","class","UnwatchedPage","NotFoundPage","setAngle","requestAnimationFrame","transform","image","Routes","exact","path","component","React","Component","SearchInput","hint","rawg_release_date","substr","Navbar","toggleIfSmallScreen","Footer","Sidebar","toggleSidebarIfSmallScreen","collapsed","iconShape","Modal","toggle","LoginForm","setLogin","onPasswordRecovery","onRegistration","RegisterForm","setEmail","ResetPasswordForm","App","ReactRouterRoute","Route","hideProgressBar","newestOnTop","closeOnClick","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","ReactDOM","URL","process","fetch","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.be63dda3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"calendarPage\":\"calendar-page_calendarPage__1wN5L\",\"pageHeader\":\"calendar-page_pageHeader__1j_G9\",\"calendarDay\":\"calendar-page_calendarDay__3400-\",\"calendarDayBody\":\"calendar-page_calendarDayBody__10W9c\",\"calendarDayGames\":\"calendar-page_calendarDayGames__fvtg5\",\"calendarDayMovies\":\"calendar-page_calendarDayMovies__2OOOb\",\"calendarDayEpisodes\":\"calendar-page_calendarDayEpisodes__3zxDA\",\"calendarDayHidden\":\"calendar-page_calendarDayHidden__3e3Pq\"};","/**Адрес сервера*/\r\nexport const BACKEND_URL = \"https://interests.host/api/\";\r\n/**Адрес получения токена */\r\nexport const GET_TOKEN_URL = BACKEND_URL + \"users/auth/login/\";\r\n/**Адрес обновления токена */\r\nexport const REFRESH_TOKEN_URL = BACKEND_URL + \"users/auth/refresh-token/\";\r\n/**Адрес регистрации */\r\nexport const REGISTRATE_URL = BACKEND_URL + \"users/auth/signup/\";\r\n/**Адрес подтверждения почты */\r\nexport const CONFIRM_URL = BACKEND_URL + \"users/auth/confirm_email/\";\r\n/**Адрес сброса пароля */\r\nexport const RESET_PASSWORD_URL = BACKEND_URL + \"users/auth/password_reset/\";\r\n/**Адрес подтверждения сброса пароля */\r\nexport const CONFIRM_PASSWORD_URL = BACKEND_URL + \"users/auth/confirm_password_reset/\";\r\n/**Адрес запроса игры */\r\nexport const GET_GAME_URL = \"games/game/\";\r\n/**Адрес поиска игр */\r\nexport const SEARCH_GAMES_URL = \"games/search/rawg/\";\r\n/**Адрес быстрого поиска игр */\r\nexport const SEARCH_GAMES_FAST_URL = \"games/search/\";\r\n/**Адрес запроса фильма */\r\nexport const GET_MOVIE_URL = \"movies/movie/\";\r\n/**Адрес поиска фильмов */\r\nexport const SEARCH_MOVIES_URL = \"movies/search/tmdb/\";\r\n/**Адрес быстрого поиска игр */\r\nexport const SEARCH_MOVIES_FAST_URL = \"movies/search/\";\r\n/**Адрес запроса сериала */\r\nexport const GET_SHOW_URL = \"shows/show/\";\r\n/**Адрес поиска сериалов */\r\nexport const SEARCH_SHOWS_URL = \"shows/search/tmdb/\";\r\n/**Адрес быстрого поиска сериалов */\r\nexport const SEARCH_SHOWS_FAST_URL = \"shows/search/\";\r\n/**Адрес запроса непросмотренных серий */\r\nexport const GET_UNWATCHED_EPISODES_URL = \"shows/show/unwatched_episodes/\";\r\n/**Адрес получения информации о пользователе */\r\nexport const USER_INFO_URL = \"users/user/\";\r\n/**Адрес получения календаря релизов пользователя */\r\nexport const USER_CALENDAR_URL = \"users/user/release_calendar/\";\r\n/**Адрес поиска пользователей */\r\nexport const SEARCH_USERS_URL = \"users/search/\";\r\n/**Адрес сохранения настроек */\r\nexport const USER_SETTINGS_URL = \"users/user/user_settings/\";\r\n","import axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport * as urls from \"../settings\";\r\n\r\n/**\r\n * ПОлучение токена авторизации. Токен сохраняется в localStorage\r\n * @param {string} username Имя пользователя\r\n * @param {string} password Пароль\r\n */\r\nexport async function getToken(username, password) {\r\n\tconst res = await axios.post(urls.GET_TOKEN_URL, {\r\n\t\tusername: username,\r\n\t\tpassword: password,\r\n\t});\r\n\r\n\tlet userData = jwt_decode(res.data.access);\r\n\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\treturn { token: res.data.access, refreshToken: res.data.refresh, user: user };\r\n}\r\n\r\n/**\r\n * Функция обновления токена\r\n */\r\nexport async function updateToken(refreshToken) {\r\n\tconst res = await axios.post(urls.REFRESH_TOKEN_URL, { refresh: refreshToken });\r\n\tlet userData = jwt_decode(res.data.access);\r\n\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\treturn { token: res.data.access, user: user };\r\n}\r\n\r\nexport async function registration(username, email, password) {\r\n\tconst res = await axios.post(urls.REGISTRATE_URL, {\r\n\t\tusername: username,\r\n\t\temail: email,\r\n\t\tpassword: password,\r\n\t});\r\n\tlet data = res.data;\r\n\tdata.status = res.status;\r\n\treturn data;\r\n}\r\n\r\nexport async function confirmation(uid64, token) {\r\n\tconst res = await axios.patch(urls.CONFIRM_URL + \"?uid64=\" + uid64 + \"&token=\" + token);\r\n\treturn res;\r\n}\r\n\r\nexport async function resetPassword(email) {\r\n\tconst res = await axios.put(urls.RESET_PASSWORD_URL, { email: email });\r\n\treturn res;\r\n}\r\n\r\nexport async function confirmPassword(token, password) {\r\n\tconst res = await axios.patch(urls.CONFIRM_PASSWORD_URL + \"?reset_token=\" + token, { password: password });\r\n\treturn res;\r\n}\r\n","import { makeAutoObservable } from 'mobx';\r\n//import remotedev from 'mobx-remotedev';\r\nimport * as auth from '../services/jwtAuth';\r\n\r\ntype IPendingState = 'done' | 'pending' | string;\r\n\r\nexport interface ICurrentUser {\r\n\tlogin?: string,\r\n\tusername?: string,\r\n\temail?: string,\r\n\tid?: number | null,\r\n}\r\n\r\ninterface IAuthState {\r\n\tloggedIn: boolean,\r\n\tuser: ICurrentUser,\r\n\tauthState: IPendingState,\r\n\tregistrateState: IPendingState,\r\n\tconfirmEmailState: IPendingState,\r\n\tresetPasswordState: IPendingState,\r\n\tconfirmPasswordState: IPendingState,\r\n}\r\n\r\nclass Auth implements IAuthState {\r\n\tloggedIn = false;\r\n\tuser: ICurrentUser = {\r\n\t\tusername: '',\r\n\t\temail: '',\r\n\t\tid: null,\r\n\t};\r\n\tauthState = '';\r\n\tregistrateState = '';\r\n\tconfirmEmailState = '';\r\n\tresetPasswordState = '';\r\n\tconfirmPasswordState = '';\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\ttryAuth = async (login: string, password: string) => {\r\n\t\tthis.authState = 'pending';\r\n\t\tauth.getToken(login, password).then(this.authSuccess, this.authFailure);\r\n\t};\r\n\tauthSuccess = (res: {refreshToken: string, token: string, user: ICurrentUser}) => {\r\n\t\tlocalStorage.setItem('refreshToken', res.refreshToken);\r\n\t\tlocalStorage.setItem('token', res.token);\r\n\t\tthis.loggedIn = true;\r\n\t\tthis.user = res.user;\r\n\t\tthis.authState = 'done';\r\n\t};\r\n\tauthFailure = async (error: any) => {\r\n\t\tawait this.resetAuthorization();\r\n\t\tthis.authState = 'error: ' + error.response.data.detail;\r\n\t};\r\n\r\n\tresetAuthorization = async () => {\r\n\t\tthis.loggedIn = false;\r\n\t\tthis.user = { username: '', id: null, email: '' };\r\n\t\tlocalStorage.removeItem('refreshToken');\r\n\t\tlocalStorage.removeItem('token');\r\n\t};\r\n\r\n\tregister = async (username: string, email: string, password: string) => {\r\n\t\tthis.registrateState = 'pending';\r\n\t\tauth.registration(username, email, password).then(this.registerSuccess, this.registerFailure);\r\n\t};\r\n\tregisterSuccess = (result: {username: string, email: string}) => {\r\n\t\tthis.user = { login: result.username, email: result.email };\r\n\t\tthis.registrateState = 'done';\r\n\t};\r\n\tregisterFailure = (error: any) => {\r\n\t\tlet errors = '';\r\n\t\tfor (const error2 in error.response.data) {\r\n\t\t\terrors += error.response.data[error2] + '\\n';\r\n\t\t}\r\n\t\tthis.registrateState = 'error: ' + errors;\r\n\t};\r\n\r\n\tconfirmEmail = async (uid64: string, token: string) => {\r\n\t\tthis.confirmEmailState = 'pending';\r\n\t\tauth.confirmation(uid64, token).then(this.confirmEmailSuccess, this.confirmEmailFailure);\r\n\t};\r\n\tconfirmEmailSuccess = () => {\r\n\t\tthis.confirmEmailState = 'done';\r\n\t};\r\n\tconfirmEmailFailure = (error: any) => {\r\n\t\tlet errors = '';\r\n\t\tfor (const error2 in error.response.data) {\r\n\t\t\terrors += error.response.data[error2] + '\\n';\r\n\t\t}\r\n\t\tthis.confirmEmailState = 'error: ' + errors;\r\n\t};\r\n\r\n\tresetPassword = async (email: string) => {\r\n\t\tthis.resetPasswordState = 'pending';\r\n\t\tauth.resetPassword(email).then(this.resetPasswordSuccess, this.resetPasswordFailure);\r\n\t};\r\n\tresetPasswordSuccess = () => {\r\n\t\tthis.resetPasswordState = 'done';\r\n\t};\r\n\tresetPasswordFailure = (error: string) => {\r\n\t\tthis.resetPasswordState = 'error: ' + error;\r\n\t};\r\n\r\n\tconfirmPassword = async (token: string, password: string) => {\r\n\t\tthis.confirmPasswordState = '';\r\n\t\tauth.confirmPassword(token, password).then(this.confirmPasswordSuccess, this.confirmPasswordFailure);\r\n\t};\r\n\tconfirmPasswordSuccess = () => {\r\n\t\tthis.confirmPasswordState = 'done';\r\n\t};\r\n\tconfirmPasswordFailure = (error: any) => {\r\n\t\tlet errors = '';\r\n\t\tfor (const error2 in error.response.data) {\r\n\t\t\terrors += error.response.data[error2] + '\\n';\r\n\t\t}\r\n\t\tthis.confirmPasswordState = 'error: ' + errors;\r\n\t};\r\n\r\n\t/**\r\n\t * Проверка авторизации\r\n\t */\r\n\tcheckAuth = async () => {\r\n\t\tthis.authState = 'pending';\r\n\t\tauth.updateToken(localStorage.getItem('refreshToken')).then(this.checkAuthSuccess, this.checkAuthFailure);\r\n\t};\r\n\tcheckAuthSuccess = (res: {token: string, user: ICurrentUser}) => {\r\n\t\tlocalStorage.setItem('token', res?.token);\r\n\t\tthis.loggedIn = true;\r\n\t\tthis.user = res.user;\r\n\t\tthis.authState = 'done';\r\n\t};\r\n\tcheckAuthFailure = () => {\r\n\t\tthis.loggedIn = false;\r\n\t\tthis.user = { username: '', id: null, email: '' };\r\n\t\tlocalStorage.removeItem('token');\r\n\t\tthis.authState = 'done';\r\n\t};\r\n\r\n\tget currentUser() {\r\n\t\treturn this.user;\r\n\t}\r\n}\r\n\r\nconst AuthStore = new Auth();\r\n//export default remotedev(AuthStore, { name: 'Auth' });\r\nexport default AuthStore;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\n\r\nexport interface IPagesState {\r\n\tLoginFormIsOpen: boolean;\r\n\tRegistrateFormIsOpen: boolean;\r\n\tResetPasswordFormIsOpen: boolean;\r\n\tsaveEpisodesBlockIsOpen: boolean;\r\n\tsidebarIsToggled: boolean;\r\n\tsidebarIsCollapsed: boolean;\r\n}\r\n\r\nclass Pages implements IPagesState{\r\n\tLoginFormIsOpen = false;\r\n\tRegistrateFormIsOpen = false;\r\n\tResetPasswordFormIsOpen = false;\r\n\tsaveEpisodesBlockIsOpen = false;\r\n\tsidebarIsToggled = localStorage.getItem(\"sidebarToggled\") === \"true\";\r\n\tsidebarIsCollapsed = localStorage.getItem(\"sidebarCollapsed\") === \"true\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\ttoggleSidebar = async () => {\r\n\t\tthis.sidebarIsToggled = !this.sidebarIsToggled;\r\n\t\tif (!this.sidebarIsToggled) this.sidebarIsCollapsed = false;\r\n\t\tlocalStorage.setItem(\"sidebarToggled\", JSON.stringify(this.sidebarIsToggled));\r\n\t};\r\n\r\n\tcollapseSidebar = async () => {\r\n\t\tthis.sidebarIsCollapsed = !this.sidebarIsCollapsed;\r\n\t\tlocalStorage.setItem(\"sidebarCollapsed\", JSON.stringify(this.sidebarIsCollapsed));\r\n\t};\r\n\r\n\topenLoginForm = async () => {\r\n\t\tthis.LoginFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseLoginForm = async () => {\r\n\t\tthis.LoginFormIsOpen = false;\r\n\t};\r\n\r\n\topenRegistrateForm = async () => {\r\n\t\tthis.RegistrateFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseRegistrateForm = async () => {\r\n\t\tthis.RegistrateFormIsOpen = false;\r\n\t};\r\n\r\n\topenResetPasswordForm = async () => {\r\n\t\tthis.ResetPasswordFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseResetPasswordForm = async () => {\r\n\t\tthis.ResetPasswordFormIsOpen = false;\r\n\t};\r\n\r\n\tsetSaveEpisodes = (status: boolean) => (this.saveEpisodesBlockIsOpen = status);\r\n}\r\n\r\nconst PagesStore = new Pages();\r\n//export default remotedev(PagesStore, { name: \"Pages\" });\r\nexport default PagesStore;\r\n","import HomePage from \"./HomePage\";\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from '../../store/AuthStore';\r\nimport PagesStore from '../../store/PagesStore';\r\nimport \"./home-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst HomePage = observer((props) => {\r\n\tlet history = useHistory();\r\n\tconst { user, loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\r\n\treturn (\r\n\t\t<div className='home-page'>\r\n\t\t\t<div className='home-page__body'>\r\n\t\t\t\t<h1 className='home-page__header'>Добро пожаловать на Interests!</h1>\r\n\t\t\t\t<h3 className='home-page__header-secondary'>Что это?</h3>\r\n\t\t\t\t<p className='home-page__text'>Interests - сайт для отслеживания фильмов, сериалов и видеоигр. </p>\r\n\t\t\t\t<h3 className='home-page__header-secondary'>Какой функционал у сайта?</h3>\r\n\t\t\t\t<p className='home-page__text'>Здесь можно вести персональный список интересного вам контента, выставлять ему оценки и писать отзывы, а также отслеживать активность ваших друзей.</p>\r\n\t\t\t\t<p className='home-page__text'>\r\n\t\t\t\t\tВ{\" \"}\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\tclassName='home-page__link'\r\n\t\t\t\t\t\thref={\"/user/\" + user?.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\thistory.push(\"/user/\" + user?.id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tпрофиле\r\n\t\t\t\t\t</a>{\" \"}\r\n\t\t\t\t\tсобраны все добавленные игры, фильмы и сериалы, а также ваша персональная статистика.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='home-page__text'>\r\n\t\t\t\t\tC помощью{\" \"}\r\n\t\t\t\t\t<a className='home-page__link' href='/search/example'>\r\n\t\t\t\t\t\tпоиска\r\n\t\t\t\t\t</a>{\" \"}\r\n\t\t\t\t\tможно найти интересущий вас тайтл или человека.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='home-page__text'>\r\n\t\t\t\t\tВ{\" \"}\r\n\t\t\t\t\t<a className='home-page__link' href={\"/calendar/\"}>\r\n\t\t\t\t\t\tкалендаре\r\n\t\t\t\t\t</a>{\" \"}\r\n\t\t\t\t\tотображены все грядущие релизы из вашего списка. Вы можете подписаться на email уведомления о новых релизах в{\" \"}\r\n\t\t\t\t\t<a className='home-page__link' href={\"/settings/\"}>\r\n\t\t\t\t\t\tнастройках\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='home-page__text'>\r\n\t\t\t\t\tРаздел{\" \"}\r\n\t\t\t\t\t<a className='home-page__link' href={\"/unwatched/\"}>\r\n\t\t\t\t\t\tнепросмотренное\r\n\t\t\t\t\t</a>{\" \"}\r\n\t\t\t\t\tпредназначен для отслеживания непрсмотренных серий ваших сериалов.\r\n\t\t\t\t</p>\r\n\t\t\t\t<h3 className='home-page__header-secondary'>Что такое статус контента</h3>\r\n\t\t\t\t<p className='home-page__text'>\r\n\t\t\t\t\tНа странице фильма, сериала или игры есть блок кнопок, состоящий из различных статусов. При выборе любого статуса, кроме \"Не смотрел\" или \"Не играл\", тайтл добавляется к вам в профиль.\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='home-page__text'>\r\n\t\t\t\t\tВ зависимости от статуса, тайтл будет по разному восприниматься системой. Например, тайтлы со статусом \"Буду смотреть\" не учитываются при подсчете статистики. Или сериалы со статусом\r\n\t\t\t\t\t\"Дропнул\" не будут выводиться в разделах Непросмотренное и Календарь.\r\n\t\t\t\t</p>\r\n\t\t\t\t<h3 className='home-page__header-secondary'>Зачем нужна подписка на пользователя</h3>\r\n\t\t\t\t<p className='home-page__text'>После подписки на пользователя вы будете видеть активность всех своих друзей в разделе Профиль, во вкладке Друзья.</p>\r\n\t\t\t\t<p className='home-page__text'>На странице любого тайтла будут отображены отзывы ваших друзей, если они оценили его ранее.</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default HomePage;\r\n","import axios from \"axios\";\r\nimport { BACKEND_URL, REFRESH_TOKEN_URL } from \"../settings\";\r\n\r\nconst api = axios.create({\r\n\tbaseURL: BACKEND_URL,\r\n});\r\n\r\napi.interceptors.request.use((config) => {\r\n\tif (localStorage.getItem(\"token\")) config.headers.Authorization = `Bearer ${localStorage.getItem(\"token\")}`;\r\n\treturn config;\r\n});\r\n\r\napi.interceptors.response.use(\r\n\t(config) => {\r\n\t\treturn config;\r\n\t},\r\n\tasync (error) => {\r\n\t\tconst originalRequest = error.config;\r\n\t\tif (error.response.status === 401 && error.config && !error.config._isRetry) {\r\n\t\t\toriginalRequest._isRetry = true;\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await axios.post(REFRESH_TOKEN_URL, {\r\n\t\t\t\t\trefresh: localStorage.getItem(\"refreshToken\"),\r\n\t\t\t\t});\r\n\t\t\t\tlocalStorage.setItem(\"token\", response.data.access);\r\n\t\t\t\treturn api.request(originalRequest);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(\"НЕ АВТОРИЗОВАН\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tthrow error;\r\n\t}\r\n);\r\n\r\nexport default api;\r\n","import api from \"../http\";\r\nimport { GET_GAME_URL, SEARCH_GAMES_URL, SEARCH_GAMES_FAST_URL } from \"../settings\";\r\n\r\napi.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об игре\r\n * @param {string} id ID игры\r\n */\r\nexport async function getGame(id) {\r\n\tconst res = await api.get(GET_GAME_URL + id + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса игры\r\n * @param {object} user_info Статус игры\r\n * @param {string} gameSlug Слаг игры\r\n */\r\nexport async function setGameStatus(gameSlug, user_info) {\r\n\tconst res = await api.put(GET_GAME_URL + gameSlug + \"/\", user_info);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск игр\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchGames(query, page, gamesCount) {\r\n\tconst res = await api.get(SEARCH_GAMES_URL, { params: { query: query, page: page, page_size: gamesCount } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск локльных игр\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchGamesFast(query) {\r\n\tconst res = await api.get(SEARCH_GAMES_FAST_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для игры\r\n * @param {string} slug slug игры\r\n * @param {int} page страница\r\n */\r\nexport async function getGameUserInfo(slug) {\r\n\tconst res = await api.get(GET_GAME_URL + slug + \"/user_info/\");\r\n\treturn res.data;\r\n}\r\n","import { makeAutoObservable } from 'mobx';\r\n//import remotedev from 'mobx-remotedev';\r\nimport * as gameRequests from '../services/gameRequests';\r\nimport { toast } from 'react-toastify';\r\n\r\ntype IPendingState = 'done' | 'pending' | string;\r\n\r\nexport interface IGameUserInfo {\r\n\tstatus: string,\r\n\treview: string,\r\n\tscore: number,\r\n\tspent_time: number,\r\n}\r\n\r\nexport interface IGame {\r\n\tslug: string,\r\n\t[key: string]: any,\r\n}\r\n\r\nexport interface IGameState {\r\n\tgame: IGame,\r\n\tgameState: IPendingState,\r\n\tuserInfo: IGameUserInfo,\r\n\tfriendsInfo: any,\r\n\tuserInfoState: IPendingState,\r\n\tsetStatusState: IPendingState,\r\n\tsetStatusToast: any,\r\n}\r\n\r\nclass Game implements IGameState{\r\n\tgame: IGame = {slug: ''};\r\n\tgameState = 'done';\r\n\r\n\tuserInfo = { status: '', review: '', score: 0, spent_time: 0 };\r\n\tfriendsInfo = [];\r\n\tuserInfoState = 'done';\r\n\r\n\tsetStatusState = 'done';\r\n\tsetStatusToast: any;\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestGame = async (id: string) => {\r\n\t\tthis.gameState = 'pending';\r\n\t\tgameRequests.getGame(id).then(this.requestGameSuccess, this.requestGameFailure);\r\n\t};\r\n\trequestGameSuccess = (result: IGame) => {\r\n\t\tthis.game = result;\r\n\t\tthis.gameState = 'done';\r\n\t};\r\n\trequestGameFailure = (error: any) => {\r\n\t\tthis.gameState = 'error: ' + error.response.statusText;\r\n\t};\r\n\r\n\trequestUserInfo = async (slug: string) => {\r\n\t\tthis.userInfoState = 'pending';\r\n\t\tgameRequests.getGameUserInfo(slug).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\r\n\t};\r\n\trequestUserInfoSuccess = (result: any) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = 'done';\r\n\t};\r\n\trequestUserInfoFailure = (error: string) => {\r\n\t\tthis.userInfoState = 'error: ' + error;\r\n\t};\r\n\r\n\tsetGameStatus = async (userInfo: IGameUserInfo) => {\r\n\t\tthis.setStatusState = 'pending';\r\n\t\tgameRequests.setGameStatus(this.game.slug, userInfo).then(this.setGameStatusSuccess, this.setGameStatusFailure);\r\n\t};\r\n\tsetGameStatusSuccess = () => {\r\n\t\tthis.setStatusState = 'done';\r\n\t};\r\n\tsetGameStatusFailure = (error: string) => {\r\n\t\tthis.setStatusState = 'error: ' + error;\r\n\t};\r\n\r\n\tsetGameReview = async (userInfo: IGameUserInfo) => {\r\n\t\tthis.setStatusState = 'pendingReview';\r\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\r\n\t\tgameRequests.setGameStatus(this.game.slug, userInfo).then(this.setGameReviewSuccess, this.setGameReviewFailure);\r\n\t};\r\n\tsetGameReviewSuccess = () => {\r\n\t\ttoast.update(this.setStatusToast, { render: 'Отзыв сохранен!', type: toast.TYPE.SUCCESS, autoClose: 1000 });\r\n\t\tthis.setStatusState = 'done';\r\n\t};\r\n\tsetGameReviewFailure = (error: string) => {\r\n\t\ttoast.update(this.setStatusToast, { render: 'Ошибка сохранения отзыва!', type: toast.TYPE.ERROR, autoClose: 1000 });\r\n\t\tthis.setStatusState = 'error: ' + error;\r\n\t};\r\n\r\n\tget anyError() {\r\n\t\tif (this.gameState.startsWith('error:')) return this.gameState;\r\n\t\tif (this.userInfoState.startsWith('error:')) return this.userInfoState;\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nconst GameStore = new Game();\r\n//export default remotedev(GameStore, { name: 'Game' });\r\nexport default GameStore;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport \"./status-button-group.sass\";\r\n\r\nfunction StatusButtonGroup({ statuses, onChangeStatus, userStatus, className }) {\r\n\treturn (\r\n\t\t<div className={classnames(\"content-statuses\", className)}>\r\n\t\t\t{statuses.map((status, counter) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={classnames(\"content-statuses__content-status\", userStatus === status ? \"content-statuses__content-status_active\" : \"\")}\r\n\t\t\t\t\tkey={status}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonChangeStatus(status);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{status}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default StatusButtonGroup;\r\n","import StatusButtonGroup from \"./StatusButtonGroup\";\r\n\r\nexport default StatusButtonGroup;\r\n","import React from \"react\";\r\nimport { FaStar, FaRegStar, FaEyeSlash, FaEye } from \"react-icons/fa\";\r\nimport Rating from \"react-rating\";\r\n\r\nfunction RatingBlock({ initialRating, readonly, onChange, className, withEye }) {\r\n\treturn (\r\n\t\t<Rating\r\n\t\t\tstart={withEye ? -1 : 0}\r\n\t\t\tstop={10}\r\n\t\t\temptySymbol={(withEye ? [<FaEyeSlash />] : []).concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <FaRegStar />))}\r\n\t\t\tfullSymbol={(withEye ? [<FaEye />] : []).concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <FaStar title={n} />))}\r\n\t\t\tinitialRating={initialRating}\r\n\t\t\treadonly={readonly}\r\n\t\t\tonChange={onChange}\r\n\t\t\tclassName={className}\r\n\t\t\tquiet\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default RatingBlock;\r\n","import Rating from \"./Rating\";\r\n\r\nexport default Rating;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport classnames from \"classnames\";\r\nimport Rating from '../../../Rating';\r\nimport \"./friend-activity.sass\";\r\n\r\nfunction FriendActivity({ info, className }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className={classnames(\"friend-activity\", className)}>\r\n\t\t\t<h5 className='friend-activity__user'>\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={window.location.origin + \"/user/\" + info.user.id}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\thistory.push(\"/user/\" + info.user.id);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{info.user.username}\r\n\t\t\t\t</a>\r\n\t\t\t</h5>\r\n\t\t\t<div className='friend-activity__info'>\r\n\t\t\t\t<Rating initialRating={info.score} className='friend-activity__info-text' readonly={true} />\r\n\t\t\t\t<p className='friend-activity__info-text'>Статус: {info.status} </p>\r\n\t\t\t\t<p className='friend-activity__info-text' hidden={!info.spent_time}>\r\n\t\t\t\t\tВремя проходения: {info.spent_time} {intToHours(info.spent_time)}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='friend-activity__info-text' hidden={info.review === \"\"}>\r\n\t\t\t\t\tОтзыв: {info.review}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default FriendActivity;\r\n","import FriendActivity from \"./FriendActivity\";\r\n\r\nexport default FriendActivity;\r\n","import React from \"react\";\r\nimport FriendActivity from \"./views/FriendActivity\";\r\n\r\nfunction FriendsActivity({ info }) {\r\n\treturn (\r\n\t\t<div className='friends-activity'>\r\n\t\t\t{info?.map((friendInfo) => (\r\n\t\t\t\t<FriendActivity info={friendInfo} key={friendInfo.user.id} className='friends-activity__element' />\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FriendsActivity;\r\n","import FriendsActivity from \"./FriendsActivity\";\r\n\r\nexport default FriendsActivity;\r\n","import React from \"react\";\r\nimport { MdAccessTime } from \"react-icons/md\";\r\nimport \"./time-to-beat.sass\";\r\n\r\nfunction TimeToBeat({ hltbInfo }) {\r\n\treturn (\r\n\t\t<div className='time-to-beat' hidden={!hltbInfo || hltbInfo === \"0 часов\" || (hltbInfo?.gameplay_main < 0 && hltbInfo?.gameplay_main_extra < 0 && hltbInfo?.gameplay_completionist < 0)}>\r\n\t\t\t<p className='time-to-beat__element'>Время прохождения: </p>\r\n\t\t\t<div hidden={hltbInfo?.gameplay_main === -1} className='time-to-beat__element'>\r\n\t\t\t\t<MdAccessTime className='time-to-beat__icon time-to-beat__icon_green' title={\"Главный сюжет\"} />\r\n\t\t\t\t{hltbInfo?.gameplay_main ? hltbInfo?.gameplay_main : hltbInfo} {hltbInfo?.gameplay_main_unit}\r\n\t\t\t</div>\r\n\t\t\t<div hidden={hltbInfo?.gameplay_main_extra === -1} className='time-to-beat__element'>\r\n\t\t\t\t<MdAccessTime className='time-to-beat__icon time-to-beat__icon_yellow' title={\"Главный сюжет + побочные задания\"} />\r\n\t\t\t\t{hltbInfo?.gameplay_main_extra} {hltbInfo?.gameplay_main_extra_unit}\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!hltbInfo || hltbInfo?.gameplay_completionist === -1} className='time-to-beat__element'>\r\n\t\t\t\t<MdAccessTime className='time-to-beat__icon time-to-beat__icon_red' title={\"Полное прохождение\"} />\r\n\t\t\t\t{hltbInfo?.gameplay_completionist} {hltbInfo?.gameplay_completionist_unit}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TimeToBeat;\r\n","import TimeToBeat from \"./TimeToBeat\";\r\n\r\nexport default TimeToBeat;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport \"./score-block.sass\";\r\n\r\nfunction ScoreBlock({ score, text, className }) {\r\n\tfunction getColor(score) {\r\n\t\tswitch (true) {\r\n\t\t\tcase score >= 80:\r\n\t\t\t\treturn \"green\";\r\n\t\t\tcase score >= 60 && score < 80:\r\n\t\t\t\treturn \"yellow\";\r\n\t\t\tcase score < 60:\r\n\t\t\t\treturn \"red\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"green\";\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div hidden={!score} className={classnames(\"score-block\", className)}>\r\n\t\t\t<div className={classnames(\"score-block__body\", \"score-block__body_\" + getColor(score))}>\r\n\t\t\t\t<p>{score}</p>\r\n\t\t\t</div>\r\n\t\t\t<p className='score-block__text'>{text}</p>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ScoreBlock;\r\n","import ScoreBlock from \"./ScoreBlock\";\r\n\r\nexport default ScoreBlock;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport \"./input-number.sass\";\r\n\r\nfunction InputNumber({ value, max, min, onChange, className, dataList }) {\r\n\treturn (\r\n\t\t<div className={classnames(\"input-number\", className)}>\r\n\t\t\t<button\r\n\t\t\t\tclassName='input-number__minus'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (!min || parseFloat(value) > min + 1) onChange(parseFloat(value) - 1);\r\n\t\t\t\t}}>\r\n\t\t\t\t-\r\n\t\t\t</button>\r\n\t\t\t<input\r\n\t\t\t\ttype='number'\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tmax={max ? max : \"\"}\r\n\t\t\t\tmin={min ? min : \"\"}\r\n\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\tif ((!min || event.target.value > min) && (!max || event.target.value < max)) onChange(parseFloat(event.target.value));\r\n\t\t\t\t}}\r\n\t\t\t\tclassName='input-number__input'\r\n\t\t\t\tstyle={{ width: `${value.toString().length * 15}px` }}\r\n\t\t\t/>\r\n\t\t\t<button\r\n\t\t\t\tclassName='input-number__plus'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (!max || value < max - 1) onChange(parseFloat(value) + 1);\r\n\t\t\t\t}}>\r\n\t\t\t\t+\r\n\t\t\t</button>\r\n\t\t\t<div className='input-number__hints'>\r\n\t\t\t\t{dataList?.map((data, counter) => (\r\n\t\t\t\t\t<div key={counter} onClick={() => onChange(parseFloat(data))} className='input-number__hint'>\r\n\t\t\t\t\t\t{data}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default InputNumber;\r\n","import InputNumber from \"./InputNumber\";\r\n\r\nexport default InputNumber;\r\n","import GamePage from \"./GamePage\";\r\n\r\nexport default GamePage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport GameStore from '../../store/GameStore';\r\nimport AuthStore from '../../store/AuthStore';\r\nimport PagesStore from '../../store/PagesStore';\r\nimport StatusButtonGroup from '../../shared/StatusButtonGroup';\r\nimport FriendsActivity from '../../shared/FriendsActivity';\r\nimport TimeToBeat from './views/TimeToBeat';\r\nimport ScoreBlock from '../../shared/ScoreBlock';\r\nimport Rating from '../../shared/Rating';\r\nimport InputNumber from '../../shared/InputNumber';\r\n\r\nimport \"./game-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst GamePage = observer((props) => {\r\n\tconst { game, gameState, requestGame, setGameStatus, setGameReview, userInfo, friendsInfo, userInfoState, requestUserInfo, anyError } = GameStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [spentTime, setSpentTime] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не играл\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClearUI();\r\n\t\t\trequestGame(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestGame]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, loggedIn]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = game.name;\r\n\t}, [game]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetSpentTime(userInfo.spent_time);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (anyError) toast.error(anyError);\r\n\t}, [anyError]);\r\n\r\n\tfunction setClearUI() {\r\n\t\tsetReview(\"\");\r\n\t\tsetSpentTime(\"\");\r\n\t\tsetUserStatus(\"Не играл\");\r\n\t\tsetUserRate(0);\r\n\t}\r\n\r\n\tfunction strToFloat(text) {\r\n\t\tlet cleanStr = text;\r\n\t\tif (cleanStr && cleanStr !== -1)\r\n\t\t\tif (cleanStr.indexOf(\"½\") + 1) return parseFloat(cleanStr) + 0.5;\r\n\t\t\telse return parseFloat(cleanStr);\r\n\t}\r\n\r\n\tfunction hltbToDatalist(hltbInfo) {\r\n\t\tlet newData = [];\r\n\t\tif (!(!hltbInfo || hltbInfo === \"0 часов\" || hltbInfo?.gameplay_main === -1)) newData.push(strToFloat(hltbInfo?.gameplay_main ? hltbInfo?.gameplay_main : hltbInfo));\r\n\t\tif (hltbInfo?.gameplay_main_extra !== -1) newData.push(strToFloat(hltbInfo?.gameplay_main_extra));\r\n\t\tif (hltbInfo?.gameplay_completionist !== -1) newData.push(strToFloat(hltbInfo?.gameplay_completionist));\r\n\r\n\t\treturn newData;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='game-page'>\r\n\t\t\t<div style={{ backgroundImage: `url(${game.background})` }} className='game-page__background' />\r\n\t\t\t<LoadingOverlay active={gameState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='game-page__body'>\r\n\t\t\t\t\t<div className='game-page__header'>\r\n\t\t\t\t\t\t<div className='game-page__poster'>\r\n\t\t\t\t\t\t\t<img src={game.poster} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='game-page__info'>\r\n\t\t\t\t\t\t\t<h1 className='game-page__info-header'>{game.name}</h1>\r\n\t\t\t\t\t\t\t<div className='game-page__info-body'>\r\n\t\t\t\t\t\t\t\t<p>Разработчики: {game.developers}</p>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {game.release_date}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {game.genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Платформы: {game.platforms}</p>\r\n\t\t\t\t\t\t\t\t<TimeToBeat hltbInfo={game.hltb || game.playtime} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\tsetGameStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='game-page__rating'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не играл\", \"Буду играть\", \"Играю\", \"Дропнул\", \"Прошел\"]}\r\n\t\t\t\t\t\t\t\t\tclassName='game-page__info-statuses'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не играл\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={game.metacritic} text='Metascore' className='game-page__info-score' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='game-page__overview'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{/* <video width='800' height='450' controls='controls' poster={game.rawg?.clip?.preview} src={game.rawg?.clip?.clip} type='video' /> */}\r\n\t\t\t\t\t\t\t<h3 className='game-page__overview-header'>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: game.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h3 className='game-page__review-header'>Отзыв</h3>\r\n\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t<div className='game-page__review-body' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t\t<div className='game-page__review'>\r\n\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='game-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className='game-page__review-time'>\r\n\t\t\t\t\t\t\t\t\tВремя прохождения (часы)\r\n\t\t\t\t\t\t\t\t\t<InputNumber className='game-page__time-input' value={spentTime} min={0} max={100000} onChange={(value) => setSpentTime(value)} dataList={hltbToDatalist(game.hltb)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='game-page__review-save-button'\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameReview({ review: review, spent_time: spentTime });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t<div className='game-page__friends' hidden={!loggedIn | (friendsInfo?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default GamePage;\r\n","import api from \"../http\";\r\nimport { SEARCH_MOVIES_URL, SEARCH_MOVIES_FAST_URL, GET_MOVIE_URL } from \"../settings\";\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о фильме\r\n * @param {number} id ID фильма\r\n */\r\nexport async function getMovie(id) {\r\n\tconst res = await api.get(GET_MOVIE_URL + id + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса фильма\r\n * @param {object} user_info Статус фильма\r\n * @param {string} movieID ID фильма\r\n */\r\nexport async function setMovieStatus(id, user_info) {\r\n\tconst res = await api.put(GET_MOVIE_URL + id + \"/\", user_info);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск фильмов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchMovies(query, page) {\r\n\tconst res = await api.get(SEARCH_MOVIES_URL, { params: { query: query, page: page } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск локальных фильмов\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchMoviesFast(query) {\r\n\tconst res = await api.get(SEARCH_MOVIES_FAST_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для фильма\r\n * @param {number} id id фильма\r\n */\r\nexport async function getMovieUserInfo(id) {\r\n\tconst res = await api.get(GET_MOVIE_URL + id + \"/user_info/\");\r\n\treturn res.data;\r\n}\r\n","import { makeAutoObservable } from 'mobx';\r\n//import remotedev from 'mobx-remotedev';\r\nimport * as movieRequests from '../services/movieRequests';\r\nimport { toast } from 'react-toastify';\r\n\r\ntype IPendingState = 'done' | 'pending' | string;\r\n\r\nexport interface IMovieUserInfo {\r\n\tstatus: string,\r\n\treview: string,\r\n\tscore: number,\r\n\tspent_time: number,\r\n}\r\n\r\nexport interface IMovie {\r\n\tid?: number,\r\n\t[key: string]: any,\r\n}\r\n\r\nexport interface IMovieState {\r\n\tmovie: IMovie | undefined,\r\n\tmovieState: IPendingState,\r\n\tuserInfo: IMovieUserInfo | undefined,\r\n\tfriendsInfo: any,\r\n\tuserInfoState: IPendingState,\r\n\tsetStatusState: IPendingState,\r\n\tsetStatusToast: any,\r\n}\r\n\r\nclass Movie implements IMovieState {\r\n\tmovie: IMovie | undefined;\r\n\tmovieState = 'done';\r\n\r\n\tuserInfo: IMovieUserInfo | undefined;\r\n\tfriendsInfo = [];\r\n\tuserInfoState = 'done';\r\n\r\n\tsetStatusState = 'done';\r\n\tsetStatusToast: any;\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestMovie = async (id: number) => {\r\n\t\tthis.movieState = 'pending';\r\n\t\tmovieRequests.getMovie(id).then(this.requestMovieSuccess, this.requestMovieFailure);\r\n\t};\r\n\trequestMovieSuccess = (result: IMovie) => {\r\n\t\tthis.movie = result;\r\n\t\tthis.movieState = 'done';\r\n\t};\r\n\trequestMovieFailure = (error: string) => {\r\n\t\tthis.movieState = 'error: ' + error;\r\n\t};\r\n\r\n\trequestUserInfo = async (id: number) => {\r\n\t\tthis.userInfoState = 'pending';\r\n\t\tmovieRequests.getMovieUserInfo(id).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\r\n\t};\r\n\trequestUserInfoSuccess = (result: any) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = 'done';\r\n\t};\r\n\trequestUserInfoFailure = (error: string) => {\r\n\t\tthis.userInfoState = 'error: ' + error;\r\n\t};\r\n\r\n\tsetMovieStatus = async (userInfo: IMovieUserInfo) => {\r\n\t\tthis.setStatusState = 'pending';\r\n\t\tmovieRequests.setMovieStatus(this.movie?.id, userInfo).then(this.setMovieStatusSuccess, this.setMovieStatusFailure);\r\n\t};\r\n\tsetMovieStatusSuccess = () => {\r\n\t\tthis.setStatusState = 'done';\r\n\t};\r\n\tsetMovieStatusFailure = (error: string) => {\r\n\t\tthis.setStatusState = 'error: ' + error;\r\n\t};\r\n\r\n\tsetMovieReview = async (userInfo: IMovieUserInfo) => {\r\n\t\tthis.setStatusState = 'pendingReview';\r\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\r\n\t\tmovieRequests.setMovieStatus(this.movie?.id, userInfo).then(this.setMovieReviewSuccess, this.setMovieReviewFailure);\r\n\t};\r\n\tsetMovieReviewSuccess = () => {\r\n\t\ttoast.update(this.setStatusToast, { render: 'Отзыв сохранен!', type: toast.TYPE.SUCCESS, autoClose: 1000 });\r\n\t\tthis.setStatusState = 'done';\r\n\t};\r\n\tsetMovieReviewFailure = (error: string) => {\r\n\t\ttoast.update(this.setStatusToast, { render: 'Ошибка сохранения отзыва!', type: toast.TYPE.ERROR, autoClose: 1000 });\r\n\t\tthis.setStatusState = 'error: ' + error;\r\n\t};\r\n\r\n\tget anyError() {\r\n\t\tif (this.movieState.startsWith('error:')) return this.movieState;\r\n\t\tif (this.userInfoState.startsWith('error:')) return this.userInfoState;\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nconst MovieStore = new Movie();\r\n//export default remotedev(MovieStore, { name: 'Movie' });\r\nexport default MovieStore;\r\n","import MoviePage from \"./MoviePage\";\r\n\r\nexport default MoviePage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport ReactPlayer from \"react-player/youtube\";\r\nimport { Carousel } from \"react-responsive-carousel\";\r\nimport { observer } from \"mobx-react\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport MovieStore from '../../store/MovieStore';\r\nimport AuthStore from '../../store/AuthStore';\r\nimport PagesStore from '../../store/PagesStore';\r\nimport StatusButtonGroup from '../../shared/StatusButtonGroup';\r\nimport FriendsActivity from '../../shared/FriendsActivity';\r\nimport ScoreBlock from '../../shared/ScoreBlock';\r\nimport Rating from '../../shared/Rating';\r\n\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport \"./movie-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst MoviePage = observer((props) => {\r\n\tconst { movie, movieState, requestMovie, setMovieStatus, setMovieReview, userInfo, friendsInfo, userInfoState, requestUserInfo, anyError } = MovieStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestMovie(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestMovie]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = movie.name;\r\n\t}, [movie]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (anyError) toast.error(anyError);\r\n\t}, [anyError]);\r\n\r\n\tconst renderVideo = (video, index) => (\r\n\t\t<div className='movie-page__trailer'>\r\n\t\t\t<ReactPlayer url={video.url} controls key={index} className='movie-page__trailer-player' />\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='movie-page'>\r\n\t\t\t<div className='movie-page__background' style={{ backgroundImage: `url(${movie.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='movie-page__body'>\r\n\t\t\t\t\t<div className='movie-page__header'>\r\n\t\t\t\t\t\t<div className='movie-page__poster'>\r\n\t\t\t\t\t\t\t<img src={movie.poster_path} className='movie-page__poster-img' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movie-page__info'>\r\n\t\t\t\t\t\t\t<h1 className='movie-page__info-header'>{movie.name}</h1>\r\n\t\t\t\t\t\t\t<h5 className='movie-page__info-subheader'>{movie.original_name}</h5>\r\n\t\t\t\t\t\t\t<div className='movie-page__info-body'>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {movie.release_date}</p>\r\n\t\t\t\t\t\t\t\t<p>Продолжительность (мин): {movie.runtime}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {movie.genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Компания: {movie.production_companies}</p>\r\n\t\t\t\t\t\t\t\t<p>Слоган: {movie.tagline}</p>\r\n\t\t\t\t\t\t\t\t<p>В ролях: {movie.cast}</p>\r\n\t\t\t\t\t\t\t\t<p>Режиссер: {movie.directors}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='movie-page__rating'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tclassName='movie-page__info-statuses'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={movie.score} text='TMDB score' className='movie-page__info-score' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Carousel className='movie-page__trailers' showArrows centerMode centerSlidePercentage={50} showThumbs={false} showStatus={false} showIndicators={false}>\r\n\t\t\t\t\t\t{movie?.videos?.map(renderVideo)}\r\n\t\t\t\t\t</Carousel>\r\n\t\t\t\t\t<div className='movie-page__overview'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 className='game-page__overview-header'>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: movie.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h3 className='movie-page__review-header'>Отзыв</h3>\r\n\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t<div className='game-page__review-body' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t\t<div className='movie-page__review'>\r\n\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='movie-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='movie-page__review-save-button'\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetMovieReview({ review: review });\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t<div className='movie-page__friends' hidden={!loggedIn || friendsInfo?.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default MoviePage;\r\n","import api from \"../http\";\r\nimport { SEARCH_SHOWS_URL, SEARCH_SHOWS_FAST_URL, GET_SHOW_URL, GET_UNWATCHED_EPISODES_URL } from \"../settings\";\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сериале\r\n * @param {number} id ID сериала\r\n */\r\nexport async function getShow(id) {\r\n\tconst res = await api.get(GET_SHOW_URL + id + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сезоне сериала\r\n * @param {number} showID ID сериала\r\n *  * @param {number} seasonNumber номер сезона\r\n */\r\nexport async function getShowSeason(showID, seasonNumber) {\r\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о серии сериала\r\n * @param {number} showID ID сериала\r\n * @param {number} seasonNumber номер сезона\r\n * @param {number} episodeNumber номер эпизода\r\n */\r\nexport async function getShowEpisode(showID, seasonNumber, episodeNumber) {\r\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\nexport async function setShowStatus(id, user_info) {\r\n\tconst res = await api.put(GET_SHOW_URL + id + \"/\", user_info);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {object} user_info Статус сезона сериала\r\n * @param {number} showID ID сериала\r\n *  * @param {number} seasonNumber номер сезона\r\n */\r\nexport async function setShowSeasonStatus(showID, seasonNumber, user_info) {\r\n\tconst res = await api.put(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\", user_info);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {object} episodesList Список объектов эпизодов\r\n * @param {number} showID ID сериала\r\n */\r\nexport async function setShowEpisodesStatus(showID, episodesList) {\r\n\tconst res = await api.put(GET_SHOW_URL + showID + \"/episodes/\", episodesList);\r\n\treturn res;\r\n}\r\n\r\n/**\r\n * Запрос на поиск сериалов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchShows(query, page) {\r\n\tconst res = await api.get(SEARCH_SHOWS_URL, { params: { query: query, page: page } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск локальных сериалов\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchShowsFast(query) {\r\n\tconst res = await api.get(SEARCH_SHOWS_FAST_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сериала\r\n * @param {number} showID id сериала\r\n */\r\nexport async function getShowUserInfo(showID) {\r\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/user_info/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сезона сериала\r\n * @param {number} showID id сериала\r\n */\r\nexport async function getShowSeasonUserInfo(showID, seasonID) {\r\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/user_info/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для эпизода сериала\r\n * @param {number} showID id сериала\r\n * @param {int} page страница\r\n */\r\nexport async function getShowEpisodeUserInfo(showID, seasonID, episodeID) {\r\n\tconst res = await api.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/episode/\" + episodeID + \"/user_info/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сериале\r\n */\r\nexport async function getUnwatchedEpisodes() {\r\n\tconst res = await api.get(GET_UNWATCHED_EPISODES_URL);\r\n\treturn res.data;\r\n}\r\n","import { makeAutoObservable } from 'mobx';\r\n//import remotedev from 'mobx-remotedev';\r\nimport * as showRequests from '../services/showRequests';\r\nimport { toast } from 'react-toastify';\r\n\r\ntype IPendingState = 'done' | 'pending' | string;\r\n\r\nexport interface IShowUserInfo {\r\n\tstatus: string,\r\n\treview: string,\r\n\tscore: number,\r\n\tspent_time: number,\r\n}\r\n\r\nexport interface IShow {\r\n\tid?: number,\r\n\t[key: string]: any,\r\n}\r\n\r\nexport interface IShowState {\r\n\tshow: IShow | undefined,\r\n\tshowState: IPendingState,\r\n\tuserInfo: IShowUserInfo | undefined,\r\n\tfriendsInfo: any,\r\n\tuserInfoState: IPendingState,\r\n\r\n\tshowSeasons: any,\r\n\tshowSeasonsState: {[key: string]: IPendingState},\r\n\tshowSeasonsUserInfo: any,\r\n\tshowSeasonsUserInfoState: {[key: string]: IPendingState};\r\n\r\n\tsetStatusState: IPendingState,\r\n\tsetStatusToast: any,\r\n}\r\n\r\nclass Show implements IShowState {\r\n\tshow: IShow | undefined;\r\n\tshowState: IPendingState = 'done';\r\n\tuserInfo: IShowUserInfo | undefined;\r\n\tfriendsInfo = [];\r\n\tuserInfoState: IPendingState = 'done';\r\n\r\n\tshowSeasons: any = {};\r\n\tshowSeasonsState: {[key: string]: IPendingState} = {};\r\n\tshowSeasonsUserInfo: any = {};\r\n\tshowSeasonsUserInfoState: {[key: string]: IPendingState} = {};\r\n\r\n\tsetStatusState: IPendingState = 'done';\r\n\tsetStatusToast: any;\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestShow = async (id: number) => {\r\n\t\tthis.showState = 'pending';\r\n\t\tshowRequests.getShow(id).then(this.requestShowSuccess, this.requestShowFailure);\r\n\t};\r\n\trequestShowSuccess = (result: IShow) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = 'done';\r\n\t};\r\n\trequestShowFailure = (error: string) => {\r\n\t\tthis.showState = 'error: ' + error;\r\n\t};\r\n\r\n\trequestSeason = async (showID: number, seasonNumber: number) => {\r\n\t\tthis.showState = 'pending';\r\n\t\tshowRequests.getShowSeason(showID, seasonNumber).then(this.requestSeasonSuccess, this.requestSeasonFailure);\r\n\t};\r\n\trequestSeasonSuccess = (result: IShow) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = 'done';\r\n\t};\r\n\trequestSeasonFailure = (error: any) => {\r\n\t\tthis.showState = 'error: ' + error;\r\n\t};\r\n\r\n\trequestSeasons = async (showID: number, seasonNumber: number) => {\r\n\t\tthis.showSeasonsState[seasonNumber] = 'pending';\r\n\t\tthis.showSeasons[seasonNumber] = {};\r\n\t\tshowRequests.getShowSeason(showID, seasonNumber).then(\r\n\t\t\t(res) => this.requestSeasonsSuccess(res, seasonNumber),\r\n\t\t\t(res) => this.requestSeasonsFailure(res, seasonNumber)\r\n\t\t);\r\n\t};\r\n\trequestSeasonsSuccess = (result: IShow, seasonNumber: number) => {\r\n\t\tthis.showSeasons[seasonNumber] = result;\r\n\t\tthis.showSeasonsState[seasonNumber] = 'done';\r\n\t};\r\n\trequestSeasonsFailure = (error: string, seasonNumber: number) => {\r\n\t\tthis.showSeasonsState[seasonNumber] = 'error: ' + error;\r\n\t};\r\n\r\n\trequestEpisode = async (showID: number, seasonNumber: number, episodeNumber: number) => {\r\n\t\tthis.showState = 'pending';\r\n\t\tshowRequests.getShowEpisode(showID, seasonNumber, episodeNumber).then(this.requestEpisodeSuccess, this.requestEpisodeFailure);\r\n\t};\r\n\trequestEpisodeSuccess = (result: IShow) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = 'done';\r\n\t};\r\n\trequestEpisodeFailure = (error: string) => {\r\n\t\tthis.showState = 'error: ' + error;\r\n\t};\r\n\r\n\trequestShowUserInfo = async (id: number) => {\r\n\t\tthis.userInfoState = 'pending';\r\n\t\tshowRequests.getShowUserInfo(id).then(this.requestShowUserInfoSuccess, this.requestShowUserInfoFailure);\r\n\t};\r\n\trequestShowUserInfoSuccess = (result: any) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = 'done';\r\n\t};\r\n\trequestShowUserInfoFailure = (error: string) => {\r\n\t\tthis.userInfoState = 'error: ' + error;\r\n\t};\r\n\r\n\trequestSeasonUserInfo = async (showID: number, seasonID: number) => {\r\n\t\tthis.userInfoState = 'pending';\r\n\t\tshowRequests.getShowSeasonUserInfo(showID, seasonID).then(this.requestSeasonUserInfoSuccess, this.requestSeasonUserInfoFailure);\r\n\t};\r\n\trequestSeasonUserInfoSuccess = (result: any) => {\r\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info };\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = 'done';\r\n\t};\r\n\trequestSeasonUserInfoFailure = (error: string) => {\r\n\t\tthis.userInfoState = 'error: ' + error;\r\n\t};\r\n\r\n\trequestSeasonsUserInfo = async (showID: number, seasonID: number) => {\r\n\t\tthis.showSeasonsUserInfo[seasonID] = {};\r\n\t\tthis.showSeasonsUserInfoState[seasonID] = 'pending';\r\n\t\tshowRequests.getShowSeasonUserInfo(showID, seasonID).then(\r\n\t\t\t(res) => this.requestSeasonsUserInfoSuccess(res, seasonID),\r\n\t\t\t(res) => this.requestSeasonsUserInfoFailure(res, seasonID)\r\n\t\t);\r\n\t};\r\n\trequestSeasonsUserInfoSuccess = (result: any, seasonID: number) => {\r\n\t\tthis.showSeasonsUserInfoState[seasonID] = 'done';\r\n\t\tthis.showSeasonsUserInfo[seasonID] = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\r\n\t};\r\n\trequestSeasonsUserInfoFailure = (error: string, seasonID: number) => {\r\n\t\tthis.showSeasonsUserInfoState[seasonID] = 'error: ' + error;\r\n\t};\r\n\r\n\trequestEpisodeUserInfo = async (showID: number, seasonID: number, episodeID: number) => {\r\n\t\tthis.userInfoState = 'pending';\r\n\t\tshowRequests.getShowEpisodeUserInfo(showID, seasonID, episodeID).then(this.requestEpisodeUserInfoSuccess, this.requestEpisodeUserInfoFailure);\r\n\t};\r\n\trequestEpisodeUserInfoSuccess = (result: any) => {\r\n\t\tthis.userInfoState = 'done';\r\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show };\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t};\r\n\trequestEpisodeUserInfoFailure = (error: string) => {\r\n\t\tthis.userInfoState = 'error: ' + error;\r\n\t};\r\n\r\n\tsetShowStatus = async (userInfo: IShowUserInfo) => {\r\n\t\tthis.setStatusState = 'pending';\r\n\t\tshowRequests.setShowStatus(this.show?.id, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\r\n\t};\r\n\tsetShowStatusSuccess = () => {\r\n\t\tthis.setStatusState = 'done';\r\n\t};\r\n\tsetShowStatusFailure = (error: string) => {\r\n\t\tthis.setStatusState = 'error: ' + error;\r\n\t};\r\n\r\n\tsetShowReview = async (userInfo: IShowUserInfo) => {\r\n\t\tthis.setStatusState = 'pendingReview';\r\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\r\n\t\tshowRequests.setShowStatus(this.show?.id, userInfo).then(this.setShowReviewSuccess, this.setShowReviewFailure);\r\n\t};\r\n\tsetShowReviewSuccess = () => {\r\n\t\ttoast.update(this.setStatusToast, { render: 'Отзыв сохранен!', type: toast.TYPE.SUCCESS, autoClose: 1000 });\r\n\t\tthis.setStatusState = 'done';\r\n\t};\r\n\tsetShowReviewFailure = (error: string) => {\r\n\t\ttoast.update(this.setStatusToast, { render: 'Ошибка сохранения отзыва!', type: toast.TYPE.ERROR, autoClose: 1000 });\r\n\t\tthis.setStatusState = 'error: ' + error;\r\n\t};\r\n\r\n\tsetSeasonStatus = async (userInfo: IShowUserInfo, showID: number, seasonNumber: number) => {\r\n\t\tthis.setStatusState = 'pending';\r\n\t\tshowRequests.setShowSeasonStatus(showID, seasonNumber, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\r\n\t};\r\n\tsetSeasonReview = async (userInfo: IShowUserInfo, showID: number, seasonNumber: number) => {\r\n\t\tthis.setStatusState = 'pendingReview';\r\n\t\tthis.setStatusToast = toast('Сохраняем отзыв...', { autoClose: false, type: toast.TYPE.INFO, position: 'bottom-center' });\r\n\t\tshowRequests.setShowSeasonStatus(showID, seasonNumber, userInfo).then(this.setShowReviewSuccess, this.setShowReviewFailure);\r\n\t};\r\n\r\n\tsetEpisodesStatus = async (episodesList: any, showID: number, seasonsToUpdate = []) => {\r\n\t\tthis.setStatusState = 'pending';\r\n\t\tshowRequests.setShowEpisodesStatus(showID, episodesList).then((result) => {\r\n\t\t\tif (seasonsToUpdate) for (let season in seasonsToUpdate) this.requestSeasonsUserInfo(showID, seasonsToUpdate[season]);\r\n\t\t\tthis.setShowStatusSuccess();\r\n\t\t}, this.setShowStatusFailure);\r\n\t};\r\n\r\n\tgetShowSeason = (seasonNumber: number) => {\r\n\t\treturn this.showSeasons[seasonNumber];\r\n\t};\r\n\r\n\tgetShowSeasonState = (seasonNumber: number) => {\r\n\t\treturn this.showSeasonsState[seasonNumber];\r\n\t};\r\n\r\n\tgetShowSeasonUserInfo = (seasonNumber: number) => {\r\n\t\treturn this.showSeasonsUserInfo[seasonNumber];\r\n\t};\r\n\r\n\tgetEpisodesUserInfo = (season: number, id: number) => {\r\n\t\tfor (let episodeNumber in this.showSeasonsUserInfo[season].episodes) {\r\n\t\t\tlet episode = this.showSeasonsUserInfo[season].episodes[episodeNumber];\r\n\t\t\tif (episode.tmdb_id === id) return episode;\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tget anySeasonLoading() {\r\n\t\tfor (let season in this.showSeasonsState) if (this.showSeasonsState[season] === 'pending') return true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tget anyError() {\r\n\t\tif (this.showState.startsWith('error:')) return this.showState;\r\n\t\tif (this.userInfoState.startsWith('error:')) return this.userInfoState;\r\n\t\tif (this.setStatusState.startsWith('error:')) return this.setStatusState;\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nconst ShowStore = new Show();\r\n//export default remotedev(ShowStore, { name: 'Show' });\r\nexport default ShowStore;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from '../Rating';\r\n\r\nimport \"./detail-episode-row.sass\";\r\n\r\nfunction DetailEpisodeRow({ episode, showID, setEpisodeUserStatus, loggedIn, userInfo, checkAll, userWatchedShow, setSaveEpisodes }) {\r\n\tlet history = useHistory();\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [isChecked, setIsChecked] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUserRate(userInfo?.score);\r\n\t\tsetIsChecked(userInfo?.score > -1);\r\n\t}, [userInfo]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (checkAll === -1) {\r\n\t\t\t\tsetIsChecked(false);\r\n\t\t\t} else if (checkAll === 1) {\r\n\t\t\t\tsetIsChecked(true);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[checkAll]\r\n\t);\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date).toLocaleDateString(\"ru-RU\");\r\n\t\tif (newDate !== \"Invalid Date\") return newDate;\r\n\t\telse return \"TBA\";\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='detail-episode-row'>\r\n\t\t\t<input\r\n\t\t\t\ttype='checkbox'\r\n\t\t\t\tid={`cbEpisode${episode.id}`}\r\n\t\t\t\tchecked={isChecked}\r\n\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\tsetIsChecked(res.target.checked);\r\n\t\t\t\t}}\r\n\t\t\t\thidden={!loggedIn || !userWatchedShow}\r\n\t\t\t/>\r\n\t\t\t<p className='detail-episode-row__date'>{parseDate(episode.air_date)}</p>\r\n\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='detail-episode-row__rate'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\twithEye={true}\r\n\t\t\t\t\treadonly={!loggedIn}\r\n\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\tsetIsChecked(score > -1);\r\n\t\t\t\t\t\tsetEpisodeUserStatus({ episodes: [{ tmdb_id: episode.id, score: score }] }, showID);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<a\r\n\t\t\t\tclassName='detail-episode-row__name'\r\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={episode.name}>\r\n\t\t\t\tСерия {episode.episode_number} - {episode.name}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailEpisodeRow;\r\n","import DetailEpisodeRow from \"./DetailEpisodeRow\";\r\n\r\nexport default DetailEpisodeRow;\r\n","import SeasonBlock from \"./SeasonBlock\";\r\n\r\nexport default SeasonBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport { computed } from \"mobx\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport classnames from \"classnames\";\r\n\r\nimport AuthStore from '../../../../store/AuthStore';\r\nimport ShowStore from '../../../../store/ShowStore';\r\nimport PagesStore from '../../../../store/PagesStore';\r\nimport DetailEpisodeRow from '../../../../shared/DetailEpisodeRow';\r\nimport Rating from '../../../../shared/Rating';\r\n\r\nimport \"./season-block.sass\";\r\n\r\nconst SeasonBlock = observer(\r\n\t({\r\n\t\tshowID,\r\n\t\tseasonNumber,\r\n\t\t//onChangeStatus,\r\n\t\tuserWatchedShow,\r\n\t\tclassName,\r\n\t}) => {\r\n\t\tconst { loggedIn } = AuthStore;\r\n\t\tconst { openLoginForm, setSaveEpisodes } = PagesStore;\r\n\t\tconst { requestSeasons, requestSeasonsUserInfo, setEpisodesStatus, setSeasonStatus } = ShowStore;\r\n\t\tconst showSeason = computed(() => ShowStore.getShowSeason(seasonNumber)).get();\r\n\t\tconst showSeasonState = computed(() => ShowStore.getShowSeasonState(seasonNumber)).get();\r\n\t\tconst showUserInfo = computed(() => ShowStore.getShowSeasonUserInfo(seasonNumber)).get();\r\n\r\n\t\tlet history = useHistory();\r\n\t\tconst [isChecked, setIsChecked] = useState(0);\r\n\t\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\trequestSeasons(showID, seasonNumber);\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[showID, seasonNumber, requestSeasons]\r\n\t\t);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tif (loggedIn) requestSeasonsUserInfo(showID, seasonNumber);\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[loggedIn, showID, seasonNumber]\r\n\t\t);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tif (showUserInfo?.score) {\r\n\t\t\t\t\tsetUserRate(showUserInfo.score);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[showUserInfo]\r\n\t\t);\r\n\r\n\t\tfunction getEpisodeByID(episodes, id) {\r\n\t\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<LoadingOverlay active={showSeasonState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div key={showSeason?.id} className={classnames(\"season-block\", className)}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName='season-block__link'>\r\n\t\t\t\t\t\t<h5 className='season-block__name'> {showSeason?.name} </h5>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='season-block__rate'>\r\n\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, showID, seasonNumber);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<details open={true} className='season-block__episodes'>\r\n\t\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='season-block__check-all'>\r\n\t\t\t\t\t\t\tВыбрать все&nbsp;\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\tchecked={isChecked > 0}\r\n\t\t\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul className='season-block__episodes-ul'>\r\n\t\t\t\t\t\t\t{showSeason?.episodes\r\n\t\t\t\t\t\t\t\t?.map((episode, counter) => (\r\n\t\t\t\t\t\t\t\t\t<li className='season-block__episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t<DetailEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\tshowID={showID}\r\n\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(showUserInfo?.episodes, episode?.id)}\r\n\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\r\n\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\r\n\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\r\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t.reverse()}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</details>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nexport default SeasonBlock;\r\n","import SeasonsBlock from \"./SeasonsBlock\";\r\n\r\nexport default SeasonsBlock;\r\n","import React from \"react\";\r\nimport { toJS } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport ShowStore from '../../../../store/ShowStore';\r\nimport PagesStore from '../../../../store/PagesStore';\r\nimport AuthStore from '../../../../store/AuthStore';\r\nimport SeasonBlock from \"../SeasonBlock\";\r\n\r\nimport \"./seasons-block.sass\";\r\n\r\nconst SeasonsBlock = observer(({ showID, seasons, userWatchedShow }) => {\r\n\tconst { showSeasonsUserInfo, showSeasons, setEpisodesStatus, setStatusState, anySeasonLoading } = ShowStore;\r\n\tconst { saveEpisodesBlockIsOpen, setSaveEpisodes } = PagesStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\r\n\tfunction getEpisodeByID(episodes, id) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t}\r\n\r\n\tfunction sendEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tlet seasons = [];\r\n\t\tfor (let season in showSeasons) {\r\n\t\t\tfor (let episode in showSeasons[season].episodes) {\r\n\t\t\t\tlet currentValue = getEpisodeByID(showSeasonsUserInfo[season].episodes, showSeasons[season].episodes[episode].id);\r\n\t\t\t\tlet cbValue = document.getElementById(`cbEpisode${showSeasons[season].episodes[episode].id}`).checked;\r\n\t\t\t\tlet currentStatus = currentValue?.score > -1;\r\n\t\t\t\tif (cbValue !== currentStatus) {\r\n\t\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: cbValue ? 0 : -1 });\r\n\t\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\tfunction sendAllEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tlet seasons = [];\r\n\t\tfor (let season in showSeasons) {\r\n\t\t\tconsole.log(toJS(showSeasons));\r\n\t\t\tif (showSeasons[season].name !== \"Спецматериалы\")\r\n\t\t\t\tfor (let episode in showSeasons[season].episodes) {\r\n\t\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: 0 });\r\n\t\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='seasons-block'>\r\n\t\t\t<LoadingOverlay active={setStatusState === \"pending\"} spinner text='Обновление...'>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='seasons-block__all-button'\r\n\t\t\t\t\thidden={!loggedIn | !userWatchedShow}\r\n\t\t\t\t\tdisabled={anySeasonLoading}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsendAllEpisodes();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tПосмотрел весь сериал\r\n\t\t\t\t</button>\r\n\t\t\t\t{seasons\r\n\t\t\t\t\t?.map((season) => <SeasonBlock className='seasons-block__season-block' showID={showID} seasonNumber={season.season_number} key={season.season_number} userWatchedShow={userWatchedShow} />)\r\n\t\t\t\t\t.reverse()}\r\n\t\t\t\t<div className='seasons-block__save-episodes-block' hidden={!saveEpisodesBlockIsOpen}>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='seasons-block__save-episodes-button'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsendEpisodes();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SeasonsBlock;\r\n","import ShowPage from \"./ShowPage\";\r\n\r\nexport default ShowPage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport ReactPlayer from \"react-player/youtube\";\r\nimport { Carousel } from \"react-responsive-carousel\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport AuthStore from '../../store/AuthStore';\r\nimport PagesStore from '../../store/PagesStore';\r\nimport ShowStore from '../../store/ShowStore';\r\nimport Rating from '../../shared/Rating';\r\nimport StatusButtonGroup from '../../shared/StatusButtonGroup';\r\nimport FriendsActivity from '../../shared/FriendsActivity';\r\nimport SeasonsBlock from './views/SeasonsBlock';\r\nimport ScoreBlock from '../../shared/ScoreBlock';\r\n\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport \"./show-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ShowPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\tconst { requestShow, show, showState, setShowStatus, setShowReview, requestShowUserInfo, userInfo, friendsInfo, userInfoState, anyError } = ShowStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShow(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestShow]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (anyError) toast.error(anyError);\r\n\t}, [anyError]);\r\n\r\n\tconst renderVideo = (video, index) => (\r\n\t\t<div className='movie-page__trailer' key={video.url}>\r\n\t\t\t<ReactPlayer url={video.url} controls key={index} className='movie-page__trailer-player' />\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='show-page'>\r\n\t\t\t<div className='show-page__background' style={{ backgroundImage: `url(${show.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='show-page__body'>\r\n\t\t\t\t\t<div className='show-page__header'>\r\n\t\t\t\t\t\t<div className='show-page__poster'>\r\n\t\t\t\t\t\t\t<img src={show.poster_path} className='show-page__poster-img' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='show-page__info'>\r\n\t\t\t\t\t\t\t<h1 className='show-page__info-header'>{show.name}</h1>\r\n\t\t\t\t\t\t\t<h5 className='show-page__info-subheader'>{show.original_name}</h5>\r\n\t\t\t\t\t\t\t<div className='show-page__info-body'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.genres}>Жанр: {show.genres}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.production_companies}>Компания: {show.production_companies}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.first_air_date}>Дата выхода первой серии: {show.first_air_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.last_air_date}>Дата выхода последней серии: {show.last_air_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={show.episode_runtime === null}>Продолжительность (мин): {show.episode_run_time}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество сезонов: {show.seasons_count}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество серий: {show.episodes_count}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.status}>Статус: {show.status}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='show-page__rating'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Смотрю\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tclassName='show-page__info-statuses'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={show.score} text='TMDB score' className='show-page__info-score' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Carousel className='movie-page__trailers' showArrows centerMode centerSlidePercentage={50} showThumbs={false} showStatus={false} showIndicators={false}>\r\n\t\t\t\t\t\t{show?.videos?.map(renderVideo)}\r\n\t\t\t\t\t</Carousel>\r\n\t\t\t\t\t<div className='show-page__overview'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 className='show-page__overview-header'>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='show-page__seasons'>\r\n\t\t\t\t\t\t\t<h3 className='show-page__seasons-header'>Список серий</h3>\r\n\t\t\t\t\t\t\t<SeasonsBlock showID={show.id} seasons={show.seasons} userWatchedShow={userStatus !== \"Не смотрел\"} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='show-page__review' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 className='show-page__review-header'>Отзыв</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<div className='show-page__review'>\r\n\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' value={review} onChange={(event) => setReview(event.target.value)} className='show-page__review-input' />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='show-page__review-save-button'\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowReview({ review: review });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='show-page__friends' hidden={!loggedIn || friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ShowPage;\r\n","import SeasonPage from \"./SeasonPage\";\r\n\r\nexport default SeasonPage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport AuthStore from '../../store/AuthStore';\r\nimport ShowStore from '../../store/ShowStore';\r\nimport PagesStore from '../../store/PagesStore';\r\nimport Rating from '../../shared/Rating';\r\nimport FriendsActivity from '../../shared/FriendsActivity';\r\nimport DetailEpisodeRow from '../../shared/DetailEpisodeRow';\r\n\r\nimport \"./season-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst SeasonPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { requestSeason, show, showState, setSeasonStatus, setSeasonReview, setEpisodesStatus, requestSeasonUserInfo, userInfo, userInfoState, friendsInfo } = ShowStore;\r\n\tconst { openLoginForm, setSaveEpisodes, saveEpisodesBlockIsOpen } = PagesStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { show_id, number } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [chartData, setChartData] = useState([]);\r\n\tconst [isChecked, setIsChecked] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\tsetIsChecked(0);\r\n\t\t\trequestSeason(show_id, number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, number, requestSeason]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestSeasonUserInfo(show_id, number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.show?.tmdb_name + \" - \" + show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (show.episodes)\r\n\t\t\tif (show.episodes.length > 0) {\r\n\t\t\t\tlet newData = [];\r\n\t\t\t\tfor (let episode in show.episodes) {\r\n\t\t\t\t\tif (show.episodes[episode].vote_average > 0) newData.push({ name: \"Ep \" + show.episodes[episode].episode_number, Оценка: show.episodes[episode].vote_average });\r\n\t\t\t\t}\r\n\t\t\t\tsetChartData(newData);\r\n\t\t\t}\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (userInfo?.score) setUserRate(userInfo.score);\r\n\t\t\telse setUserRate(0);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\r\n\t}, [showState]);\r\n\tuseEffect(() => {\r\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\r\n\t}, [userInfoState]);\r\n\r\n\tfunction getEpisodeByID(episodes, id) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t}\r\n\r\n\tfunction sendEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tfor (let episode in userInfo.episodes) {\r\n\t\t\tlet currentValue = userInfo.episodes[episode];\r\n\t\t\tlet cbValue = document.getElementById(`cbEpisode${currentValue.tmdb_id}`).checked;\r\n\t\t\tlet currentStatus = currentValue?.score > -1;\r\n\t\t\tif (cbValue !== currentStatus) episodes.push({ tmdb_id: currentValue.tmdb_id, score: cbValue ? 0 : -1 });\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, show_id);\r\n\t\trequestSeasonUserInfo(show_id, number);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='season-page'>\r\n\t\t\t<div className='season-page__background' style={{ backgroundImage: `url(${show.show?.tmdb_backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='season-page__body'>\r\n\t\t\t\t\t<div className='season-page__header'>\r\n\t\t\t\t\t\t<div className='season-page__poster'>\r\n\t\t\t\t\t\t\t<img src={show.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='season-page__info'>\r\n\t\t\t\t\t\t\t<h1 className='season-page__info-header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show.show?.id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show.show?.tmdb_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{show.show?.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + show.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 className='season-page__info-subheader'>{show.show?.tmdb_original_name + \" - Season \" + show.season_number}</h5>\r\n\t\t\t\t\t\t\t<div className='season-page__info-body'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.air_date}>Дата выхода: {show.air_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.episodes}>Количество серий: {show.episodes?.length}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, show_id, show.season_number);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName='season-page__rating'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div className='season-page__review'>\r\n\t\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='season-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='season-page__review-save-button'\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSeasonReview({ review: review }, show_id, show.season_number);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='season-page__overview'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 className='season-page__overview-header'>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='season-page__episodes'>\r\n\t\t\t\t\t\t\t<h3 className='season-page__episodes-header'>Список серий</h3>\r\n\t\t\t\t\t\t\t<details open={false} className='season-page__episodes-body'>\r\n\t\t\t\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t\t\t\t<div hidden={!loggedIn || !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t\tВыбрать все&nbsp;\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\t\tchecked={isChecked > 0}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<ul className='season-page__episodes-ul'>\r\n\t\t\t\t\t\t\t\t\t{show.episodes\r\n\t\t\t\t\t\t\t\t\t\t? show.episodes.map((episode, counter) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li className='season-page__episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DetailEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowID={show_id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(userInfo.episodes, episode.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</details>\r\n\t\t\t\t\t\t\t<div hidden={!(chartData.length > 0)}>\r\n\t\t\t\t\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={200}>\r\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t<XAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={chartData.length * 30}>\r\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }} layout='vertical'>\r\n\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t<YAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} type='category' />\r\n\t\t\t\t\t\t\t\t\t\t\t<XAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} type='number' />\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='season-page__friends' hidden={friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t\t<div className='season-page__save-episodes-block' hidden={!saveEpisodesBlockIsOpen}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='season-page__save-episodes-button'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsendEpisodes();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tСохранить\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SeasonPage;\r\n","import EpisodePage from \"./EpisodePage\";\r\n\r\nexport default EpisodePage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport AuthStore from '../../store/AuthStore';\r\nimport ShowStore from '../../store/ShowStore';\r\nimport PagesStore from '../../store/PagesStore';\r\nimport Rating from '../../shared/Rating';\r\nimport FriendsActivity from '../../shared/FriendsActivity';\r\nimport ScoreBlock from '../../shared/ScoreBlock';\r\n\r\nimport \"./episode-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst EpisodePage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\tconst { requestEpisode, show, showState, setEpisodesStatus, requestEpisodeUserInfo, userInfo, userInfoState, friendsInfo, setStatusState } = ShowStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { show_id, season_number, episode_number } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(-1);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(-1);\r\n\t\t\trequestEpisode(show_id, season_number, episode_number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, season_number, episode_number, requestEpisode]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestEpisodeUserInfo(show_id, season_number, episode_number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(-1);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, season_number, episode_number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.show?.tmdb_name + \" - \" + show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (userInfo?.score > -1) setUserRate(userInfo.score);\r\n\t\t\telse setUserRate(-1);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\r\n\t}, [showState]);\r\n\tuseEffect(() => {\r\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\r\n\t}, [userInfoState]);\r\n\tuseEffect(() => {\r\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\r\n\t}, [setStatusState]);\r\n\r\n\treturn (\r\n\t\t<div className='episode-page'>\r\n\t\t\t<div className='episode-page__background' style={{ backgroundImage: `url(${show.show?.tmdb_backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='episode-page__body'>\r\n\t\t\t\t\t<div className='episode-page__header'>\r\n\t\t\t\t\t\t<div className='episode-page__poster'>\r\n\t\t\t\t\t\t\t<img src={show.still_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='episode-page__info'>\r\n\t\t\t\t\t\t\t<h1 className='episode-page__info-header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{show.show?.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + show.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 className='episode-page__info-subheader'>{show.show?.tmdb_original_name + \" - Season \" + show.season_number + \" - Episode \" + show.episode_number}</h5>\r\n\t\t\t\t\t\t\t<div className='episode-page__info-body'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.air_date}>Дата выхода: {show.air_date}</p>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id + \"/season/\" + season_number}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id + \"/season/\" + season_number);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСезон: {show.season_number}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\twithEye={true}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show.id, score: score }] }, show_id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName='episode-page__rating'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div className='episode-page__review'>\r\n\t\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t\t<textarea type='textarea' className='episode-page__review-input' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='episode-page__review-save-button'\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show.id, review: review }] }, show_id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<ScoreBlock score={show.score} text='TMDB score' className='episode-page__info-score' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='episode-page__overview'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='episode-page__friends' hidden={friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default EpisodePage;\r\n","import api from \"../http\";\r\nimport { USER_INFO_URL, SEARCH_USERS_URL, USER_CALENDAR_URL, USER_SETTINGS_URL } from \"../settings\";\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о пользователе\r\n * @param {string} userID ID пользователя\r\n */\r\nexport async function getUserInfo(userID) {\r\n\tconst res = await api.get(USER_INFO_URL + userID + \"/\");\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск пользователей\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchUsers(query) {\r\n\tconst res = await api.get(SEARCH_USERS_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\nexport async function setUserStatus(is_following, userID) {\r\n\tconst res = await api.put(USER_INFO_URL + userID + \"/follow/\", is_following);\r\n\treturn res.data;\r\n}\r\n\r\nexport async function getUserLog(userID, page, resultsOnPage, query, filters) {\r\n\tconst res = await api.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage, query: query, filters: filters } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {string} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function deleteUserLog(userID, logType, logID) {\r\n\tconst res = await api.delete(USER_INFO_URL + userID + \"/log/\", { data: { type: logType, id: logID } });\r\n\treturn res;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог друзей пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {int} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserFriendsLog(page, resultsOnPage, query, filters) {\r\n\tconst res = await api.get(USER_INFO_URL + \"friends_log/\", { params: { page: page, page_size: resultsOnPage, query: query, filters: filters } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий календарь релизов пользователя\r\n */\r\nexport async function getUserCalendar() {\r\n\tconst res = await api.get(USER_CALENDAR_URL);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий настройки пользователя\r\n */\r\nexport async function getUserSettings() {\r\n\tconst res = await api.get(USER_SETTINGS_URL);\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, изменяющий настройки пользователя\r\n */\r\nexport async function patchUserSettings(settings) {\r\n\tconst res = await api.patch(USER_SETTINGS_URL, settings);\r\n\treturn res.data;\r\n}\r\n","import { makeAutoObservable } from 'mobx';\r\nimport { toast } from 'react-toastify';\r\n//import remotedev from 'mobx-remotedev';\r\nimport * as userRequests from '../services/userRequests';\r\nimport * as gameRequests from '../services/gameRequests';\r\nimport * as movieRequests from '../services/movieRequests';\r\nimport * as showRequests from '../services/showRequests';\r\nimport {IGame} from './GameStore';\r\nimport {IMovie} from './MovieStore';\r\nimport {IShow} from './ShowStore';\r\nimport {IUser} from './UserStore';\r\n\r\ntype IPendingState = 'done' | 'pending' | string;\r\n\r\ninterface ISearchResult<Type> {\r\n\tvalues: Array<Type>,\r\n\tpage: number,\r\n\tquery: string,\r\n\tisEnd?: boolean,\r\n}\r\n\r\ninterface IHints {\r\n\tgames: Array<any>,\r\n\tshows: Array<any>,\r\n\tmovies: Array<any>,\r\n\tquery: string,\r\n\tcurrentQuery?: any,\r\n}\r\n\r\nclass Search {\r\n\tgames: ISearchResult<IGame> = { values: [], page: 1, query: '' };\r\n\tmovies: ISearchResult<IMovie> = { values: [], page: 1, query: '' };\r\n\tshows: ISearchResult<IShow> = { values: [], page: 1, query: '' };\r\n\tusers: ISearchResult<IUser> = { values: [], page: 1, query: '' };\r\n\thints: IHints = { games: [], shows: [], movies: [], query: '' };\r\n\tgamesState: IPendingState = 'done';\r\n\tmoviesState: IPendingState = 'done';\r\n\tshowsState: IPendingState = 'done';\r\n\tusersState: IPendingState = 'done';\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\tsearchHints = async (query: string) => {\r\n\t\tif (this.hints.query !== query) {\r\n\t\t\tthis.hints.currentQuery = query;\r\n\t\t\tgameRequests.searchGamesFast(query).then(this.searchGamesHintsSuccess);\r\n\t\t\tmovieRequests.searchMoviesFast(query).then(this.searchMoviesHintsSuccess);\r\n\t\t\tshowRequests.searchShowsFast(query).then(this.searchShowsHintsSuccess);\r\n\t\t}\r\n\t};\r\n\tsearchGamesHintsSuccess = (result: Array<any>) => {\r\n\t\tthis.hints.games = result;\r\n\t};\r\n\tsearchMoviesHintsSuccess = (result: Array<any>) => {\r\n\t\tthis.hints.movies = result;\r\n\t};\r\n\tsearchShowsHintsSuccess = (result: Array<any>) => {\r\n\t\tthis.hints.shows = result;\r\n\t};\r\n\r\n\tsearchGames = async (query: string) => {\r\n\t\tthis.gamesState = 'pending';\r\n\t\tgameRequests.searchGames(query, 1, 20).then((res) => this.searchGamesSuccess(res, query), this.searchGamesFailure);\r\n\t};\r\n\tsearchGamesSuccess = (result: Array<any>, query: string) => {\r\n\t\tthis.games = { values: result, page: 1, query, isEnd: result.length < 20 };\r\n\t\tthis.gamesState = 'done';\r\n\t};\r\n\tsearchGamesFailure = (error: string) => {\r\n\t\ttoast.error(`Ошибка поиска игр! ${error}`);\r\n\t\tthis.gamesState = 'error: ' + error;\r\n\t};\r\n\tnextGames = async () => {\r\n\t\tif (this.gamesState === 'pending' || this.games.isEnd) return;\r\n\t\tthis.gamesState = 'pending';\r\n\t\tgameRequests.searchGames(this.games.query, this.games.page + 1, 20).then(this.nextGamesSuccess, this.nextGamesFailure);\r\n\t};\r\n\tnextGamesSuccess = (result: Array<any>) => {\r\n\t\tthis.games = { values: [...this.games.values, ...result], page: this.games.page + 1, query: this.games.query, isEnd: result.length < 20 };\r\n\t\tthis.gamesState = 'done';\r\n\t};\r\n\tnextGamesFailure = (error: string) => {\r\n\t\ttoast.error(`Ошибка поиска игр! ${error}`);\r\n\t\tthis.gamesState = 'error: ' + error;\r\n\t};\r\n\r\n\tsearchMovies = async (query: string) => {\r\n\t\tthis.moviesState = 'pending';\r\n\t\tmovieRequests.searchMovies(query, 1).then((res) => this.searchMoviesSuccess(res, query), this.searchMoviesFailure);\r\n\t};\r\n\tsearchMoviesSuccess = (result: any, query: string) => {\r\n\t\tthis.movies = { values: result.results, page: 1, query, isEnd: result.page === result.total_pages || result.total_pages === 0 };\r\n\t\tthis.moviesState = 'done';\r\n\t};\r\n\tsearchMoviesFailure = (error: string) => {\r\n\t\ttoast.error(`Ошибка поиска фильмов! ${error}`);\r\n\t\tthis.moviesState = 'error: ' + error;\r\n\t};\r\n\tnextMovies = async () => {\r\n\t\tif (this.moviesState === 'pending' || this.movies.isEnd) return;\r\n\t\tthis.moviesState = 'pending';\r\n\t\tmovieRequests.searchMovies(this.movies.query, this.movies.page + 1).then(this.nextMoviesSuccess, this.nextMoviesFailure);\r\n\t};\r\n\tnextMoviesSuccess = (result: any) => {\r\n\t\tthis.movies = { values: [...this.movies.values, ...result?.results], page: this.movies.page + 1, query: this.movies.query, isEnd: result.page === result.total_pages };\r\n\t\tthis.moviesState = 'done';\r\n\t};\r\n\tnextMoviesFailure = (error: string) => {\r\n\t\ttoast.error(`Ошибка поиска фильмов! ${error}`);\r\n\t\tthis.moviesState = 'error: ' + error;\r\n\t};\r\n\r\n\tsearchShows = async (query: string, page?: number) => {\r\n\t\tthis.showsState = 'pending';\r\n\t\tshowRequests.searchShows(query, page).then((res) => this.searchShowsSuccess(res, query), this.searchShowsFailure);\r\n\t};\r\n\tsearchShowsSuccess = (result: any, query: string) => {\r\n\t\tthis.shows = { values: result.results, page: 1, query, isEnd: result.page === result.total_pages || result.total_pages === 0 };\r\n\t\tthis.showsState = 'done';\r\n\t};\r\n\tsearchShowsFailure = (error: string) => {\r\n\t\ttoast.error(`Ошибка поиска серилов! ${error}`);\r\n\t\tthis.showsState = 'error: ' + error;\r\n\t};\r\n\tnextShows = async () => {\r\n\t\tif (this.showsState === 'pending' || this.shows.isEnd) return;\r\n\t\tthis.showsState = 'pending';\r\n\t\tshowRequests.searchShows(this.shows.query, this.shows.page + 1).then(this.nextShowsSuccess, this.nextShowsFailure);\r\n\t};\r\n\tnextShowsSuccess = (result: any) => {\r\n\t\tthis.shows = { values: [...this.shows.values, ...result.results], page: this.shows.page + 1, query: this.shows.query, isEnd: result.page === result.total_pages };\r\n\t\tthis.showsState = 'done';\r\n\t};\r\n\tnextShowsFailure = (error: string) => {\r\n\t\ttoast.error(`Ошибка поиска сериалов! ${error}`);\r\n\t\tthis.showsState = 'error: ' + error;\r\n\t};\r\n\r\n\tsearchUsers = async (query: string) => {\r\n\t\tthis.usersState = 'pending';\r\n\t\tuserRequests.searchUsers(query).then(this.searchUsersSuccess, this.searchUsersFailure);\r\n\t};\r\n\tsearchUsersSuccess = (result: any) => {\r\n\t\tthis.users = { values: result, page: 1, query: '' };\r\n\t\tthis.usersState = 'done';\r\n\t};\r\n\tsearchUsersFailure = (error: string) => {\r\n\t\ttoast.error(`Ошибка поиска пользователей! ${error}`);\r\n\t\tthis.usersState = 'error: ' + error;\r\n\t};\r\n}\r\n\r\nconst SearchStore = new Search();\r\n//export default remotedev(SearchStore, { name: 'Search' });\r\nexport default SearchStore;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport classnames from \"classnames\";\r\nimport \"./search-card.sass\";\r\n\r\nfunction SearchCard({ info, className }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className={classnames(\"search-card\", className)}>\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + info.link}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(info.link);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={info.name}>\r\n\t\t\t\t<div className='search-card__poster' style={{ backgroundImage: info.poster }} />\r\n\t\t\t\t<div className='search-card__body'>\r\n\t\t\t\t\t<div className='search-card__name'>\r\n\t\t\t\t\t\t<h4>{info.name}</h4>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p className='search-card__date'>{info.release_date}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n\t\t\t<div className='search-card__wrapper'>\r\n\t\t\t\t<p className='search-card__genres' hidden={!info.genres}>\r\n\t\t\t\t\tЖанр: {info.genres}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='search-card__tags' hidden={!info.tags}>\r\n\t\t\t\t\tТеги: {info.tags}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='search-card__platfroms' hidden={!info.platforms}>\r\n\t\t\t\t\tПлатформы: {info.platforms}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='search-card__overview' hidden={!info.overview}>\r\n\t\t\t\t\t{info.overview}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SearchCard;\r\n","import SearchCard from \"./SearchCard\";\r\n\r\nexport default SearchCard;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport SearchCard from \"../SearchCard\";\r\nimport \"./search-cards.sass\";\r\n\r\nfunction SearchCardsBlock({ name, objects, hidden, className }) {\r\n\treturn (\r\n\t\t<div hidden={hidden} className={classnames(\"search-cards\", className)}>\r\n\t\t\t<h3>{name}</h3>\r\n\t\t\t<div className='search-cards__body'>\r\n\t\t\t\t<div className='search-cards__cards'>\r\n\t\t\t\t\t{objects?.map((object) => (\r\n\t\t\t\t\t\t<SearchCard info={object} key={object.id} className='search-cards__card' />\r\n\t\t\t\t\t))}\r\n\t\t\t\t\t{objects?.length < 1 ? `${name} не найдены` : \"\"}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n//onMouseDown={mouseDownHandler}\r\n\r\nexport default SearchCardsBlock;\r\n","import SearchCardsBlock from \"./SearchCardsBlock\";\r\n\r\nexport default SearchCardsBlock;\r\n","import React, { useMemo } from \"react\";\r\nimport SearchCardsBlock from \"./SearchCardsBlock\";\r\n\r\nfunction GameCards({ games, hidden }) {\r\n\tconst objects = useMemo(\r\n\t\t() =>\r\n\t\t\tgames?.reduce((newObjects, game) => {\r\n\t\t\t\tlet object = {\r\n\t\t\t\t\tname: game.name,\r\n\t\t\t\t\tid: game.id,\r\n\t\t\t\t\tposter: `url(${game.background_image})`,\r\n\t\t\t\t\tlink: \"/game/\" + game.slug,\r\n\t\t\t\t\tgenres: \"\",\r\n\t\t\t\t\ttags: \"\",\r\n\t\t\t\t\tplatforms: \"\",\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (game.released) {\r\n\t\t\t\t\tlet mas = game.released.split(\"-\");\r\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\t\t\tobject.release_date = newDate;\r\n\t\t\t\t} else object.release_date = \"\";\r\n\r\n\t\t\t\tif (game.genres) {\r\n\t\t\t\t\tobject.genres = game.genres.reduce((previousValue, genre) => `${previousValue}, ${genre.name}`, \"\").slice(2);\r\n\t\t\t\t}\r\n\t\t\t\tif (game.tags) {\r\n\t\t\t\t\tobject.tags = game.tags\r\n\t\t\t\t\t\t.reduce((previousValue, tag, index) => {\r\n\t\t\t\t\t\t\tif (index < 6) return `${previousValue}, ${tag.name}`;\r\n\t\t\t\t\t\t\treturn previousValue;\r\n\t\t\t\t\t\t}, \"\")\r\n\t\t\t\t\t\t.slice(2);\r\n\t\t\t\t}\r\n\t\t\t\tif (game.platforms) {\r\n\t\t\t\t\tobject.platforms = game.platforms.reduce((previousValue, platform) => `${previousValue}, ${platform.platform.name}`, \"\").slice(2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (object) newObjects.push(object);\r\n\t\t\t\treturn newObjects;\r\n\t\t\t}, []),\r\n\t\t[games]\r\n\t);\r\n\r\n\treturn <SearchCardsBlock name='Игры' hidden={hidden} objects={objects} />;\r\n}\r\n\r\nexport default GameCards;\r\n","import React, { useMemo } from \"react\";\r\nimport SearchCardsBlock from \"./SearchCardsBlock\";\r\n\r\nfunction MovieCards({ movies, hidden }) {\r\n\tconst objects = useMemo(\r\n\t\t() =>\r\n\t\t\tmovies?.reduce((newObjects, movie) => {\r\n\t\t\t\tlet object = {\r\n\t\t\t\t\tname: movie.title,\r\n\t\t\t\t\tid: movie.id,\r\n\t\t\t\t\tposter: `url(${\"http://image.tmdb.org/t/p/w300\" + movie.backdrop_path})`,\r\n\t\t\t\t\tlink: \"/movie/\" + movie.id,\r\n\t\t\t\t\toverview: movie.overview,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (movie.release_date) {\r\n\t\t\t\t\tlet mas = movie.release_date.split(\"-\");\r\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\t\t\tobject.release_date = newDate;\r\n\t\t\t\t} else object.release_date = \"\";\r\n\r\n\t\t\t\tif (object) newObjects.push(object);\r\n\t\t\t\treturn newObjects;\r\n\t\t\t}, []),\r\n\t\t[movies]\r\n\t);\r\n\r\n\treturn <SearchCardsBlock name='Фильмы' hidden={hidden} objects={objects} />;\r\n}\r\n\r\nexport default MovieCards;\r\n","import React, { useMemo } from \"react\";\r\nimport SearchCardsBlock from \"./SearchCardsBlock\";\r\n\r\nfunction ShowCards({ shows, hidden }) {\r\n\tconst objects = useMemo(\r\n\t\t() =>\r\n\t\t\tshows?.reduce((newObjects, show) => {\r\n\t\t\t\tlet object = {\r\n\t\t\t\t\tname: show.name,\r\n\t\t\t\t\tid: show.id,\r\n\t\t\t\t\tposter: `url(${\"http://image.tmdb.org/t/p/w300\" + show.backdrop_path})`,\r\n\t\t\t\t\tlink: \"/show/\" + show.id,\r\n\t\t\t\t\toverview: show.overview,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (show.first_air_date) {\r\n\t\t\t\t\tlet mas = show.first_air_date.split(\"-\");\r\n\t\t\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\t\t\tobject.release_date = newDate;\r\n\t\t\t\t} else object.release_date = \"\";\r\n\r\n\t\t\t\tif (object) newObjects.push(object);\r\n\t\t\t\treturn newObjects;\r\n\t\t\t}, []),\r\n\t\t[shows]\r\n\t);\r\n\r\n\treturn <SearchCardsBlock name='Сериалы' hidden={hidden} objects={objects} />;\r\n}\r\n\r\nexport default ShowCards;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./card-user.sass\";\r\n\r\nfunction CardUser({ user, className }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<a\r\n\t\t\thref={window.location.origin + \"/user/\" + user.id}\r\n\t\t\tonClick={(e) => {\r\n\t\t\t\thistory.push(\"/user/\" + user.id);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}}\r\n\t\t\tclassName={classnames(\"card-user\", className)}>\r\n\t\t\t<div className='card-user__image' style={{ backgroundImage: `url(${\"https://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }} />\r\n\t\t\t<div className='card-user__text'>{user.username}</div>\r\n\t\t</a>\r\n\t);\r\n}\r\n\r\nexport default CardUser;\r\n","import CardUser from \"./CardUser\";\r\n\r\nexport default CardUser;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport \"./friend-block.sass\";\r\n\r\nimport CardUser from '../CardUser';\r\n\r\nfunction FriendBlock({ users, className }) {\r\n\treturn (\r\n\t\t<div className={classnames(\"friends-block\", className)}>\r\n\t\t\t{users.map((user) => (\r\n\t\t\t\t<CardUser user={user} key={user.id} className='friends-block__friend' />\r\n\t\t\t))}\r\n\t\t\t{users.length < 1 ? \"Пользователи не найдены\" : \"\"}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FriendBlock;\r\n","import FriendBlock from \"./FriendBlock\";\r\n\r\nexport default FriendBlock;\r\n","import React from \"react\";\r\nimport FriendBlock from '../../../shared/FriendBlock';\r\n\r\nfunction UserCards({ users, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t<h3>Пользователи</h3>\r\n\t\t\t<FriendBlock users={users} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserCards;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport \"./categories-tab.sass\";\r\n\r\ninterface ICategoriesTabProps {\r\n\tcategories: Array<string>,\r\n\tonChangeCategory: (category: string) => void,\r\n\tactiveCategory: string,\r\n\thidden?: boolean,\r\n\tchildren?: any,\r\n\tclassName?: string,\r\n}\r\n\r\nfunction CategoriesTab({ categories, onChangeCategory, activeCategory, hidden, children, className }: ICategoriesTabProps) {\r\n\treturn (\r\n\t\t<div hidden={hidden} className={classnames(\"categories-tabs\", className)}>\r\n\t\t\t<div className='categories-tabs__body'>\r\n\t\t\t\t{categories.map((category, counter) => (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={classnames(\"categories-tabs__tab\", activeCategory === category ? \"categories-tabs__tab_active\" : \"\")}\r\n\t\t\t\t\t\tkey={counter}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tonChangeCategory(category);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{category}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='categories-tabs__content'>{children}</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CategoriesTab;\r\n","import CategoriesTab from \"./CategoriesTab\";\r\n\r\nexport default CategoriesTab;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { observer } from 'mobx-react';\r\nimport LoadingOverlay from 'react-loading-overlay';\r\nimport { FaSearch } from 'react-icons/fa';\r\n\r\nimport SearchStore from '../../store/SearchStore';\r\n\r\nimport GameCards from './views/GameCards';\r\nimport MovieCards from './views/MovieCards';\r\nimport ShowCards from './views/ShowCards';\r\nimport UserCards from './views/UserCards';\r\nimport CategoriesTab from '../../shared/CategoriesTab';\r\n\r\nimport './search-page.sass';\r\nimport useScroll from '../../hooks/useScroll';\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst SearchPage = observer(() => {\r\n\tconst store = SearchStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { query }: any = useParams();\r\n\tconst [queryText, setQueryText] = useState('');\r\n\r\n\tconst parentRef = useRef() as React.MutableRefObject<HTMLInputElement>;\r\n\tconst childRef = useRef() as React.MutableRefObject<HTMLInputElement>;\r\n\t// eslint-disable-next-line\r\n\tconst intersected = useScroll(parentRef, childRef, () => fetchItems());\r\n\r\n\tconst [activeCategory, setActiveCategory] = useState('Игры');\r\n\r\n\tfunction fetchItems() {\r\n\t\tif (activeCategory === 'Игры') store.nextGames();\r\n\t\tif (activeCategory === 'Фильмы') store.nextMovies();\r\n\t\tif (activeCategory === 'Сериалы') store.nextShows();\r\n\t}\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (activeCategory === 'Игры') store.searchGames(query);\r\n\t\t\tif (activeCategory === 'Фильмы') store.searchMovies(query);\r\n\t\t\tif (activeCategory === 'Сериалы') store.searchShows(query);\r\n\t\t\tif (activeCategory === 'Пользователи') store.searchUsers(query);\r\n\t\t\tsetQueryText(query);\r\n\t\t\tdocument.title = 'Поиск';\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[query, activeCategory]\r\n\t);\r\n\r\n\r\n\treturn (\r\n\t\t<div className='search-page'>\r\n\t\t\t<div className='search-page__body'>\r\n\t\t\t\t<form\r\n\t\t\t\t\tclassName='search-page__form'\r\n\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\thistory.push('/search/' + queryText);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<h1>Поиск</h1>\r\n\t\t\t\t\t<FaSearch className='search-page__name-icon' />\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName='search-page__name-input'\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tplaceholder='Найти'\r\n\t\t\t\t\t\tvalue={queryText}\r\n\t\t\t\t\t\tonChange={(e) => setQueryText(e.target.value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</form>\r\n\t\t\t\t<CategoriesTab\r\n\t\t\t\t\tcategories={['Игры', 'Фильмы', 'Сериалы', 'Пользователи']}\r\n\t\t\t\t\tactiveCategory={activeCategory}\r\n\t\t\t\t\tonChangeCategory={(category: string) => {\r\n\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<div className='search-page__results' ref={parentRef}>\r\n\t\t\t\t\t\t<LoadingOverlay active={store.gamesState === 'pending'} spinner text='Ищем игры...'>\r\n\t\t\t\t\t\t\t<GameCards games={store.games.values} hidden={activeCategory !== 'Игры'} />\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={store.moviesState === 'pending'} spinner text='Ищем фильмы...'>\r\n\t\t\t\t\t\t\t<MovieCards movies={store.movies.values} hidden={activeCategory !== 'Фильмы'} />\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={store.showsState === 'pending'} spinner text='Ищем сериалы...'>\r\n\t\t\t\t\t\t\t<ShowCards shows={store.shows.values} hidden={activeCategory !== 'Сериалы'} />\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={store.usersState === 'pending'} spinner text='Ищем пользователей...'>\r\n\t\t\t\t\t\t\t<UserCards users={store.users.values} hidden={activeCategory !== 'Всё' && activeCategory !== 'Пользователи'} />\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<div ref={childRef} style={{ height: 20 }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</CategoriesTab>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SearchPage;\r\n","import SearchPage from \"./SearchPage\";\r\n\r\nexport default SearchPage;\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nexport default function useScroll(parentRef, childRef, callback) {\r\n\tconst observer = useRef();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst options = {\r\n\t\t\troot: parentRef.current,\r\n\t\t\trootMargin: \"0px\",\r\n\t\t\tthreshold: 0,\r\n\t\t};\r\n\t\tobserver.current = new IntersectionObserver(([target]) => {\r\n\t\t\tif (target.isIntersecting) {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t}, options);\r\n\r\n\t\tobserver.current.observe(childRef.current);\r\n\r\n\t\treturn function () {\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\tobserver.current.unobserve(childRef.current);\r\n\t\t};\r\n\t\t// eslint-disable-next-line\r\n\t}, [callback]);\r\n}\r\n","import ConfirmPage from \"./ConfirmPage\";\r\n\r\nexport default ConfirmPage;\r\n","import React, { useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AuthStore from '../../store/AuthStore';\r\nimport \"./confirm-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ConfirmPage = observer((props) => {\r\n\tconst { confirmEmail, confirmEmailState } = AuthStore;\r\n\tlet history = useHistory();\r\n\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet uid64 = params.get(\"uid64\");\r\n\tlet token = params.get(\"token\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tconfirmEmail(uid64, token);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (confirmEmailState.startsWith(\"error\")) history.push(`/404page`);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[confirmEmailState]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='confirm-page'>\r\n\t\t\t<h2 hidden={confirmEmailState !== \"done\"} className='confirm-page__success'>\r\n\t\t\t\tВаша почта подтверждена!\r\n\t\t\t</h2>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ConfirmPage;\r\n","import ConfirmPasswordPage from \"./ConfirmPasswordPage\";\r\n\r\nexport default ConfirmPasswordPage;\r\n","import React, {useState} from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport AuthStore from '../../store/AuthStore';\r\nimport './confirm-password-page.sass';\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ConfirmPasswordPage = observer((props) => {\r\n\tconst { confirmPassword, confirmPasswordState } = AuthStore;\r\n\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState('');\r\n\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet token = params.get(\"token\");\r\n\r\n\treturn (\r\n\t\t<div className='confirm-password-page'>\r\n\t\t\t<div className='confirm-password-page__body'>\r\n\t\t\t\t<form\r\n\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\tconfirmPassword(token, password.value);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<h4 className='confirm-password-page__header'>Обновить пароль</h4>\r\n\t\t\t\t\t<p className='note note-danger confirm-password-page__fail' hidden={!confirmPasswordState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t{confirmPasswordState}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p className='note note-success confirm-password-page__success' hidden={confirmPasswordState !== \"done\"}>\r\n\t\t\t\t\t\tПароль обновлен!\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<label htmlFor='passwordInput'>\r\n\t\t\t\t\t\tНовый пароль\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\tid='passwordInput'\r\n\t\t\t\t\t\tclassName='confirm-password-page__input'\r\n\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\tonChange={setPassword}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label htmlFor='passwordConfirmInput'>\r\n\t\t\t\t\t\tПодтверждение пароля\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\tid='passwordConfirmInput'\r\n\t\t\t\t\t\tclassName='confirm-password-page__input'\r\n\t\t\t\t\t\tvalue={passwordConfirm}\r\n\t\t\t\t\t\tonChange={setPasswordConfirm}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\tclassName='confirm-password-page__button'\r\n\t\t\t\t\t\tdisabled={(password.value !== passwordConfirm.value) | (password.value.length < 1)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tОбновить\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ConfirmPasswordPage;\r\n","import { makeAutoObservable } from 'mobx';\r\n//import remotedev from 'mobx-remotedev';\r\nimport * as userRequests from '../services/userRequests';\r\nimport AuthStore from './AuthStore';\r\n\r\ntype IPendingState = 'done' | 'pending' | string;\r\n\r\nexport interface IUser {\r\n\t[key: string]: any,\r\n}\r\n\r\nclass User {\r\n\tuser: IUser = {};\r\n\tuserLogs: any = {};\r\n\tuserFriendsLogs: any = { log: [] };\r\n\tuserState: IPendingState = 'done';\r\n\tuserLogsState: IPendingState = 'done';\r\n\tuserFriendsLogsState: IPendingState = 'done';\r\n\tsetUserStatusState: IPendingState = 'done';\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\tget isCurrentUser() {\r\n\t\treturn AuthStore.loggedIn && parseInt(this.user.id) == AuthStore.user.id;\r\n\t}\r\n\r\n\trequestUser = async (username: string) => {\r\n\t\tthis.userState = 'pending';\r\n\t\tuserRequests.getUserInfo(username).then(this.requestUserSuccess, this.requestUserFailure);\r\n\t};\r\n\trequestUserSuccess = (result: IUser) => {\r\n\t\tthis.user = result;\r\n\t\tthis.userState = 'done';\r\n\t};\r\n\trequestUserFailure = (error: string) => {\r\n\t\tthis.userState = 'error: ' + error;\r\n\t};\r\n\r\n\trequestUserLogs = async (userID: number, page: number, resultsOnPage: number, query: string, filters: any) => {\r\n\t\tthis.userLogsState = 'pending';\r\n\t\tuserRequests.getUserLog(userID, page, resultsOnPage, query, filters).then(this.requestLogsSuccess, this.requestLogsFailure);\r\n\t};\r\n\trequestLogsSuccess = (result: any) => {\r\n\t\tthis.userLogs = result;\r\n\t\tthis.userLogsState = 'done';\r\n\t};\r\n\trequestLogsFailure = (error: any) => {\r\n\t\tif (error.response.status === 403) this.userLogsState = 'forbidden';\r\n\t\telse this.userLogsState = 'error: ' + error;\r\n\t};\r\n\tdeleteUserLog = async (logType: any, logID: any) => {\r\n\t\tthis.userLogsState = 'pending';\r\n\t\tuserRequests.deleteUserLog(this.user.id, logType, logID).then(() => this.deleteUserLogSuccess(logType, logID), this.deleteUserLogFailure);\r\n\t};\r\n\tdeleteUserLogSuccess = (logType: any, logID: any) => {\r\n\t\tlet newLogs = this.userLogs.log.filter((log: any) => {\r\n\t\t\treturn !(log.id === logID && log.type === logType);\r\n\t\t});\r\n\t\tthis.userLogs = { ...this.userLogs, log: newLogs };\r\n\t\tthis.userLogsState = 'done';\r\n\t};\r\n\tdeleteUserLogFailure = (error: any) => {\r\n\t\tif (error.response.status === 403) this.userLogsState = 'forbidden';\r\n\t\telse this.userLogsState = 'error: ' + error;\r\n\t};\r\n\r\n\trequestUserFriendsLogs = async (userID: number, page: number, resultsOnPage: number, query: string, filters: any) => {\r\n\t\tthis.userFriendsLogsState = 'pending';\r\n\t\tuserRequests.getUserFriendsLog(page, resultsOnPage, query, filters).then(this.requestFriendsLogsSuccess, this.requestFriendsLogsFailure);\r\n\t};\r\n\trequestFriendsLogsSuccess = (result: any) => {\r\n\t\tthis.userFriendsLogs = result;\r\n\t\tthis.userFriendsLogsState = 'done';\r\n\t};\r\n\trequestFriendsLogsFailure = (error: string) => {\r\n\t\tthis.userFriendsLogsState = 'error: ' + error;\r\n\t};\r\n\r\n\tsetUserStatus = async (is_following: boolean, userID: number) => {\r\n\t\tthis.setUserStatusState = 'pending';\r\n\t\tuserRequests.setUserStatus(is_following, userID).then(this.setUserStatusSuccess, this.setUserStatusFailure);\r\n\t};\r\n\tsetUserStatusSuccess = (result: any) => {\r\n\t\tthis.user.is_followed = result.is_following;\r\n\t\tthis.setUserStatusState = 'done';\r\n\t};\r\n\tsetUserStatusFailure = (error: string) => {\r\n\t\tthis.setUserStatusState = 'error: ' + error;\r\n\t};\r\n}\r\n\r\nconst UserStore = new User();\r\n//export default remotedev(UserStore, { name: 'User' });\r\nexport default UserStore;\r\n","import React from \"react\";\r\nimport Select from \"react-select\";\r\nimport \"./select-multi.sass\";\r\n\r\nfunction SelectMulti({ placeholder, options, onChange, hidden }) {\r\n\tif (hidden) return \"\";\r\n\telse return <Select className='react-select-container' classNamePrefix={\"multiselect\"} isMulti={true} placeholder={placeholder} onChange={onChange} options={options} hidden={hidden} />;\r\n}\r\n\r\nexport default SelectMulti;\r\n","import SelectMulti from \"./SelectMulti\";\r\n\r\nexport default SelectMulti;\r\n","import React from \"react\";\r\nimport { FaStar, FaClock } from \"react-icons/fa\";\r\nimport \"./item-row.sass\";\r\n\r\nfunction ItemRow({ data, fields }) {\r\n\treturn (\r\n\t\t<div className='item-row'>\r\n\t\t\t<div className='item-row__review' style={{ display: data.review ? \"block\" : \"none\" }}>\r\n\t\t\t\tОтзыв\r\n\t\t\t\t<div className='item-row__review-body'>{data.review}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='item-row__body'>\r\n\t\t\t\t<div className='item-row__body-left'>\r\n\t\t\t\t\t<div className='item-row__poster' style={{ backgroundImage: `url(${data.poster})` }} />\r\n\t\t\t\t\t<div className='item-row__name'>\r\n\t\t\t\t\t\t<a href={data.link}> {data.name} </a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='item-row__body-right'>\r\n\t\t\t\t\t<div className='item-row__status-block'>\r\n\t\t\t\t\t\tстатус\r\n\t\t\t\t\t\t<div className='item-row__status'>{data.status}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='item-row__score'>\r\n\t\t\t\t\t\t<div>{data.score}/10</div>\r\n\t\t\t\t\t\t<FaStar className='item-row__score-icon' />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{fields.find((field) => field.key === \"spent_time\") === undefined ? (\r\n\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className='item-row__time'>\r\n\t\t\t\t\t\t\t<div>{data.spent_time}</div>\r\n\t\t\t\t\t\t\t<FaClock className='item-row__time-icon' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ItemRow;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nfunction getWindowDimensions() {\r\n\tconst { innerWidth: width, innerHeight: height } = window;\r\n\treturn {\r\n\t\twidth,\r\n\t\theight,\r\n\t};\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n\tconst [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n\tuseEffect(() => {\r\n\t\tfunction handleResize() {\r\n\t\t\tsetWindowDimensions(getWindowDimensions());\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"resize\", handleResize);\r\n\t\treturn () => window.removeEventListener(\"resize\", handleResize);\r\n\t}, []);\r\n\r\n\treturn windowDimensions;\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { CSVLink } from \"react-csv\";\r\nimport { FaAngleDown, FaAngleUp, FaStar, FaClock, FaArrowsAltV } from \"react-icons/fa\";\r\nimport Pagination from \"rc-pagination\";\r\n\r\nimport InputNumber from '../../../../../shared/InputNumber';\r\nimport SelectMulti from '../../../../../shared/SelectMulti';\r\nimport ItemRow from \"../ItemRow/ItemRow\";\r\nimport useWindowDimensions from '../../../../../hooks/useWindowDimensions';\r\n\r\nimport \"./item-block.sass\";\r\n\r\nfunction ItemBlock({ items, statuses, fields, name }) {\r\n\tconst [query, setQuery] = useState(\"\");\r\n\tconst [pageSize, setPageSize] = useState(10);\r\n\tconst [page, setPage] = useState(1);\r\n\tconst [filteredItems, setFilteredItems] = useState([]);\r\n\tconst [sort, setSort] = useState({});\r\n\tconst [statusFilters, setStatusFilters] = useState([]);\r\n\tconst [collapse, setCollapse] = useState(true);\r\n\tconst { width } = useWindowDimensions();\r\n\r\n\tconst toggleCollapse = () => {\r\n\t\tsetCollapse(!collapse);\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetFilteredItems(\r\n\t\t\t\titems\r\n\t\t\t\t\t?.filter((item) => item.name.toLowerCase().includes(query.toLowerCase()) && (statusFilters.includes(item.status) || statusFilters.length < 1))\r\n\t\t\t\t\t.sort((a, b) => {\r\n\t\t\t\t\t\tlet field1, field2;\r\n\t\t\t\t\t\tif (sort.type === \"number\") {\r\n\t\t\t\t\t\t\tfield1 = parseFloat(a[sort.field]);\r\n\t\t\t\t\t\t\tfield2 = parseFloat(b[sort.field]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfield1 = a[sort.field];\r\n\t\t\t\t\t\t\tfield2 = b[sort.field];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (field1 > field2) return sort.isAsc ? 1 : -1;\r\n\t\t\t\t\t\tif (field1 < field2) return sort.isAsc ? -1 : 1;\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[items, query, statusFilters, sort]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='item-block'>\r\n\t\t\t<div className='item-block__header'>\r\n\t\t\t\t<div className='item-block__header-left'>\r\n\t\t\t\t\t<div className='item-block__header-first-row'>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tplaceholder='Поиск'\r\n\t\t\t\t\t\t\taria-label='Поиск'\r\n\t\t\t\t\t\t\tclassName='item-block__search-input'\r\n\t\t\t\t\t\t\tvalue={query}\r\n\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\tsetQuery(event.target.value);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button className='item-block__mobile-expand' onClick={toggleCollapse}>\r\n\t\t\t\t\t\t\t{collapse ? <FaAngleDown /> : <FaAngleUp />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='item-block__sort-buttons' hidden={collapse && width <= 515}>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='item-block__sort-button'\r\n\t\t\t\t\t\t\thidden={fields.find((field) => field.key === \"score\") === undefined}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetSort({ field: \"score\", type: \"number\", isAsc: !sort.isAsc });\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<FaStar /> <FaArrowsAltV />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='item-block__sort-button'\r\n\t\t\t\t\t\t\thidden={fields.find((field) => field.key === \"spent_time\") === undefined}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetSort({ field: \"spent_time\", type: \"number\", isAsc: !sort.isAsc });\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<FaClock /> <FaArrowsAltV />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<SelectMulti\r\n\t\t\t\t\t\thidden={collapse && width <= 515}\r\n\t\t\t\t\t\tplaceholder={\"Cтатус\"}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tsetStatusFilters(e.map((obj) => obj.value));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\toptions={statuses}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='item-block__header-right' hidden={collapse && width <= 515}>\r\n\t\t\t\t\t<label className='item-block__label'>Записей на странице</label>\r\n\t\t\t\t\t<InputNumber value={pageSize} max={100} min={1} onChange={(value) => setPageSize(value)} dataList={[5, 10, 25, 50, 100]} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='item-block__rows'>\r\n\t\t\t\t{filteredItems?.slice((page - 1) * pageSize, page * pageSize).map((item, counter) => (\r\n\t\t\t\t\t<ItemRow data={item} fields={fields} key={counter} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='item-block__footer'>\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\ttotal={filteredItems?.length}\r\n\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\tsetPage(e);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tcurrent={page}\r\n\t\t\t\t/>\r\n\t\t\t\t<CSVLink data={items ? items : []} headers={fields} separator={\";\"} filename={`interests ${name}.csv`}>\r\n\t\t\t\t\tСкачать CSV\r\n\t\t\t\t</CSVLink>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ItemBlock;\r\n","import ItemBlock from \"./ItemBlock\";\r\n\r\nexport default ItemBlock;\r\n","import React from \"react\";\r\nimport ItemBlock from \"./ItemBlock\";\r\n\r\nfunction GameBlock({ games }) {\r\n\treturn (\r\n\t\t<ItemBlock\r\n\t\t\titems={games?.map((game) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlink: window.location.origin + \"/game/\" + game.game.rawg_slug,\r\n\t\t\t\t\tname: game.game.rawg_name,\r\n\t\t\t\t\tstatus: game.status,\r\n\t\t\t\t\tscore: game.score,\r\n\t\t\t\t\treview: game.review,\r\n\t\t\t\t\tspent_time: parseFloat(game.spent_time),\r\n\t\t\t\t\tposter: game.game.rawg_backdrop_path,\r\n\t\t\t\t};\r\n\t\t\t})}\r\n\t\t\tstatuses={[\r\n\t\t\t\t{ value: \"Буду играть\", label: \"Буду играть\" },\r\n\t\t\t\t{ value: \"Играю\", label: \"Играю\" },\r\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\r\n\t\t\t\t{ value: \"Прошел\", label: \"Прошел\" },\r\n\t\t\t]}\r\n\t\t\tfields={[\r\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\r\n\t\t\t\t{ label: \"Название\", key: \"name\" },\r\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\r\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\r\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\r\n\t\t\t\t{ label: \"Время прохождения\", key: \"spent_time\" },\r\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\r\n\t\t\t]}\r\n\t\t\tname={\"Игры\"}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default GameBlock;\r\n","import React from \"react\";\r\nimport ItemBlock from \"./ItemBlock\";\r\n\r\nfunction MovieBlock({ movies }) {\r\n\treturn (\r\n\t\t<ItemBlock\r\n\t\t\titems={movies?.map((movie) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlink: window.location.origin + \"/movie/\" + movie.movie.tmdb_id,\r\n\t\t\t\t\tname: movie.movie.tmdb_name,\r\n\t\t\t\t\tstatus: movie.status,\r\n\t\t\t\t\tscore: movie.score,\r\n\t\t\t\t\treview: movie.review,\r\n\t\t\t\t\tposter: movie.movie.tmdb_backdrop_path,\r\n\t\t\t\t};\r\n\t\t\t})}\r\n\t\t\tstatuses={[\r\n\t\t\t\t{ value: \"Буду смотреть\", label: \"Буду смотреть\" },\r\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\r\n\t\t\t\t{ value: \"Посмотрел\", label: \"Посмотрел\" },\r\n\t\t\t]}\r\n\t\t\tfields={[\r\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\r\n\t\t\t\t{ label: \"Название\", key: \"name\" },\r\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\r\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\r\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\r\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\r\n\t\t\t]}\r\n\t\t\tname={\"Фильмы\"}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default MovieBlock;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport classnames from \"classnames\";\r\n\r\nimport Rating from '../../../../../shared/Rating';\r\n\r\nimport \"./log-row.sass\";\r\n\r\nfunction LogRow({ log, showUsername, onDeleteLog, className }) {\r\n\tlet history = useHistory();\r\n\r\n\tfunction translateActionType(action, actionResult) {\r\n\t\tswitch (action) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tswitch (actionResult) {\r\n\t\t\t\t\tcase \"0\":\r\n\t\t\t\t\t\treturn \"посмотрел(а)\";\r\n\t\t\t\t\tcase \"-1\":\r\n\t\t\t\t\t\treturn \"не смотрела(а)\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"оценил(а)\";\r\n\t\t\t\t}\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn \"изменил(а) статус\";\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn \"оставил(а) отзыв на\";\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn \"изменил(а) время прохождения\";\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\tif (actionResult > 0) return \"посмотрел(а) \" + actionResult + \" серий\";\r\n\t\t\t\telse return \"не смотрел(а) \" + actionResult * -1 + \" серий\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\tif (actionResult === \"True\") return \"подписан(а) на\";\r\n\t\t\t\telse return \"отписан(а) от\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn action;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction translateType(type, actionType) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"игру\";\r\n\t\t\t\telse return \"игры\";\r\n\t\t\tcase \"movie\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"фильм\";\r\n\t\t\t\telse return \"фильма\";\r\n\t\t\tcase \"show\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"сериал\";\r\n\t\t\t\telse return \"сериала\";\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn \"пользователя\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn type;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction nameToLink(name, type, id) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + id}\r\n\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"movie\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + id}\r\n\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"show\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id}\r\n\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number}\r\n\t\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number}\r\n\t\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t[s{id.season_number}e{id.episode_number}] серию\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/user/\" + id}\r\n\t\t\t\t\t\tclassName='log-row__link'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/user/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tdefault:\r\n\t\t\t\treturn name;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction userToLink(username, userID) {\r\n\t\treturn (\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + \"/user/\" + userID}\r\n\t\t\t\tclassName='log-row__link'\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/user/\" + userID);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}>\r\n\t\t\t\t{username}\r\n\t\t\t</a>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction actionResultToStr(actionType, actionResult, target) {\r\n\t\tswitch (actionType) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tif ((target !== \"episode\") | (actionResult > 0)) return <Rating initialRating={actionResult} readonly={true} />;\r\n\t\t\t\telse return \"\";\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn actionResult + \" \" + intToHours(actionResult);\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn actionResult;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\tlet options = { hour: \"numeric\", minute: \"numeric\" };\r\n\t\treturn newDate.toLocaleTimeString(\"ru-RU\", options);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classnames(\"log-row\", className)}>\r\n\t\t\t{parseDate(log.created)}&thinsp;\r\n\t\t\t{showUsername ? userToLink(log.user, log.user_id) : \"\"}&thinsp;\r\n\t\t\t{translateActionType(log.action_type, log.action_result)}&thinsp;\r\n\t\t\t{translateType(log.type, log.action_type)}&thinsp;\r\n\t\t\t{nameToLink(log.target, log.type, log.target_id)}\r\n\t\t\t{(log.type === \"user\") | (log.action_type === \"episodes\") | (log.action_result === \"0\") | (log.action_result === \"-1\") ? \"\" : \":\"}&thinsp;\r\n\t\t\t{actionResultToStr(log.action_type, log.action_result, log.type)}\r\n\t\t\t<button\r\n\t\t\t\tclassName={classnames(\"log-row__delete-button\", showUsername ? \"log-row__delete-button_hidden\" : \"\")}\r\n\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\tonDeleteLog(log.type, log.id);\r\n\t\t\t\t}}>\r\n\t\t\t\tx\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default LogRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport LogRow from \"../LogRow/LogRow\";\r\nimport \"./logs-by-day.sass\";\r\n\r\nfunction UserLogs({ logs, showUsername, currentUser, onDeleteLog }) {\r\n\tconst [logsByDay, setLogsByDay] = useState([]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetLogsByDay(groupLogsByDay(logs.log));\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[logs]\r\n\t);\r\n\r\n\tfunction groupLogsByDay(logs) {\r\n\t\tlet newLogs = [];\r\n\r\n\t\tfor (let i in logs) {\r\n\t\t\tlet date = new Date(logs[i].created);\r\n\r\n\t\t\tif (newLogs.length === 0)\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t\telse if (date.getDay() === newLogs[newLogs.length - 1].date.getDay()) newLogs[newLogs.length - 1].logs.push(logs[i]);\r\n\t\t\telse\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn newLogs;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='logs-by-day'>\r\n\t\t\t{logsByDay.map((dayLog, counter) => (\r\n\t\t\t\t<div key={counter} className='logs-by-day__day'>\r\n\t\t\t\t\t<div className='logs-by-day__date'>\r\n\t\t\t\t\t\t{dayLog.date.toLocaleDateString(\"ru-RU\", { year: dayLog.date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"numeric\", day: \"numeric\" })}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='logs-by-day__logs'>\r\n\t\t\t\t\t\t{dayLog.logs.map((log) => (\r\n\t\t\t\t\t\t\t<LogRow log={log} showUsername={showUsername} key={log.id + log.created} currentUser={currentUser} onDeleteLog={onDeleteLog} className='logs-by-day__log' />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserLogs;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Pagination from \"rc-pagination\";\r\nimport { FaAngleDown, FaAngleUp } from \"react-icons/fa\";\r\n\r\nimport SelectMulti from '../../../../shared/SelectMulti';\r\nimport InputNumber from '../../../../shared/InputNumber';\r\nimport LogsByDay from \"./LogsByDay/LogsByDay\";\r\nimport useWindowDimensions from '../../../../hooks/useWindowDimensions';\r\n\r\nimport \"./user-logs.sass\";\r\n\r\nfunction UserLogs({ userID, logs, showUsername, requestUserLogs, currentUser, onDeleteLog, logsType }) {\r\n\tconst [currentPage, setCurrentPage] = useState(1);\r\n\tconst [pageSize, setPageSize] = useState(15);\r\n\tconst [query, setQuery] = useState(\"\");\r\n\tconst [filters, setFilters] = useState([]);\r\n\tconst [collapse, setCollapse] = useState(true);\r\n\tconst { width } = useWindowDimensions();\r\n\r\n\tconst toggleCollapse = () => {\r\n\t\tsetCollapse(!collapse);\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (logsType === \"user\" || (logsType === \"userFriends\" && currentUser)) requestUserLogs(userID, currentPage, pageSize, query, filters);\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[userID, currentPage, currentUser, logsType, pageSize, filters]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='user-logs'>\r\n\t\t\t<div className='user-logs__header'>\r\n\t\t\t\t<div className='user-logs__header-left'>\r\n\t\t\t\t\t<div className='user-logs__header-first-row'>\r\n\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\trequestUserLogs(userID, currentPage, pageSize, query, filters);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tplaceholder='Поиск'\r\n\t\t\t\t\t\t\t\taria-label='Поиск'\r\n\t\t\t\t\t\t\t\tclassName='user-logs__search-input'\r\n\t\t\t\t\t\t\t\tvalue={query}\r\n\t\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\t\tsetQuery(event.target.value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<button className='user-logs__mobile-expand' onClick={toggleCollapse}>\r\n\t\t\t\t\t\t\t{collapse ? <FaAngleDown /> : <FaAngleUp />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<SelectMulti\r\n\t\t\t\t\t\tplaceholder={\"Тип логов\"}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tsetFilters(e.map((obj) => obj.value));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t{ value: \"game\", label: \"Игры\" },\r\n\t\t\t\t\t\t\t{ value: \"movie\", label: \"Фильмы\" },\r\n\t\t\t\t\t\t\t{ value: \"show\", label: \"Сериал\" },\r\n\t\t\t\t\t\t\t{ value: \"user\", label: \"Пользователи\" },\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\thidden={collapse && width < 748}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='user-logs__page-size' hidden={collapse && width < 748}>\r\n\t\t\t\t\t<label className='user-logs__page-size-label'> Записей на странице</label>\r\n\t\t\t\t\t<InputNumber value={pageSize} max={100} min={1} onChange={(value) => setPageSize(value)} dataList={[5, 10, 25, 50, 100]} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<LogsByDay logs={logs} showUsername={showUsername} currentUser={currentUser} onDeleteLog={onDeleteLog} />\r\n\t\t\t<Pagination\r\n\t\t\t\ttotal={logs.count}\r\n\t\t\t\tpageSize={pageSize}\r\n\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\tsetCurrentPage(e);\r\n\t\t\t\t}}\r\n\t\t\t\tcurrent={currentPage}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserLogs;\r\n","import UserLogs from \"./UserLogs\";\r\n\r\nexport default UserLogs;\r\n","import React from \"react\";\r\nimport ItemBlock from \"./ItemBlock\";\r\n\r\nfunction ShowBlock({ shows }) {\r\n\treturn (\r\n\t\t<ItemBlock\r\n\t\t\titems={shows?.map((show) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlink: window.location.origin + \"/show/\" + show.show.tmdb_id,\r\n\t\t\t\t\tname: show.show.tmdb_name,\r\n\t\t\t\t\tstatus: show.status,\r\n\t\t\t\t\tscore: show.score,\r\n\t\t\t\t\treview: show.review,\r\n\t\t\t\t\tposter: show.show.tmdb_backdrop_path,\r\n\t\t\t\t\tspent_time: show.spent_time,\r\n\t\t\t\t};\r\n\t\t\t})}\r\n\t\t\tstatuses={[\r\n\t\t\t\t{ value: \"Буду смотреть\", label: \"Буду смотреть\" },\r\n\t\t\t\t{ value: \"Смотрю\", label: \"Смотрю\" },\r\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\r\n\t\t\t\t{ value: \"Посмотрел\", label: \"Посмотрел\" },\r\n\t\t\t]}\r\n\t\t\tfields={[\r\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\r\n\t\t\t\t{ label: \"Название\", key: \"name\" },\r\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\r\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\r\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\r\n\t\t\t\t{ label: \"Время просмотра\", key: \"spent_time\" },\r\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\r\n\t\t\t]}\r\n\t\t\tname={\"Сериалы\"}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default ShowBlock;\r\n","export const COLORS = [\r\n\t\"rgb(43,206,72)\",\r\n\t\"rgb(240,163,255)\",\r\n\t\"rgb(0,117,220)\",\r\n\t\"rgb(153,63,0)\",\r\n\t\"rgb(76,0,92)\",\r\n\t\"rgb(225,225,225)\",\r\n\t\"rgb(0,92,49)\",\r\n\t\"rgb(255,204,153)\",\r\n\t\"rgb(128,128,128)\",\r\n\t\"rgb(148,255,181)\",\r\n\t\"rgb(143,124,0)\",\r\n\t\"rgb(157,204,0)\",\r\n\t\"rgb(194,0,136)\",\r\n\t\"rgb(0,51,128)\",\r\n\t\"rgb(255,164,5)\",\r\n\t\"rgb(255,168,187)\",\r\n\t\"rgb(66,102,0)\",\r\n\t\"rgb(255,0,16)\",\r\n\t\"rgb(94,241,242)\",\r\n\t\"rgb(0,153,143)\",\r\n\t\"rgb(224,255,102)\",\r\n\t\"rgb(116,10,255)\",\r\n\t\"rgb(153,0,0)\",\r\n\t\"rgb(255,255,128)\",\r\n\t\"rgb(255,255,0)\",\r\n\t\"rgb(255,80,)\",\r\n];\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"../Colors\";\r\n\r\nfunction ChartBlock(props) {\r\n\tconst [chartData, setChartData] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (props.chartData && props.chartData?.length > 0) {\r\n\t\t\tlet newData = props.chartData?.map((value) => ({ name: value.name, Процент: value.spent_time_percent })).sort((a, b) => b.Процент - a.Процент);\r\n\t\t\tnewData = newData.slice(0, 12);\r\n\t\t\tconsole.log(newData);\r\n\t\t\tsetChartData(newData);\r\n\t\t}\r\n\t}, [props.chartData, setChartData]);\r\n\r\n\treturn (\r\n\t\t<div hidden={props.hidden}>\r\n\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (\r\n\t\t\t\t<BarChart width={document.body.clientWidth - 50} height={chartData?.length * 40} data={chartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Bar>\r\n\t\t\t\t</BarChart>\r\n\t\t\t) : (\r\n\t\t\t\t<BarChart width={Math.min(chartData?.length * 100, document.body.clientWidth - 50)} height={300} data={chartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\r\n\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t{chartData?.map((entry, index) => (\r\n\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Bar>\r\n\t\t\t\t</BarChart>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ChartBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\r\n\r\nfunction YearsChart(props) {\r\n\tconst [chartData, setChartData] = useState([]);\r\n\tconst [maxCount, setMaxCount] = useState(0);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (props.chartData && props.chartData?.length > 0) {\r\n\t\t\tlet newMaxCount = 0;\r\n\t\t\tlet newData = props.chartData\r\n\t\t\t\t?.map((value, index, array) => {\r\n\t\t\t\t\tif (value.count > maxCount) {\r\n\t\t\t\t\t\tnewMaxCount = value.count;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn { name: value.year, Количество: value.count };\r\n\t\t\t\t})\r\n\t\t\t\t.sort((a, b) => a.name - b.name);\r\n\t\t\tsetMaxCount(newMaxCount);\r\n\t\t\tsetChartData(newData);\r\n\t\t}\r\n\t}, [props.chartData, setChartData]);\r\n\r\n\treturn (\r\n\t\t<div hidden={props.hidden}>\r\n\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? null : (\r\n\t\t\t\t<ResponsiveContainer width={\"100%\"} height={200}>\r\n\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\r\n\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tick={{ fill: \"rgb(238, 238, 238)\" }} allowDataOverflow={false} />\r\n\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, maxCount + 1]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\r\n\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t<Area type='monotone' dataKey='Количество' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t</AreaChart>\r\n\t\t\t\t</ResponsiveContainer>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default YearsChart;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { PieChart, Pie, Legend, Cell, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"../Colors\";\r\n\r\nfunction ChartBlock({ stats }) {\r\n\tconst [chartData, setChartData] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (stats?.games) {\r\n\t\t\tlet newData = [];\r\n\t\t\tif (stats?.games?.total_spent_time > 0) newData.push({ name: \"Часов в играх\", value: stats?.games?.total_spent_time });\r\n\t\t\tif (stats?.movies?.total_spent_time > 0) newData.push({ name: \"Часов в фильмах\", value: stats?.movies?.total_spent_time });\r\n\t\t\tif (stats?.episodes?.total_spent_time > 0) newData.push({ name: \"Часов в сериалах\", value: stats?.episodes?.total_spent_time });\r\n\t\t\tsetChartData(newData);\r\n\t\t}\r\n\t}, [stats]);\r\n\r\n\treturn (\r\n\t\t<div hidden={chartData.length < 1}>\r\n\t\t\t<PieChart width={350} height={260} hidden={chartData.length < 1}>\r\n\t\t\t\t<Pie dataKey='value' data={chartData} cx='50%' cy='50%' outerRadius={80} fill='#8884d8' labelLine={true} label minAngle={5}>\r\n\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Pie>\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\tcursor={false}\r\n\t\t\t\t/>\r\n\t\t\t\t<Legend verticalAlign='bottom' horizontalAlign='center' />\r\n\t\t\t</PieChart>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ChartBlock;\r\n","import React from \"react\";\r\nimport GenresChart from \"./GenresChart/GenresChart\";\r\nimport YearsChart from \"./YearsChart/YearsChart\";\r\nimport ChartBlock from \"./ChartBlock/ChartBlock\";\r\n\r\nfunction StatisticsBlock({ stats }) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<ChartBlock stats={stats} />\r\n\t\t\t<div hidden={!stats?.games}>\r\n\t\t\t\t<h3>Игры</h3>\r\n\t\t\t\t<p style={{ marginBottom: \"1rem\" }}>\r\n\t\t\t\t\tИгр сыграно: {stats?.games?.count}, часов наиграно: {stats?.games?.total_spent_time}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>Популярные жанры:</p>\r\n\t\t\t\t<GenresChart chartData={stats?.games?.genres} hidden={stats?.games?.genres?.length < 1} />\r\n\t\t\t\t<p>Пройденные игры по году выпуска:</p>\r\n\t\t\t\t<YearsChart chartData={stats?.games?.years} hidden={stats?.games?.years?.length < 1} />\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!stats?.movies}>\r\n\t\t\t\t<h3>Фильмы</h3>\r\n\t\t\t\t<p style={{ marginBottom: \"1rem\" }}>\r\n\t\t\t\t\tФильмов посмотрено: {stats?.movies?.count}, часов просмотра: {stats?.movies?.total_spent_time}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>Популярные жанры:</p>\r\n\t\t\t\t<GenresChart chartData={stats?.movies?.genres} hidden={stats?.movies?.genres?.length < 1} />\r\n\t\t\t\t<p>Просмотренные фильмы по году выпуска:</p>\r\n\t\t\t\t<YearsChart chartData={stats?.movies?.years} hidden={stats?.movies?.years?.length < 1} />\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!stats?.episodes}>\r\n\t\t\t\t<h3>Сериалы</h3>\r\n\t\t\t\t<p style={{ marginBottom: \"1rem\" }}>\r\n\t\t\t\t\tСерий сериалов посмотрено: {stats?.episodes?.count}, часов просмотра: {stats?.episodes?.total_spent_time}\r\n\t\t\t\t</p>\r\n\t\t\t\t<GenresChart chartData={stats?.episodes?.genres} hidden={stats?.episodes?.genres?.length < 1} />\r\n\t\t\t\t<p>Просмотренные сериалы по году выпуска:</p>\r\n\t\t\t\t<YearsChart chartData={stats?.episodes?.years} hidden={stats?.episodes?.years?.length < 1} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default StatisticsBlock;\r\n","import StatisticsBlock from \"./StatisticsBlock\";\r\n\r\nexport default StatisticsBlock;\r\n","import UserPage from \"./UserPage\";\r\n\r\nexport default UserPage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport { FaLock } from \"react-icons/fa\";\r\nimport { useQueryParam, StringParam, withDefault } from \"use-query-params\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport AuthStore from '../../store/AuthStore';\r\nimport UserStore from '../../store/UserStore';\r\nimport GameBlock from './views/ItemsBlock/GameBlock';\r\nimport FriendBlock from '../../shared/FriendBlock';\r\nimport MovieBlock from './views/ItemsBlock/MovieBlock';\r\nimport UserLogs from './views/UserLogs';\r\nimport CategoriesTab from '../../shared/CategoriesTab';\r\nimport ShowBlock from './views/ItemsBlock/ShowBlock';\r\nimport StatisticsBlock from './views/StatisticsBlock';\r\n\r\nimport \"./user-page.sass\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst UserPage = observer((props) => {\r\n\tconst { currentUser } = AuthStore;\r\n\tconst { user, userState, requestUser, setUserStatus, requestUserLogs, userLogs, userLogsState, requestUserFriendsLogs, userFriendsLogs, userFriendsLogsState, deleteUserLog, isCurrentUser } =\r\n\t\tUserStore;\r\n\r\n\tlet { userID } = useParams();\r\n\tconst [activeCategory, setActiveCategory] = useQueryParam(\"сategory\", withDefault(StringParam, \"Лента\"));\r\n\tconst [lastActivity, setLastActivity] = useState(\"\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trequestUser(userID);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userID, requestUser]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = \"Профиль \" + user.username;\r\n\t\tif (user.last_activity) {\r\n\t\t\tlet date = new Date(user.last_activity);\r\n\t\t\tlet options = { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", hour: \"numeric\", minute: \"numeric\" };\r\n\t\t\tsetLastActivity(date.toLocaleString(\"ru-RU\", options));\r\n\t\t} else setLastActivity(\"\");\r\n\t}, [user]);\r\n\r\n\treturn (\r\n\t\t<div className='user-page'>\r\n\t\t\t<LoadingOverlay active={userState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='user-page__body'>\r\n\t\t\t\t\t<div className='user-page__header'>\r\n\t\t\t\t\t\t<div className='user-page__user-card'>\r\n\t\t\t\t\t\t\t<div className='user-page__user-avatar' style={{ backgroundImage: `url(${\"https://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }} />\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h2 className='user-page__username'>{user.username}</h2>\r\n\t\t\t\t\t\t\t\t<div hidden={!user.is_available} className='user-page__last-activity'>\r\n\t\t\t\t\t\t\t\t\tПоследняя активность {lastActivity}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\thidden={isCurrentUser || !user.is_available}\r\n\t\t\t\t\t\t\tclassName='user-page__subscribe-button'\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetUserStatus({ is_following: user.is_followed ? false : true }, user.id);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{user.is_followed ? \"Отписаться\" : \"Подписаться\"}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<CategoriesTab categories={[\"Лента\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Статистика\", \"Друзья\"]} activeCategory={activeCategory} onChangeCategory={setActiveCategory}>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Лента\"}>\r\n\t\t\t\t\t\t\t<div hidden={!user.is_available}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userLogsState === \"pending\" && userState !== \"pending\"} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<UserLogs userID={userID} logs={userLogs} requestUserLogs={requestUserLogs} currentUser={isCurrentUser} onDeleteLog={deleteUserLog} logsType={\"user\"} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<h4 hidden={user.is_available || userState === \"pending\"}>\r\n\t\t\t\t\t\t\t\t<FaLock style={{ marginRight: \"1rem\" }} />\r\n\t\t\t\t\t\t\t\tПрофиль скрыт настройками приватности\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Игры\"}>\r\n\t\t\t\t\t\t\t<GameBlock games={user.games} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Фильмы\"}>\r\n\t\t\t\t\t\t\t<MovieBlock movies={user.movies} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Сериалы\"}>\r\n\t\t\t\t\t\t\t<ShowBlock shows={user.shows} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Статистика\"}>\r\n\t\t\t\t\t\t\t<StatisticsBlock stats={user.stats} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Друзья\"}>\r\n\t\t\t\t\t\t\t<FriendBlock users={user.followed_users ? user.followed_users : []} />\r\n\t\t\t\t\t\t\t<div hidden={currentUser.username !== user.username}>\r\n\t\t\t\t\t\t\t\t<h4 className='user-page__friends-header'>Активность друзей: </h4>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userFriendsLogsState === \"pending\" && userState !== \"pending\"} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<UserLogs userID={userID} logs={userFriendsLogs} requestUserLogs={requestUserFriendsLogs} currentUser={isCurrentUser} showUsername={true} logsType={\"userFriends\"} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</CategoriesTab>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default UserPage;\r\n","import { makeAutoObservable } from 'mobx';\r\n//import remotedev from 'mobx-remotedev';\r\nimport * as userRequests from '../services/userRequests';\r\nimport * as showRequests from '../services/showRequests';\r\n\r\ntype IPendingState = 'done' | 'pending' | string;\r\n\r\nexport interface ICalendar {\r\n\t[key: string]: any,\r\n}\r\n\r\nexport interface ISettings {\r\n\t[key: string]: any,\r\n}\r\n\r\nexport interface ICurrentUser {\r\n\tcalendar: ICalendar,\r\n\tsettings: ISettings,\r\n\tunwatched: any,\r\n\tcalendarState: IPendingState,\r\n\tsettingsState: IPendingState,\r\n\tunwatchedState: IPendingState,\r\n\tsaveSettingsState: IPendingState,\r\n}\r\n\r\nclass CurrentUser {\r\n\tcalendar = {};\r\n\tsettings = {};\r\n\tunwatched = [];\r\n\tcalendarState = 'done';\r\n\tsettingsState = 'done';\r\n\tunwatchedState = 'done';\r\n\tsaveSettingsState = 'done';\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestCalendar = async () => {\r\n\t\tthis.calendarState = 'pending';\r\n\t\tuserRequests.getUserCalendar().then(this.requestCalendarSuccess, this.requestCalendarFailure);\r\n\t};\r\n\trequestCalendarSuccess = (result: ICalendar) => {\r\n\t\tthis.calendar = result;\r\n\t\tthis.calendarState = 'done';\r\n\t};\r\n\trequestCalendarFailure = (error: string) => {\r\n\t\tthis.calendarState = 'error: ' + error;\r\n\t};\r\n\r\n\trequestSettings = async () => {\r\n\t\tthis.settingsState = 'pending';\r\n\t\tuserRequests.getUserSettings().then(this.requestSettingsSuccess, this.requestSettingsFailure);\r\n\t};\r\n\trequestSettingsSuccess = (result: ISettings) => {\r\n\t\tthis.settings = result;\r\n\t\tthis.settingsState = 'done';\r\n\t};\r\n\trequestSettingsFailure = (error: string) => {\r\n\t\tthis.settingsState = 'error: ' + error;\r\n\t};\r\n\r\n\trequestUnwatched = async () => {\r\n\t\tthis.unwatchedState = 'pending';\r\n\t\tshowRequests.getUnwatchedEpisodes().then(this.requestUnwatchedSuccess, this.requestUnwatchedFailure);\r\n\t};\r\n\trequestUnwatchedSuccess = (result: any) => {\r\n\t\tthis.unwatched = result;\r\n\t\tthis.unwatchedState = 'done';\r\n\t};\r\n\trequestUnwatchedFailure = (error: string) => {\r\n\t\tthis.unwatchedState = 'error: ' + error;\r\n\t};\r\n\r\n\tpatchSettings = async (settings: ISettings) => {\r\n\t\tthis.saveSettingsState = 'pending';\r\n\t\tuserRequests.patchUserSettings(settings).then(this.patchSettingsSuccess, this.patchSettingsFailure);\r\n\t};\r\n\tpatchSettingsReset = () => {\r\n\t\tthis.saveSettingsState = 'done';\r\n\t};\r\n\tpatchSettingsSuccess = (result: ISettings) => {\r\n\t\tthis.saveSettingsState = 'saved';\r\n\t\tthis.settings = result;\r\n\t\tsetTimeout(this.patchSettingsReset, 1000);\r\n\t};\r\n\tpatchSettingsFailure = (error: string) => {\r\n\t\tthis.saveSettingsState = 'error: ' + error;\r\n\t};\r\n}\r\n\r\nconst CurrentUserStore = new CurrentUser();\r\n//export default remotedev(CurrentUserStore, { name: 'CurrentUser' });\r\nexport default CurrentUserStore;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./day-info.sass\";\r\n\r\nfunction DayInfo({ day, date }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className='day-info'>\r\n\t\t\t<h2 className='day-info__date'>\r\n\t\t\t\t{date ? date.toLocaleDateString(\"ru-RU\", { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", weekday: \"long\" }) : \"\"}\r\n\t\t\t</h2>\r\n\t\t\t<div className='day-info__category' hidden={!(day?.games?.length > 0)}>\r\n\t\t\t\t<h3 className='day-info__category-header'>Игры</h3>\r\n\t\t\t\t{day.games?.map((game) => (\r\n\t\t\t\t\t<div key={game.rawg_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tclassName='day-info__link'\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{game.rawg_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='day-info__category' hidden={!(day?.movies?.length > 0)}>\r\n\t\t\t\t<h3 className='day-info__category-header'>Фильмы</h3>\r\n\t\t\t\t{day.movies?.map((movie) => (\r\n\t\t\t\t\t<div key={movie.tmdb_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tclassName='day-info__link'\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{movie.tmdb_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='day-info__category' hidden={!(day?.episodes?.length > 0)}>\r\n\t\t\t\t<h3 className='day-info__category-header'>Сериалы</h3>\r\n\t\t\t\t{day.episodes?.map((episode) => (\r\n\t\t\t\t\t<div key={episode.tmdb_id}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tclassName='day-info__link'\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tclassName='day-info__link'\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DayInfo;\r\n","import DayInfo from \"./DayInfo\";\r\n\r\nexport default DayInfo;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Timeline, TimelineEvent } from \"react-event-timeline\";\r\nimport { MdVideogameAsset, MdLocalMovies, MdLiveTv, MdApps } from \"react-icons/md\";\r\n\r\nfunction ReleasesList({ calendar }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst myStyle = {\r\n\t\tbackgroundColor: \"#191A1B\",\r\n\t\tcolor: \"#F1F1FB\",\r\n\t\tborder: \"none\",\r\n\t};\r\n\r\n\tfunction getContentForDay(day) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{day.games?.map((game) => (\r\n\t\t\t\t\t<div key={game.rawg_id}>\r\n\t\t\t\t\t\tИгра{\" \"}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{game.rawg_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t{day.movies?.map((movie) => (\r\n\t\t\t\t\t<div key={movie.tmdb_id}>\r\n\t\t\t\t\t\tФильм{\" \"}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{movie.tmdb_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t{day.episodes?.map((episode) => (\r\n\t\t\t\t\t<div key={episode.tmdb_id}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction getIconForDay(day) {\r\n\t\tif ((day.games?.length > 0) & !(day.movies?.length > 0) & !(day.episodes?.length > 0)) return <MdVideogameAsset />;\r\n\t\telse if ((day.movies?.length > 0) & !(day.games?.length > 0) & !(day.episodes?.length > 0)) return <MdLocalMovies />;\r\n\t\telse if ((day.episodes?.length > 0) & !(day.movies?.length > 0) & !(day.games?.length > 0)) return <MdLiveTv />;\r\n\t\telse return <MdApps />;\r\n\t}\r\n\r\n\tfunction dateDiff(date) {\r\n\t\tlet now = new Date();\r\n\t\tlet time = date.getTime();\r\n\t\tlet timeNow = now.getTime();\r\n\t\tlet diff = (time - timeNow) / (24 * 3600 * 1000);\r\n\t\tif (diff < 1)\r\n\t\t\tif (now.getUTCDay() === date.getUTCDay()) return 0;\r\n\t\t\telse return 1;\r\n\t\treturn parseInt(diff) + 1;\r\n\t}\r\n\r\n\tfunction intToDays(number) {\r\n\t\tif (11 <= number && number <= 14) return \"дней\";\r\n\t\telse if (number % 10 === 1) return \"день\";\r\n\t\telse if (2 <= number % 10 && number % 10 <= 4) return \"дня\";\r\n\t\telse return \"дней\";\r\n\t}\r\n\r\n\tfunction remainedDays(date) {\r\n\t\tlet days = dateDiff(date);\r\n\t\tif (days > 0) return `${days} ${intToDays(days)}`;\r\n\t\telse return \"сегодня\";\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Timeline style={myStyle} lineColor='#A6A6AB'>\r\n\t\t\t{calendar?.map((day) => {\r\n\t\t\t\tlet date = new Date(day[0]);\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<TimelineEvent\r\n\t\t\t\t\t\ttitle={`${remainedDays(date)}, ${date.toLocaleDateString(\"ru-RU\", {\r\n\t\t\t\t\t\t\tyear: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\",\r\n\t\t\t\t\t\t\tmonth: \"long\",\r\n\t\t\t\t\t\t\tday: \"numeric\",\r\n\t\t\t\t\t\t\tweekday: \"long\",\r\n\t\t\t\t\t\t})}`}\r\n\t\t\t\t\t\tkey={day[0]}\r\n\t\t\t\t\t\tclassName='timelineEvent'\r\n\t\t\t\t\t\ticon={getIconForDay(day[1])}\r\n\t\t\t\t\t\tcardHeaderStyle={myStyle}\r\n\t\t\t\t\t\ticonStyle={{ ...myStyle, fontSize: \"1.2rem\" }}\r\n\t\t\t\t\t\tbubbleStyle={myStyle}\r\n\t\t\t\t\t\tcontentStyle={{ ...myStyle, fontSize: \"1.1rem\", marginTop: \"0.2rem\", marginBottom: \"0.2rem\" }}\r\n\t\t\t\t\t\ttitleStyle={{ ...myStyle, fontSize: \"1.1rem\" }}\r\n\t\t\t\t\t\tsubtitleStyle={myStyle}>\r\n\t\t\t\t\t\t{getContentForDay(day[1])}\r\n\t\t\t\t\t</TimelineEvent>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</Timeline>\r\n\t);\r\n}\r\n\r\nexport default ReleasesList;\r\n","import ReleasesList from \"./ReleasesList\";\r\n\r\nexport default ReleasesList;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport { toast } from \"react-toastify\";\r\nimport Calendar from \"react-calendar\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport CurrentUserStore from '../../store/CurrentUserStore';\r\nimport AuthStore from '../../store/AuthStore';\r\nimport DayInfo from \"./views/DayInfo\";\r\nimport ReleasesList from \"./views/ReleasesList\";\r\n\r\nimport \"react-calendar/dist/Calendar.css\";\r\nimport styles from \"./calendar-page.module.sass\";\r\nimport \"./react-calendar.sass\";\r\n\r\nconst CalendarPage = observer(() => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { calendar, calendarState, requestCalendar } = CurrentUserStore;\r\n\r\n\tconst [value, onChange] = useState(new Date());\r\n\tconst [currentDay, setCurrentDay] = useState({});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (loggedIn) {\r\n\t\t\trequestCalendar();\r\n\t\t}\r\n\t}, [loggedIn, requestCalendar]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (calendarState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${calendarState}`);\r\n\t}, [calendarState]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (calendar) {\r\n\t\t\tif (formatDate(value) in calendar) setCurrentDay(calendar[formatDate(value)]);\r\n\t\t\telse setCurrentDay({});\r\n\t\t}\r\n\t}, [value, calendar]);\r\n\r\n\tfunction dateToTile({ date, view }) {\r\n\t\tif (view === \"month\" && formatDate(date) in calendar) {\r\n\t\t\tlet day = calendar[formatDate(date)];\r\n\t\t\treturn (\r\n\t\t\t\t<div className={styles.calendarDay}>\r\n\t\t\t\t\t<div className={styles.calendarDayBody}>\r\n\t\t\t\t\t\t<div className={classnames(styles.calendarDayGames, !day?.games?.length > 0 ? styles.calendarDayHidden : \"\")}>{day?.games?.length}</div>\r\n\t\t\t\t\t\t<div className={classnames(styles.calendarDayMovies, !day?.movies?.length > 0 ? styles.calendarDayHidden : \"\")}>{day?.movies?.length}</div>\r\n\t\t\t\t\t\t<div className={classnames(styles.calendarDayEpisodes, !day?.episodes?.length > 0 ? styles.calendarDayHidden : \"\")}>{day?.episodes?.length}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={styles.calendarPage}>\r\n\t\t\t<div>\r\n\t\t\t\t<h1 className={styles.pageHeader}>Календарь релизов</h1>\r\n\t\t\t\t<LoadingOverlay active={calendarState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? <DayInfo day={currentDay} date={value} /> : \"\"}\r\n\t\t\t\t\t<Calendar onChange={onChange} value={value} defaultView='month' minDetail='decade' locale='ru-RU' minDate={new Date()} tileContent={dateToTile} />\r\n\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? \"\" : <DayInfo day={currentDay} date={value} />}\r\n\t\t\t\t\t<ReleasesList calendar={Object.entries(calendar)} />\r\n\t\t\t\t</LoadingOverlay>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default CalendarPage;\r\n\r\nfunction pad(number) {\r\n\tif (number < 10) {\r\n\t\treturn \"0\" + number;\r\n\t}\r\n\treturn number;\r\n}\r\nfunction formatDate(date) {\r\n\treturn date.getFullYear() + \"-\" + pad(date.getMonth() + 1) + \"-\" + pad(date.getDate());\r\n}\r\n","import CalendarPage from \"./CalendarPage\";\r\nexport default CalendarPage;\r\n","import SettingsPage from \"./SettingsPage\";\r\n\r\nexport default SettingsPage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport AuthStore from '../../store/AuthStore';\r\nimport CurrentUserStore from '../../store/CurrentUserStore';\r\n\r\nimport \"./settings-page.sass\";\r\n\r\nconst SettingsPage = observer((props) => {\r\n\tconst { loggedIn, user } = AuthStore;\r\n\tconst { settings, requestSettings, patchSettings, settingsState, saveSettingsState } = CurrentUserStore;\r\n\r\n\tconst [gameNotifInput, setGameNotifInput] = useState(false);\r\n\tconst [movieNotifInput, setMovieNotifInput] = useState(false);\r\n\tconst [showNotifInput, setShowNotifInput] = useState(false);\r\n\tconst [privacySelect, setPrivacySelect] = useState(\"Все\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestSettings();\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (saveSettingsState === \"saved\") toast.success(\"Настройки сохранены!\");\r\n\t\tif (saveSettingsState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${saveSettingsState}`);\r\n\t}, [saveSettingsState]);\r\n\tuseEffect(() => {\r\n\t\tif (settingsState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${settingsState}`);\r\n\t}, [settingsState]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (settings.receive_games_releases) setGameNotifInput(settings.receive_games_releases);\r\n\t\t\tif (settings.receive_movies_releases) setMovieNotifInput(settings.receive_movies_releases);\r\n\t\t\tif (settings.receive_episodes_releases) setShowNotifInput(settings.receive_episodes_releases);\r\n\t\t\tif (settings.privacy) setPrivacySelect(settings.privacy);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[settings]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='settings-page'>\r\n\t\t\t<div className='settings-page__body'>\r\n\t\t\t\t<h1 className='settings-page__header'>Настройки</h1>\r\n\r\n\t\t\t\t<LoadingOverlay active={settingsState === \"pending\" || saveSettingsState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h3 className='settings-page__subheader'>Подписка на почтовые уведомления:</h3>\r\n\t\t\t\t\t\t<div className='settings-page__settings-row' onClick={() => setGameNotifInput(!gameNotifInput)}>\r\n\t\t\t\t\t\t\t<input type='checkbox' className='settings-page__settings-checkbox' checked={gameNotifInput} onChange={(event) => setGameNotifInput(event.target.checked)} />\r\n\t\t\t\t\t\t\t{\" релиз новых игр\"}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='settings-page__settings-row' onClick={() => setMovieNotifInput(!movieNotifInput)}>\r\n\t\t\t\t\t\t\t<input type='checkbox' className='settings-page__settings-checkbox' checked={movieNotifInput} onChange={(event) => setMovieNotifInput(event.target.checked)} />\r\n\t\t\t\t\t\t\t{\" релиз новых фильмов\"}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='settings-page__settings-row' onClick={() => setShowNotifInput(!showNotifInput)}>\r\n\t\t\t\t\t\t\t<input type='checkbox' className='settings-page__settings-checkbox' checked={showNotifInput} onChange={(event) => setShowNotifInput(event.target.checked)} />\r\n\t\t\t\t\t\t\t{\" релиз новых серий сериалов\"}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className='settings-page__settings-row'>\r\n\t\t\t\t\t\t\t<label htmlFor='privacySelect'>Кто может видеть мой профиль:</label>\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tid='privacySelect'\r\n\t\t\t\t\t\t\t\tname='privacySelect'\r\n\t\t\t\t\t\t\t\tclassName='settings-page__settings-select'\r\n\t\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\t\tsetPrivacySelect(event.target.value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tvalue={privacySelect}>\r\n\t\t\t\t\t\t\t\t<option value='Все'>Все</option>\r\n\t\t\t\t\t\t\t\t<option value='Никто'>Никто</option>\r\n\t\t\t\t\t\t\t\t<option value='Друзья'>Мои подписки</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='settings-page__settings-row' hidden={!(settings.privacy !== privacySelect && privacySelect === \"Никто\")}>\r\n\t\t\t\t\t\t\tВнимание! Полное закрытие профиля удалит вас из подписок других пользователей!\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='settings-page__save-button'\r\n\t\t\t\t\t\tdisabled={!loggedIn}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tpatchSettings({ receive_games_releases: gameNotifInput, receive_movies_releases: movieNotifInput, receive_episodes_releases: showNotifInput, privacy: privacySelect });\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t<p>Ваша почта {user.email}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SettingsPage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from '../../../../shared/Rating';\r\nimport \"./episode-row.sass\";\r\n\r\nfunction DetailedEpisodeRow({ episode, showID, seasonNumber, setShowEpisodeUserStatus, loggedIn }) {\r\n\tlet history = useHistory();\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleDateString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='episode-row'>\r\n\t\t\t<p className='episode-row__date'>{parseDate(episode.tmdb_release_date)}</p>\r\n\t\t\t<div hidden={!loggedIn} className='episode-row__rate'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\twithEye={true}\r\n\t\t\t\t\treadonly={!loggedIn}\r\n\t\t\t\t\tinitialRating={-1}\r\n\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\tsetShowEpisodeUserStatus(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tepisodes: [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttmdb_id: episode.tmdb_id,\r\n\t\t\t\t\t\t\t\t\t\tscore: score,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tshowID\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<a\r\n\t\t\t\tclassName='episode-row__name'\r\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={episode.tmdb_name}>\r\n\t\t\t\tСерия {episode.tmdb_episode_number} - {episode.tmdb_name}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailedEpisodeRow;\r\n","import EpisodeRow from \"./EpisodeRow\";\r\n\r\nexport default EpisodeRow;\r\n","import React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport classnames from \"classnames\";\r\n\r\nimport EpisodeRow from \"../EpisodeRow\";\r\n\r\nimport \"./show-block.sass\";\r\n\r\nfunction ShowBlock({ loggedIn, show, setShowEpisodeUserStatus, className }) {\r\n\tlet history = useHistory();\r\n\r\n\tuseEffect(\r\n\t\t() => {},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show]\r\n\t);\r\n\r\n\tfunction getUserSeasonOpen(showID, seasonNumber) {\r\n\t\tlet localData = localStorage.getItem(`${showID}_${seasonNumber}`);\r\n\t\treturn localData ? localData === \"true\" : true;\r\n\t}\r\n\r\n\tfunction setUserSeasonOpen(showID, seasonNumber, isOpen) {\r\n\t\tlocalStorage.setItem(`${showID}_${seasonNumber}`, isOpen);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classnames(\"show-block\", className)}>\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + \"/show/\" + show.tmdb_id}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + show.tmdb_id);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}>\r\n\t\t\t\t<h4 className='show-block__name'>{show?.tmdb_name}</h4>\r\n\t\t\t</a>\r\n\r\n\t\t\t{show?.seasons.map((season, counter) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<details\r\n\t\t\t\t\t\topen={getUserSeasonOpen(show.tmdb_id, season.tmdb_season_number)}\r\n\t\t\t\t\t\tclassName='show-block__season'\r\n\t\t\t\t\t\tkey={counter}\r\n\t\t\t\t\t\tonToggle={(e) => setUserSeasonOpen(show.tmdb_id, season.tmdb_season_number, e.target.open)}>\r\n\t\t\t\t\t\t<summary>{season.tmdb_name}</summary>\r\n\t\t\t\t\t\t<ul class='show-block__season-ul'>\r\n\t\t\t\t\t\t\t{season.episodes.map((episode, counter) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<li className='show-block__episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t<EpisodeRow episode={episode} showID={show.tmdb_id} seasonNumber={season.tmdb_season_number} setShowEpisodeUserStatus={setShowEpisodeUserStatus} loggedIn={loggedIn} />\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</details>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ShowBlock;\r\n","import ShowBlock from \"./ShowBlock\";\r\n\r\nexport default ShowBlock;\r\n","import UnwatchedPage from \"./UnwatchedPage\";\r\n\r\nexport default UnwatchedPage;\r\n","import React, { useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport AuthStore from '../../store/AuthStore';\r\nimport CurrentUserStore from '../../store/CurrentUserStore';\r\nimport ShowStore from '../../store/ShowStore';\r\nimport ShowBlock from './views/ShowBlock';\r\n\r\nimport \"./unwatched-page.sass\";\r\n\r\nconst UnwatchedPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { unwatched, requestUnwatched, unwatchedState } = CurrentUserStore;\r\n\tconst { setEpisodesStatus } = ShowStore;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (unwatchedState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${unwatchedState}`);\r\n\t}, [unwatchedState]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUnwatched();\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='unwatched-page'>\r\n\t\t\t<div className='unwatched-page__body'>\r\n\t\t\t\t<h1 className='unwatched-page__header'>Непросмотренные серии</h1>\r\n\t\t\t\t<LoadingOverlay active={unwatchedState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t{unwatched.map((show) => (\r\n\t\t\t\t\t\t<ShowBlock show={show} setShowEpisodeUserStatus={setEpisodesStatus} loggedIn={loggedIn} key={show.id} className='unwatched-page__show-block' />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</LoadingOverlay>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default UnwatchedPage;\r\n","export default __webpack_public_path__ + \"static/media/wrongPage.58faeb13.png\";","import React, { useEffect, useState } from \"react\";\r\nimport image from \"./wrongPage.png\";\r\nimport \"./not-found-page.sass\";\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction NotFoundPage() {\r\n\tconst [angle, setAngle] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\twindow.requestAnimationFrame(() => setAngle(angle + 1));\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[angle]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='not-found-page'>\r\n\t\t\t<div className='not-found-page__body'>\r\n\t\t\t\t<h1>Страница не найдена!</h1>\r\n\t\t\t\t<div style={{ transform: `rotate(${angle}deg)` }}>\r\n\t\t\t\t\t<img src={image} alt='Картинка' className='not-found-page__image' />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default NotFoundPage;\r\n","import NotFoundPage from \"./NotFoundPage\";\r\n\r\nexport default NotFoundPage;\r\n","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport HomePage from './routes/HomePage';\r\nimport GamePage from './routes/GamePage';\r\nimport MoviePage from './routes/MoviePage';\r\nimport ShowPage from './routes/ShowPage';\r\nimport SeasonPage from './routes/ShowSeasonPage';\r\nimport EpisodePage from './routes/ShowEpisodePage';\r\nimport SearchPage from './routes/SearchPage';\r\nimport ConfirmPage from './routes/ConfirmPage';\r\nimport ConfirmPasswordPage from './routes/ConfirmPasswordPage';\r\nimport UserPage from './routes/UserPage';\r\nimport CalendarPage from './routes/CalendarPage';\r\nimport SettingsPage from './routes/SettingsPage';\r\nimport UnwatchedPage from './routes/UnwatchedPage';\r\nimport NotFoundPage from './routes/NotFoundPage';\r\n\r\nclass Routes extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route exact path='/' component={HomePage} />\r\n\t\t\t\t<Route exact path='/game/:id' component={GamePage} />\r\n\t\t\t\t<Route exact path='/movie/:id' component={MoviePage} />\r\n\t\t\t\t<Route exact path='/show/:id' component={ShowPage} />\r\n\t\t\t\t<Route exact path='/show/:show_id/season/:number' component={SeasonPage} />\r\n\t\t\t\t<Route exact path='/show/:show_id/season/:season_number/episode/:episode_number' component={EpisodePage} />\r\n\t\t\t\t<Route exact path='/search/:query' component={SearchPage} />\r\n\t\t\t\t<Route exact path='/confirm/' component={ConfirmPage} />\r\n\t\t\t\t<Route exact path='/confirm_password/' component={ConfirmPasswordPage} />\r\n\t\t\t\t<Route exact path='/user/:userID' component={UserPage} />\r\n\t\t\t\t<Route exact path='/calendar' component={CalendarPage} />\r\n\t\t\t\t<Route exact path='/settings' component={SettingsPage} />\r\n\t\t\t\t<Route exact path='/unwatched' component={UnwatchedPage} />\r\n\t\t\t\t<Route component={NotFoundPage} />\r\n\t\t\t</Switch>\r\n\t\t);\r\n\t}\r\n}\r\n//\r\nexport default Routes;\r\n","import SearchInput from \"./SearchInput\";\r\n\r\nexport default SearchInput;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { MdVideogameAsset, MdLocalMovies, MdLiveTv } from \"react-icons/md\";\r\nimport classnames from \"classnames\";\r\n\r\nimport SearchStore from '../../../../../store/SearchStore';\r\n\r\nimport \"./search-input.sass\";\r\n\r\nconst SearchInput = observer(({ onSubmit, className }) => {\r\n\tconst [query, setQuery] = useState(\"\");\r\n\tlet history = useHistory();\r\n\tconst { searchHints, hints } = SearchStore;\r\n\r\n\treturn (\r\n\t\t<form\r\n\t\t\tonSubmit={(event) => {\r\n\t\t\t\tonSubmit(event);\r\n\t\t\t\tsetQuery(\"\");\r\n\t\t\t}}\r\n\t\t\tclassName={classnames(\"search-input\", className)}>\r\n\t\t\t<input\r\n\t\t\t\ttype='text'\r\n\t\t\t\tplaceholder='Поиск'\r\n\t\t\t\taria-label='Поиск'\r\n\t\t\t\tclassName='search-input__input'\r\n\t\t\t\tid='searchInput'\r\n\t\t\t\tvalue={query}\r\n\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\tsetQuery(event.target.value);\r\n\t\t\t\t\tsearchHints(event.target.value);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<div className={classnames(\"search-input__hints\", query === \"\" || !(hints.games.length > 0 || hints.movies.length > 0 || hints.shows.length > 0) ? \"search-input__hints_hidden\" : \"\")}>\r\n\t\t\t\t<div hidden={!hints.games.length > 0}>\r\n\t\t\t\t\t<MdVideogameAsset />\r\n\t\t\t\t\t{hints.games.map((hint, key) => (\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + hint.rawg_slug}\r\n\t\t\t\t\t\t\tclassName='search-input__hint'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + hint.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tsetQuery(\"\");\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{<img src={hint.rawg_backdrop_path} alt={\"\"} />}\r\n\t\t\t\t\t\t\t{hint.rawg_name}\r\n\t\t\t\t\t\t\t<div>{hint?.rawg_release_date?.substr(0, 4)}</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div hidden={!hints.movies.length > 0}>\r\n\t\t\t\t\t<MdLocalMovies />\r\n\t\t\t\t\t{hints.movies.map((hint, key) => (\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + hint.tmdb_id}\r\n\t\t\t\t\t\t\tclassName='search-input__hint'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + hint.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tsetQuery(\"\");\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{<img src={hint.tmdb_backdrop_path} alt={\"\"} />}\r\n\t\t\t\t\t\t\t{hint.tmdb_name}\r\n\t\t\t\t\t\t\t<div>{hint?.tmdb_release_date?.substr(0, 4)}</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div hidden={!hints.shows.length > 0}>\r\n\t\t\t\t\t<MdLiveTv />\r\n\t\t\t\t\t{hints.shows.map((hint, key) => (\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + hint.tmdb_id}\r\n\t\t\t\t\t\t\tclassName='search-input__hint'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + hint.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tsetQuery(\"\");\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{<img src={hint.tmdb_backdrop_path} alt={\"\"} />}\r\n\t\t\t\t\t\t\t{hint.tmdb_name}\r\n\t\t\t\t\t\t\t<div>{hint?.tmdb_release_date?.substr(0, 4)}</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n});\r\n\r\nexport default SearchInput;\r\n","import Navbar from \"./Navbar\";\r\n\r\nexport default Navbar;\r\n","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { observer } from 'mobx-react';\r\nimport classnames from 'classnames';\r\nimport { FaBars, FaAngleUp, FaAngleDown, FaUserCircle, FaSignInAlt } from 'react-icons/fa';\r\n\r\nimport PagesStore from '../../../store/PagesStore';\r\nimport AuthStore from '../../../store/AuthStore';\r\nimport useWindowDimensions from '../../../hooks/useWindowDimensions';\r\nimport SearchInput from './views/SearchInput';\r\n\r\nimport './navbar.sass';\r\n\r\nconst Navbar = observer((props) => {\r\n\tconst { toggleSidebar, openLoginForm } = PagesStore;\r\n\tconst { width } = useWindowDimensions();\r\n\tconst { loggedIn, user } = AuthStore;\r\n\r\n\tlet history = useHistory();\r\n\r\n\tconst [collapse, setCollapse] = useState(true);\r\n\r\n\tconst toggleCollapse = () => {\r\n\t\tsetCollapse(!collapse);\r\n\t};\r\n\r\n\tfunction toggleIfSmallScreen() {\r\n\t\tif (width <= 600) setCollapse(true);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='navbar'>\r\n\t\t\t<div className='navbar__left'>\r\n\t\t\t\t<FaBars onClick={toggleSidebar} className='navbar__sidebar-button' />\r\n\t\t\t\t<div onClick={() => history.push('/')} className='navbar__logo'>\r\n\t\t\t\t\tInterests\r\n\t\t\t\t</div>\r\n\t\t\t\t<div onClick={toggleCollapse} className='navbar__collapse-button'>\r\n\t\t\t\t\t{collapse ? <FaAngleDown /> : <FaAngleUp />}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className={classnames('navbar__center', collapse && width <= 600 ? 'navbar__center_collapsed' : '')}>\r\n\t\t\t\t<SearchInput\r\n\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\thistory.push('/search/' + document.getElementById('searchInput').value);\r\n\t\t\t\t\t\ttoggleIfSmallScreen();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='navbar__search-input'\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className={classnames('navbar__right', collapse && width <= 600 ? 'navbar__right_collapsed' : '')}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\thistory.push(`/user/${user?.id}`);\r\n\t\t\t\t\t\ttoggleIfSmallScreen();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='navbar__user-button'\r\n\t\t\t\t\thidden={!loggedIn}>\r\n\t\t\t\t\t<FaUserCircle /> {user?.username}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div onClick={openLoginForm} className='navbar__user-button' hidden={loggedIn}>\r\n\t\t\t\t\t<FaSignInAlt /> Войти\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default Navbar;\r\n","import React from \"react\";\r\nimport { FaVk, FaDiscord } from \"react-icons/fa\";\r\nimport classnames from \"classnames\";\r\nimport \"./footer.sass\";\r\n\r\nfunction Footer({ className }) {\r\n\treturn (\r\n\t\t<div className={classnames(\"footer\", className)}>\r\n\t\t\t<div className='footer__body'>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2 className='footer__name'>Interests</h2>\r\n\t\t\t\t\t<p className='footer__email'>info@interests.host</p>\r\n\t\t\t\t\t<p className='footer__date'>2020-2022</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='footer__social-block'>\r\n\t\t\t\t\t<p>Следите за нами в социальных сетях, чтобы оставаться в курсе последних событий!</p>\r\n\t\t\t\t\t<a href='https://vk.com/interests_fun' className='footer__social-link'>\r\n\t\t\t\t\t\t<FaVk />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a href='https://discord.gg/wXkUF5tKee' className='footer__social-link'>\r\n\t\t\t\t\t\t<FaDiscord />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='footer__social-block'>\r\n\t\t\t\t\t<p>Сайт был разработан при поддержке</p>\r\n\t\t\t\t\t<a href='https://rawg.io/' className='footer__rawg-logo'>\r\n\t\t\t\t\t\tRAWG\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a href='https://www.themoviedb.org/'>\r\n\t\t\t\t\t\t<div className='footer__tmdb-logo' />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Footer;\r\n","import Footer from \"./Footer\";\r\n\r\nexport default Footer;\r\n","import Sidebar from \"./Sidebar\";\r\n\r\nexport default Sidebar;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { observer } from 'mobx-react';\r\nimport { FaSignInAlt, FaUserCircle, FaUserFriends, FaCalendar, FaSignOutAlt, FaUserPlus, FaArrowRight, FaArrowLeft } from 'react-icons/fa';\r\nimport { MdLiveTv, MdSettings } from 'react-icons/md';\r\nimport {\r\n\tProSidebar,\r\n\tMenu,\r\n\tMenuItem,\r\n\t//SubMenu,\r\n\tSidebarFooter,\r\n} from 'react-pro-sidebar';\r\n\r\nimport AuthStore from '../../../store/AuthStore';\r\nimport PagesStore from '../../../store/PagesStore';\r\nimport useWindowDimensions from '../../../hooks/useWindowDimensions';\r\n\r\nimport './sidebar.sass';\r\n//import 'react-pro-sidebar/dist/css/styles.css';\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst Sidebar = observer((props) => {\r\n\tconst history = useHistory();\r\n\tconst { width } = useWindowDimensions();\r\n\r\n\tconst { loggedIn, user, resetAuthorization } = AuthStore;\r\n\tconst { sidebarIsCollapsed, sidebarIsToggled, collapseSidebar, toggleSidebar, openLoginForm, openRegistrateForm } = PagesStore;\r\n\r\n\tfunction toggleSidebarIfSmallScreen() {\r\n\t\tif (width < 1780 && width > 1440 && !sidebarIsCollapsed) collapseSidebar();\r\n\t\tif (width <= 1440) toggleSidebar();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ProSidebar className='sidebar' collapsed={sidebarIsCollapsed} hidden={!sidebarIsToggled}>\r\n\t\t\t<Menu iconShape='round' hidden={!loggedIn}>\r\n\t\t\t\t<MenuItem icon={<FaUserCircle />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/user/${user?.id}`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/user/${user?.id}`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tПрофиль\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<FaUserFriends />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/user/${user.id}?сategory=Друзья`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/user/${user?.id}?сategory=Друзья`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tДрузья\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\r\n\t\t\t\t<MenuItem icon={<MdLiveTv />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/unwatched`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/unwatched`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tНепросмотренное\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<FaCalendar />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/calendar`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/calendar`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tКалендарь\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<MdSettings />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/settings`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/settings`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tНастройки\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<FaSignOutAlt />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\tresetAuthorization();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tВыход\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t\t<Menu iconShape='round' hidden={loggedIn}>\r\n\t\t\t\t<MenuItem icon={<FaSignInAlt />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<FaUserPlus />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\topenRegistrateForm();\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t\t<SidebarFooter>\r\n\t\t\t\t<Menu iconShape='round'>\r\n\t\t\t\t\t<MenuItem icon={sidebarIsCollapsed ? <FaArrowRight /> : <FaArrowLeft />} onClick={collapseSidebar}>\r\n\t\t\t\t\t\tСвернуть\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t</Menu>\r\n\t\t\t</SidebarFooter>\r\n\t\t</ProSidebar>\r\n\t);\r\n});\r\n\r\nexport default Sidebar;\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\n\r\nimport \"./modal.sass\";\r\n\r\ninterface IModalProps {\r\n\tclassName?: string,\r\n\tchildren?: any,\r\n\tisOpen?: boolean,\r\n\ttoggle?: () => any,\r\n}\r\n\r\nfunction Modal({ className, children, isOpen, toggle }: IModalProps) {\r\n\treturn (\r\n\t\t<div className={classnames(\"modal2\", isOpen ? \"modal2_open\" : \"\")}>\r\n\t\t\t<div className={classnames(\"modal2__backdrop\")} onClick={toggle} />\r\n\t\t\t<div className={classnames(\"modal2__content\", className)}>{children}</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Modal;\r\n","import Modal from \"./Modal\";\r\n\r\nexport default Modal;\r\n","import LoginForm from './LoginForm';\r\n\r\nexport default LoginForm;\r\n","import React, {useEffect, useState} from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport AuthStore from '../../../store/AuthStore';\r\nimport PagesStore from '../../../store/PagesStore';\r\nimport Modal from '../../Modal';\r\n\r\nimport './login-form.sass';\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst LoginForm = observer(() => {\r\n\tconst { tryAuth, authState } = AuthStore;\r\n\tconst { LoginFormIsOpen, closeLoginForm, openResetPasswordForm, openRegistrateForm } = PagesStore;\r\n\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [login, setLogin] = useState('');\r\n\r\n\tuseEffect(() => {\r\n\t\tif (authState === \"done\"){\r\n\t\t\tcloseLoginForm();\r\n\t\t}\r\n\t}, [authState, closeLoginForm]);\r\n\r\n\tconst onSubmit = async (event: any) => {\r\n\t\tevent.preventDefault();\r\n\t\tawait tryAuth(login, password);\r\n\t};\r\n\r\n\tconst onPasswordRecovery = async () => {\r\n\t\tawait closeLoginForm();\r\n\t\tawait openResetPasswordForm();\r\n\t}\r\n\r\n\tconst onRegistration = async () => {\r\n\t\tawait closeLoginForm();\r\n\t\tawait openRegistrateForm();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal isOpen={LoginFormIsOpen} toggle={closeLoginForm} className='login-form'>\r\n\t\t\t<form onSubmit={onSubmit}>\r\n\t\t\t\t<h2 className='login-form__header'>\r\n\t\t\t\t\tВойти\r\n\t\t\t\t</h2>\r\n\t\t\t\t<p\r\n\t\t\t\t\tclassName='login-form__fail'\r\n\t\t\t\t\thidden={!authState.startsWith(\"error:\")}\r\n\t\t\t\t>\r\n\t\t\t\t\t{authState}\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<label\r\n\t\t\t\t\thtmlFor='loginInput'\r\n\t\t\t\t\tclassName='grey-text'\r\n\t\t\t\t>\r\n\t\t\t\t\tЛогин\r\n\t\t\t\t</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tid='loginInput'\r\n\t\t\t\t\tclassName='login-form__input'\r\n\t\t\t\t\tvalue={login}\r\n\t\t\t\t\tonChange={(e) => setLogin(e.target.value)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<label\r\n\t\t\t\t\thtmlFor='passwordInput'\r\n\t\t\t\t\tclassName='grey-text'\r\n\t\t\t\t>\r\n\t\t\t\t\tПароль\r\n\t\t\t\t</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tid='passwordInput'\r\n\t\t\t\t\tclassName='login-form__input'\r\n\t\t\t\t\tvalue={password}\r\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\tclassName='login-form__auth-button'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{authState !== \"pending\" ? \"Войти\" : \"Загрузка...\"}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<label\r\n\t\t\t\t\t\tclassName='login-form__link-label'\r\n\t\t\t\t\t\tonClick={onPasswordRecovery}>\r\n\t\t\t\t\t\tВосстановить пароль\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label\r\n\t\t\t\t\t\tclassName='login-form__link-label'\r\n\t\t\t\t\t\tonClick={onRegistration}>\r\n\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</Modal>\r\n\t);\r\n});\r\n\r\nexport default LoginForm;\r\n","import RegisterForm from \"./RegisterForm\";\r\n\r\nexport default RegisterForm;\r\n","import React, {useState} from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport classnames from 'classnames';\r\n\r\nimport AuthStore from '../../../store/AuthStore';\r\nimport PagesStore from '../../../store/PagesStore';\r\nimport Modal from '../../Modal';\r\n\r\nimport './register-form.sass';\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst RegisterForm = observer(() => {\r\n\tconst { register, registrateState, user } = AuthStore;\r\n\tconst { RegistrateFormIsOpen, closeRegistrateForm } = PagesStore;\r\n\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [login, setLogin] = useState('');\r\n\r\n\tconst onRegistration = () => register(login, email, password);\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tisOpen={RegistrateFormIsOpen}\r\n\t\t\ttoggle={closeRegistrateForm}\r\n\t\t\tclassName='register-form'\r\n\t\t>\r\n\t\t\t<form>\r\n\t\t\t\t<p\r\n\t\t\t\t\tclassName='register-form__fail'\r\n\t\t\t\t\thidden={!registrateState.startsWith('error:')}\r\n\t\t\t\t>\r\n\t\t\t\t\t{registrateState}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p\r\n\t\t\t\t\tclassName='register-form__success'\r\n\t\t\t\t\thidden={user?.email === ''}\r\n\t\t\t\t>\r\n\t\t\t\t\t{user.login}, добро пожаловать! Осталось только подтвердить вашу почту\r\n\t\t\t\t</p>\r\n\t\t\t\t<h2 className='register-form__header'>\r\n\t\t\t\t\tРегистрация\r\n\t\t\t\t</h2>\r\n\r\n\t\t\t\t<label htmlFor='loginInput'>\r\n\t\t\t\t\tНикнейм\r\n\t\t\t\t</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tclassName='register-form__input'\r\n\t\t\t\t\tvalue={login}\r\n\t\t\t\t\tonChange={(e) => setLogin(e.target.value)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<label htmlFor='emailInput'>\r\n\t\t\t\t\tЭлектронная почта\r\n\t\t\t\t</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='email'\r\n\t\t\t\t\tclassName='register-form__input'\r\n\t\t\t\t\tvalue={email}\r\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<label htmlFor='passwordInput'>\r\n\t\t\t\t\tПароль\r\n\t\t\t\t</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tclassName='register-form__input'\r\n\t\t\t\t\tvalue={password}\r\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<label htmlFor='passwordConfirmInput'>\r\n\t\t\t\t\tПодтверждение пароля\r\n\t\t\t\t</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t\t'register-form__input',\r\n\t\t\t\t\t\tpasswordConfirm\r\n\t\t\t\t\t\t\t? passwordConfirm === password\r\n\t\t\t\t\t\t\t\t? 'register-form__input_right'\r\n\t\t\t\t\t\t\t\t: 'register-form__input_wrong'\r\n\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t)}\r\n\t\t\t\t\tvalue={passwordConfirm}\r\n\t\t\t\t\tonChange={(e) => setPasswordConfirm(e.target.value)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\tclassName='register-form__auth-button'\r\n\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\tpassword !== passwordConfirm\r\n\t\t\t\t\t\t\t\t|| login.length < 1\r\n\t\t\t\t\t\t\t\t|| email.length < 1\r\n\t\t\t\t\t\t\t\t|| password.length < 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonClick={onRegistration}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{registrateState !== 'pending' ? 'Зарегистрироваться' : 'Загрузка...'}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</Modal>\r\n\t);\r\n});\r\n\r\nexport default RegisterForm;\r\n","import ResetPasswordForm from \"./ResetPasswordForm\";\r\n\r\nexport default ResetPasswordForm;\r\n","import React, {useState} from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport AuthStore from '../../../store/AuthStore';\r\nimport PagesStore from '../../../store/PagesStore';\r\nimport Modal from '../../Modal';\r\n\r\nimport './reset-password-form.sass';\r\n\r\n/**\r\n * КОмпонент формы сброса пароля\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst ResetPasswordForm = observer(() => {\r\n\tconst { resetPassword, resetPasswordState } = AuthStore;\r\n\tconst { ResetPasswordFormIsOpen, closeResetPasswordForm } = PagesStore;\r\n\r\n\tconst [email, setEmail] = useState('');\r\n\r\n\tconst onSubmit = async (event: any) => {\r\n\t\tevent.preventDefault();\r\n\t\tawait resetPassword(email);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal isOpen={ResetPasswordFormIsOpen} toggle={closeResetPasswordForm} className='reset-password-form'>\r\n\t\t\t<form onSubmit={onSubmit}>\r\n\t\t\t\t<h2 className='reset-password-form__header'>\r\n\t\t\t\t\tСбросить пароль\r\n\t\t\t\t</h2>\r\n\t\t\t\t<p\r\n\t\t\t\t\tclassName='reset-password-form__fail'\r\n\t\t\t\t\thidden={!resetPasswordState.startsWith('error:')}\r\n\t\t\t\t>\r\n\t\t\t\t\t{resetPasswordState}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p\r\n\t\t\t\t\tclassName='reset-password-form__success'\r\n\t\t\t\t\thidden={resetPasswordState !== 'done'}\r\n\t\t\t\t>\r\n\t\t\t\t\tНа вашу почту отправлено письмо\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<label htmlFor='emailInput'>\r\n\t\t\t\t\tПочта\r\n\t\t\t\t</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tclassName='reset-password-form__input'\r\n\t\t\t\t\tvalue={email}\r\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<button type='submit' className='reset-password-form__button'>\r\n\t\t\t\t\t{resetPasswordState !== 'pending' ? 'Сбросить' : 'Загрузка...'}\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t</Modal>\r\n\t);\r\n});\r\n\r\nexport default ResetPasswordForm;\r\n","import React, { useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\r\nimport { QueryParamProvider } from 'use-query-params';\r\nimport { observer } from 'mobx-react';\r\nimport { ToastContainer } from 'react-toastify';\r\n\r\nimport Routes from './Routes';\r\nimport AuthStore from './store/AuthStore';\r\nimport Navbar from './shared/app/Navbar';\r\nimport Footer from './shared/app/Footer';\r\nimport Sidebar from './shared/app/Sidebar';\r\nimport LoginForm from './shared/Modals/LoginForm';\r\nimport RegisterForm from './shared/Modals/RegisterForm';\r\nimport ResetPasswordForm from './shared/Modals/ResetPasswordForm';\r\n\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport './app.sass';\r\n\r\nconst App = observer(() => {\r\n\tconst { checkAuth } = AuthStore;\r\n\r\n\tuseEffect(() => {\r\n\t\tcheckAuth();\r\n\t}, [checkAuth]);\r\n\r\n\treturn (\r\n\t\t<div className='app'>\r\n\t\t\t<div className='app__body'>\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<QueryParamProvider ReactRouterRoute={Route}>\r\n\t\t\t\t\t\t<Navbar />\r\n\t\t\t\t\t\t<Sidebar />\r\n\t\t\t\t\t\t<Routes />\r\n\t\t\t\t\t\t<Footer className='app__footer' />\r\n\t\t\t\t\t</QueryParamProvider>\r\n\t\t\t\t</Router>\r\n\t\t\t</div>\r\n\t\t\t<ToastContainer position='top-center' hideProgressBar newestOnTop closeOnClick autoClose={3000} />\r\n\t\t\t<LoginForm />\r\n\t\t\t<RegisterForm />\r\n\t\t\t<ResetPasswordForm />\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === \"localhost\" ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === \"[::1]\" ||\r\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"load\", () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA\");\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then((registration) => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\"New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { \"Service-Worker\": \"script\" },\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get(\"content-type\");\r\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\"No internet connection found. App is running in offline mode.\");\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif (\"serviceWorker\" in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then((registration) => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\nserviceWorker.register();\r\n"],"sourceRoot":""}