{"version":3,"sources":["store/actionTypes.js","store/reducers.js","components/HomePage.js","settings.js","services/jwtAuth.js","services/requests.js","store/actions.js","components/Common/StatusButtonGroup.js","components/Common/FriendsActivityRow.js","components/Common/FriendsActivity.js","components/Game/TimeToBeat.js","components/Common/ScoreBlock.js","components/Game/GamePage.js","components/Movie/MoviePage.js","components/Show/DetailedEpisodeRow.js","components/Show/SeasonBlock.js","components/Show/SeasonsBlock.js","components/Show/ShowPage.js","components/Show/SeasonPage.js","components/Show/EpisodePage.js","components/Search/CardGame.js","components/Search/CardMovie.js","components/Search/CardShow.js","components/Common/CardUser.js","components/Common/CategoriesTab.js","components/Search/SearchPage.js","components/Modals/LoginForm.js","components/Modals/RegistrationForm.js","components/Modals/ResetPasswordForm.js","components/ConfirmPage.js","components/ConfirmPasswordPage.js","components/UserPage/Colors.js","components/UserPage/GameBlock.js","components/UserPage/FriendBlock.js","components/UserPage/MovieBlock.js","components/UserPage/LogRow.js","components/UserPage/UserLogBlock.js","components/UserPage/ShowBlock.js","components/UserPage/UserPage.js","components/Navbar.js","Routes.js","App.js","serviceWorker.js","index.js"],"names":["SET_USER","SET_AUTH","SET_LOGINFORM","SET_REGISTRATEFORM","SET_RESET_PASSWORD_FORM","SET_CONTENT_GAME","SET_CONTENT_GAME_USER_INFO","SET_CONTENT_MOVIE","SET_CONTENT_MOVIE_USER_INFO","SET_CONTENT_SHOW_SEASONS","SET_CONTENT_SHOW_SEASONS_USER_INFO","SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE","SET_CONTENT_SHOW","SET_CONTENT_SHOW_USER_INFO","SET_SEARCH_CONTENT_GAMES","SET_SEARCH_CONTENT_MOVIES","SET_SEARCH_CONTENT_SHOWS","SET_SEARCH_CONTENT_USERS","SET_USER_PAGE_CONTENT","SET_USER_PAGE_FOLLOWING","SET_USER_PAGE_LOGs","SET_USER_PAGE_FRIENDS_LOGS","SET_IS_LOADING_CONTENT_GAME","SET_IS_LOADING_CONTENT_GAME_USER_INFO","SET_IS_LOADING_CONTENT_MOVIE","SET_IS_LOADING_CONTENT_MOVIE_USER_INFO","SET_IS_LOADING_CONTENT_SHOW","SET_IS_LOADING_CONTENT_SHOW_USER_INFO","SET_IS_LOADING_CONTENT_SHOW_SEASONS","SET_IS_LOADING_SEARCH_GAMES","SET_IS_LOADING_SEARCH_MOVIES","SET_IS_LOADING_SEARCH_SHOWS","SET_IS_LOADING_SEARCH_USERS","SET_IS_LOADING_USER_PAGE_CONTENT","SET_IS_LOADING_USER_PAGE_LOGS","SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS","AUTH_ERROR","REGISTRATE_ERROR","GAME_REQUEST_ERROR","MOVIE_REQUEST_ERROR","SHOW_REQUEST_ERROR","USER_PAGE_ERROR","RESET_PASSWORD_ERROR","CONFIRM_PASSWORD_ERROR","initialState","Map","auth","loggedIn","user","username","email","id","content","game","main_info","rawg","name","background_image","background_image_additional","developers","hltb","game_image_url","user_info","status","review","score","spent_time","friends_info","movie","tmdb","title","poster_path","show","episode_run_time","showSeasons","searchContent","games","movies","shows","users","userPageContent","stats","userLogs","log","userFriendsLogs","openedPages","LoginForm","RegistrateForm","ResetPasswordForm","errors","registrate","gameRequest","movieRequest","userPage","resetPassword","confirmPassword","isLoading","contentGame","contentGameUserInfo","contentMovie","contentMovieUserInfo","contentShow","contentShowUserInfo","contentShowSeasons","userPageLogs","userPageFriendsLogs","searchGames","searchMovies","searchShows","searchUsers","getLoggedIn","state","get","getUser","getContentGame","getContentGameUserInfo","getContentMovie","getContentMovieUserInfo","getContentShow","getContentShowUserInfo","getContentShowSeasons","seasonNumber","getContentShowSeasonsUserInfo","getSearchContentGames","getSearchContentMovies","getSearchContentShows","getSearchContentUsers","getAuthError","getRegistrateError","getGameRequestError","getMovieRequestError","getShowRequestError","showRequest","getResetPasswordError","getConfirmPasswordError","getLoginForm","getRegistrateForm","getResetPasswordForm","getIsLoadingContentGame","getIsLoadingContentGameUserInfo","getIsLoadingContentMovie","getIsLoadingContentMovieUserInfo","getIsLoadingContentShow","getIsLoadingContentShowUserInfo","getIsLoadingContentShowSeasons","getIsLoadingSearchGames","getIsLoadingSearchMovies","getIsLoadingSearchShows","getIsLoadingSearchUsers","getIsLoadingUserPageContent","getIsLoadingUserPageLogs","getIsLoadingUserPageFriendsLogs","getUserPageContent","getUserPageLogs","getUserPageFriendsLogs","connect","selectors","className","style","marginTop","marginLeft","href","fontWeight","src","alt","BACKEND_URL","GET_TOKEN_URL","REFRESH_TOKEN_URL","REGISTRATE_URL","CONFIRM_URL","RESET_PASSWORD_URL","CONFIRM_PASSWORD_URL","GET_GAME_URL","SEARCH_GAMES_URL","GET_MOVIE_URL","SEARCH_MOVIES_URL","GET_SHOW_URL","SEARCH_SHOWS_URL","USER_INFO_URL","SEARCH_USERS_URL","axiosConfig","headers","getToken","password","a","axios","post","urls","res","userData","jwt_decode","data","access","user_id","token","refreshToken","refresh","console","updateToken","registration","response","confirmation","uid64","patch","put","getGame","AuthStr","Authorization","getMovie","getShow","getShowSeason","showID","getShowEpisode","episodeNumber","setGameStatus","gameSlug","setMovieStatus","setShowStatus","setShowSeasonStatus","setShowEpisodesStatus","episodesList","query","page","gamesCount","params","page_size","getUserInfo","userID","setUserStatus","is_following","getUserLog","resultsOnPage","getUserFriendsLog","getGameUserInfo","slug","getMovieUserInfo","getShowUserInfo","getShowSeasonUserInfo","seasonID","getShowEpisodeUserInfo","episodeID","checkAuthorization","dispatch","localStorage","getItem","Date","now","type","actionTypes","setItem","resetAuthorization","removeItem","requestShowSeasonsUserInfo","Requests","then","result","newResult","user_watched_show","episodes","episodes_user_info","toast","error","needUpdate","seasons","episode","indexOf","season_number","push","season","openLoginForm","isOpen","setLoading","setError","isError","defaults","common","StatusButtonGroup","statuses","activeColor","onChangeStatus","userStatus","map","backgroundColor","onClick","intToHours","number","FriendsActivityRow","info","history","useHistory","window","location","origin","e","preventDefault","stop","emptySymbol","far","icon","size","fullSymbol","n","initialRating","readonly","hidden","FriendsActivity","friendInfo","TimeToBeat","hltbInfo","display","gameplay_main","gameplay_main_unit","gameplay_main_extra","gameplay_main_extra_unit","gameplay_completionist","gameplay_completionist_unit","ScoreBlock","text","getColor","requestError","gameIsLoading","gameUserInfo","gameUserInfoIsLoading","requestGame","actions","requestGameUserInfo","getState","useParams","useState","genres","setGenres","setReview","spentTime","setSpentTime","userRate","setUserRate","setDevelopers","date","setDate","gameplay_comletionist","setHtlbInfo","setClear","setClearUI","useEffect","newGenres","i","length","playtime","newDevelopers","released","mas","split","newDate","document","backgroundImage","active","spinner","fontSize","onChange","marginBottom","metacritic","paddingTop","dangerouslySetInnerHTML","__html","description","label","value","event","target","outline","disabled","getElementById","movieIsLoading","movieUserInfo","movieUserInfoIsLoading","requestMovie","requestMovieUserInfo","companies","setCompanies","cast","setCast","director","setDirector","production_companies","newCompanies","newCast","crew","newDirector","job","backdrop_path","original_title","release_date","runtime","tagline","vote_average","overview","DetailedEpisodeRow","setShowEpisodeUserStatus","userInfo","checkAll","userWatchedShow","isChecked","setIsChecked","addEpisode","episode_number","checked","air_date","toLocaleDateString","start","concat","ownProps","showSeason","showSeasonIsLoading","showUserInfo","requestShowSeason","requestShowSeasonUserInfo","setShowSeasonUserStatus","getEpisodeByNumber","open","counter","reverse","SeasonsBlock","needHeader","setNeedHeader","changedEpisodes","setChangedEpisodes","onChangeEpisodes","newChangedEpisodes","index","findIndex","splice","updateEpisodes","showIsLoading","showUserInfoIsLoading","requestShow","setShowUserStatus","requestShowUserInfo","showStatus","firstDate","setFirstDate","lastDate","setLastDate","first_air_date","last_air_date","original_name","number_of_seasons","number_of_episodes","show_id","chartData","setChartData","show_name","newData","Оценка","show_original_name","body","clientHeight","clientWidth","width","height","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","dataKey","interval","tick","fill","tickLine","domain","tickCount","contentStyle","color","stroke","fillOpacity","layout","showEpisode","showEpisodeIsLoading","requestShowEpisode","setEpisodeUserStatus","requestShowEpisodeUserInfo","still_path","CardGame","CardMovie","CardShow","CardUser","CategoriesTab","categories","onChangeCategory","activeCategory","setActiveCategory","category","gamesIsLoading","moviesIsLoading","showsIsLoading","usersIsLoading","searchGame","searchMovie","results","searchShow","queryText","setQueryText","gamesCards","setGamesCards","moviesCards","setMoviesCards","showsCards","setShowsCards","usersCards","setUsersCards","gamesPage","setGamesPage","moviesPage","setMoviesPage","showsPage","setShowsPage","md","onSubmit","placeholder","aria-label","authError","closeForm","logIn","login","openResetPasswordForm","setPassword","setLogin","toggle","centered","htmlFor","registrateArror","passwordConfirm","setPasswordConfirm","setEmail","outlineColor","resetPasswordError","confirmEmailRequest","success","search","URLSearchParams","confirmPasswordError","COLORS","GameBlock","gameChartData","setGameChartData","gameColumns","field","sort","columns","rows","gameTableData","setGameTableData","rawg_slug","rawg_name","name2","parseFloat","genre","spent_time_percent","Процент","b","count","total_spent_time","striped","bordered","small","barReverse","noBottomColumns","noRecordsFoundLabel","paginationLabel","entriesLabel","searchLabel","responsive","Math","min","angle","tickMargin","itemStyle","borderRadius","cursor","entry","FriendBlock","MovieBlock","movieChartData","setMovieChartData","movieColumns","movieTableData","setMovieTableData","tmdb_id","tmdb_name","LogRow","showUsername","created","toLocaleTimeString","action","actionResult","translateActionType","action_type","action_result","actionType","translateType","parent_name","nameToLink","target_id","actionResultToStr","UserLogBlock","logs","onChangePage","logsByDay","setLogsByDay","currentPage","setCurrentPage","newLogs","getDay","groupLogsByDay","dayLog","has_next_page","ShowBlock","showChartData","setShowChartData","showColumns","showTableData","setShowTableData","userIsLoading","userLogsIsLoading","userFriendsLogsIsLoading","currentUserInfo","getUserLogs","getUserFriendsLogs","is_followed","cx","cy","outerRadius","labelLine","minAngle","verticalAlign","horizontalAlign","pageNumber","followed_users","onLoginClick","onLogoutClick","onRegistrationClick","dark","expand","fixed","to","nav","caret","Routes","exact","path","component","HomePage","GamePage","MoviePage","ShowPage","SeasonPage","EpisodePage","SearchPage","ConfirmPage","ConfirmPasswordPage","UserPage","render","position","hideProgressBar","newestOnTop","closeOnClick","React","Component","onLoad","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","types","setIn","applyMiddleware","thunk","ReactDOM","URL","process","addEventListener","fetch","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.ad6c76af.chunk.js","sourcesContent":["export const SET_USER = \"SET_USER\";\r\nexport const SET_AUTH = \"SET_AUTH\";\r\n\r\nexport const SET_LOGINFORM = \"SET_LOGINFORM\";\r\nexport const SET_REGISTRATEFORM = \"SET_REGISTRATEFORM\";\r\nexport const SET_RESET_PASSWORD_FORM = \"SET_RESET_PASSWORD_FORM\";\r\n\r\nexport const SET_CONTENT_GAME = \"SET_CONTENT_GAME\";\r\nexport const SET_CONTENT_GAME_USER_INFO = \"SET_CONTENT_GAME_USER_INFO\";\r\n\r\nexport const SET_CONTENT_MOVIE = \"SET_CONTENT_MOVIE\";\r\nexport const SET_CONTENT_MOVIE_USER_INFO = \"SET_CONTENT_MOVIE_USER_INFO\";\r\n\r\nexport const SET_CONTENT_SHOW_SEASONS = \"SET_CONTENT_SHOW_SEASONS\";\r\nexport const SET_CONTENT_SHOW_SEASONS_USER_INFO = \"SET_CONTENT_SHOW_SEASONS_USER_INFO\";\r\nexport const SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE = \"SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE\";\r\n\r\nexport const SET_CONTENT_SHOW = \"SET_CONTENT_SHOW\";\r\nexport const SET_CONTENT_SHOW_USER_INFO = \"SET_CONTENT_SHOW_USER_INFO\";\r\n\r\nexport const SET_SEARCH_CONTENT_GAMES = \"SET_SEARCH_CONTENT_GAMES\";\r\nexport const SET_SEARCH_CONTENT_MOVIES = \"SET_SEARCH_CONTENT_MOVIES\";\r\nexport const SET_SEARCH_CONTENT_SHOWS = \"SET_SEARCH_CONTENT_SHOWS\";\r\nexport const SET_SEARCH_CONTENT_USERS = \"SET_SEARCH_CONTENT_USERS\";\r\n\r\nexport const SET_USER_PAGE_CONTENT = \"SET_USER_PAGE_CONTENT\";\r\nexport const SET_USER_PAGE_FOLLOWING = \"SET_USER_PAGE_FOLLOWING\";\r\nexport const SET_USER_PAGE_LOGs = \"SET_USER_PAGE_LOGs\";\r\nexport const SET_USER_PAGE_FRIENDS_LOGS = \"SET_USER_PAGE_FRIENDS_LOGS\";\r\n\r\nexport const SET_IS_LOADING_CONTENT_GAME = \"SET_IS_LOADING_CONTENT_GAME\";\r\nexport const SET_IS_LOADING_CONTENT_GAME_USER_INFO = \"SET_IS_LOADING_CONTENT_GAME_USER_INFO\";\r\nexport const SET_IS_LOADING_CONTENT_MOVIE = \"SET_IS_LOADING_CONTENT_MOVIE\";\r\nexport const SET_IS_LOADING_CONTENT_MOVIE_USER_INFO = \"SET_IS_LOADING_CONTENT_MOVIE_USER_INFO\";\r\nexport const SET_IS_LOADING_CONTENT_SHOW = \"SET_IS_LOADING_CONTENT_SHOW\";\r\nexport const SET_IS_LOADING_CONTENT_SHOW_USER_INFO = \"SET_IS_LOADING_CONTENT_SHOW_USER_INFO\";\r\nexport const SET_IS_LOADING_CONTENT_SHOW_SEASONS = \"SET_IS_LOADING_CONTENT_SHOW_SEASONS\";\r\nexport const SET_IS_LOADING_SEARCH_GAMES = \"SET_IS_LOADING_SEARCH_GAMES\";\r\nexport const SET_IS_LOADING_SEARCH_MOVIES = \"SET_IS_LOADING_SEARCH_MOVIES\";\r\nexport const SET_IS_LOADING_SEARCH_SHOWS = \"SET_IS_LOADING_SEARCH_SHOWS\";\r\nexport const SET_IS_LOADING_SEARCH_USERS = \"SET_IS_LOADING_SEARCH_USERS\";\r\nexport const SET_IS_LOADING_USER_PAGE_CONTENT = \"SET_IS_LOADING_USER_PAGE_CONTENT\";\r\nexport const SET_IS_LOADING_USER_PAGE_LOGS = \"SET_IS_LOADING_USER_PAGE_LOGS\";\r\nexport const SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS = \"SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS\";\r\n\r\nexport const AUTH_ERROR = \"AUTH_ERROR\";\r\nexport const REGISTRATE_ERROR = \"REGISTRATE_ERROR\";\r\nexport const GAME_REQUEST_ERROR = \"GAME_REQUEST_ERROR\";\r\nexport const MOVIE_REQUEST_ERROR = \"MOVIE_REQUEST_ERROR\";\r\nexport const SHOW_REQUEST_ERROR = \"SHOW_REQUEST_ERROR\";\r\nexport const USER_PAGE_ERROR = \"USER_PAGE_ERROR\";\r\nexport const RESET_PASSWORD_ERROR = \"RESET_PASSWORD_ERROR\";\r\nexport const CONFIRM_PASSWORD_ERROR = \"CONFIRM_PASSWORD_ERROR\";\r\n","import * as types from \"./actionTypes\";\r\nimport { Map } from \"immutable\";\r\n\r\n// Создаем reducer с начальным состоянием.\r\nconst initialState = Map({\r\n\tauth: { loggedIn: false },\r\n\tuser: { username: \"\", email: \"\", id: null },\r\n\tcontent: {\r\n\t\tgame: {\r\n\t\t\tmain_info: { rawg: { name: \"\", background_image: \"\", background_image_additional: \"\", developers: [{}] }, hltb: { game_image_url: \"\" } },\r\n\t\t\tuser_info: { status: null, review: \"\", score: 0, spent_time: 0, friends_info: [] },\r\n\t\t},\r\n\t\tmovie: { main_info: { tmdb: { title: \"\", poster_path: \"\", developers: [{}] } }, user_info: { status: null, review: \"\", score: 0, friends_info: [] } },\r\n\t\tshow: { main_info: { tmdb: { title: \"\", poster_path: \"\", developers: [{}], episode_run_time: [] } }, user_info: { status: null, review: \"\", score: 0, friends_info: [] } },\r\n\t\tshowSeasons: {},\r\n\t},\r\n\tsearchContent: { games: [], movies: [], shows: [], users: [] },\r\n\tuserPageContent: {\r\n\t\tuser: {\r\n\t\t\tstats: {},\r\n\t\t},\r\n\t\tuserLogs: { log: [] },\r\n\t\tuserFriendsLogs: { log: [] },\r\n\t},\r\n\topenedPages: { LoginForm: false, RegistrateForm: false, ResetPasswordForm: false },\r\n\terrors: { auth: false, registrate: false, gameRequest: false, movieRequest: false, userPage: false, resetPassword: false, confirmPassword: false },\r\n\tisLoading: {\r\n\t\tcontentGame: false,\r\n\t\tcontentGameUserInfo: false,\r\n\t\tcontentMovie: false,\r\n\t\tcontentMovieUserInfo: false,\r\n\t\tcontentShow: false,\r\n\t\tcontentShowUserInfo: false,\r\n\t\tcontentShowSeasons: {},\r\n\t\tuserPageContent: false,\r\n\t\tuserPageLogs: false,\r\n\t\tuserPageFriendsLogs: false,\r\n\t\tsearchGames: false,\r\n\t\tsearchMovies: false,\r\n\t\tsearchShows: false,\r\n\t\tsearchUsers: false,\r\n\t},\r\n});\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\t//Редьюсеры пользовательской информации\r\n\t\tcase types.SET_USER:\r\n\t\t\treturn state.setIn([\"user\"], action.user);\r\n\t\tcase types.SET_AUTH:\r\n\t\t\treturn state.setIn([\"auth\"], action.auth);\r\n\r\n\t\t//Редьюсеры информации об игре\r\n\t\tcase types.SET_CONTENT_GAME:\r\n\t\t\treturn state.setIn([\"content\", \"game\", \"main_info\"], action.game);\r\n\t\tcase types.SET_CONTENT_GAME_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"game\", \"user_info\"], action.user_info);\r\n\r\n\t\t//Редьюсеры информации о фильме\r\n\t\tcase types.SET_CONTENT_MOVIE:\r\n\t\t\treturn state.setIn([\"content\", \"movie\", \"main_info\"], action.movie);\r\n\t\tcase types.SET_CONTENT_MOVIE_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"movie\", \"user_info\"], action.user_info);\r\n\r\n\t\t//Редьюсеры информации о сериале\r\n\t\tcase types.SET_CONTENT_SHOW:\r\n\t\t\treturn state.setIn([\"content\", \"show\", \"main_info\"], action.show);\r\n\t\tcase types.SET_CONTENT_SHOW_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"show\", \"user_info\"], action.user_info);\r\n\r\n\t\t//Редьюсеры информации о сезонах сериала\r\n\t\tcase types.SET_CONTENT_SHOW_SEASONS:\r\n\t\t\treturn state.setIn([\"content\", \"showSeasons\", action.seasonNumber, \"main_info\"], action.info);\r\n\t\tcase types.SET_CONTENT_SHOW_SEASONS_USER_INFO:\r\n\t\t\treturn state.setIn([\"content\", \"showSeasons\", action.seasonNumber, \"user_info\"], action.user_info);\r\n\t\tcase types.SET_CONTENT_SHOW_SEASONS_EPISODE_SCORE:\r\n\t\t\treturn state.setIn([\"content\", \"showSeasons\", action.seasonNumber, \"user_info\", \"episodes\", action.episodeNumber, \"score\"], action.score);\r\n\r\n\t\t//Редьюсеры результатов поиска\r\n\t\tcase types.SET_SEARCH_CONTENT_GAMES:\r\n\t\t\treturn state.setIn([\"searchContent\", \"games\"], action.games);\r\n\t\tcase types.SET_SEARCH_CONTENT_MOVIES:\r\n\t\t\treturn state.setIn([\"searchContent\", \"movies\"], action.movies);\r\n\t\tcase types.SET_SEARCH_CONTENT_SHOWS:\r\n\t\t\treturn state.setIn([\"searchContent\", \"shows\"], action.shows);\r\n\t\tcase types.SET_SEARCH_CONTENT_USERS:\r\n\t\t\treturn state.setIn([\"searchContent\", \"users\"], action.users);\r\n\r\n\t\t//Редьюсеры страницы профиля\r\n\t\tcase types.SET_USER_PAGE_CONTENT:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"user\"], action.content);\r\n\t\tcase types.SET_USER_PAGE_FOLLOWING:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"user\", \"is_followed\"], action.is_following);\r\n\t\tcase types.SET_USER_PAGE_LOGs:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"userLogs\"], action.logs);\r\n\t\tcase types.SET_USER_PAGE_FRIENDS_LOGS:\r\n\t\t\treturn state.setIn([\"userPageContent\", \"userFriendsLogs\"], action.logs);\r\n\r\n\t\t//Редьюсеры состояния всплывающих окон\r\n\t\tcase types.SET_LOGINFORM:\r\n\t\t\treturn state.setIn([\"openedPages\", \"LoginForm\"], action.isOpen);\r\n\t\tcase types.SET_REGISTRATEFORM:\r\n\t\t\treturn state.setIn([\"openedPages\", \"RegistrateForm\"], action.isOpen);\r\n\t\tcase types.SET_RESET_PASSWORD_FORM:\r\n\t\t\treturn state.setIn([\"openedPages\", \"ResetPasswordForm\"], action.isOpen);\r\n\r\n\t\t//Редьюсеры ошибок\r\n\t\tcase types.AUTH_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"auth\"], action.error);\r\n\t\tcase types.REGISTRATE_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"registrate\"], action.error);\r\n\t\tcase types.GAME_REQUEST_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"gameRequest\"], action.error);\r\n\t\tcase types.MOVIE_REQUEST_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"movieRequest\"], action.error);\r\n\t\tcase types.SHOW_REQUEST_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"showRequest\"], action.error);\r\n\t\tcase types.USER_PAGE_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"userPage\"], action.error);\r\n\t\tcase types.RESET_PASSWORD_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"resetPassword\"], action.error);\r\n\t\tcase types.CONFIRM_PASSWORD_ERROR:\r\n\t\t\treturn state.setIn([\"errors\", \"confirmPassword\"], action.error);\r\n\r\n\t\t//Редьюсеры состояния загрузки\r\n\t\tcase types.SET_IS_LOADING_CONTENT_GAME:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentGame\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_GAME_USER_INFO:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentGameUserInfo\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_MOVIE:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentMovie\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_MOVIE_USER_INFO:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentMovieUserInfo\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_SHOW:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentShow\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_SHOW_USER_INFO:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentShowUserInfo\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_CONTENT_SHOW_SEASONS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"contentShowSeasons\", action.seasonNumber], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_GAMES:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchGames\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_MOVIES:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchMovies\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_SHOWS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchShows\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_PAGE_CONTENT:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userPageContent\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_PAGE_LOGS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userPageLogs\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"userPageFriendsLogs\"], action.isLoading);\r\n\t\tcase types.SET_IS_LOADING_SEARCH_USERS:\r\n\t\t\treturn state.setIn([\"isLoading\", \"searchUsers\"], action.isLoading);\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n//Селекторы пользовательской информации\r\nexport function getLoggedIn(state) {\r\n\treturn state.get(\"auth\").loggedIn;\r\n}\r\nexport function getAuth(state) {\r\n\treturn state.get(\"auth\");\r\n}\r\nexport function getUser(state) {\r\n\treturn state.get(\"user\");\r\n}\r\n\r\n//Селекторы информации о контенте\r\nexport function getContentGame(state) {\r\n\treturn state.get(\"content\").game.main_info;\r\n}\r\nexport function getContentGameUserInfo(state) {\r\n\treturn state.get(\"content\").game.user_info;\r\n}\r\nexport function getContentMovie(state) {\r\n\treturn state.get(\"content\").movie.main_info;\r\n}\r\nexport function getContentMovieUserInfo(state) {\r\n\treturn state.get(\"content\").movie.user_info;\r\n}\r\nexport function getContentShow(state) {\r\n\treturn state.get(\"content\").show.main_info;\r\n}\r\nexport function getContentShowUserInfo(state) {\r\n\treturn state.get(\"content\").show.user_info;\r\n}\r\nexport function getContentShowSeasons(state, seasonNumber) {\r\n\treturn state.get(\"content\").showSeasons[seasonNumber]?.main_info;\r\n}\r\nexport function getContentShowSeasonsUserInfo(state, seasonNumber) {\r\n\treturn state.get(\"content\").showSeasons[seasonNumber]?.user_info;\r\n}\r\n\r\n//Селекторы поисковых результатов\r\nexport function getSearchContentGames(state) {\r\n\treturn state.get(\"searchContent\").games;\r\n}\r\nexport function getSearchContentMovies(state) {\r\n\treturn state.get(\"searchContent\").movies;\r\n}\r\nexport function getSearchContentShows(state) {\r\n\treturn state.get(\"searchContent\").shows;\r\n}\r\nexport function getSearchContentUsers(state) {\r\n\treturn state.get(\"searchContent\").users;\r\n}\r\n\r\n//Селекторы ошибок\r\nexport function getAuthError(state) {\r\n\treturn state.get(\"errors\").auth;\r\n}\r\nexport function getRegistrateError(state) {\r\n\treturn state.get(\"errors\").registrate;\r\n}\r\nexport function getGameRequestError(state) {\r\n\treturn state.get(\"errors\").gameRequest;\r\n}\r\nexport function getMovieRequestError(state) {\r\n\treturn state.get(\"errors\").movieRequest;\r\n}\r\nexport function getShowRequestError(state) {\r\n\treturn state.get(\"errors\").showRequest;\r\n}\r\nexport function getUserPageError(state) {\r\n\treturn state.get(\"errors\").userPage;\r\n}\r\nexport function getResetPasswordError(state) {\r\n\treturn state.get(\"errors\").resetPassword;\r\n}\r\nexport function getConfirmPasswordError(state) {\r\n\treturn state.get(\"errors\").confirmPassword;\r\n}\r\n\r\n//Селекторы состояния высплывающих окон\r\nexport function getLoginForm(state) {\r\n\treturn state.get(\"openedPages\").LoginForm;\r\n}\r\nexport function getRegistrateForm(state) {\r\n\treturn state.get(\"openedPages\").RegistrateForm;\r\n}\r\nexport function getResetPasswordForm(state) {\r\n\treturn state.get(\"openedPages\").ResetPasswordForm;\r\n}\r\n\r\n//Селекторы состояния загрузки\r\nexport function getIsLoadingContentGame(state) {\r\n\treturn state.get(\"isLoading\").contentGame;\r\n}\r\nexport function getIsLoadingContentGameUserInfo(state) {\r\n\treturn state.get(\"isLoading\").contentGameUserInfo;\r\n}\r\nexport function getIsLoadingContentMovie(state) {\r\n\treturn state.get(\"isLoading\").contentMovie;\r\n}\r\nexport function getIsLoadingContentMovieUserInfo(state) {\r\n\treturn state.get(\"isLoading\").contentMovieUserInfo;\r\n}\r\nexport function getIsLoadingContentShow(state) {\r\n\treturn state.get(\"isLoading\").contentShow;\r\n}\r\nexport function getIsLoadingContentShowUserInfo(state) {\r\n\treturn state.get(\"isLoading\").contentShowUserInfo;\r\n}\r\nexport function getIsLoadingContentShowSeasons(state, seasonNumber) {\r\n\treturn state.get(\"isLoading\").contentShowSeasons[seasonNumber];\r\n}\r\nexport function getIsLoadingSearchGames(state) {\r\n\treturn state.get(\"isLoading\").searchGames;\r\n}\r\nexport function getIsLoadingSearchMovies(state) {\r\n\treturn state.get(\"isLoading\").searchMovies;\r\n}\r\nexport function getIsLoadingSearchShows(state) {\r\n\treturn state.get(\"isLoading\").searchShows;\r\n}\r\nexport function getIsLoadingSearchUsers(state) {\r\n\treturn state.get(\"isLoading\").searchUsers;\r\n}\r\nexport function getIsLoadingSearchAll(state) {\r\n\treturn state.get(\"isLoading\").searchUsers || state.get(\"isLoading\").searchMovies || state.get(\"isLoading\").searchGames;\r\n}\r\nexport function getIsLoadingUserPageContent(state) {\r\n\treturn state.get(\"isLoading\").userPageContent;\r\n}\r\nexport function getIsLoadingUserPageLogs(state) {\r\n\treturn state.get(\"isLoading\").userPageLogs;\r\n}\r\nexport function getIsLoadingUserPageFriendsLogs(state) {\r\n\treturn state.get(\"isLoading\").userPageFriendsLogs;\r\n}\r\n\r\n//Селекторы страницы профиля\r\nexport function getUserPageContent(state) {\r\n\treturn state.get(\"userPageContent\").user;\r\n}\r\nexport function getUserPageLogs(state) {\r\n\treturn state.get(\"userPageContent\").userLogs;\r\n}\r\nexport function getUserPageFriendsLogs(state) {\r\n\treturn state.get(\"userPageContent\").userFriendsLogs;\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../store/reducers\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction HomePage({ user }) {\r\n\treturn (\r\n\t\t<div className='bg'>\r\n\t\t\t<h2 style={{ marginTop: \"70px\", marginLeft: \"30px\" }}>Добро пожаловать на Interests!</h2>\r\n\t\t\t<h4 style={{ marginLeft: \"30px\" }}>\r\n\t\t\t\tГлавная страница ещё не готова, однако можно воспользоваться{\" \"}\r\n\t\t\t\t<a href='/search/example' style={{ fontWeight: \"600\" }}>\r\n\t\t\t\t\tпоиском\r\n\t\t\t\t</a>{\" \"}\r\n\t\t\t\tили проверить свой{\" \"}\r\n\t\t\t\t<a href={\"/user/\" + user.id} style={{ fontWeight: \"600\" }}>\r\n\t\t\t\t\tпрофиль\r\n\t\t\t\t</a>\r\n\t\t\t\t, если вы уже зарегистрированы\r\n\t\t\t</h4>\r\n\t\t\t<img src='images/logo192.png' style={{ marginLeft: \"20px\" }} alt='Картинка' />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: selectors.getUser(state),\r\n});\r\n\r\nconst mapDispatchToProps = () => {\r\n\treturn {};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePage);\r\n","/** Время жизни токена в миллисекундах, после истечения которого будет запрошен новый токен*/\r\nexport const TOKEN_LIFETIME = 86000000;\r\n/**Адрес сервера*/\r\nexport const BACKEND_URL = \"http://35.193.124.214:8001/\";\r\n/**Адрес получения токена */\r\nexport const GET_TOKEN_URL = BACKEND_URL + \"users/auth/login/\";\r\n/**Адрес обновления токена */\r\nexport const REFRESH_TOKEN_URL = BACKEND_URL + \"users/auth/refresh-token/\";\r\n/**Адрес регистрации */\r\nexport const REGISTRATE_URL = BACKEND_URL + \"users/auth/signup/\";\r\n/**Адрес подтверждения почты */\r\nexport const CONFIRM_URL = BACKEND_URL + \"users/auth/confirm_email/\";\r\n/**Адрес сброса пароля */\r\nexport const RESET_PASSWORD_URL = BACKEND_URL + \"users/user/password_reset/\";\r\n/**Адрес подтверждения сброса пароля */\r\nexport const CONFIRM_PASSWORD_URL = BACKEND_URL + \"users/user/confirm_password_reset/\";\r\n/**Адрес запроса игры */\r\nexport const GET_GAME_URL = BACKEND_URL + \"games/game/\";\r\n/**Адрес поиска игр */\r\nexport const SEARCH_GAMES_URL = BACKEND_URL + \"games/search/\";\r\n/**Адрес запроса фильма */\r\nexport const GET_MOVIE_URL = BACKEND_URL + \"movies/movie/\";\r\n/**Адрес поиска фильмов */\r\nexport const SEARCH_MOVIES_URL = BACKEND_URL + \"movies/search/\";\r\n/**Адрес запроса сериала */\r\nexport const GET_SHOW_URL = BACKEND_URL + \"shows/show/\";\r\n/**Адрес поиска сериалов */\r\nexport const SEARCH_SHOWS_URL = BACKEND_URL + \"shows/search/\";\r\n/**Адрес получения информации о пользователе */\r\nexport const USER_INFO_URL = BACKEND_URL + \"users/user/\";\r\n/**Адрес поиска пользователей */\r\nexport const SEARCH_USERS_URL = BACKEND_URL + \"users/search/\";\r\n","import axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport * as urls from \"../settings\";\r\n\r\nlet axiosConfig = {\r\n\theaders: {\r\n\t\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n\t},\r\n};\r\n\r\n/**\r\n * ПОлучение токена авторизации. Токен сохраняется в localStorage\r\n * @param {string} username Имя пользователя\r\n * @param {string} password Пароль\r\n */\r\nexport async function getToken(username, password) {\r\n\ttry {\r\n\t\tconst res = await axios.post(\r\n\t\t\turls.GET_TOKEN_URL,\r\n\t\t\t{\r\n\t\t\t\tusername: username,\r\n\t\t\t\tpassword: password,\r\n\t\t\t},\r\n\t\t\taxiosConfig\r\n\t\t);\r\n\r\n\t\tlet userData = jwt_decode(res.data.access);\r\n\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\t\treturn { token: res.data.access, refreshToken: res.data.refresh, user: user };\r\n\t} catch (e) {\r\n\t\tconsole.log(\"axios error: \" + e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Функция обновления токена\r\n */\r\nexport async function updateToken(refreshToken) {\r\n\tif ((typeof refreshToken !== \"undefined\") & (refreshToken != null))\r\n\t\ttry {\r\n\t\t\tconst res = await axios.post(\r\n\t\t\t\turls.REFRESH_TOKEN_URL,\r\n\t\t\t\t{\r\n\t\t\t\t\trefresh: refreshToken,\r\n\t\t\t\t},\r\n\t\t\t\taxiosConfig\r\n\t\t\t);\r\n\r\n\t\t\tlet userData = jwt_decode(res.data.access);\r\n\t\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\t\t\treturn { token: res.data.access, user: user };\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(\"exios error: \" + e);\r\n\t\t\treturn null;\r\n\t\t}\r\n\treturn null;\r\n}\r\n\r\nexport async function registration(username, email, password) {\r\n\ttry {\r\n\t\tconst res = await axios.post(\r\n\t\t\turls.REGISTRATE_URL,\r\n\t\t\t{\r\n\t\t\t\tusername: username,\r\n\t\t\t\temail: email,\r\n\t\t\t\tpassword: password,\r\n\t\t\t},\r\n\t\t\taxiosConfig\r\n\t\t);\r\n\t\tlet data = res.data;\r\n\t\tdata.status = res.status;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n\r\nexport async function confirmation(uid64, token) {\r\n\ttry {\r\n\t\tconst res = await axios.patch(urls.CONFIRM_URL + \"?uid64=\" + uid64 + \"&token=\" + token);\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n\r\nexport async function resetPassword(email) {\r\n\ttry {\r\n\t\tconst res = await axios.put(urls.RESET_PASSWORD_URL, { email: email }, axiosConfig);\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n\r\nexport async function confirmPassword(token, password) {\r\n\ttry {\r\n\t\tconst res = await axios.patch(urls.CONFIRM_PASSWORD_URL + \"?reset_token=\" + token, { password: password }, axiosConfig);\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e.response);\r\n\t\treturn e.response;\r\n\t}\r\n}\r\n","import axios from \"axios\";\r\nimport { GET_GAME_URL, SEARCH_GAMES_URL, USER_INFO_URL, SEARCH_MOVIES_URL, GET_MOVIE_URL, SEARCH_USERS_URL, SEARCH_SHOWS_URL, GET_SHOW_URL } from \"../settings\";\r\n\r\nlet axiosConfig = {\r\n\theaders: {\r\n\t\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n\t},\r\n};\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об игре\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID игры\r\n * @returns {object} Информация об игре\r\n */\r\nexport async function getGame(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_GAME_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_GAME_URL + id + \"/\", axiosConfig);\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о фильме\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID фильма\r\n * @returns {object} Информация о фильме\r\n */\r\nexport async function getMovie(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/\", axiosConfig);\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сериале\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID сериала\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShow(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + id + \"/\", axiosConfig);\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сезоне сериала\r\n * @param {string} token Токен доступа\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowSeason(token, showID, seasonNumber) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber, { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber, axiosConfig);\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о серии сериала\r\n * @param {string} token Токен доступа\r\n * @param {string} showID ID сериала\r\n * @param {string} seasonNumber номер сезона\r\n * @param {string} episodeNumber номер эпизода\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowEpisode(token, showID, seasonNumber, episodeNumber) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber, { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber, axiosConfig);\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса игры\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус игры\r\n * @param {string} gameSlug Слаг игры\r\n */\r\nexport async function setGameStatus(token, gameSlug, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\r\n\t\tconst res = await axios.put(GET_GAME_URL + gameSlug + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса фильма\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус фильма\r\n * @param {string} movieID ID фильма\r\n */\r\nexport async function setMovieStatus(token, id, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_MOVIE_URL + id + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус сериала\r\n * @param {string} id ID сериала\r\n */\r\nexport async function setShowStatus(token, id, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_SHOW_URL + id + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус сезона сериала\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n */\r\nexport async function setShowSeasonStatus(token, showID, seasonNumber, user_info) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} episodesList Список объектов эпизодов\r\n * @param {string} showID ID сериала\r\n */\r\nexport async function setShowEpisodesStatus(token, showID, episodesList) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(GET_SHOW_URL + showID + \"/episodes/\", episodesList, { headers: { Authorization: AuthStr } });\r\n\t\treturn res;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск игр\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchGames(query, page, gamesCount) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_GAMES_URL, { params: { query: query, page: page, page_size: gamesCount } }, { headers: { \"Content-Type\": \"application/json;charset=UTF-8\" } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск фильмов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchMovies(query, page) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_MOVIES_URL, { params: { query: query, page: page } }, { headers: { \"Content-Type\": \"application/json;charset=UTF-8\" } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск сериалов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchShows(query, page) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_SHOWS_URL, { params: { query: query, page: page } }, { headers: { \"Content-Type\": \"application/json;charset=UTF-8\" } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на поиск пользователей\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchUsers(query) {\r\n\ttry {\r\n\t\tconst res = await axios.get(SEARCH_USERS_URL, { params: { query: query } }, { headers: { \"Content-Type\": \"application/json;charset=UTF-8\" } });\r\n\t\treturn res.data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об игре\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID игры\r\n * @returns {object} Информация об игре\r\n */\r\nexport async function getUserInfo(token, userID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/\", axiosConfig);\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса пользовтеля (добавить в друзья и тд)\r\n * @param {string} token Токен доступа\r\n * @param {boolean} is_following Статус фильма\r\n * @param {string} userID ID пользовтеля\r\n */\r\nexport async function setUserStatus(token, is_following, userID) {\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.put(USER_INFO_URL + userID + \"/follow/\", is_following, { headers: { Authorization: AuthStr } });\r\n\t\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\t\telse return null;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {string} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserLog(token, userID, page, resultsOnPage) {\r\n\tlet data;\r\n\ttry {\r\n\t\tif (token) {\r\n\t\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage } }, { headers: { Authorization: AuthStr } });\r\n\t\t\tdata = res.data;\r\n\t\t} else {\r\n\t\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage } }, axiosConfig);\r\n\t\t\tdata = res.data;\r\n\t\t}\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог друзей пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {int} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserFriendsLog(token, userID, page, resultsOnPage) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/friends_log/\", { params: { page: page, page_size: resultsOnPage }, headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для игры\r\n * @param {string} slug slug игры\r\n * @param {int} page страница\r\n */\r\nexport async function getGameUserInfo(token, slug) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_GAME_URL + slug + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для фильма\r\n * @param {string} id id фильма\r\n */\r\nexport async function getMovieUserInfo(token, id) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowUserInfo(token, showID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сезона сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowSeasonUserInfo(token, showID, seasonID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для эпизода сериала\r\n * @param {string} showID id сериала\r\n * @param {int} page страница\r\n */\r\nexport async function getShowEpisodeUserInfo(token, showID, seasonID, episodeID) {\r\n\tlet data;\r\n\ttry {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/episode/\" + episodeID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t\treturn data;\r\n\t} catch (e) {\r\n\t\tconsole.log(\"AXIOS ERROR: \", e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n","import * as actionTypes from \"./actionTypes\";\r\nimport * as selectors from \"./reducers\";\r\nimport * as auth from \"../services/jwtAuth\";\r\nimport { TOKEN_LIFETIME } from \"../settings\";\r\nimport * as Requests from \"../services/requests\";\r\nimport { toast } from \"react-toastify\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nexport function tryAuth(login, password) {\r\n\treturn async (dispatch) => {\r\n\t\tsetError(dispatch, actionTypes.AUTH_ERROR, false);\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await auth.getToken(login, password);\r\n\t\t\tif (res !== null) {\r\n\t\t\t\tlocalStorage.setItem(\"refreshToken\", res.refreshToken);\r\n\t\t\t\tlocalStorage.setItem(\"token\", res.token);\r\n\t\t\t\tlocalStorage.setItem(\"tokenTime\", Date.now());\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\t\t\tauth: { loggedIn: true },\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\t\tuser: res.user,\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_LOGINFORM,\r\n\t\t\t\t\tisOpen: false,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsetError(dispatch, actionTypes.AUTH_ERROR, true);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetError(dispatch, actionTypes.AUTH_ERROR, true);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function checkAuthorization() {\r\n\treturn async (dispatch) => {\r\n\t\tif ((localStorage.getItem(\"token\") === null) | (Date.now() - localStorage.getItem(\"tokenTime\") > TOKEN_LIFETIME)) {\r\n\t\t\tconst res = await auth.updateToken(localStorage.getItem(\"refreshToken\"));\r\n\t\t\tif (res !== null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\t\t\tauth: { loggedIn: true },\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\t\tuser: res.user,\r\n\t\t\t\t});\r\n\t\t\t\tlocalStorage.setItem(\"token\", res.token);\r\n\t\t\t\tlocalStorage.setItem(\"tokenTime\", Date.now());\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\t//toast.warn(\"Произошла ошибка авторизации. Зайдите ещё раз\");\r\n\t\t\t\tdispatch(resetAuthorization());\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet userData = jwt_decode(localStorage.getItem(\"token\"));\r\n\t\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\tuser: user,\r\n\t\t\t});\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\t\tauth: { loggedIn: true },\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function resetAuthorization() {\r\n\treturn async (dispatch) => {\r\n\t\tlocalStorage.removeItem(\"refreshToken\");\r\n\t\tlocalStorage.removeItem(\"token\");\r\n\t\tlocalStorage.removeItem(\"tokenTime\");\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.SET_AUTH,\r\n\t\t\tauth: { loggedIn: false },\r\n\t\t});\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\tuser: { username: \"\", id: null, email: \"\" },\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function registrationRequest(username, email, password) {\r\n\treturn async (dispatch) => {\r\n\t\tsetError(dispatch, actionTypes.REGISTRATE_ERROR, false);\r\n\t\tauth.registration(username, email, password).then((result) => {\r\n\t\t\tif ((result.status === 201) | (result.status === 200)) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER,\r\n\t\t\t\t\tuser: { login: result.username, email: result.email },\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tfor (let error in result.data) toast.error(result.data[error][0]);\r\n\r\n\t\t\t\tsetError(dispatch, actionTypes.REGISTRATE_ERROR, true);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function confirmEmailRequest(uid64, token) {\r\n\treturn async () => {\r\n\t\tauth.confirmation(uid64, token).then((result) => {\r\n\t\t\tif (result.status === 200) {\r\n\t\t\t\ttoast.success(\"Почта подтверждена!\");\r\n\t\t\t} else {\r\n\t\t\t\tif (result.data) toast.error(result.data.error);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestGame(id) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME, true);\r\n\t\tsetError(dispatch, actionTypes.GAME_REQUEST_ERROR, false);\r\n\t\tRequests.getGame(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_GAME,\r\n\t\t\t\t\tgame: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Игра не найдена!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.GAME_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestGameUserInfo(slug) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME_USER_INFO, true);\r\n\t\tRequests.getGameUserInfo(localStorage.getItem(\"token\"), slug).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_GAME_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_GAME_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestMovie(id) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE, true);\r\n\t\tsetError(dispatch, actionTypes.MOVIE_REQUEST_ERROR, false);\r\n\t\tRequests.getMovie(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_MOVIE,\r\n\t\t\t\t\tmovie: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Фильм не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.MOVIE_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestMovieUserInfo(id) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE_USER_INFO, true);\r\n\t\tRequests.getMovieUserInfo(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_MOVIE_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_MOVIE_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShow(id) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, true);\r\n\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, false);\r\n\t\tRequests.getShow(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW,\r\n\t\t\t\t\tshow: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Сериал не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowSeason(showID, seasonNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, true);\r\n\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, false);\r\n\t\tRequests.getShowSeason(localStorage.getItem(\"token\"), showID, seasonNumber).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW,\r\n\t\t\t\t\tshow: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Сериал не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowSeasons(showID, seasonNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\tseasonNumber: seasonNumber,\r\n\t\t\tisLoading: true,\r\n\t\t});\r\n\t\tRequests.getShowSeason(localStorage.getItem(\"token\"), showID, seasonNumber).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_SEASONS,\r\n\t\t\t\t\tseasonNumber: seasonNumber,\r\n\t\t\t\t\tinfo: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Сериал не найден!\");\r\n\t\t\t}\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\t\tseasonNumber: seasonNumber,\r\n\t\t\t\tisLoading: false,\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowEpisode(showID, seasonNumber, episodeNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, true);\r\n\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, false);\r\n\t\tRequests.getShowEpisode(localStorage.getItem(\"token\"), showID, seasonNumber, episodeNumber).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW,\r\n\t\t\t\t\tshow: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Серия не найдена!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.SHOW_REQUEST_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowUserInfo(id) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, true);\r\n\t\tRequests.getShowUserInfo(localStorage.getItem(\"token\"), id).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowSeasonUserInfo(showID, seasonID) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, true);\r\n\t\tRequests.getShowSeasonUserInfo(localStorage.getItem(\"token\"), showID, seasonID).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowSeasonsUserInfo(showID, seasonID) {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\tseasonNumber: seasonID,\r\n\t\t\tisLoading: true,\r\n\t\t});\r\n\t\tRequests.getShowSeasonUserInfo(localStorage.getItem(\"token\"), showID, seasonID).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_SEASONS_USER_INFO,\r\n\t\t\t\t\tseasonNumber: seasonID,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки сезона!\");\r\n\t\t\t}\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: actionTypes.SET_IS_LOADING_CONTENT_SHOW_SEASONS,\r\n\t\t\t\tseasonNumber: seasonID,\r\n\t\t\t\tisLoading: false,\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestShowEpisodeUserInfo(showID, seasonID, episodeID) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, true);\r\n\t\tRequests.getShowEpisodeUserInfo(localStorage.getItem(\"token\"), showID, seasonID, episodeID).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tlet newResult = { ...result.user_info, user_watched_show: result.user_watched_show, friends_info: result.friends_info };\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_CONTENT_SHOW_USER_INFO,\r\n\t\t\t\t\tuser_info: newResult,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_CONTENT_SHOW_USER_INFO, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function setGameStatus(user_info) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tRequests.setGameStatus(localStorage.getItem(\"token\"), selectors.getContentGame(getState()).rawg.slug, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_GAME_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function requestUserPageContent(username) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_CONTENT, true);\r\n\t\tsetError(dispatch, actionTypes.USER_PAGE_ERROR, false);\r\n\t\tRequests.getUserInfo(localStorage.getItem(\"token\"), username).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_CONTENT,\r\n\t\t\t\t\tcontent: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Профиль не найден!\");\r\n\t\t\t\tsetError(dispatch, actionTypes.USER_PAGE_ERROR, true);\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_CONTENT, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestUserPageLogs(userID, page, resultsOnPage) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_LOGS, true);\r\n\t\tRequests.getUserLog(localStorage.getItem(\"token\"), userID, page, resultsOnPage).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_LOGs,\r\n\t\t\t\t\tlogs: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_LOGS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function requestUserPageFriendsLogs(userID, page, resultsOnPage) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS, true);\r\n\t\tRequests.getUserFriendsLog(localStorage.getItem(\"token\"), userID, page, resultsOnPage).then((result) => {\r\n\t\t\tif (result != null) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_FRIENDS_LOGS,\r\n\t\t\t\t\tlogs: result,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\ttoast.error(\"Ошибка загрузки логов!\");\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_USER_PAGE_FRIENDS_LOGS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function searchGames(query, page, gamesCount) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_GAMES, true);\r\n\t\tRequests.searchGames(query, page, gamesCount).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_GAMES,\r\n\t\t\t\t\tgames: result,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_GAMES, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function searchMovies(query, page) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_MOVIES, true);\r\n\t\tRequests.searchMovies(query, page).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска фильмов\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_MOVIES,\r\n\t\t\t\t\tmovies: result.results,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_MOVIES, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function searchShows(query, page) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_SHOWS, true);\r\n\t\tRequests.searchShows(query, page).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска сериалов\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_SHOWS,\r\n\t\t\t\t\tshows: result.results,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_SHOWS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function setMovieStatus(user_info) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tRequests.setMovieStatus(localStorage.getItem(\"token\"), selectors.getContentMovie(getState()).tmdb.id, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_MOVIE_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setShowStatus(user_info) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tRequests.setShowStatus(localStorage.getItem(\"token\"), selectors.getContentShow(getState()).tmdb.id, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_SHOW_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setShowSeasonStatus(user_info, showID, seasonNumber) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tRequests.setShowSeasonStatus(localStorage.getItem(\"token\"), showID, seasonNumber, user_info).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t/*dispatch({\r\n                        type: actionTypes.SET_CONTENT_SHOW_USERINFO,\r\n                        user_info: result\r\n                    });*/\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setShowEpisodesStatus(episodesList, showID, needUpdate = false) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tRequests.setShowEpisodesStatus(localStorage.getItem(\"token\"), showID, episodesList).then((result) => {\r\n\t\t\t\tif ((result.status !== 204) & (result.status !== 200) & (result.status !== 201)) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (needUpdate) {\r\n\t\t\t\t\t\tlet seasons = [];\r\n\t\t\t\t\t\tfor (let episode in episodesList.episodes) if (seasons.indexOf(episodesList.episodes[episode].season_number) === -1) seasons.push(episodesList.episodes[episode].season_number);\r\n\r\n\t\t\t\t\t\tfor (let season in seasons) dispatch(requestShowSeasonsUserInfo(showID, seasons[season]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function searchUsers(query) {\r\n\treturn async (dispatch) => {\r\n\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_USERS, true);\r\n\t\tRequests.searchUsers(query).then((result) => {\r\n\t\t\tif (!result) {\r\n\t\t\t\ttoast.error(\"Ошибка поиска\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.SET_SEARCH_CONTENT_USERS,\r\n\t\t\t\t\tusers: result,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsetLoading(dispatch, actionTypes.SET_IS_LOADING_SEARCH_USERS, false);\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function setUserStatus(is_following, userID) {\r\n\treturn async (dispatch) => {\r\n\t\tif (await dispatch(checkAuthorization())) {\r\n\t\t\tRequests.setUserStatus(localStorage.getItem(\"token\"), is_following, userID).then((result) => {\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\ttoast.error(\"Ошибка обновления статуса\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: actionTypes.SET_USER_PAGE_FOLLOWING,\r\n\t\t\t\t\t\tis_following: result.is_following,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function resetPassword(email) {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.RESET_PASSWORD_ERROR,\r\n\t\t\terror: false,\r\n\t\t});\r\n\t\tauth.resetPassword(email).then((result) => {\r\n\t\t\tif (result.status !== 200) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.RESET_PASSWORD_ERROR,\r\n\t\t\t\t\terror: result.data.error,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.RESET_PASSWORD_ERROR,\r\n\t\t\t\t\terror: \"ok\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function confirmPassword(token, password) {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.CONFIRM_PASSWORD_ERROR,\r\n\t\t\terror: false,\r\n\t\t});\r\n\t\tauth.confirmPassword(token, password).then((result) => {\r\n\t\t\tif (result.status !== 200) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.CONFIRM_PASSWORD_ERROR,\r\n\t\t\t\t\terror: result.data.error ? result.data.error : \"Неизвестная ошибка\",\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: actionTypes.CONFIRM_PASSWORD_ERROR,\r\n\t\t\t\t\terror: \"ok\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}\r\n\r\nexport function setUser(user) {\r\n\treturn { type: actionTypes.SET_USER, user: user };\r\n}\r\n\r\nexport function openLoginForm() {\r\n\treturn { type: actionTypes.SET_LOGINFORM, isOpen: true };\r\n}\r\n\r\nexport function closeLoginForm() {\r\n\treturn { type: actionTypes.SET_LOGINFORM, isOpen: false };\r\n}\r\n\r\nexport function openRegistrateForm() {\r\n\treturn { type: actionTypes.SET_REGISTRATEFORM, isOpen: true };\r\n}\r\n\r\nexport function closeRegistrateForm() {\r\n\treturn { type: actionTypes.SET_REGISTRATEFORM, isOpen: false };\r\n}\r\n\r\nexport function openResetPasswordForm() {\r\n\treturn { type: actionTypes.SET_RESET_PASSWORD_FORM, isOpen: true };\r\n}\r\n\r\nexport function closeResetPasswordForm() {\r\n\treturn { type: actionTypes.SET_RESET_PASSWORD_FORM, isOpen: false };\r\n}\r\n\r\nfunction setLoading(dispatch, type, isLoading) {\r\n\tdispatch({\r\n\t\ttype: type,\r\n\t\tisLoading: isLoading,\r\n\t});\r\n}\r\n\r\nfunction setError(dispatch, type, isError) {\r\n\tdispatch({\r\n\t\ttype: type,\r\n\t\terror: isError,\r\n\t});\r\n}\r\n","import React from \"react\";\r\nimport \"./style.css\";\r\n\r\nfunction StatusButtonGroup({ statuses, activeColor, onChangeStatus, userStatus }) {\r\n\treturn (\r\n\t\t<div className='contentStatuses'>\r\n\t\t\t{statuses.map((status) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={\"contentStatus\"}\r\n\t\t\t\t\tkey={status}\r\n\t\t\t\t\tstyle={{ backgroundColor: userStatus === status ? activeColor : \"#000000\" }}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonChangeStatus(status);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{status}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default StatusButtonGroup;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction FriendsActivityRow({ info }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className='fActivityBlock'>\r\n\t\t\t<h5 className='fActivityUser'>\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={window.location.origin + \"/user/\" + info.user.id}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\thistory.push(\"/user/\" + info.user.id);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{info.user.username}\r\n\t\t\t\t</a>\r\n\t\t\t</h5>\r\n\t\t\t<div className='fActivityInfo'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t\tinitialRating={info.score}\r\n\t\t\t\t\tclassName='fActivityInfoText'\r\n\t\t\t\t\treadonly={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<p className='fActivityInfoText'>Статус: {info.status} </p>\r\n\t\t\t\t<p className='fActivityInfoText' hidden={!info.spent_time}>\r\n\t\t\t\t\tВремя проходения: {info.spent_time} {intToHours(info.spent_time)}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='fActivityInfoText' hidden={info.review === \"\"}>\r\n\t\t\t\t\tОтзыв: {info.review}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default FriendsActivityRow;\r\n","import React from \"react\";\r\nimport FriendsActivityRow from \"./FriendsActivityRow\";\r\n\r\nfunction FriendsActivity({ info }) {\r\n\treturn <div className='friendsBlock'>{typeof info !== \"undefined\" ? info?.map((friendInfo) => <FriendsActivityRow info={friendInfo} key={friendInfo.user.id} />) : \"\"}</div>;\r\n}\r\n\r\nexport default FriendsActivity;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction TimeToBeat({ hltbInfo }) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p style={{ display: \"inline\" }}>Время прохождения: </p>\r\n\t\t\t<div hidden={hltbInfo.gameplay_main < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='light-green-text' title={\"Главный сюжет\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo.gameplay_main} {hltbInfo.gameplay_main_unit}\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t</div>{\" \"}\r\n\t\t\t<p style={{ display: \"inline\" }}> </p>\r\n\t\t\t<div hidden={hltbInfo.gameplay_main_extra < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='yellow-text' title={\"Главный сюжет + побочные задания\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo.gameplay_main_extra} {hltbInfo.gameplay_main_extra_unit}\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t</div>{\" \"}\r\n\t\t\t<p style={{ display: \"inline\" }}> </p>\r\n\t\t\t<div hidden={hltbInfo.gameplay_completionist < 0} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='red-text' title={\"Полное прохождение\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo.gameplay_completionist} {hltbInfo.gameplay_completionist_unit}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TimeToBeat;\r\n","import React from \"react\";\r\n\r\nfunction ScoreBlock({ score, text, className }) {\r\n\tfunction getColor(score) {\r\n\t\tswitch (true) {\r\n\t\t\tcase score >= 80:\r\n\t\t\t\treturn \"metacriticGreen\";\r\n\t\t\tcase score >= 60 && score < 80:\r\n\t\t\t\treturn \"metacriticYellow\";\r\n\t\t\tcase score < 60:\r\n\t\t\t\treturn \"metacriticRed\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"metacriticGreen\";\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div hidden={!score} className={className}>\r\n\t\t\t<div className={\"metacritic \" + getColor(score)}>\r\n\t\t\t\t<p>{score}</p>\r\n\t\t\t</div>\r\n\t\t\t<p className='metacriticText'>{text}</p>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ScoreBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport TimeToBeat from \"./TimeToBeat\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction GamePage({ requestGame, openLoginForm, setGameStatus, requestGameUserInfo, loggedIn, game, gameIsLoading, gameUserInfo, gameUserInfoIsLoading }) {\r\n\tlet { id } = useParams();\r\n\tconst [genres, setGenres] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [spentTime, setSpentTime] = useState(0);\r\n\tconst [userStatus, setUserStatus] = useState(\"Не играл\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [developers, setDevelopers] = useState(\"\");\r\n\tconst [date, setDate] = useState(\"\");\r\n\tconst [hltbInfo, setHtlbInfo] = useState({ gameplay_main_extra: -1, gameplay_main: -1, gameplay_comletionist: -1 });\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetClearUI();\r\n\t\t\trequestGame(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestGame]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestGameUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, loggedIn]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (game.rawg.genres) {\r\n\t\t\tlet newGenres = \"\";\r\n\t\t\tfor (let i = 0; i < game.rawg.genres.length; i++) {\r\n\t\t\t\tnewGenres += game.rawg.genres[i].name;\r\n\t\t\t\tif (i !== game.rawg.genres.length - 1) newGenres += \", \";\r\n\t\t\t}\r\n\t\t\tsetGenres(newGenres);\r\n\t\t}\r\n\r\n\t\tif (game.hltb) {\r\n\t\t\tsetHtlbInfo(game.hltb);\r\n\t\t} else if (game.rawg.playtime) {\r\n\t\t\tsetHtlbInfo({ gameplay_main_extra: game.rawg.playtime, gameplay_main: -1, gameplay_completionist: -1 });\r\n\t\t}\r\n\r\n\t\tif (game.rawg.developers) {\r\n\t\t\tlet newDevelopers = \"\";\r\n\t\t\tfor (let i = 0; i < game.rawg.developers.length; i++) {\r\n\t\t\t\tnewDevelopers += game.rawg.developers[i].name;\r\n\t\t\t\tif (i !== game.rawg.developers.length - 1) newDevelopers += \", \";\r\n\t\t\t}\r\n\t\t\tsetDevelopers(newDevelopers);\r\n\t\t}\r\n\r\n\t\tif (game.rawg.released) {\r\n\t\t\tlet mas = game.rawg.released.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = game.rawg.name;\r\n\t}, [game]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (gameUserInfo?.status) {\r\n\t\t\t\tsetReview(gameUserInfo.review);\r\n\t\t\t\tsetSpentTime(gameUserInfo.spent_time);\r\n\t\t\t\tsetUserStatus(gameUserInfo.status);\r\n\t\t\t\tsetUserRate(gameUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[gameUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetGenres(\"\");\r\n\t\tsetHtlbInfo({ gameplay_main_extra: -1, gameplay_main: -1, gameplay_completionist: -1 });\r\n\t\tsetDevelopers(\"\");\r\n\t\tsetDate(\"\");\r\n\t}\r\n\r\n\tfunction setClearUI() {\r\n\t\tsetReview(\"\");\r\n\t\tsetSpentTime(0);\r\n\t\tsetUserStatus(\"Не играл\");\r\n\t\tsetUserRate(0);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${game.rawg.background_image_additional ? game.rawg.background_image_additional : game.rawg.background_image})` }} />\r\n\t\t\t<LoadingOverlay active={gameIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='gameContentPage'>\r\n\t\t\t\t\t<div className='gameContentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock'>\r\n\t\t\t\t\t\t\t<img src={game.rawg.background_image} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='gameInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{game.rawg.name}</h1>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p className='header'>Разработчики: {developers}</p>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {date}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {genres}</p>\r\n\t\t\t\t\t\t\t\t<TimeToBeat hltbInfo={hltbInfo} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={gameUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: \"10px\" }}\r\n\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не играл\", \"Буду играть\", \"Играю\", \"Дропнул\", \"Прошел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не играл\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={game?.rawg?.metacritic} text='Metascore' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='gameContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: game.rawg.description }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='gameReviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={gameUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<MDBInput type='number' id='spentTimeInput' label='Время прохождения (часы)' value={spentTime} onChange={(event) => setSpentTime(event.target.value)} />\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ review: document.getElementById(\"reviewInput\").value, spent_time: document.getElementById(\"spentTimeInput\").value });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='gameFriendsBlock' hidden={!loggedIn | (gameUserInfo?.friends_info?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={gameUserInfo?.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getGameRequestError(state),\r\n\tgame: selectors.getContentGame(state),\r\n\tgameIsLoading: selectors.getIsLoadingContentGame(state),\r\n\tgameUserInfo: selectors.getContentGameUserInfo(state),\r\n\tgameUserInfoIsLoading: selectors.getIsLoadingContentGameUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestGame: (id) => {\r\n\t\t\tdispatch(actions.requestGame(id));\r\n\t\t},\r\n\t\trequestGameUserInfo: (slug) => {\r\n\t\t\tdispatch(actions.requestGameUserInfo(slug));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tsetGameStatus: (status) => {\r\n\t\t\tdispatch(actions.setGameStatus(status));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GamePage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction MoviePage({ requestMovie, movie, movieIsLoading, setMovieStatus, requestMovieUserInfo, movieUserInfo, movieUserInfoIsLoading, loggedIn, openLoginForm }) {\r\n\tlet { id } = useParams();\r\n\tconst [genres, setGenres] = useState(\"\");\r\n\tconst [companies, setCompanies] = useState(\"\");\r\n\tconst [cast, setCast] = useState(\"\");\r\n\tconst [director, setDirector] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestMovie(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestMovie]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestMovieUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (movie.tmdb.genres) {\r\n\t\t\tlet newGenres = \"\";\r\n\t\t\tfor (let i = 0; i < movie.tmdb.genres.length; i++) {\r\n\t\t\t\tnewGenres += movie.tmdb.genres[i].name;\r\n\t\t\t\tif (i !== movie.tmdb.genres.length - 1) newGenres += \", \";\r\n\t\t\t}\r\n\t\t\tsetGenres(newGenres);\r\n\t\t}\r\n\r\n\t\tif (movie.tmdb.production_companies) {\r\n\t\t\tlet newCompanies = \"\";\r\n\t\t\tfor (let i = 0; i < movie.tmdb.production_companies.length; i++) {\r\n\t\t\t\tnewCompanies += movie.tmdb.production_companies[i].name;\r\n\t\t\t\tif (i !== movie.tmdb.production_companies.length - 1) newCompanies += \", \";\r\n\t\t\t}\r\n\t\t\tsetCompanies(newCompanies);\r\n\t\t}\r\n\r\n\t\tif (movie.tmdb.cast) {\r\n\t\t\tlet newCast = \"\";\r\n\t\t\tlet length = movie.tmdb.cast.length > 5 ? 5 : movie.tmdb.cast.length;\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tnewCast += movie.tmdb.cast[i].name;\r\n\t\t\t\tif (i !== length - 1) newCast += \", \";\r\n\t\t\t}\r\n\t\t\tsetCast(newCast);\r\n\t\t}\r\n\r\n\t\tif (movie.tmdb.crew) {\r\n\t\t\tlet newDirector = \"\";\r\n\t\t\tfor (let i = 0; i < movie.tmdb.crew.length; i++) {\r\n\t\t\t\tif (movie.tmdb.crew[i].job === \"Director\") {\r\n\t\t\t\t\tnewDirector = movie.tmdb.crew[i].name;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetDirector(newDirector);\r\n\t\t}\r\n\r\n\t\tdocument.title = movie.tmdb.title;\r\n\t}, [movie]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (movieUserInfo?.status) {\r\n\t\t\t\tsetReview(movieUserInfo.review);\r\n\t\t\t\tsetUserStatus(movieUserInfo.status);\r\n\t\t\t\tsetUserRate(movieUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[movieUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetDirector(\"\");\r\n\t\tsetCast(\"\");\r\n\t\tsetCompanies(\"\");\r\n\t\tsetGenres(\"\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + movie.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={movieIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='movieContentPage'>\r\n\t\t\t\t\t<div className='movieContentHeader'>\r\n\t\t\t\t\t\t<div className='moviePosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + movie.tmdb.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{movie.tmdb.title}</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{movie.tmdb.original_title}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {movie.tmdb.release_date}</p>\r\n\t\t\t\t\t\t\t\t<p>Продолжительность (мин): {movie.tmdb.runtime}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Компания: {companies}</p>\r\n\t\t\t\t\t\t\t\t<p>Слоган: {movie.tmdb.tagline}</p>\r\n\t\t\t\t\t\t\t\t<p>В ролях: {cast}</p>\r\n\t\t\t\t\t\t\t\t<p>Режиссер: {director}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={movieUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={movie.tmdb.vote_average * 10} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='movieContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: movie.tmdb.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieReviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={movieUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ review: document.getElementById(\"reviewInput\").value });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieFriendsBlock' hidden={!loggedIn | (movieUserInfo?.friends_info?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={movieUserInfo?.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getMovieRequestError(state),\r\n\tmovie: selectors.getContentMovie(state),\r\n\tmovieIsLoading: selectors.getIsLoadingContentMovie(state),\r\n\tmovieUserInfo: selectors.getContentMovieUserInfo(state),\r\n\tmovieUserInfoIsLoading: selectors.getIsLoadingContentMovieUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestMovie: (id) => {\r\n\t\t\tdispatch(actions.requestMovie(id));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tsetMovieStatus: (status) => {\r\n\t\t\tdispatch(actions.setMovieStatus(status));\r\n\t\t},\r\n\t\trequestMovieUserInfo: (id) => {\r\n\t\t\tdispatch(actions.requestMovieUserInfo(id));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MoviePage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./style.css\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction DetailedEpisodeRow({ episode, showID, setShowEpisodeUserStatus, loggedIn, userInfo, onChangeStatus, checkAll, userWatchedShow }) {\r\n\tlet history = useHistory();\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [isChecked, setIsChecked] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUserRate(userInfo?.score);\r\n\t\tsetIsChecked(userInfo?.score > -1);\r\n\t}, [userInfo]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (checkAll === -1) {\r\n\t\t\t\tsetIsChecked(false);\r\n\t\t\t\tonChangeStatus({\r\n\t\t\t\t\taddEpisode: userRate > -1,\r\n\t\t\t\t\tepisode: {\r\n\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\tscore: -1,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t} else if (checkAll === 1) {\r\n\t\t\t\tsetIsChecked(true);\r\n\t\t\t\tonChangeStatus({\r\n\t\t\t\t\taddEpisode: !(userRate > -1),\r\n\t\t\t\t\tepisode: {\r\n\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\tscore: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[checkAll]\r\n\t);\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleDateString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='episodeRow detailRow'>\r\n\t\t\t<div className='episodeRowCheckDate'>\r\n\t\t\t\t<div className='episodeRowCheck' hidden={!loggedIn || typeof onChangeStatus === \"undefined\" || !userWatchedShow}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\tchecked={isChecked}\r\n\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\tsetIsChecked(res.target.checked);\r\n\t\t\t\t\t\t\tonChangeStatus({\r\n\t\t\t\t\t\t\t\taddEpisode: res.target.checked === !(userRate > -1),\r\n\t\t\t\t\t\t\t\tepisode: {\r\n\t\t\t\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\t\t\t\tscore: res.target.checked ? 0 : -1,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className='episodeRowDate'>{parseDate(episode.air_date)}</p>\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='episodeRowRate'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstart={-1}\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' />))}\r\n\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' title={n} />))}\r\n\t\t\t\t\treadonly={!loggedIn}\r\n\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\tsetIsChecked(score > -1);\r\n\t\t\t\t\t\t/*if (typeof onChangeStatus!=='undefined')\r\n                                onChangeStatus({\r\n                                    addEpisode: (score>-1) !== (userRate > -1),\r\n                                    episode: {\r\n                                        season_number: episode.season_number,\r\n                                        episode_number: episode.episode_number,\r\n                                        score: (score>-1)?0:-1\r\n                                    } \r\n                                });*/\r\n\t\t\t\t\t\tsetShowEpisodeUserStatus(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tepisodes: [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tseason_number: episode.season_number,\r\n\t\t\t\t\t\t\t\t\t\tepisode_number: episode.episode_number,\r\n\t\t\t\t\t\t\t\t\t\tscore: score,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tshowID\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<a\r\n\t\t\t\tclassName='episodeRowName episodeLink detailRow'\r\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={episode.name}>\r\n\t\t\t\tСерия {episode.episode_number} - {episode.name}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailedEpisodeRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport DetailedEpisodeRow from \"./DetailedEpisodeRow\";\r\nimport Rating from \"react-rating\";\r\n\r\nfunction SeasonBlock({\r\n\tshowID,\r\n\tseasonNumber,\r\n\tloggedIn,\r\n\topenLoginForm,\r\n\tshowSeason,\r\n\tshowSeasonIsLoading,\r\n\tshowUserInfo,\r\n\trequestShowSeason,\r\n\trequestShowSeasonUserInfo,\r\n\tsetShowEpisodeUserStatus,\r\n\tonChangeStatus,\r\n\tsetShowSeasonUserStatus,\r\n\tuserWatchedShow,\r\n}) {\r\n\tlet history = useHistory();\r\n\tconst [isChecked, setIsChecked] = useState(0);\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetIsChecked(0);\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShowSeason(showID, seasonNumber);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showID, seasonNumber, requestShowSeason]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetIsChecked(0);\r\n\t\t\tsetUserRate(0);\r\n\t\t\tif (loggedIn) requestShowSeasonUserInfo(showID, seasonNumber);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, showID, seasonNumber]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.score) {\r\n\t\t\t\tsetUserRate(showUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction getEpisodeByNumber(episodes, number) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].episode_number === number) return episodes[episode];\r\n\t}\r\n\r\n\treturn (\r\n\t\t<LoadingOverlay active={showSeasonIsLoading} spinner text='Загрузка...'>\r\n\t\t\t<div key={showSeason?.tmdb?.id} className='seasonBlock'>\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='seasonBlockName'>\r\n\t\t\t\t\t<h5> {showSeason?.tmdb?.name} </h5>\r\n\t\t\t\t</a>\r\n\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='seasonBlockName'>\r\n\t\t\t\t\t<Rating\r\n\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\tsetShowSeasonUserStatus({ score: score }, showID, seasonNumber);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\t\t\t\t<details open={true} className='episodeRows'>\r\n\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t<div style={{ marginLeft: \"5px\" }} hidden={!loggedIn || !userWatchedShow}>\r\n\t\t\t\t\t\tВыбрать все&nbsp;\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\tchecked={isChecked > 0}\r\n\t\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{showSeason?.tmdb?.episodes\r\n\t\t\t\t\t\t\t?.map((episode, counter) => (\r\n\t\t\t\t\t\t\t\t<li className='episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t<DetailedEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\tshowID={showID}\r\n\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByNumber(showUserInfo?.episodes, episode?.episode_number)}\r\n\t\t\t\t\t\t\t\t\t\tsetShowEpisodeUserStatus={setShowEpisodeUserStatus}\r\n\t\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => onChangeStatus(status)}\r\n\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\r\n\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t.reverse()}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</details>\r\n\t\t\t</div>\r\n\t\t</LoadingOverlay>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tshowSeason: selectors.getContentShowSeasons(state, ownProps.seasonNumber),\r\n\tshowSeasonIsLoading: selectors.getIsLoadingContentShowSeasons(state, ownProps.seasonNumber),\r\n\tshowUserInfo: selectors.getContentShowSeasonsUserInfo(state, ownProps.seasonNumber),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShowSeason: (showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.requestShowSeasons(showID, seasonNumber));\r\n\t\t},\r\n\t\trequestShowSeasonUserInfo: (showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.requestShowSeasonsUserInfo(showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowSeasonUserStatus: (status, showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.setShowSeasonStatus(status, showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SeasonBlock);\r\n","import React, { useState } from \"react\";\r\nimport \"./style.css\";\r\nimport SeasonBlock from \"./SeasonBlock\";\r\n\r\nfunction SeasonsBlock({ showID, seasons, setShowEpisodeUserStatus, userWatchedShow }) {\r\n\tconst [needHeader, setNeedHeader] = useState(false);\r\n\tconst [changedEpisodes, setChangedEpisodes] = useState([]);\r\n\r\n\tfunction updateEpisodes(episode) {\r\n\t\tlet newChangedEpisodes = changedEpisodes;\r\n\t\tif (episode.addEpisode) newChangedEpisodes.push(episode.episode);\r\n\t\telse {\r\n\t\t\tconst index = newChangedEpisodes.findIndex((i) => i.episode_number === episode.episode.episode_number && i.season_number === episode.episode.season_number);\r\n\t\t\tif (index > -1) newChangedEpisodes.splice(index, 1);\r\n\t\t}\r\n\t\tsetNeedHeader(newChangedEpisodes.length > 0);\r\n\t\tsetChangedEpisodes(newChangedEpisodes);\r\n\t\tconsole.log(newChangedEpisodes);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{seasons\r\n\t\t\t\t?.map((season) => (\r\n\t\t\t\t\t<SeasonBlock\r\n\t\t\t\t\t\tshowID={showID}\r\n\t\t\t\t\t\tseasonNumber={season.season_number}\r\n\t\t\t\t\t\tonChangeEpisodes={(episodes) => {\r\n\t\t\t\t\t\t\tconsole.log(episodes);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tkey={season.season_number}\r\n\t\t\t\t\t\tonChangeStatus={(status) => updateEpisodes(status)}\r\n\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))\r\n\t\t\t\t.reverse()}\r\n\t\t\t<div className='saveEpisodesHeader' hidden={!needHeader}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='saveEpisodesButton'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetShowEpisodeUserStatus({ episodes: changedEpisodes }, showID);\r\n\t\t\t\t\t\tsetNeedHeader(false);\r\n\t\t\t\t\t\tsetChangedEpisodes([]);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tСохранить\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SeasonsBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport SeasonsBlock from \"./SeasonsBlock\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ShowPage({ requestShow, show, showIsLoading, setShowUserStatus, setShowEpisodeUserStatus, requestShowUserInfo, showUserInfo, showUserInfoIsLoading, loggedIn, openLoginForm }) {\r\n\tlet { id } = useParams();\r\n\tconst [genres, setGenres] = useState(\"\");\r\n\tconst [companies, setCompanies] = useState(\"\");\r\n\tconst [showStatus, setShowStatus] = useState(\"\");\r\n\tconst [firstDate, setFirstDate] = useState(\"\");\r\n\tconst [lastDate, setLastDate] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShow(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestShow]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (show.tmdb.genres) {\r\n\t\t\tlet newGenres = \"\";\r\n\t\t\tfor (let i = 0; i < show.tmdb.genres.length; i++) {\r\n\t\t\t\tnewGenres += show.tmdb.genres[i].name;\r\n\t\t\t\tif (i !== show.tmdb.genres.length - 1) newGenres += \", \";\r\n\t\t\t}\r\n\t\t\tsetGenres(newGenres);\r\n\t\t}\r\n\r\n\t\tif (show.tmdb.production_companies) {\r\n\t\t\tlet newCompanies = \"\";\r\n\t\t\tfor (let i = 0; i < show.tmdb.production_companies.length; i++) {\r\n\t\t\t\tnewCompanies += show.tmdb.production_companies[i].name;\r\n\t\t\t\tif (i !== show.tmdb.production_companies.length - 1) newCompanies += \", \";\r\n\t\t\t}\r\n\t\t\tsetCompanies(newCompanies);\r\n\t\t}\r\n\r\n\t\tswitch (show.tmdb.status) {\r\n\t\t\tcase \"Ended\":\r\n\t\t\t\tsetShowStatus(\"Окончен\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Returning Series\":\r\n\t\t\t\tsetShowStatus(\"Продолжается\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Pilot\":\r\n\t\t\t\tsetShowStatus(\"Пилот\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Canceled\":\r\n\t\t\t\tsetShowStatus(\"Отменен\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"In Production\":\r\n\t\t\t\tsetShowStatus(\"В производстве\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Planned\":\r\n\t\t\t\tsetShowStatus(\"Запланирован\");\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tsetShowStatus(show.tmdb.status);\r\n\t\t}\r\n\r\n\t\tif (show.tmdb.first_air_date) {\r\n\t\t\tlet mas = show.tmdb.first_air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetFirstDate(newDate);\r\n\t\t}\r\n\r\n\t\tif (show.tmdb.last_air_date) {\r\n\t\t\tlet mas = show.tmdb.last_air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetLastDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = show.tmdb.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.status) {\r\n\t\t\t\tsetReview(showUserInfo.review);\r\n\t\t\t\tsetUserStatus(showUserInfo.status);\r\n\t\t\t\tsetUserRate(showUserInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetLastDate(\"\");\r\n\t\tsetFirstDate(\"\");\r\n\t\tsetShowStatus(\"\");\r\n\t\tsetCompanies(\"\");\r\n\t\tsetGenres(\"\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + show.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='showContentPage'>\r\n\t\t\t\t\t<div className='showContentHeader'>\r\n\t\t\t\t\t\t<div className='showPosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + show.tmdb.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{show.tmdb.name}</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{show.tmdb.original_name}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Компания: {companies}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={firstDate === \"\"}>Дата выхода первой серии: {firstDate}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={lastDate === \"\"}>Дата выхода последней серии: {lastDate}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={show.tmdb.episode_run_time ? false : true}>Продолжительность (мин): {show.tmdb.episode_run_time ? show.tmdb.episode_run_time[0] : 0}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество сезонов: {show.tmdb.number_of_seasons}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество серий: {show.tmdb.number_of_episodes}</p>\r\n\t\t\t\t\t\t\t\t<p>Статус: {showStatus}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Смотрю\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={show.tmdb.vote_average * 10} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='showContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.tmdb.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showSeasonsBody'>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Список серий</h3>\r\n\t\t\t\t\t\t\t<SeasonsBlock showID={show.tmdb.id} seasons={show.tmdb.seasons} setShowEpisodeUserStatus={setShowEpisodeUserStatus} userWatchedShow={userStatus !== \"Не смотрел\"} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showReviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзывы</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ review: document.getElementById(\"reviewInput\").value });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showFriendsBlock' hidden={showUserInfo.friends_info.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={showUserInfo.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getShowRequestError(state),\r\n\tshow: selectors.getContentShow(state),\r\n\tshowIsLoading: selectors.getIsLoadingContentShow(state),\r\n\tshowUserInfo: selectors.getContentShowUserInfo(state),\r\n\tshowUserInfoIsLoading: selectors.getIsLoadingContentShowUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShow: (id) => {\r\n\t\t\tdispatch(actions.requestShow(id));\r\n\t\t},\r\n\t\tsetShowUserStatus: (status) => {\r\n\t\t\tdispatch(actions.setShowStatus(status));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\trequestShowUserInfo: (id) => {\r\n\t\t\tdispatch(actions.requestShowUserInfo(id));\r\n\t\t},\r\n\t\tsetShowEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID, true));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowPage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport DetailedEpisodeRow from \"./DetailedEpisodeRow\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ShowPage({\r\n\trequestShowSeason,\r\n\tshowSeason,\r\n\tshowSeasonIsLoading,\r\n\tsetShowUserStatus,\r\n\tsetShowEpisodeUserStatus,\r\n\trequestShowSeasonUserInfo,\r\n\tshowUserInfo,\r\n\tshowUserInfoIsLoading,\r\n\tloggedIn,\r\n\topenLoginForm,\r\n}) {\r\n\tlet history = useHistory();\r\n\tlet { show_id, number } = useParams();\r\n\tconst [date, setDate] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [chartData, setChartData] = useState([]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShowSeason(show_id, number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, number, requestShowSeason]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowSeasonUserInfo(show_id, number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (showSeason.tmdb.air_date) {\r\n\t\t\tlet mas = showSeason.tmdb.air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = showSeason.tmdb.show_name + \" - \" + showSeason.tmdb.name;\r\n\t}, [showSeason]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (showSeason.tmdb.episodes)\r\n\t\t\tif (showSeason.tmdb.episodes.length > 0) {\r\n\t\t\t\tlet newData = [];\r\n\t\t\t\tfor (let episode in showSeason.tmdb.episodes) {\r\n\t\t\t\t\tif (showSeason.tmdb.episodes[episode].vote_average > 0)\r\n\t\t\t\t\t\tnewData.push({ name: \"Ep \" + showSeason.tmdb.episodes[episode].episode_number, Оценка: showSeason.tmdb.episodes[episode].vote_average });\r\n\t\t\t\t}\r\n\t\t\t\tsetChartData(newData);\r\n\t\t\t}\r\n\t}, [showSeason]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.review) setReview(showUserInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (showUserInfo?.score) setUserRate(showUserInfo.score);\r\n\t\t\telse setUserRate(0);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetDate(\"\");\r\n\t}\r\n\r\n\tfunction getEpisodeByNumber(episodes, number) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].episode_number === number) return episodes[episode];\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + showSeason.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showSeasonIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='showContentPage'>\r\n\t\t\t\t\t<div className='showContentHeader'>\r\n\t\t\t\t\t\t<div className='showPosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + showSeason.tmdb.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{showSeason.tmdb.show_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + showSeason.tmdb.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{showSeason.tmdb.show_original_name + \" - Season \" + showSeason.tmdb.season_number}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={date === \"\"}>Дата выхода: {date}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество серий: {showSeason.tmdb.episodes ? showSeason.tmdb.episodes.length : 0}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !showUserInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ score: score }, show_id, showSeason.tmdb.season_number);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewSeasonInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !showUserInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowUserStatus({ review: document.getElementById(\"reviewSeasonInput\").value }, show_id, showSeason.tmdb.season_number);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showContentBody'>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: showSeason.tmdb.overview }} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='showSeasonsBody'>\r\n\t\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Список серий</h3>\r\n\t\t\t\t\t\t\t\t<details open={false} className='episodeRows' style={{ marginBottom: \"15px\" }}>\r\n\t\t\t\t\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t{showSeason.tmdb.episodes\r\n\t\t\t\t\t\t\t\t\t\t\t? showSeason.tmdb.episodes.map((episode) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='episode' key={showSeason.tmdb.id + episode.episode_number}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DetailedEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowID={show_id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByNumber(showUserInfo.episodes, episode.episode_number)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowEpisodeUserStatus={setShowEpisodeUserStatus}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={showUserInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</details>\r\n\t\t\t\t\t\t\t\t<div hidden={!(chartData.length > 0)}>\r\n\t\t\t\t\t\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={200}>\r\n\t\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<XAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={chartData.length * 30}>\r\n\t\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }} layout='vertical'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<YAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} type='category' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<XAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} type='number' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='movieFriendsBlock' hidden={showUserInfo.friends_info.length < 1}>\r\n\t\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t\t<FriendsActivity info={showUserInfo.friends_info} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getShowRequestError(state),\r\n\tshowSeason: selectors.getContentShow(state),\r\n\tshowSeasonIsLoading: selectors.getIsLoadingContentShow(state),\r\n\tshowUserInfo: selectors.getContentShowUserInfo(state),\r\n\tshowUserInfoIsLoading: selectors.getIsLoadingContentShowUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShowSeason: (showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.requestShowSeason(showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowUserStatus: (status, showID, seasonNumber) => {\r\n\t\t\tdispatch(actions.setShowSeasonStatus(status, showID, seasonNumber));\r\n\t\t},\r\n\t\tsetShowEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\trequestShowSeasonUserInfo: (showID, seasonID) => {\r\n\t\t\tdispatch(actions.requestShowSeasonUserInfo(showID, seasonID));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowPage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"./style.css\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction EpisodePage({ requestShowEpisode, showEpisode, showEpisodeIsLoading, setEpisodeUserStatus, requestShowEpisodeUserInfo, showUserInfo, showUserInfoIsLoading, loggedIn, openLoginForm }) {\r\n\tlet history = useHistory();\r\n\tlet { show_id, season_number, episode_number } = useParams();\r\n\tconst [date, setDate] = useState(\"\");\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClear();\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShowEpisode(show_id, season_number, episode_number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, season_number, episode_number, requestShowEpisode]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowEpisodeUserInfo(show_id, season_number, episode_number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, season_number, episode_number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetClear();\r\n\t\tif (showEpisode.tmdb.air_date) {\r\n\t\t\tlet mas = showEpisode.tmdb.air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t}\r\n\r\n\t\tdocument.title = showEpisode.tmdb.show_name + \" - \" + showEpisode.tmdb.name;\r\n\t}, [showEpisode]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (showUserInfo?.review) setReview(showUserInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (showUserInfo?.score) setUserRate(showUserInfo.score);\r\n\t\t\telse setUserRate(0);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[showUserInfo]\r\n\t);\r\n\r\n\tfunction setClear() {\r\n\t\tsetDate(\"\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w1920_and_h800_multi_faces\" + showEpisode.tmdb.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showEpisodeIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='showContentPage'>\r\n\t\t\t\t\t<div className='showContentHeader'>\r\n\t\t\t\t\t\t<div className='showPosterBlock'>\r\n\t\t\t\t\t\t\t<img src={\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + showEpisode.tmdb.still_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showInfoBlock'>\r\n\t\t\t\t\t\t\t<h1 className='header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{showEpisode.tmdb.show_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + showEpisode.tmdb.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>\r\n\t\t\t\t\t\t\t\t{showEpisode.tmdb.show_original_name + \" - Season \" + showEpisode.tmdb.season_number + \" - Episode \" + showEpisode.tmdb.episode_number}{\" \"}\r\n\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={date === \"\"}>Дата выхода: {date}</p>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id + \"/season/\" + season_number}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id + \"/season/\" + season_number);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСезон: {showEpisode.tmdb.season_number}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !showUserInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={showUserInfoIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tstart={-1}\r\n\t\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />))}\r\n\t\t\t\t\t\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />))}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus({ episodes: [{ season_number: season_number, episode_number: episode_number, score: score }] }, show_id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewSeasonInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName={\"savePreviewButton\"}\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !showUserInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisodes: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tseason_number: season_number,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode_number: episode_number,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treview: document.getElementById(\"reviewSeasonInput\").value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshow_id\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<ScoreBlock score={showEpisode.tmdb.vote_average * 10} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='showContentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: showEpisode.tmdb.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='movieFriendsBlock' hidden={showUserInfo.friends_info.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={showUserInfo.friends_info} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\trequestError: selectors.getShowRequestError(state),\r\n\tshowEpisode: selectors.getContentShow(state),\r\n\tshowEpisodeIsLoading: selectors.getIsLoadingContentShow(state),\r\n\tshowUserInfo: selectors.getContentShowUserInfo(state),\r\n\tshowUserInfoIsLoading: selectors.getIsLoadingContentShowUserInfo(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestShowEpisode: (showID, seasonNumber, episodeNumber) => {\r\n\t\t\tdispatch(actions.requestShowEpisode(showID, seasonNumber, episodeNumber));\r\n\t\t},\r\n\t\tsetEpisodeUserStatus: (status, showID) => {\r\n\t\t\tdispatch(actions.setShowEpisodesStatus(status, showID));\r\n\t\t},\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\trequestShowEpisodeUserInfo: (showID, seasonID, episodeID) => {\r\n\t\t\tdispatch(actions.requestShowEpisodeUserInfo(showID, seasonID, episodeID));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EpisodePage);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardGame({ game }) {\r\n\tlet history = useHistory();\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (game.released) {\r\n\t\t\tlet mas = game.released.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [game]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardGame'>\r\n\t\t\t<div className='searchCardGameImage' style={{ backgroundImage: `url(${game.background_image})` }}>\r\n\t\t\t\t{\" \"}\r\n\t\t\t</div>\r\n\t\t\t<div className='searchCardGameText'>\r\n\t\t\t\t<div className='searchCardGameName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.slug}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + game.slug);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={game.name}>\r\n\t\t\t\t\t\t<h4>{game.name}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n//onMouseDown={mouseDownHandler}\r\n\r\nexport default CardGame;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardMovie({ movie }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (movie.release_date) {\r\n\t\t\tlet mas = movie.release_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [movie]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardMovie'>\r\n\t\t\t<div className='searchCardMovieImage' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + movie.poster_path})` }}>\r\n\t\t\t\t{\" \"}\r\n\t\t\t</div>\r\n\t\t\t<div className='searchCardMovieText'>\r\n\t\t\t\t<div className='searchCardMovieName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={movie.title}>\r\n\t\t\t\t\t\t<h4>{movie.title}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CardMovie;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardShow({ show }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (show.first_air_date) {\r\n\t\t\tlet mas = show.first_air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [show]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCardMovie'>\r\n\t\t\t<div className='searchCardMovieImage' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + show.poster_path})` }}>\r\n\t\t\t\t{\" \"}\r\n\t\t\t</div>\r\n\t\t\t<div className='searchCardMovieText'>\r\n\t\t\t\t<div className='searchCardMovieName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + show.id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={show.name}>\r\n\t\t\t\t\t\t<h4>{show.name}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CardShow;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardUser({ user }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<a\r\n\t\t\thref={window.location.origin + \"/user/\" + user.id}\r\n\t\t\tonClick={(e) => {\r\n\t\t\t\thistory.push(\"/user/\" + user.id);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}}>\r\n\t\t\t<div className='cardUser'>\r\n\t\t\t\t<div className='cardUserImage' style={{ backgroundImage: `url(${\"http://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }}>\r\n\t\t\t\t\t{\" \"}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='cardUserText'>\r\n\t\t\t\t\t<h4>{user.username}</h4>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</a>\r\n\t);\r\n}\r\n\r\nexport default CardUser;\r\n","import React, { useState } from \"react\";\r\nimport \"./style.css\";\r\n\r\nfunction CategoriesTab({ categories, activeColor, onChangeCategory }) {\r\n\tconst [activeCategory, setActiveCategory] = useState(categories[0]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{categories.map((category) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={\"categoriesTab\"}\r\n\t\t\t\t\tkey={category}\r\n\t\t\t\t\tstyle={{ color: activeCategory === category ? activeColor : \"rgb(207, 207, 207)\" }}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\tonChangeCategory(category);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{category}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t\t<hr style={{ backgroundColor: activeColor, height: 2.5, marginTop: \"0px\", marginBottom: \"10px\" }} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CategoriesTab;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { MDBRow, MDBCol, MDBContainer, MDBIcon, MDBFormInline } from \"mdbreact\";\r\nimport \"./style.css\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport CardGame from \"./CardGame\";\r\nimport CardMovie from \"./CardMovie\";\r\nimport CardShow from \"./CardShow\";\r\nimport CardUser from \"../Common/CardUser\";\r\nimport CategoriesTab from \"../Common/CategoriesTab\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction SearchPage({ loggedIn, gamesIsLoading, moviesIsLoading, showsIsLoading, usersIsLoading, searchGame, games, searchMovie, movies, searchShow, shows, searchUsers, users }) {\r\n\tlet history = useHistory();\r\n\tlet { query } = useParams();\r\n\tconst [queryText, setQueryText] = useState(\"\");\r\n\tconst [gamesCards, setGamesCards] = useState(\"\");\r\n\tconst [moviesCards, setMoviesCards] = useState(\"\");\r\n\tconst [showsCards, setShowsCards] = useState(\"\");\r\n\tconst [usersCards, setUsersCards] = useState(\"\");\r\n\tconst [gamesPage, setGamesPage] = useState(1);\r\n\tconst [moviesPage, setMoviesPage] = useState(1);\r\n\tconst [showsPage, setShowsPage] = useState(1);\r\n\r\n\tconst [activeCategory, setActiveCategory] = useState(\"Всё\");\r\n\r\n\tuseEffect(() => {\r\n\t\tsearchGame(query, 1, 6);\r\n\t\tsearchMovie(query, 1);\r\n\t\tsearchShow(query, 1);\r\n\t\tsearchUsers(query);\r\n\t\tsetQueryText(query);\r\n\t\tdocument.title = \"Поиск\";\r\n\t\tsetGamesPage(1);\r\n\t\tsetMoviesPage(1);\r\n\t\tsetShowsPage(1);\r\n\t}, [query, searchGame, searchMovie, searchUsers, searchShow]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetGamesCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{games.map((game) => (\r\n\t\t\t\t\t<CardGame game={game} key={game.id} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [games]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetMoviesCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{movies.map((movie) => (\r\n\t\t\t\t\t<CardMovie movie={movie} key={movie.id} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [movies]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetShowsCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{shows.map((show) => (\r\n\t\t\t\t\t<CardShow show={show} key={show.id} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [shows]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUsersCards(\r\n\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t{users.map((user) => (\r\n\t\t\t\t\t<CardUser user={user} key={user.username} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}, [users]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg searchBG' />\r\n\t\t\t<MDBContainer>\r\n\t\t\t\t<MDBRow>\r\n\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t<MDBCol className='searchPage'>\r\n\t\t\t\t\t\t<h1>Поиск</h1>\r\n\t\t\t\t\t\t<MDBFormInline\r\n\t\t\t\t\t\t\tclassName='md-form'\r\n\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput2\").value);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='search' />\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tclassName='form-control form-control-sm ml-3 w-50'\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tplaceholder='Найти'\r\n\t\t\t\t\t\t\t\taria-label='Search'\r\n\t\t\t\t\t\t\t\tid='searchInput2'\r\n\t\t\t\t\t\t\t\tvalue={queryText}\r\n\t\t\t\t\t\t\t\tonChange={(event) => setQueryText(event.target.value)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</MDBFormInline>\r\n\r\n\t\t\t\t\t\t<h1>Результаты поиска</h1>\r\n\t\t\t\t\t\t<CategoriesTab\r\n\t\t\t\t\t\t\tcategories={[\"Всё\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Пользователи\"]}\r\n\t\t\t\t\t\t\tactiveColor='#7654de'\r\n\t\t\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={gamesIsLoading} spinner text='Ищем игры...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Игры\"}>\r\n\t\t\t\t\t\t\t\t<h3>Игры</h3>\r\n\t\t\t\t\t\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={gamesPage === 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchGame(query, gamesPage - 1, 6);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGamesPage(gamesPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&lt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{gamesCards}\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={games.length < 6}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchGame(query, gamesPage + 1, 6);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGamesPage(gamesPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&gt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={moviesIsLoading} spinner text='Ищем фильмы...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Фильмы\"}>\r\n\t\t\t\t\t\t\t\t<h3>Фильмы</h3>\r\n\t\t\t\t\t\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={moviesPage === 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchMovie(query, moviesPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMoviesPage(moviesPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&lt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{moviesCards}\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={movies.length < 20}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchMovie(query, moviesPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMoviesPage(moviesPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&gt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={showsIsLoading} spinner text='Ищем сериалы...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Сериалы\"}>\r\n\t\t\t\t\t\t\t\t<h3>Сериалы</h3>\r\n\t\t\t\t\t\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={showsPage === 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchShow(query, showsPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowsPage(showsPage - 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&lt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{showsCards}\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={shows.length < 20}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsearchShow(query, showsPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowsPage(showsPage + 1);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t&gt;\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={usersIsLoading} spinner text='Ищем пользователей...'>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Всё\" && activeCategory !== \"Пользователи\"}>\r\n\t\t\t\t\t\t\t\t<h3>Пользователи</h3>\r\n\t\t\t\t\t\t\t\t{usersCards}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t</MDBRow>\r\n\t\t\t</MDBContainer>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tgamesIsLoading: selectors.getIsLoadingSearchGames(state),\r\n\tmoviesIsLoading: selectors.getIsLoadingSearchMovies(state),\r\n\tshowsIsLoading: selectors.getIsLoadingSearchShows(state),\r\n\tusersIsLoading: selectors.getIsLoadingSearchUsers(state),\r\n\tgames: selectors.getSearchContentGames(state),\r\n\tmovies: selectors.getSearchContentMovies(state),\r\n\tshows: selectors.getSearchContentShows(state),\r\n\tusers: selectors.getSearchContentUsers(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tsearchGame: (query, page, gamesCount) => {\r\n\t\t\tdispatch(actions.searchGames(query, page, gamesCount));\r\n\t\t},\r\n\t\tsearchMovie: (query, page) => {\r\n\t\t\tdispatch(actions.searchMovies(query, page));\r\n\t\t},\r\n\t\tsearchShow: (query, page) => {\r\n\t\t\tdispatch(actions.searchShows(query, page));\r\n\t\t},\r\n\t\tsearchUsers: (query) => {\r\n\t\t\tdispatch(actions.searchUsers(query));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchPage);\r\n","import React, { useState } from \"react\";\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/actions\";\r\nimport * as selectors from \"../../store/reducers\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nfunction LoginForm({ isOpen, closeForm, logIn, authError, openResetPasswordForm }) {\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={isOpen} toggle={closeForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='loginBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\tlogIn(login, password);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Войти</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!authError}>\r\n\t\t\t\t\t\t\t\t\tНеверный логин или пароль!\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tЛогин\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='form-control' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПароль\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='form-control' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='confirmButton'>\r\n\t\t\t\t\t\t\t\t\t\tВойти\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\tclassName='passwordResetLabel'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tcloseForm();\r\n\t\t\t\t\t\t\t\t\t\t\topenResetPasswordForm();\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tВосстановить пароль\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisOpen: selectors.getLoginForm(state),\r\n\tauthError: selectors.getAuthError(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tcloseForm: () => {\r\n\t\t\tdispatch(actions.closeLoginForm());\r\n\t\t},\r\n\t\tlogIn: (login, password) => {\r\n\t\t\tdispatch(actions.tryAuth(login, password));\r\n\t\t},\r\n\t\topenResetPasswordForm: () => {\r\n\t\t\tdispatch(actions.openResetPasswordForm());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\r\n","import React, { useState } from \"react\";\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/actions\";\r\nimport * as selectors from \"../../store/reducers\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nfunction RegistrationForm({ isOpen, closeForm, registrate, registrateArror, user }) {\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={isOpen} toggle={closeForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='registrationBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!registrateArror}>\r\n\t\t\t\t\t\t\t\t\tОшибка регистрации!\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success' hidden={user.email === \"\"}>\r\n\t\t\t\t\t\t\t\t\t{user.login}, добро пожаловать! Осталось только подтвердить вашу почту\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<h4>Регистрация</h4>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput'>Никнейм</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='form-control' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput'>Электронная почта</label>\r\n\t\t\t\t\t\t\t\t<input type='email' id='emailInput' className='form-control' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput'>Пароль</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='form-control' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordConfirmInput'>Подтверждение пароля</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\t\tid='passwordConfirmInput'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tstyle={passwordConfirm === password ? { outlineColor: \"green\" } : { outlineColor: \"red\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={passwordConfirm}\r\n\t\t\t\t\t\t\t\t\tonChange={(event) => setPasswordConfirm(event.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn\r\n\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\tclassName='confirmButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={password !== passwordConfirm || login.length < 1 || email.length < 1 || password.length < 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => registrate(login, email, password)}>\r\n\t\t\t\t\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisOpen: selectors.getRegistrateForm(state),\r\n\tregistrateArror: selectors.getRegistrateError(state),\r\n\tuser: selectors.getUser(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tcloseForm: () => {\r\n\t\t\tdispatch(actions.closeRegistrateForm());\r\n\t\t},\r\n\t\tregistrate: (login, email, password) => {\r\n\t\t\tdispatch(actions.registrationRequest(login, email, password));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RegistrationForm);\r\n","import React, { useState } from \"react\";\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/actions\";\r\nimport * as selectors from \"../../store/reducers\";\r\n\r\n/**\r\n * КОмпонент формы сброса пароля\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nfunction ResetPasswordForm({ isOpen, closeForm, resetPassword, resetPasswordError }) {\r\n\tconst [email, setEmail] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={isOpen} toggle={closeForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='loginBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\tresetPassword(email);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Сбросить пароль</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!resetPasswordError | (resetPasswordError === \"ok\")}>\r\n\t\t\t\t\t\t\t\t\t{resetPasswordError}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success' hidden={resetPasswordError !== \"ok\"}>\r\n\t\t\t\t\t\t\t\t\tНа вашу почту отправлено письмо\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПочта\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='emailInput' className='form-control' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='confirmButton'>\r\n\t\t\t\t\t\t\t\t\t\tСбросить\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisOpen: selectors.getResetPasswordForm(state),\r\n\tresetPasswordError: selectors.getResetPasswordError(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tcloseForm: () => {\r\n\t\t\tdispatch(actions.closeResetPasswordForm());\r\n\t\t},\r\n\t\tresetPassword: (email) => {\r\n\t\t\tdispatch(actions.resetPassword(email));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResetPasswordForm);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../store/reducers\";\r\nimport * as actions from \"../store/actions\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ConfirmPage({ confirmEmailRequest }) {\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet uid64 = params.get(\"uid64\");\r\n\tlet token = params.get(\"token\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tconfirmEmailRequest(uid64, token);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[]\r\n\t);\r\n\r\n\treturn <div className='bg'></div>;\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tconfirmEmailRequest: (uid64, token) => {\r\n\t\t\tdispatch(actions.confirmEmailRequest(uid64, token));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmPage);\r\n","import React, { useState } from \"react\";\r\nimport \"./style.css\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../store/actions\";\r\nimport * as selectors from \"../store/reducers\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction ConfirmPasswordPage({ confirmPassword, confirmPasswordError }) {\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet token = params.get(\"token\");\r\n\r\n\treturn (\r\n\t\t<div className='bg'>\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tconfirmPassword(token, password);\r\n\t\t\t\t}}\r\n\t\t\t\tclassName='confirmPasswordForm'>\r\n\t\t\t\t<p className='h4'>Обновить пароль</p>\r\n\t\t\t\t<p className='note note-danger' hidden={!confirmPasswordError | (confirmPasswordError === \"ok\")}>\r\n\t\t\t\t\t{confirmPasswordError}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='note note-success' hidden={confirmPasswordError !== \"ok\"}>\r\n\t\t\t\t\tПароль обновлен!\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<label htmlFor='passwordInput' className='confirmPasswordLabel'>\r\n\t\t\t\t\tНовый пароль\r\n\t\t\t\t</label>\r\n\t\t\t\t<br />\r\n\t\t\t\t<input type='password' id='passwordInput' className='confirmPasswordInput' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<label htmlFor='passwordConfurmInput' className='confirmPasswordLabel'>\r\n\t\t\t\t\tПодтверждение пароля\r\n\t\t\t\t</label>\r\n\t\t\t\t<br />\r\n\t\t\t\t<input type='password' id='passwordConfurmInput' className='confirmPasswordInput' value={passwordConfirm} onChange={(event) => setPasswordConfirm(event.target.value)} />\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<button type='submit' className='confirmPasswordButton' disabled={(password !== passwordConfirm) | (password.length < 1)}>\r\n\t\t\t\t\tОбновить\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tconfirmPasswordError: selectors.getConfirmPasswordError(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tconfirmPassword: (token, password) => {\r\n\t\t\tdispatch(actions.confirmPassword(token, password));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmPasswordPage);\r\n","export const COLORS = [\r\n\t\"rgb(43,206,72)\",\r\n\t\"rgb(240,163,255)\",\r\n\t\"rgb(0,117,220)\",\r\n\t\"rgb(153,63,0)\",\r\n\t\"rgb(76,0,92)\",\r\n\t\"rgb(225,225,225)\",\r\n\t\"rgb(0,92,49)\",\r\n\t\"rgb(255,204,153)\",\r\n\t\"rgb(128,128,128)\",\r\n\t\"rgb(148,255,181)\",\r\n\t\"rgb(143,124,0)\",\r\n\t\"rgb(157,204,0)\",\r\n\t\"rgb(194,0,136)\",\r\n\t\"rgb(0,51,128)\",\r\n\t\"rgb(255,164,5)\",\r\n\t\"rgb(255,168,187)\",\r\n\t\"rgb(66,102,0)\",\r\n\t\"rgb(255,0,16)\",\r\n\t\"rgb(94,241,242)\",\r\n\t\"rgb(0,153,143)\",\r\n\t\"rgb(224,255,102)\",\r\n\t\"rgb(116,10,255)\",\r\n\t\"rgb(153,0,0)\",\r\n\t\"rgb(255,255,128)\",\r\n\t\"rgb(255,255,0)\",\r\n\t\"rgb(255,80,)\",\r\n];\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction GameBlock({ games, stats }) {\r\n\tconst [gameChartData, setGameChartData] = useState([]);\r\n\tconst gameColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Время прохождения\",\r\n\t\t\tfield: \"spent_time\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t];\r\n\r\n\tconst [gameTableData, setGameTableData] = useState({\r\n\t\tcolumns: gameColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (games) {\r\n\t\t\t\tsetGameTableData({\r\n\t\t\t\t\tcolumns: gameColumns,\r\n\t\t\t\t\trows: games.map((game) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/game/\" + game.game.rawg_slug}>\r\n\t\t\t\t\t\t\t\t\t{game.game.rawg_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: game.game.rawg_name,\r\n\t\t\t\t\t\t\tstatus: game.status,\r\n\t\t\t\t\t\t\tscore: game.score,\r\n\t\t\t\t\t\t\treview: game.review,\r\n\t\t\t\t\t\t\tspent_time: parseFloat(game.spent_time),\r\n\t\t\t\t\t\t\t/*clickEvent: (e) => {\r\n                                    //window.open('/game/' + game.game.rawg_slug);\r\n                                    history.push('/game/' + game.game.rawg_slug);\r\n                                }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[games]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetGameChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetGameChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tИгр сыграно: {stats?.count}, часов наиграно: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={gameTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать игр на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tclassName='dataTable'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\t\t\t<div hidden={gameChartData.length < 1}>\r\n\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t<BarChart width={Math.min(gameChartData.length * 100, document.body.clientWidth)} height={300} data={gameChartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{gameChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={gameChartData.length * 40} data={gameChartData} margin={{ top: 5, right: 0, left: 25, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{gameChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default GameBlock;\r\n","import React from \"react\";\r\n\r\nimport CardUser from \"../Common/CardUser\";\r\n\r\nfunction FriendBlock({ users }) {\r\n\treturn (\r\n\t\t<div className='friendsBlock'>\r\n\t\t\t{users.map((user) => (\r\n\t\t\t\t<CardUser user={user} key={user.id} />\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FriendBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction MovieBlock({ movies, stats }) {\r\n\tconst [movieChartData, setMovieChartData] = useState([]);\r\n\tconst movieColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t];\r\n\r\n\tconst [movieTableData, setMovieTableData] = useState({\r\n\t\tcolumns: movieColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (movies) {\r\n\t\t\t\tsetMovieTableData({\r\n\t\t\t\t\tcolumns: movieColumns,\r\n\t\t\t\t\trows: movies.map((movie) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/movie/\" + movie.movie.tmdb_id}>\r\n\t\t\t\t\t\t\t\t\t{movie.movie.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: movie.movie.tmdb_name,\r\n\t\t\t\t\t\t\tstatus: movie.status,\r\n\t\t\t\t\t\t\tscore: movie.score,\r\n\t\t\t\t\t\t\treview: movie.review,\r\n\t\t\t\t\t\t\t/*clickEvent: (e) => {\r\n                                //window.open('/game/' + game.game.rawg_slug);\r\n                                history.push('/movie/' + movie.movie.tmdb_id)\r\n                            }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[movies]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetMovieChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetMovieChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tФильмов посмотрено: {stats?.count}, часов просмотра: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={movieTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать фильмов на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\r\n\t\t\t<div hidden={movieChartData.length < 1}>\r\n\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t<BarChart width={Math.min(movieChartData.length * 100, document.body.clientWidth)} height={300} data={movieChartData} margin={{ top: 5, right: 10, left: 10, bottom: 15 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{movieChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={movieChartData.length * 40} data={movieChartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{movieChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default MovieBlock;\r\n","import React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./style.css\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction LogRow({ log, showUsername }) {\r\n\tlet history = useHistory();\r\n\r\n\tuseEffect(() => {}, [log]);\r\n\r\n\tfunction translateActionType(action, actionResult) {\r\n\t\tswitch (action) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tswitch (actionResult) {\r\n\t\t\t\t\tcase \"0\":\r\n\t\t\t\t\t\treturn \"посмотрел(а)\";\r\n\t\t\t\t\tcase \"-1\":\r\n\t\t\t\t\t\treturn \"не смотрела(а)\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"оценил(а)\";\r\n\t\t\t\t}\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn \"изменил(а) статус\";\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn \"оставил(а) отзыв на\";\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn \"изменил(а) время прохождения\";\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\tif (actionResult > 0) return \"посмотрел(а) \" + actionResult + \" серий\";\r\n\t\t\t\telse return \"не смотрел(а) \" + actionResult * -1 + \" серий\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\tif (actionResult === \"True\") return \"подписан(а) на\";\r\n\t\t\t\telse return \"отписан(а) от\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn action;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction translateType(type, actionType) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"игру\";\r\n\t\t\t\telse return \"игры\";\r\n\t\t\tcase \"movie\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"фильм\";\r\n\t\t\t\telse return \"фильма\";\r\n\t\t\tcase \"show\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"сериал\";\r\n\t\t\t\telse return \"сериала\";\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn \"пользователя\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn type;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction nameToLink(name, type, id) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"movie\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"show\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t[s{id.season_number}e{id.episode_number}] серию\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/user/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/user/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tdefault:\r\n\t\t\t\treturn name;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction userToLink(username, userID) {\r\n\t\treturn (\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + \"/user/\" + userID}\r\n\t\t\t\tclassName='logLink'\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/user/\" + userID);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}>\r\n\t\t\t\t{username}\r\n\t\t\t</a>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction actionResultToStr(actionType, actionResult, target) {\r\n\t\tswitch (actionType) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tif ((target !== \"episode\") | (actionResult > 0))\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\tinitialRating={actionResult}\r\n\t\t\t\t\t\t\treadonly={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\telse return \"\";\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn actionResult + \" \" + intToHours(actionResult);\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn actionResult;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleTimeString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='logRow'>\r\n\t\t\t{parseDate(log.created)}&thinsp;\r\n\t\t\t{showUsername ? userToLink(log.user, log.user_id) : \"\"}&thinsp;\r\n\t\t\t{translateActionType(log.action_type, log.action_result)}&thinsp;\r\n\t\t\t{translateType(log.type, log.action_type)}&thinsp;\r\n\t\t\t{nameToLink(log.target, log.type, log.target_id)}\r\n\t\t\t{(log.type === \"user\") | (log.action_type === \"episodes\") | (log.action_result === \"0\") | (log.action_result === \"-1\") ? \"\" : \":\"}&thinsp;\r\n\t\t\t{actionResultToStr(log.action_type, log.action_result, log.type)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default LogRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport \"./style.css\";\r\nimport LogRow from \"./LogRow\";\r\n\r\nfunction UserLogBlock({ logs, showUsername, onChangePage }) {\r\n\tconst [logsByDay, setLogsByDay] = useState([]);\r\n\tconst [currentPage, setCurrentPage] = useState(1);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetLogsByDay(groupLogsByDay(logs.log));\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[logs]\r\n\t);\r\n\r\n\tfunction groupLogsByDay(logs) {\r\n\t\tlet newLogs = [];\r\n\r\n\t\tfor (let i in logs) {\r\n\t\t\tlet date = new Date(logs[i].created);\r\n\r\n\t\t\tif (newLogs.length === 0)\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t\telse if (date.getDay() === newLogs[newLogs.length - 1].date.getDay()) newLogs[newLogs.length - 1].logs.push(logs[i]);\r\n\t\t\telse\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn newLogs;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{logsByDay.map((dayLog) => (\r\n\t\t\t\t<div key={dayLog.logs[0].id} className='logDay'>\r\n\t\t\t\t\t<h5 className='logDate'>{dayLog.date.toLocaleDateString(\"ru-RU\")}</h5>\r\n\t\t\t\t\t<div className='logRows'>\r\n\t\t\t\t\t\t{dayLog.logs.map((log) => (\r\n\t\t\t\t\t\t\t<LogRow log={log} showUsername={showUsername} key={log.id + log.created} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t\t<button\r\n\t\t\t\tclassName='logPaginationButton'\r\n\t\t\t\tdisabled={!logs.has_next_page}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (logs.has_next_page) {\r\n\t\t\t\t\t\tonChangePage(currentPage + 1);\r\n\t\t\t\t\t\tsetCurrentPage(currentPage + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<MDBIcon icon='arrow-down' />\r\n\t\t\t</button>\r\n\r\n\t\t\t<button\r\n\t\t\t\tclassName='logPaginationButton'\r\n\t\t\t\tdisabled={currentPage === 1}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (currentPage > 1) {\r\n\t\t\t\t\t\tonChangePage(currentPage - 1);\r\n\t\t\t\t\t\tsetCurrentPage(currentPage - 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<MDBIcon icon='arrow-up' />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserLogBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nfunction ShowBlock({ shows, stats }) {\r\n\tconst [showChartData, setShowChartData] = useState([]);\r\n\r\n\tconst showColumns = [\r\n\t\t{\r\n\t\t\tlabel: \"Название\",\r\n\t\t\tfield: \"name\",\r\n\t\t\tsort: \"disabled\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Статус\",\r\n\t\t\tfield: \"status\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Оценка\",\r\n\t\t\tfield: \"score\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Отзыв\",\r\n\t\t\tfield: \"review\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Часов просмотра\",\r\n\t\t\tfield: \"spentTime\",\r\n\t\t\tsort: \"asc\",\r\n\t\t},\r\n\t];\r\n\r\n\tconst [showTableData, setShowTableData] = useState({\r\n\t\tcolumns: showColumns,\r\n\t\trows: [],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (shows) {\r\n\t\t\t\tsetShowTableData({\r\n\t\t\t\t\tcolumns: showColumns,\r\n\t\t\t\t\trows: shows.map((show) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<a className='dataTable' href={window.location.origin + \"/show/\" + show.show.tmdb_id}>\r\n\t\t\t\t\t\t\t\t\t{show.show.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname2: show.show.tmdb_name,\r\n\t\t\t\t\t\t\tstatus: show.status,\r\n\t\t\t\t\t\t\tscore: show.score,\r\n\t\t\t\t\t\t\treview: show.review,\r\n\t\t\t\t\t\t\tspentTime: show.spent_time,\r\n\t\t\t\t\t\t\t/*clickEvent: (e) => {\r\n                                //window.open('/game/' + game.game.rawg_slug);\r\n                                history.push('/movie/' + movie.movie.tmdb_id)\r\n                            }*/\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[shows]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetShowChartData([]);\r\n\t\t\tif (stats) {\r\n\t\t\t\tif (stats?.genres) {\r\n\t\t\t\t\tlet newData = [];\r\n\t\t\t\t\tlet counter = 0;\r\n\t\t\t\t\tfor (let genre in stats.genres)\r\n\t\t\t\t\t\tif (stats.genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\t\t\tnewData.push({ name: stats.genres[genre].name, Процент: stats.genres[genre].spent_time_percent });\r\n\t\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tnewData = newData.sort((a, b) => (a[\"Процент\"] > b[\"Процент\"] ? -1 : 1));\r\n\t\t\t\t\tsetShowChartData(newData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>\r\n\t\t\t\tСерий сериалов посмотрено: {stats?.count}, часов просмотра: {stats?.total_spent_time}\r\n\t\t\t</p>\r\n\t\t\t<MDBDataTable\r\n\t\t\t\tstriped\r\n\t\t\t\tbordered\r\n\t\t\t\tsmall\r\n\t\t\t\tdata={showTableData}\r\n\t\t\t\tinfo={false}\r\n\t\t\t\tbarReverse={true}\r\n\t\t\t\tnoBottomColumns={true}\r\n\t\t\t\tnoRecordsFoundLabel='Ничего не найдено!'\r\n\t\t\t\tpaginationLabel={[\"Предыдущая\", \"Следующая\"]}\r\n\t\t\t\tentriesLabel='Показывать сериалов на странице'\r\n\t\t\t\tsearchLabel='Поиск'\r\n\t\t\t\tresponsive={true}\r\n\t\t\t/>\r\n\t\t\t<div hidden={showChartData.length < 1}>\r\n\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t<BarChart width={Math.min(showChartData.length * 100, document.body.clientWidth)} height={300} data={showChartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\r\n\t\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{showChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BarChart width={document.body.clientWidth - 25} height={showChartData.length * 40} data={showChartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t\t{showChartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t</BarChart>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ShowBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { MDBRow, MDBCol, MDBContainer } from \"mdbreact\";\r\nimport { PieChart, Pie, Legend, Cell, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\nimport \"./style.css\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../../store/reducers\";\r\nimport * as actions from \"../../store/actions\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport GameBlock from \"./GameBlock\";\r\nimport FriendBlock from \"./FriendBlock\";\r\nimport MovieBlock from \"./MovieBlock\";\r\nimport UserLogBlock from \"./UserLogBlock\";\r\nimport CategoriesTab from \"../Common/CategoriesTab\";\r\nimport ShowBlock from \"./ShowBlock\";\r\n\r\nconst LOG_ROWS_COUNT = 20;\r\n\r\n//const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#FA8542'];\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction UserPage({\r\n\tloggedIn,\r\n\tuserInfo,\r\n\tuserIsLoading,\r\n\tgetUserInfo,\r\n\tcurrentUserInfo,\r\n\tsetUserStatus,\r\n\tgetUserLogs,\r\n\tuserLogs,\r\n\tuserLogsIsLoading,\r\n\tgetUserFriendsLogs,\r\n\tuserFriendsLogs,\r\n\tuserFriendsLogsIsLoading,\r\n}) {\r\n\tlet { userID } = useParams();\r\n\tconst [activeCategory, setActiveCategory] = useState(\"Профиль\");\r\n\tconst [chartData, setChartData] = useState([]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tgetUserInfo(userID);\r\n\t\t\tgetUserLogs(userID, 1, LOG_ROWS_COUNT);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userID, getUserInfo, getUserLogs, getUserFriendsLogs]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) getUserFriendsLogs(userID, 1, LOG_ROWS_COUNT);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, userID]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tdocument.title = \"Профиль \" + userInfo.username;\r\n\t\tif (userInfo.stats.games) {\r\n\t\t\tlet newData = [];\r\n\t\t\tif (userInfo.stats.games.total_spent_time > 0) newData.push({ name: \"Часов в играх\", value: userInfo.stats.games.total_spent_time });\r\n\t\t\tif (userInfo.stats.movies.total_spent_time > 0) newData.push({ name: \"Часов в фильмах\", value: userInfo.stats.movies.total_spent_time });\r\n\t\t\tif (userInfo.stats.episodes.total_spent_time > 0) newData.push({ name: \"Часов в сериалах\", value: userInfo.stats.episodes.total_spent_time });\r\n\t\t\tsetChartData(newData);\r\n\t\t}\r\n\t}, [userInfo]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg searchBG' />\r\n\t\t\t<LoadingOverlay active={userIsLoading} spinner text='Загрузка...'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t\t<MDBCol className='userPage'>\r\n\t\t\t\t\t\t\t<h1>Информация о пользователе {userInfo.username}</h1>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\thidden={currentUserInfo.username === userInfo.username}\r\n\t\t\t\t\t\t\t\tclassName='addFriendButton'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetUserStatus({ is_following: userInfo.is_followed ? false : true }, userInfo.id);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{userInfo.is_followed ? \"Отписаться\" : \"Подписаться\"}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<CategoriesTab\r\n\t\t\t\t\t\t\t\tcategories={[\"Профиль\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Друзья\"]}\r\n\t\t\t\t\t\t\t\tactiveColor='#7654de'\r\n\t\t\t\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Профиль\"}>\r\n\t\t\t\t\t\t\t\t<h4>Моя активность: </h4>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userLogsIsLoading} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<div hidden={chartData.length < 1}>\r\n\t\t\t\t\t\t\t\t\t\t<PieChart width={350} height={250} hidden={chartData.length < 1}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Pie dataKey='value' data={chartData} cx='50%' cy='50%' outerRadius={80} fill='#8884d8' labelLine={true} label minAngle={5}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t</Pie>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Legend verticalAlign='bottom' horizontalAlign='center' />\r\n\t\t\t\t\t\t\t\t\t\t</PieChart>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<UserLogBlock logs={userLogs} onChangePage={(pageNumber) => getUserLogs(userID, pageNumber, LOG_ROWS_COUNT)} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Игры\"}>\r\n\t\t\t\t\t\t\t\t<GameBlock games={userInfo.games} stats={userInfo.stats.games} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Фильмы\"}>\r\n\t\t\t\t\t\t\t\t<MovieBlock movies={userInfo.movies} stats={userInfo.stats.movies} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Сериалы\"}>\r\n\t\t\t\t\t\t\t\t<ShowBlock shows={userInfo.shows} stats={userInfo.stats.episodes} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={activeCategory !== \"Друзья\"}>\r\n\t\t\t\t\t\t\t\t<FriendBlock users={userInfo.followed_users ? userInfo.followed_users : []} />\r\n\t\t\t\t\t\t\t\t<h4>Активность друзей: </h4>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userFriendsLogsIsLoading} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<UserLogBlock logs={userFriendsLogs} onChangePage={(pageNumber) => getUserFriendsLogs(userID, pageNumber, LOG_ROWS_COUNT)} showUsername={true} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t<MDBCol md='0.5'></MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tuserIsLoading: selectors.getIsLoadingUserPageContent(state),\r\n\tuserInfo: selectors.getUserPageContent(state),\r\n\tuserLogs: selectors.getUserPageLogs(state),\r\n\tuserLogsIsLoading: selectors.getIsLoadingUserPageLogs(state),\r\n\tuserFriendsLogs: selectors.getUserPageFriendsLogs(state),\r\n\tuserFriendsLogsIsLoading: selectors.getIsLoadingUserPageFriendsLogs(state),\r\n\tcurrentUserInfo: selectors.getUser(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\topenLoginForm: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tgetUserInfo: (user_id) => {\r\n\t\t\tdispatch(actions.requestUserPageContent(user_id));\r\n\t\t},\r\n\t\tsetUserStatus: (is_following, userID) => {\r\n\t\t\tdispatch(actions.setUserStatus(is_following, userID));\r\n\t\t},\r\n\t\tgetUserLogs: (userID, page, resultsOnPage) => {\r\n\t\t\tdispatch(actions.requestUserPageLogs(userID, page, resultsOnPage));\r\n\t\t},\r\n\t\tgetUserFriendsLogs: (userID, page, resultsOnPage) => {\r\n\t\t\tdispatch(actions.requestUserPageFriendsLogs(userID, page, resultsOnPage));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserPage);\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { MDBNavbar, MDBNavItem, MDBNavbarBrand, MDBNavbarNav, MDBNavLink, MDBIcon, MDBFormInline, MDBDropdown, MDBDropdownItem, MDBDropdownMenu, MDBDropdownToggle } from \"mdbreact\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as selectors from \"../store/reducers\";\r\nimport * as actions from \"../store/actions\";\r\n\r\nfunction Navbar({ loggedIn, onLoginClick, onLogoutClick, onRegistrationClick, user }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<MDBNavbar style={{ backgroundColor: \"#4527a0\" }} dark expand='md' fixed='top'>\r\n\t\t\t<MDBNavbarBrand\r\n\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\thistory.push(\"/\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}}>\r\n\t\t\t\t<strong className='white-text' style={{ cursor: \"pointer\" }}>\r\n\t\t\t\t\tInterests\r\n\t\t\t\t</strong>\r\n\t\t\t</MDBNavbarBrand>\r\n\t\t\t<MDBNavbarNav left></MDBNavbarNav>\r\n\r\n\t\t\t<MDBNavbarNav right>\r\n\t\t\t\t<MDBNavItem>\r\n\t\t\t\t\t<MDBFormInline\r\n\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput\").value);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<div className='md-form my-0'>\r\n\t\t\t\t\t\t\t<input className='form-control mr-sm-2' type='text' placeholder='Найти' aria-label='Найти' id='searchInput' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</MDBFormInline>\r\n\t\t\t\t</MDBNavItem>\r\n\r\n\t\t\t\t<MDBNavItem className='font-weight-bold' hidden={loggedIn}>\r\n\t\t\t\t\t<MDBNavLink to='#' onClick={onLoginClick}>\r\n\t\t\t\t\t\t<MDBIcon icon='sign-in-alt' /> Войти\r\n\t\t\t\t\t</MDBNavLink>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t\t<MDBNavItem className='font-weight-bold' hidden={loggedIn}>\r\n\t\t\t\t\t<MDBNavLink to='#' onClick={onRegistrationClick}>\r\n\t\t\t\t\t\t<MDBIcon icon='user-plus' /> Зарегистрироваться\r\n\t\t\t\t\t</MDBNavLink>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t\t<MDBNavItem hidden={!loggedIn} className='font-weight-bold'>\r\n\t\t\t\t\t<MDBDropdown>\r\n\t\t\t\t\t\t<MDBDropdownToggle nav caret>\r\n\t\t\t\t\t\t\t<span className='mr-2'>{user.username}</span>\r\n\t\t\t\t\t\t</MDBDropdownToggle>\r\n\t\t\t\t\t\t<MDBDropdownMenu>\r\n\t\t\t\t\t\t\t<MDBDropdownItem href={\"/user/\" + user.id}>Профиль</MDBDropdownItem>\r\n\t\t\t\t\t\t\t<MDBDropdownItem onClick={onLogoutClick}>\r\n\t\t\t\t\t\t\t\t<MDBIcon icon='sign-out-alt' /> Выйти\r\n\t\t\t\t\t\t\t</MDBDropdownItem>\r\n\t\t\t\t\t\t</MDBDropdownMenu>\r\n\t\t\t\t\t</MDBDropdown>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t</MDBNavbarNav>\r\n\t\t</MDBNavbar>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tloggedIn: selectors.getLoggedIn(state),\r\n\tuser: selectors.getUser(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonLoginClick: () => {\r\n\t\t\tdispatch(actions.openLoginForm());\r\n\t\t},\r\n\t\tonLogoutClick: () => {\r\n\t\t\tdispatch(actions.resetAuthorization());\r\n\t\t},\r\n\t\tonRegistrationClick: () => {\r\n\t\t\tdispatch(actions.openRegistrateForm());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar);\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport HomePage from \"./components/HomePage\";\r\nimport GamePage from \"./components/Game/GamePage\";\r\nimport MoviePage from \"./components/Movie/MoviePage\";\r\nimport ShowPage from \"./components/Show/ShowPage\";\r\nimport SeasonPage from \"./components/Show/SeasonPage\";\r\nimport EpisodePage from \"./components/Show/EpisodePage\";\r\nimport SearchPage from \"./components/Search/SearchPage\";\r\nimport LoginForm from \"./components/Modals/LoginForm\";\r\nimport RegistrationForm from \"./components/Modals/RegistrationForm\";\r\nimport ResetPasswordForm from \"./components/Modals/ResetPasswordForm\";\r\nimport ConfirmPage from \"./components/ConfirmPage\";\r\nimport ConfirmPasswordPage from \"./components/ConfirmPasswordPage\";\r\nimport UserPage from \"./components/UserPage/UserPage\";\r\nimport Navbar from \"./components/Navbar\";\r\n\r\nclass Routes extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Navbar />\r\n\t\t\t\t<div className='navbar'></div>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route exact path='/' component={HomePage} />\r\n\t\t\t\t\t<Route exact path='/game/:id' component={GamePage} />\r\n\t\t\t\t\t<Route exact path='/movie/:id' component={MoviePage} />\r\n\t\t\t\t\t<Route exact path='/show/:id' component={ShowPage} />\r\n\t\t\t\t\t<Route exact path='/show/:show_id/season/:number' component={SeasonPage} />\r\n\t\t\t\t\t<Route exact path='/show/:show_id/season/:season_number/episode/:episode_number' component={EpisodePage} />\r\n\t\t\t\t\t<Route exact path='/search/:query' component={SearchPage} />\r\n\t\t\t\t\t<Route exact path='/confirm/' component={ConfirmPage} />\r\n\t\t\t\t\t<Route exact path='/confirm_password/' component={ConfirmPasswordPage} />\r\n\t\t\t\t\t<Route exact path='/user/:userID' component={UserPage} />\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\trender={function () {\r\n\t\t\t\t\t\t\treturn <h1>Not Found</h1>;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Switch>\r\n\t\t\t\t<ToastContainer position='top-center' hideProgressBar newestOnTop closeOnClick />\r\n\t\t\t\t<LoginForm />\r\n\t\t\t\t<RegistrationForm />\r\n\t\t\t\t<ResetPasswordForm />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n//\r\nexport default Routes;\r\n","import React, { useEffect } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport Routes from \"./Routes\";\r\nimport * as actions from \"./store/actions\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nfunction App({ onLoad }) {\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tonLoad();\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<div className='flyout'>\r\n\t\t\t\t<main>\r\n\t\t\t\t\t<Routes />\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t</Router>\r\n\t);\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonLoad: () => {\r\n\t\t\tdispatch(actions.checkAuthorization());\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === \"localhost\" ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === \"[::1]\" ||\r\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"load\", () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA\");\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then((registration) => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\"New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { \"Service-Worker\": \"script\" },\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get(\"content-type\");\r\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\"No internet connection found. App is running in offline mode.\");\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif (\"serviceWorker\" in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then((registration) => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\nimport \"mdbreact/dist/css/mdb.css\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport {\r\n\tcreateStore,\r\n\tapplyMiddleware,\r\n\t//combineReducers,\r\n\tcompose,\r\n} from \"redux\";\r\nimport { Provider } from \"react-redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer from \"./store/reducers\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n\r\nexport default store;\r\n"],"sourceRoot":""}