{"version":3,"sources":["settings.js","services/jwtAuth.js","store/AuthStore.js","store/PagesStore.js","hooks/useWindowDimensions.js","services/userRequests.js","services/gameRequests.js","services/movieRequests.js","services/showRequests.js","store/SearchStore.js","components/Common/SearchInput.js","components/Navbar.js","components/Footer.js","components/Sidebar.js","components/Modals/LoginForm.js","components/Modals/RegistrationForm.js","components/Modals/ResetPasswordForm.js","components/HomePage.js","store/GameStore.js","components/Common/StatusButtonGroup.js","components/Common/FriendsActivityRow.js","components/Common/FriendsActivity.js","components/Game/TimeToBeat.js","components/Common/ScoreBlock.js","components/Common/Rating.js","components/Common/InputNumber.js","components/Game/GamePage.js","store/MovieStore.js","store/CurrentUserStore.js","components/Movie/MoviePage.js","store/ShowStore.js","components/Show/DetailedEpisodeRow.js","components/Show/SeasonBlock.js","components/Show/SeasonsBlock.js","components/Show/ShowPage.js","components/Show/SeasonPage.js","components/Show/EpisodePage.js","components/Search/Blocks/Cards/CardGame.js","components/Search/Blocks/GamesBlock.js","components/Search/Blocks/Cards/CardMovie.js","components/Search/Blocks/MoviesBlock.js","components/Search/Blocks/Cards/CardShow.js","components/Search/Blocks/ShowsBlock.js","components/Common/CardUser.js","components/Common/FriendBlock.js","components/Search/Blocks/UsersBlock.js","components/Common/CategoriesTab.js","components/Search/SearchPage.js","components/ConfirmPage.js","components/ConfirmPasswordPage.js","store/UserStore.js","components/Common/SelectMulti.js","components/UserPage/ItemsBlock/ItemRow.js","components/UserPage/ItemsBlock/ItemBlock.js","components/UserPage/GameBlock.js","components/UserPage/MovieBlock.js","components/UserPage/Logs/LogRow.js","components/UserPage/Logs/UserLogBlock.js","components/UserPage/ShowBlock.js","components/UserPage/Statistics/Colors.js","components/UserPage/Statistics/GenresChart.js","components/UserPage/Statistics/ChartBlock.js","components/UserPage/Statistics/StatisticsBlock.js","components/UserPage/UserPage.js","components/Calendar/DayInfo.js","components/Calendar/ReleasesList.js","components/Calendar/CalendarPage.js","components/Settings/SettingsPage.js","components/Unwatched/EpisodeRow.js","components/Unwatched/ShowBlock.js","components/Unwatched/UnwatchedPage.js","components/NotFoundPage.js","Routes.js","App.js","serviceWorker.js","index.js"],"names":["BACKEND_URL","GET_TOKEN_URL","REFRESH_TOKEN_URL","REGISTRATE_URL","CONFIRM_URL","RESET_PASSWORD_URL","CONFIRM_PASSWORD_URL","USER_SETTINGS_URL","GET_GAME_URL","SEARCH_GAMES_URL","SEARCH_GAMES_FAST_URL","GET_MOVIE_URL","SEARCH_MOVIES_URL","SEARCH_MOVIES_FAST_URL","GET_SHOW_URL","SEARCH_SHOWS_URL","SEARCH_SHOWS_FAST_URL","GET_UNWATCHED_EPISODES_URL","USER_INFO_URL","USER_CALENDAR_URL","SEARCH_USERS_URL","axiosConfig","headers","getToken","username","password","a","axios","post","urls","res","userData","jwt_decode","data","access","user","id","user_id","email","token","refreshToken","refresh","updateToken","console","log","registration","status","confirmation","uid64","patch","resetPassword","put","confirmPassword","AuthStore","loggedIn","authState","registrateState","confirmEmailState","resetPasswordState","confirmPasswordState","tryAuth","login","auth","then","authSuccess","authFailure","localStorage","setItem","Date","now","error","response","detail","checkAuthorization","getItem","resetAuthorization","removeItem","register","registerSuccess","registerFailure","result","errors","error2","confirmEmail","confirmEmailSuccess","confirmEmailFailure","resetPasswordSuccess","resetPasswordFailure","confirmPasswordSuccess","confirmPasswordFailure","makeAutoObservable","this","PagesStore","LoginFormIsOpen","RegistrateFormIsOpen","ResetPasswordFormIsOpen","saveEpisodesBlockIsOpen","sidebarIsToggled","sidebarIsCollapsed","toggleSidebar","collapseSidebar","openLoginForm","closeLoginForm","openRegistrateForm","closeRegistrateForm","openResetPasswordForm","closeResetPasswordForm","setSaveEpisodes","getWindowDimensions","window","width","innerWidth","height","innerHeight","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","getUserInfo","userID","AuthStr","get","Authorization","searchUsers","query","params","setUserStatus","is_following","getUserLog","page","resultsOnPage","filters","page_size","deleteUserLog","logType","logID","delete","type","getUserFriendsLog","getUserCalendar","getUserSettings","patchUserSettings","settings","getGame","setGameStatus","gameSlug","user_info","searchGames","gamesCount","searchGamesFast","getGameUserInfo","slug","getMovie","setMovieStatus","searchMovies","searchMoviesFast","getMovieUserInfo","getShow","getShowSeason","showID","seasonNumber","getShowEpisode","episodeNumber","setShowStatus","setShowSeasonStatus","setShowEpisodesStatus","episodesList","searchShows","searchShowsFast","getShowUserInfo","getShowSeasonUserInfo","seasonID","getShowEpisodeUserInfo","episodeID","getUnwatchedEpisodes","defaults","common","SearchStore","games","movies","shows","users","hints","currentQuery","gamesState","moviesState","showsState","usersState","searchHints","gameRequests","searchGamesHintsSuccess","movieRequests","searchMoviesHintsSuccess","showRequests","searchShowsHintsSuccess","searchGamesSuccess","searchGamesFailure","searchMoviesSuccess","searchMoviesFailure","results","searchShowsSuccess","searchShowsFailure","userRequests","searchUsersSuccess","searchUsersFailure","SearchInput","observer","onSubmit","setQuery","history","useHistory","event","className","placeholder","aria-label","value","onChange","target","hidden","length","icon","map","hint","key","href","location","origin","rawg_slug","onClick","e","push","preventDefault","src","rawg_backdrop_path","alt","rawg_name","rawg_release_date","substr","tmdb_id","tmdb_backdrop_path","tmdb_name","tmdb_release_date","Navbar","props","collapse","setCollapse","toggleIfSmallScreen","document","getElementById","Footer","fab","Sidebar","toggleSidebarIfSmallScreen","collapsed","iconShape","LoginForm","setPassword","setLogin","isOpen","toggle","size","centered","startsWith","htmlFor","RegistrationForm","passwordConfirm","setPasswordConfirm","setEmail","style","outlineColor","disabled","ResetPasswordForm","HomePage","GameStore","game","gameState","userInfo","review","score","spent_time","friendsInfo","userInfoState","setStatusState","requestGame","requestGameSuccess","requestGameFailure","statusText","requestUserInfo","requestUserInfoSuccess","requestUserInfoFailure","friends_info","setGameStatusSuccess","setGameStatusFailure","StatusButtonGroup","statuses","onChangeStatus","activeColor","userStatus","counter","intToHours","number","FriendsActivityRow","info","stop","emptySymbol","far","fullSymbol","n","title","initialRating","readonly","FriendsActivity","friendInfo","TimeToBeat","hltbInfo","gameplay_main","gameplay_main_extra","gameplay_completionist","display","gameplay_main_unit","gameplay_main_extra_unit","gameplay_completionist_unit","ScoreBlock","text","getColor","RatingBlock","fontSize","marginBottom","InputNumber","max","min","dataList","parseFloat","toString","GamePage","anyError","useParams","setReview","spentTime","setSpentTime","userRate","setUserRate","setClearUI","strToFloat","cleanStr","indexOf","name","toast","backgroundImage","background","active","spinner","poster","developers","release_date","genres","platforms","hltb","playtime","Rating","metacritic","dangerouslySetInnerHTML","__html","overview","paddingTop","newData","hltbToDatalist","MovieStore","movie","tmdb","poster_path","movieState","requestMovie","requestMovieSuccess","requestMovieFailure","setMovieStatusSuccess","setMovieStatusFailure","CurrentUserStore","calendar","unwatched","calendarState","settingsState","unwatchedState","saveSettingsState","requestCalendar","requestCalendarSuccess","requestCalendarFailure","requestSettings","requestSettingsSuccess","requestSettingsFailure","requestUnwatched","requestUnwatchedSuccess","requestUnwatchedFailure","patchSettings","patchSettingsSuccess","patchSettingsFailure","patchSettingsReset","setTimeout","MoviePage","success","backdrop_path","marginTop","original_name","runtime","production_companies","tagline","cast","directors","ShowStore","show","showState","showSeasons","showSeasonsState","showSeasonsUserInfo","showSeasonsUserInfoState","requestShow","requestShowSuccess","requestShowFailure","requestSeason","requestSeasonSuccess","requestSeasonFailure","requestSeasons","requestSeasonsSuccess","requestSeasonsFailure","requestEpisode","requestEpisodeSuccess","requestEpisodeFailure","requestShowUserInfo","requestShowUserInfoSuccess","requestShowUserInfoFailure","requestSeasonUserInfo","runInAction","requestSeasonUserInfoSuccess","requestSeasonUserInfoFailure","user_watched_show","episodes","episodes_user_info","requestSeasonsUserInfo","requestSeasonsUserInfoSuccess","requestSeasonsUserInfoFailure","requestEpisodeUserInfo","requestEpisodeUserInfoSuccess","requestEpisodeUserInfoFailure","setShowStatusSuccess","setShowStatusFailure","setSeasonStatus","setEpisodesStatus","seasonsToUpdate","season","getShowSeasonState","getEpisodesUserInfo","episode","DetailedEpisodeRow","setEpisodeUserStatus","checkAll","userWatchedShow","isChecked","setIsChecked","checked","date","newDate","toLocaleDateString","parseDate","air_date","start","concat","season_number","episode_number","SeasonBlock","showSeason","computed","showSeasonState","showUserInfo","getEpisodeByID","open","marginLeft","reverse","SeasonsBlock","seasons","anySeasonLoading","toJS","sendAllEpisodes","currentValue","cbValue","sendEpisodes","ShowPage","first_air_date","last_air_date","episode_runtime","episode_run_time","seasons_count","episodes_count","SeasonPage","show_id","chartData","setChartData","vote_average","Оценка","tmdb_original_name","label","outline","body","clientHeight","clientWidth","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","dataKey","interval","tick","fill","tickLine","domain","tickCount","contentStyle","color","backgroundColor","stroke","fillOpacity","layout","EpisodePage","still_path","CardGame","setDate","released","mas","split","background_image","GamesBlock","gamesPage","onPaginate","CardMovie","MoviesBlock","moviesPage","CardShow","ShowsBlock","showsPage","CardUser","FriendBlock","UsersBlock","CategoriesTab","categories","onChangeCategory","activeCategory","children","category","SearchPage","queryText","setQueryText","setGamesPage","setMoviesPage","setShowsPage","setActiveCategory","ConfirmPage","search","URLSearchParams","ConfirmPasswordPage","UserStore","userLogs","userFriendsLogs","userState","userLogsState","userFriendsLogsState","setUserStatusState","requestUser","requestUserSuccess","requestUserFailure","requestUserLogs","requestLogsSuccess","requestLogsFailure","deleteUserLogSuccess","deleteUserLogFailure","newLogs","filter","requestUserFriendsLogs","requestFriendsLogsSuccess","requestFriendsLogsFailure","setUserStatusSuccess","setUserStatusFailure","is_followed","parseInt","SelectMulti","options","classNamePrefix","isMulti","ItemRow","fields","link","undefined","find","field","ItemBlock","items","pageSize","setPageSize","setPage","filteredItems","setFilteresItems","sortIsAsc","setSortIsAsc","statusFilters","setStatusFilters","sortItems","isNumber","newItems","item","toLowerCase","includes","sort","b","obj","slice","total","current","separator","filename","GameBlock","MovieBlock","LogRow","showUsername","currentUser","onDeleteLog","created","toLocaleTimeString","hour","minute","action","actionResult","translateActionType","action_type","action_result","actionType","translateType","parent_name","nameToLink","target_id","actionResultToStr","UserLogBlock","logs","logsType","logsByDay","setLogsByDay","currentPage","setCurrentPage","setFilters","i","getDay","groupLogsByDay","dayLog","count","ShowBlock","COLORS","ChartBlock","test","navigator","userAgent","tickMargin","itemStyle","borderRadius","cursor","entry","index","Math","angle","stats","total_spent_time","cx","cy","outerRadius","labelLine","minAngle","verticalAlign","horizontalAlign","StatisticsBlock","gameChartData","setGameChartData","movieChartData","setMovieChartData","showChartData","setShowChartData","getGenresChartData","genre","spent_time_percent","Процент","GenresChart","UserPage","isCurrentUser","lastActivity","setLastActivity","last_activity","year","getFullYear","month","day","toLocaleString","is_available","marginRight","followed_users","DayInfo","weekday","rawg_id","tmdb_show","tmdb_season_number","tmdb_episode_number","ReleasesList","myStyle","border","getContentForDay","getIconForDay","remainedDays","days","diff","getTime","getUTCDay","dateDiff","lineColor","cardHeaderStyle","iconStyle","bubbleStyle","titleStyle","subtitleStyle","CalendarPage","currentDay","setCurrentDay","formatDate","defaultView","minDetail","locale","minDate","tileContent","activeStartDate","view","Object","entries","pad","getMonth","getDate","SettingsPage","gameNotifInput","setGameNotifInput","movieNotifInput","setMovieNotifInput","showNotifInput","setShowNotifInput","privacySelect","setPrivacySelect","receive_games_releases","receive_movies_releases","receive_episodes_releases","privacy","setShowEpisodeUserStatus","getUserSeasonOpen","localData","onToggle","class","EpisodeRow","UnwatchedPage","NotFoundPage","setAngle","requestAnimationFrame","transform","maxWidth","Routes","exact","path","component","React","Component","App","position","hideProgressBar","newestOnTop","closeOnClick","autoClose","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","ReactDOM","render","URL","process","fetch","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.1e965c34.chunk.js","sourcesContent":["/** Время жизни токена в миллисекундах, после истечения которого будет запрошен новый токен*/\r\nexport const TOKEN_LIFETIME = 290000;\r\n/**Адрес сервера*/\r\nexport const BACKEND_URL = \"https://interests.fun/api/\";\r\n/**Адрес получения токена */\r\nexport const GET_TOKEN_URL = BACKEND_URL + \"users/auth/login/\";\r\n/**Адрес обновления токена */\r\nexport const REFRESH_TOKEN_URL = BACKEND_URL + \"users/auth/refresh-token/\";\r\n/**Адрес регистрации */\r\nexport const REGISTRATE_URL = BACKEND_URL + \"users/auth/signup/\";\r\n/**Адрес подтверждения почты */\r\nexport const CONFIRM_URL = BACKEND_URL + \"users/auth/confirm_email/\";\r\n/**Адрес сброса пароля */\r\nexport const RESET_PASSWORD_URL = BACKEND_URL + \"users/auth/password_reset/\";\r\n/**Адрес подтверждения сброса пароля */\r\nexport const CONFIRM_PASSWORD_URL = BACKEND_URL + \"users/auth/confirm_password_reset/\";\r\n/**Адрес сохранения настроек */\r\nexport const USER_SETTINGS_URL = BACKEND_URL + \"users/user/user_settings/\";\r\n/**Адрес запроса игры */\r\nexport const GET_GAME_URL = BACKEND_URL + \"games/game/\";\r\n/**Адрес поиска игр */\r\nexport const SEARCH_GAMES_URL = BACKEND_URL + \"games/search/rawg/\";\r\n/**Адрес быстрого поиска игр */\r\nexport const SEARCH_GAMES_FAST_URL = BACKEND_URL + \"games/search/\";\r\n/**Адрес запроса фильма */\r\nexport const GET_MOVIE_URL = BACKEND_URL + \"movies/movie/\";\r\n/**Адрес поиска фильмов */\r\nexport const SEARCH_MOVIES_URL = BACKEND_URL + \"movies/search/tmdb/\";\r\n/**Адрес быстрого поиска игр */\r\nexport const SEARCH_MOVIES_FAST_URL = BACKEND_URL + \"movies/search/\";\r\n/**Адрес запроса сериала */\r\nexport const GET_SHOW_URL = BACKEND_URL + \"shows/show/\";\r\n/**Адрес поиска сериалов */\r\nexport const SEARCH_SHOWS_URL = BACKEND_URL + \"shows/search/tmdb/\";\r\n/**Адрес юыстрого поиска сериалов */\r\nexport const SEARCH_SHOWS_FAST_URL = BACKEND_URL + \"shows/search/\";\r\n/**Адрес запроса непросмотренных серий */\r\nexport const GET_UNWATCHED_EPISODES_URL = BACKEND_URL + \"shows/show/unwatched_episodes/\";\r\n/**Адрес получения информации о пользователе */\r\nexport const USER_INFO_URL = BACKEND_URL + \"users/user/\";\r\n/**Адрес получения календаря релизов пользователя */\r\nexport const USER_CALENDAR_URL = BACKEND_URL + \"users/user/release_calendar/\";\r\n/**Адрес поиска пользователей */\r\nexport const SEARCH_USERS_URL = BACKEND_URL + \"users/search/\";\r\n","import axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport * as urls from \"../settings\";\r\n\r\nlet axiosConfig = {\r\n\theaders: {\r\n\t\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n\t},\r\n};\r\n\r\n/**\r\n * ПОлучение токена авторизации. Токен сохраняется в localStorage\r\n * @param {string} username Имя пользователя\r\n * @param {string} password Пароль\r\n */\r\nexport async function getToken(username, password) {\r\n\tconst res = await axios.post(\r\n\t\turls.GET_TOKEN_URL,\r\n\t\t{\r\n\t\t\tusername: username,\r\n\t\t\tpassword: password,\r\n\t\t},\r\n\t\taxiosConfig\r\n\t);\r\n\r\n\tlet userData = jwt_decode(res.data.access);\r\n\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\treturn { token: res.data.access, refreshToken: res.data.refresh, user: user };\r\n}\r\n\r\n/**\r\n * Функция обновления токена\r\n */\r\nexport async function updateToken(refreshToken) {\r\n\tif ((typeof refreshToken !== \"undefined\") & (refreshToken != null)) {\r\n\t\ttry {\r\n\t\t\tconst res = await axios.post(urls.REFRESH_TOKEN_URL, { refresh: refreshToken }, axiosConfig);\r\n\t\t\tlet userData = jwt_decode(res.data.access);\r\n\t\t\tlet user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\r\n\t\t\treturn { token: res.data.access, user: user };\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(\"axios error: \" + e);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nexport async function registration(username, email, password) {\r\n\tconst res = await axios.post(\r\n\t\turls.REGISTRATE_URL,\r\n\t\t{\r\n\t\t\tusername: username,\r\n\t\t\temail: email,\r\n\t\t\tpassword: password,\r\n\t\t},\r\n\t\taxiosConfig\r\n\t);\r\n\tlet data = res.data;\r\n\tdata.status = res.status;\r\n\treturn data;\r\n}\r\n\r\nexport async function confirmation(uid64, token) {\r\n\tconst res = await axios.patch(urls.CONFIRM_URL + \"?uid64=\" + uid64 + \"&token=\" + token);\r\n\treturn res;\r\n}\r\n\r\nexport async function resetPassword(email) {\r\n\tconst res = await axios.put(urls.RESET_PASSWORD_URL, { email: email }, axiosConfig);\r\n\treturn res;\r\n}\r\n\r\nexport async function confirmPassword(token, password) {\r\n\tconst res = await axios.patch(urls.CONFIRM_PASSWORD_URL + \"?reset_token=\" + token, { password: password }, axiosConfig);\r\n\treturn res;\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport * as auth from \"../services/jwtAuth\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { TOKEN_LIFETIME } from \"../settings\";\r\n\r\nclass Auth {\r\n\tloggedIn = false;\r\n\tuser = {\r\n\t\tusername: \"\",\r\n\t\temail: \"\",\r\n\t\tid: null,\r\n\t};\r\n\tauthState = \"\";\r\n\tregistrateState = \"\";\r\n\tconfirmEmailState = \"\";\r\n\tresetPasswordState = \"\";\r\n\tconfirmPasswordState = \"\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\ttryAuth = async (login, password) => {\r\n\t\tthis.authState = \"pending\";\r\n\t\tauth.getToken(login, password).then(this.authSuccess, this.authFailure);\r\n\t};\r\n\tauthSuccess = (res) => {\r\n\t\tlocalStorage.setItem(\"refreshToken\", res.refreshToken);\r\n\t\tlocalStorage.setItem(\"token\", res.token);\r\n\t\tlocalStorage.setItem(\"tokenTime\", Date.now());\r\n\t\tthis.loggedIn = true;\r\n\t\tthis.user = res.user;\r\n\t\tthis.authState = \"done\";\r\n\t};\r\n\tauthFailure = (error) => {\r\n\t\tthis.authState = \"error: \" + error.response.data.detail;\r\n\t};\r\n\r\n\tcheckAuthorization = async () => {\r\n\t\tif ((localStorage.getItem(\"token\") === null) | (Date.now() - localStorage.getItem(\"tokenTime\") > TOKEN_LIFETIME)) {\r\n\t\t\tconst res = await auth.updateToken(localStorage.getItem(\"refreshToken\"));\r\n\t\t\tif (res !== null) {\r\n\t\t\t\tlocalStorage.setItem(\"token\", res.token);\r\n\t\t\t\tlocalStorage.setItem(\"tokenTime\", Date.now());\r\n\t\t\t\tthis.loggedIn = true;\r\n\t\t\t\tthis.user = res.user;\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.resetAuthorization();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet userData = jwt_decode(localStorage.getItem(\"token\"));\r\n\t\t\tthis.user = { username: userData.username, id: userData.user_id, email: userData.email };\r\n\t\t\tthis.loggedIn = true;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\r\n\tresetAuthorization = async () => {\r\n\t\tthis.loggedIn = false;\r\n\t\tthis.user = { username: \"\", id: null, email: \"\" };\r\n\t\tlocalStorage.removeItem(\"refreshToken\");\r\n\t\tlocalStorage.removeItem(\"token\");\r\n\t\tlocalStorage.removeItem(\"tokenTime\");\r\n\t};\r\n\r\n\tregister = async (username, email, password) => {\r\n\t\tthis.registrateState = \"pending\";\r\n\t\tauth.registration(username, email, password).then(this.registerSuccess, this.registerFailure);\r\n\t};\r\n\tregisterSuccess = (result) => {\r\n\t\tthis.user = { login: result.username, email: result.email };\r\n\t\tthis.registrateState = \"done\";\r\n\t};\r\n\tregisterFailure = (error) => {\r\n\t\tlet errors = \"\";\r\n\t\tfor (let error2 in error.response.data) errors += error.response.data[error2] + \"\\n\";\r\n\t\tthis.registrateState = \"error: \" + errors;\r\n\t};\r\n\r\n\tconfirmEmail = async (uid64, token) => {\r\n\t\tthis.confirmEmailState = \"pending\";\r\n\t\tauth.confirmation(uid64, token).then(this.confirmEmailSuccess, this.confirmEmailFailure);\r\n\t};\r\n\tconfirmEmailSuccess = (result) => {\r\n\t\tthis.confirmEmailState = \"done\";\r\n\t};\r\n\tconfirmEmailFailure = (error) => {\r\n\t\tlet errors = \"\";\r\n\t\tfor (let error2 in error.response.data) errors += error.response.data[error2] + \"\\n\";\r\n\t\tthis.confirmEmailState = \"error: \" + errors;\r\n\t};\r\n\r\n\tresetPassword = async (email) => {\r\n\t\tthis.resetPasswordState = \"pending\";\r\n\t\tauth.resetPassword(email).then(this.resetPasswordSuccess, this.resetPasswordFailure);\r\n\t};\r\n\tresetPasswordSuccess = (result) => {\r\n\t\tthis.resetPasswordState = \"done\";\r\n\t};\r\n\tresetPasswordFailure = (error) => {\r\n\t\tthis.resetPasswordState = \"error: \" + error;\r\n\t};\r\n\r\n\tconfirmPassword = async (token, password) => {\r\n\t\tthis.confirmPasswordState = \"\";\r\n\t\tauth.confirmPassword(token, password).then(this.confirmPasswordSuccess, this.confirmPasswordFailure);\r\n\t};\r\n\tconfirmPasswordSuccess = (result) => {\r\n\t\tthis.confirmPasswordState = \"done\";\r\n\t};\r\n\tconfirmPasswordFailure = (error) => {\r\n\t\tlet errors = \"\";\r\n\t\tfor (let error2 in error.response.data) errors += error.response.data[error2] + \"\\n\";\r\n\t\tthis.confirmPasswordState = \"error: \" + errors;\r\n\t};\r\n\r\n\tget currentUser() {\r\n\t\treturn this.user;\r\n\t}\r\n}\r\n\r\nconst AuthStore = new Auth();\r\n//export default remotedev(AuthStore, { name: \"Auth\" });\r\nexport default AuthStore;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\n\r\nclass Pages {\r\n\tLoginFormIsOpen = false;\r\n\tRegistrateFormIsOpen = false;\r\n\tResetPasswordFormIsOpen = false;\r\n\tsaveEpisodesBlockIsOpen = false;\r\n\tsidebarIsToggled = localStorage.getItem(\"sidebarToggled\") === \"true\";\r\n\tsidebarIsCollapsed = localStorage.getItem(\"sidebarCollapsed\") === \"true\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\ttoggleSidebar = async () => {\r\n\t\tthis.sidebarIsToggled = !this.sidebarIsToggled;\r\n\t\tif (!this.sidebarIsToggled) this.sidebarIsCollapsed = false;\r\n\t\tlocalStorage.setItem(\"sidebarToggled\", this.sidebarIsToggled);\r\n\t};\r\n\r\n\tcollapseSidebar = async () => {\r\n\t\tthis.sidebarIsCollapsed = !this.sidebarIsCollapsed;\r\n\t\tlocalStorage.setItem(\"sidebarCollapsed\", this.sidebarIsCollapsed);\r\n\t};\r\n\r\n\topenLoginForm = async () => {\r\n\t\tthis.LoginFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseLoginForm = async () => {\r\n\t\tthis.LoginFormIsOpen = false;\r\n\t};\r\n\r\n\topenRegistrateForm = async () => {\r\n\t\tthis.RegistrateFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseRegistrateForm = async () => {\r\n\t\tthis.RegistrateFormIsOpen = false;\r\n\t};\r\n\r\n\topenResetPasswordForm = async () => {\r\n\t\tthis.ResetPasswordFormIsOpen = true;\r\n\t};\r\n\r\n\tcloseResetPasswordForm = async () => {\r\n\t\tthis.ResetPasswordFormIsOpen = false;\r\n\t};\r\n\r\n\tsetSaveEpisodes = (status) => (this.saveEpisodesBlockIsOpen = status);\r\n}\r\n\r\nconst PagesStore = new Pages();\r\n//export default remotedev(PagesStore, { name: \"Pages\" });\r\nexport default PagesStore;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nfunction getWindowDimensions() {\r\n\tconst { innerWidth: width, innerHeight: height } = window;\r\n\treturn {\r\n\t\twidth,\r\n\t\theight,\r\n\t};\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n\tconst [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n\tuseEffect(() => {\r\n\t\tfunction handleResize() {\r\n\t\t\tsetWindowDimensions(getWindowDimensions());\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"resize\", handleResize);\r\n\t\treturn () => window.removeEventListener(\"resize\", handleResize);\r\n\t}, []);\r\n\r\n\treturn windowDimensions;\r\n}","import axios from \"axios\";\r\nimport { USER_INFO_URL, SEARCH_USERS_URL, USER_CALENDAR_URL, USER_SETTINGS_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о пользователе\r\n * @param {string} token Токен доступа\r\n * @param {string} userID ID пользователя\r\n * @returns {object} Информация о пользователе\r\n */\r\nexport async function getUserInfo(token, userID) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/\");\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск пользователей\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchUsers(query) {\r\n\tconst res = await axios.get(SEARCH_USERS_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса пользовтеля (добавить в друзья и тд)\r\n * @param {string} token Токен доступа\r\n * @param {boolean} is_following Статус фильма\r\n * @param {string} userID ID пользовтеля\r\n */\r\nexport async function setUserStatus(token, is_following, userID) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.put(USER_INFO_URL + userID + \"/follow/\", is_following, { headers: { Authorization: AuthStr } });\r\n\tif (res.status === 204 || res.status === 200 || res.status === 201) return res.data;\r\n\telse return null;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {string} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserLog(token, userID, page, resultsOnPage, query, filters) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage, query: query, filters: filters }, headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(USER_INFO_URL + userID + \"/log/\", { params: { page: page, page_size: resultsOnPage, query: query, filters: filters } });\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {string} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function deleteUserLog(token, userID, logType, logID) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.delete(USER_INFO_URL + userID + \"/log/\", { data: { type: logType, id: logID }, headers: { Authorization: AuthStr } });\r\n\treturn res;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий лог друзей пользователя\r\n * @param {string} userID ID пользователя\r\n * @param {int} page страница\r\n * @param {int} resultsOnPage количество результатов на странице\r\n */\r\nexport async function getUserFriendsLog(token, userID, page, resultsOnPage, query, filters) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(USER_INFO_URL + \"friends_log/\", { params: { page: page, page_size: resultsOnPage, query: query, filters: filters }, headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий календарь релизов пользователя\r\n */\r\nexport async function getUserCalendar(token) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(USER_CALENDAR_URL, { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий настройки пользователя\r\n */\r\nexport async function getUserSettings(token) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(USER_SETTINGS_URL, { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, изменяющий настройки пользователя\r\n */\r\nexport async function patchUserSettings(token, settings) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.patch(USER_SETTINGS_URL, settings, { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n","import axios from \"axios\";\r\nimport { GET_GAME_URL, SEARCH_GAMES_URL, SEARCH_GAMES_FAST_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об игре\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID игры\r\n * @returns {object} Информация об игре\r\n */\r\nexport async function getGame(token, id) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_GAME_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(GET_GAME_URL + id + \"/\");\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса игры\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус игры\r\n * @param {string} gameSlug Слаг игры\r\n */\r\nexport async function setGameStatus(token, gameSlug, user_info) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\r\n\tconst res = await axios.put(GET_GAME_URL + gameSlug + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск игр\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchGames(query, page, gamesCount) {\r\n\tconst res = await axios.get(SEARCH_GAMES_URL, { params: { query: query, page: page, page_size: gamesCount } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск локльных игр\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchGamesFast(query) {\r\n\tconst res = await axios.get(SEARCH_GAMES_FAST_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для игры\r\n * @param {string} slug slug игры\r\n * @param {int} page страница\r\n */\r\nexport async function getGameUserInfo(token, slug) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_GAME_URL + slug + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\treturn res.data;\r\n}\r\n","import axios from \"axios\";\r\nimport { SEARCH_MOVIES_URL, SEARCH_MOVIES_FAST_URL, GET_MOVIE_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о фильме\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID фильма\r\n * @returns {object} Информация о фильме\r\n */\r\nexport async function getMovie(token, id) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(GET_MOVIE_URL + id + \"/\");\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса фильма\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус фильма\r\n * @param {string} movieID ID фильма\r\n */\r\nexport async function setMovieStatus(token, id, user_info) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.put(GET_MOVIE_URL + id + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск фильмов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchMovies(query, page) {\r\n\tconst res = await axios.get(SEARCH_MOVIES_URL, { params: { query: query, page: page } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск локальных фильмов\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchMoviesFast(query) {\r\n\tconst res = await axios.get(SEARCH_MOVIES_FAST_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для фильма\r\n * @param {string} id id фильма\r\n */\r\nexport async function getMovieUserInfo(token, id) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_MOVIE_URL + id + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n","import axios from \"axios\";\r\nimport { SEARCH_SHOWS_URL, SEARCH_SHOWS_FAST_URL, GET_SHOW_URL, GET_UNWATCHED_EPISODES_URL } from \"../settings\";\r\n\r\naxios.defaults.headers.common = {\r\n\t\"Content-Type\": \"application/json;charset=UTF-8\",\r\n};\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сериале\r\n * @param {string} token Токен доступа\r\n * @param {string} id ID сериала\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShow(token, id) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + id + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(GET_SHOW_URL + id + \"/\");\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сезоне сериала\r\n * @param {string} token Токен доступа\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowSeason(token, showID, seasonNumber) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\");\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о серии сериала\r\n * @param {string} token Токен доступа\r\n * @param {string} showID ID сериала\r\n * @param {string} seasonNumber номер сезона\r\n * @param {string} episodeNumber номер эпизода\r\n * @returns {object} Информация о сериале\r\n */\r\nexport async function getShowEpisode(token, showID, seasonNumber, episodeNumber) {\r\n\tlet data;\r\n\tif (token) {\r\n\t\tvar AuthStr = \"Bearer \" + token;\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber + \"/\", { headers: { Authorization: AuthStr } });\r\n\t\tdata = res.data;\r\n\t} else {\r\n\t\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/episode/\" + episodeNumber + \"/\");\r\n\t\tdata = res.data;\r\n\t}\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус сериала\r\n * @param {string} id ID сериала\r\n */\r\nexport async function setShowStatus(token, id, user_info) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.put(GET_SHOW_URL + id + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} user_info Статус сезона сериала\r\n * @param {string} showID ID сериала\r\n *  * @param {string} seasonNumber номер сезона\r\n */\r\nexport async function setShowSeasonStatus(token, showID, seasonNumber, user_info) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.put(GET_SHOW_URL + showID + \"/season/\" + seasonNumber + \"/\", user_info, { headers: { Authorization: AuthStr } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на изменение статуса сезона сериала\r\n * @param {string} token Токен доступа\r\n * @param {object} episodesList Список объектов эпизодов\r\n * @param {string} showID ID сериала\r\n */\r\nexport async function setShowEpisodesStatus(token, showID, episodesList) {\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.put(GET_SHOW_URL + showID + \"/episodes/\", episodesList, { headers: { Authorization: AuthStr } });\r\n\treturn res;\r\n}\r\n\r\n/**\r\n * Запрос на поиск сериалов\r\n * @param {string} query Поисковый запрос\r\n * @param {int} page Страница поиска\r\n */\r\nexport async function searchShows(query, page) {\r\n\tconst res = await axios.get(SEARCH_SHOWS_URL, { params: { query: query, page: page } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос на поиск локальных сериалов\r\n * @param {string} query Поисковый запрос\r\n */\r\nexport async function searchShowsFast(query) {\r\n\tconst res = await axios.get(SEARCH_SHOWS_FAST_URL, { params: { query: query } });\r\n\treturn res.data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowUserInfo(token, showID) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_SHOW_URL + showID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для сезона сериала\r\n * @param {string} showID id сериала\r\n */\r\nexport async function getShowSeasonUserInfo(token, showID, seasonID) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию об оценках друзей для эпизода сериала\r\n * @param {string} showID id сериала\r\n * @param {int} page страница\r\n */\r\nexport async function getShowEpisodeUserInfo(token, showID, seasonID, episodeID) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_SHOW_URL + showID + \"/season/\" + seasonID + \"/episode/\" + episodeID + \"/user_info/\", { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n\r\n/**\r\n * Запрос к бд, получающий информацию о сериале\r\n * @param {string} token Токен доступа\r\n * @returns {Array} Список эпизодов\r\n */\r\nexport async function getUnwatchedEpisodes(token) {\r\n\tlet data;\r\n\tvar AuthStr = \"Bearer \" + token;\r\n\tconst res = await axios.get(GET_UNWATCHED_EPISODES_URL, { headers: { Authorization: AuthStr } });\r\n\tdata = res.data;\r\n\treturn data;\r\n}\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport * as userRequests from \"../services/userRequests\";\r\nimport * as gameRequests from \"../services/gameRequests\";\r\nimport * as movieRequests from \"../services/movieRequests\";\r\nimport * as showRequests from \"../services/showRequests\";\r\n\r\nclass Search {\r\n\tgames = [];\r\n\tmovies = [];\r\n\tshows = [];\r\n\tusers = [];\r\n\thints = { games: [], shows: [], movies: [] };\r\n\tcurrentQuery = \"\";\r\n\tgamesState = \"done\";\r\n\tmoviesState = \"done\";\r\n\tshowsState = \"done\";\r\n\tusersState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\tsearchHints = async (query) => {\r\n\t\tif (this.currentQuery !== query) {\r\n\t\t\tthis.currentQuery = query;\r\n\t\t\tgameRequests.searchGamesFast(query).then(this.searchGamesHintsSuccess);\r\n\t\t\tmovieRequests.searchMoviesFast(query).then(this.searchMoviesHintsSuccess);\r\n\t\t\tshowRequests.searchShowsFast(query).then(this.searchShowsHintsSuccess);\r\n\t\t}\r\n\t};\r\n\tsearchGamesHintsSuccess = (result) => {\r\n\t\tthis.hints.games = result;\r\n\t};\r\n\tsearchMoviesHintsSuccess = (result) => {\r\n\t\tthis.hints.movies = result;\r\n\t};\r\n\tsearchShowsHintsSuccess = (result) => {\r\n\t\tthis.hints.shows = result;\r\n\t};\r\n\r\n\tsearchGames = async (query, page, gamesCount) => {\r\n\t\tthis.gamesState = \"pending\";\r\n\t\tgameRequests.searchGames(query, page, gamesCount).then(this.searchGamesSuccess, this.searchGamesFailure);\r\n\t};\r\n\tsearchGamesSuccess = (result) => {\r\n\t\tthis.games = result;\r\n\t\tthis.gamesState = \"done\";\r\n\t};\r\n\tsearchGamesFailure = (error) => {\r\n\t\tthis.gamesState = \"error: \" + error;\r\n\t};\r\n\r\n\tsearchMovies = async (query, page) => {\r\n\t\tthis.moviesState = \"pending\";\r\n\t\tmovieRequests.searchMovies(query, page).then(this.searchMoviesSuccess, this.searchMoviesFailure);\r\n\t};\r\n\tsearchMoviesSuccess = (result) => {\r\n\t\tthis.movies = result.results;\r\n\t\tthis.moviesState = \"done\";\r\n\t};\r\n\tsearchMoviesFailure = (error) => {\r\n\t\tthis.moviesState = \"error: \" + error;\r\n\t};\r\n\r\n\tsearchShows = async (query, page) => {\r\n\t\tthis.showsState = \"pending\";\r\n\t\tshowRequests.searchShows(query, page).then(this.searchShowsSuccess, this.searchShowsFailure);\r\n\t};\r\n\tsearchShowsSuccess = (result) => {\r\n\t\tthis.shows = result.results;\r\n\t\tthis.showsState = \"done\";\r\n\t};\r\n\tsearchShowsFailure = (error) => {\r\n\t\tthis.showsState = \"error: \" + error;\r\n\t};\r\n\r\n\tsearchUsers = async (query) => {\r\n\t\tthis.usersState = \"pending\";\r\n\t\tuserRequests.searchUsers(query).then(this.searchUsersSuccess, this.searchUsersFailure);\r\n\t};\r\n\tsearchUsersSuccess = (result) => {\r\n\t\tthis.users = result;\r\n\t\tthis.usersState = \"done\";\r\n\t};\r\n\tsearchUsersFailure = (error) => {\r\n\t\tthis.usersState = \"error: \" + error;\r\n\t};\r\n}\r\n\r\nconst SearchStore = new Search();\r\n//export default remotedev(SearchStore, { name: \"Search\" });\r\nexport default SearchStore;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport SearchStore from \"../../store/SearchStore\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nconst SearchInput = observer(({ onSubmit }) => {\r\n\tconst [query, setQuery] = useState(\"\");\r\n\tlet history = useHistory();\r\n\tconst { searchHints, hints } = SearchStore;\r\n\r\n\treturn (\r\n\t\t<form\r\n\t\t\tonSubmit={(event) => {\r\n\t\t\t\tonSubmit(event);\r\n\t\t\t\tsetQuery(\"\");\r\n\t\t\t}}>\r\n\t\t\t<div className='searchInputDiv'>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tplaceholder='Поиск'\r\n\t\t\t\t\taria-label='Поиск'\r\n\t\t\t\t\tid='searchInput'\r\n\t\t\t\t\tvalue={query}\r\n\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\tsetQuery(event.target.value);\r\n\t\t\t\t\t\tsearchHints(event.target.value);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className='searchHints' hidden={query === \"\" || !(hints.games.length > 0 || hints.movies.length > 0 || hints.shows.length > 0)}>\r\n\t\t\t\t\t<div hidden={!hints.games.length > 0}>\r\n\t\t\t\t\t\t<MDBIcon icon='gamepad' />\r\n\t\t\t\t\t\t{hints.games.map((hint, key) => (\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + hint.rawg_slug}\r\n\t\t\t\t\t\t\t\tclassName='searchHint'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/game/\" + hint.rawg_slug);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tsetQuery(\"\");\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{<img src={hint.rawg_backdrop_path} alt={\"\"} />}\r\n\t\t\t\t\t\t\t\t{hint.rawg_name}\r\n\t\t\t\t\t\t\t\t<div>{hint?.rawg_release_date?.substr(0, 4)}</div>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div hidden={!hints.movies.length > 0}>\r\n\t\t\t\t\t\t<MDBIcon icon='film' />\r\n\t\t\t\t\t\t{hints.movies.map((hint, key) => (\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + hint.tmdb_id}\r\n\t\t\t\t\t\t\t\tclassName='searchHint'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + hint.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tsetQuery(\"\");\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{<img src={hint.tmdb_backdrop_path} alt={\"\"} />}\r\n\t\t\t\t\t\t\t\t{hint.tmdb_name}\r\n\t\t\t\t\t\t\t\t<div>{hint?.tmdb_release_date?.substr(0, 4)}</div>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div hidden={!hints.shows.length > 0}>\r\n\t\t\t\t\t\t<MDBIcon icon='tv' />\r\n\t\t\t\t\t\t{hints.shows.map((hint, key) => (\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + hint.tmdb_id}\r\n\t\t\t\t\t\t\t\tclassName='searchHint'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + hint.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tsetQuery(\"\");\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{<img src={hint.tmdb_backdrop_path} alt={\"\"} />}\r\n\t\t\t\t\t\t\t\t{hint.tmdb_name}\r\n\t\t\t\t\t\t\t\t<div>{hint?.tmdb_release_date?.substr(0, 4)}</div>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n});\r\n\r\nexport default SearchInput;\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport PagesStore from \"../store/PagesStore\";\r\nimport AuthStore from \"../store/AuthStore\";\r\nimport useWindowDimensions from \"../hooks/useWindowDimensions\";\r\nimport SearchInput from \"../components/Common/SearchInput\";\r\n\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nconst Navbar = observer((props) => {\r\n\tconst { toggleSidebar, openLoginForm } = PagesStore;\r\n\tconst { width } = useWindowDimensions();\r\n\tconst { loggedIn, user } = AuthStore;\r\n\r\n\tlet history = useHistory();\r\n\r\n\tconst [collapse, setCollapse] = useState(true);\r\n\r\n\tconst toggleCollapse = () => {\r\n\t\tsetCollapse(!collapse);\r\n\t};\r\n\r\n\tfunction toggleIfSmallScreen() {\r\n\t\tif (width <= 600) setCollapse(true);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='navbar'>\r\n\t\t\t<div className='navbarLeft'>\r\n\t\t\t\t<div onClick={toggleSidebar} className='sidebarButton'>\r\n\t\t\t\t\t<MDBIcon icon='bars' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div onClick={() => history.push(\"/\")} className='navLogo'>\r\n\t\t\t\t\tInterests\r\n\t\t\t\t</div>\r\n\t\t\t\t<div onClick={toggleCollapse} className='collapseButton'>\r\n\t\t\t\t\t{collapse ? <MDBIcon icon='angle-down' /> : <MDBIcon icon='angle-up' />}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className={`navbarCenter ${collapse && width <= 600 ? \" collapsed\" : \"\"}`}>\r\n\t\t\t\t<SearchInput\r\n\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput\").value);\r\n\t\t\t\t\t\ttoggleIfSmallScreen();\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className={`navbarRight ${collapse && width <= 600 ? \" collapsed\" : \"\"}`}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\thistory.push(`/user/${user.id}`);\r\n\t\t\t\t\t\ttoggleIfSmallScreen();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='navUserButton'\r\n\t\t\t\t\thidden={!loggedIn}>\r\n\t\t\t\t\t<MDBIcon icon='user-circle' /> {user.username}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div onClick={openLoginForm} className='navUserButton' hidden={loggedIn}>\r\n\t\t\t\t\t<MDBIcon icon='sign-in-alt' /> Войти\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default Navbar;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction Footer() {\r\n\treturn (\r\n\t\t<div className='footer'>\r\n\t\t\t<div>\r\n\t\t\t\t<h2 className='footerName'>Interests</h2>\r\n\t\t\t\t<p>info@interests.fun</p>\r\n\t\t\t\t2020-2021\r\n\t\t\t</div>\r\n\t\t\t<div className='socialBlock'>\r\n\t\t\t\t<p>Следите за нами в социальных сетях, чтобы оставаться в курсе последних событий!</p>\r\n\t\t\t\t<a href='https://vk.com/interests_fun' className='footerSocialLink'>\r\n\t\t\t\t\t<MDBIcon fab icon='vk' />\r\n\t\t\t\t</a>\r\n\t\t\t\t<a href='https://discord.gg/wXkUF5tKee' className='footerSocialLink'>\r\n\t\t\t\t\t<MDBIcon fab icon='discord' />\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t\t<div className='socialBlock'>\r\n\t\t\t\t<h5>Сайт был разработан при поддержке</h5>\r\n\t\t\t\t<a href='https://rawg.io/' className='rawgLogo'>\r\n\t\t\t\t\tRAWG\r\n\t\t\t\t</a>\r\n\t\t\t\t<a href='https://www.themoviedb.org/'>\r\n\t\t\t\t\t<div className='tmdbLogo' />\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../store/AuthStore\";\r\nimport PagesStore from \"../store/PagesStore\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport useWindowDimensions from \"../hooks/useWindowDimensions\";\r\n\r\nimport {\r\n\tProSidebar,\r\n\tMenu,\r\n\tMenuItem,\r\n\t//SubMenu,\r\n\tSidebarFooter,\r\n} from \"react-pro-sidebar\";\r\n//import \"react-pro-sidebar/dist/css/styles.css\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst Sidebar = observer((props) => {\r\n\tconst history = useHistory();\r\n\tconst { width } = useWindowDimensions();\r\n\r\n\tconst { loggedIn, user, resetAuthorization } = AuthStore;\r\n\tconst { sidebarIsCollapsed, sidebarIsToggled, collapseSidebar, toggleSidebar, openLoginForm, openRegistrateForm } = PagesStore;\r\n\r\n\tfunction toggleSidebarIfSmallScreen() {\r\n\t\tif (width < 1780 && width > 1440 && !sidebarIsCollapsed) collapseSidebar();\r\n\t\tif (width <= 1440) toggleSidebar();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ProSidebar className='sideNav' collapsed={sidebarIsCollapsed} hidden={!sidebarIsToggled}>\r\n\t\t\t<Menu iconShape='round' hidden={!loggedIn}>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='user-circle' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/user/${user.id}`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/user/${user.id}`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tПрофиль\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='user-friends' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/user/${user.id}/Друзья`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/user/${user.id}/Друзья`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tДрузья\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='tv' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/unwatched`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/unwatched`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tНепросмотренное\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='calendar-day' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/calendar`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/calendar`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tКалендарь\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='cog' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/settings`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(`/settings`);\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tНастройки\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='sign-out-alt' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\tresetAuthorization();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tВыход\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t\t<Menu iconShape='round' hidden={loggedIn}>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='sign-in-alt' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tВойти\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem icon={<MDBIcon icon='user-plus' />}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`/`}\r\n\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\topenRegistrateForm();\r\n\t\t\t\t\t\t\ttoggleSidebarIfSmallScreen();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t\t<SidebarFooter>\r\n\t\t\t\t<Menu iconShape='round'>\r\n\t\t\t\t\t<MenuItem icon={sidebarIsCollapsed ? <MDBIcon icon='arrow-right' /> : <MDBIcon icon='arrow-left' />} onClick={collapseSidebar}>\r\n\t\t\t\t\t\tСвернуть\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t</Menu>\r\n\t\t\t</SidebarFooter>\r\n\t\t</ProSidebar>\r\n\t);\r\n});\r\n\r\nexport default Sidebar;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst LoginForm = observer((props) => {\r\n\tconst { tryAuth, authState } = AuthStore;\r\n\tconst { LoginFormIsOpen, closeLoginForm, openResetPasswordForm, openRegistrateForm } = PagesStore;\r\n\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (authState === \"done\") closeLoginForm();\r\n\t}, [authState, closeLoginForm]);\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={LoginFormIsOpen} toggle={closeLoginForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='loginBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\ttryAuth(login, password);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Войти</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!authState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t\t\t\t{authState}\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tЛогин\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='form-control' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПароль\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='form-control' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='confirmButton'>\r\n\t\t\t\t\t\t\t\t\t\t{authState !== \"pending\" ? \"Войти\" : \"Загрузка...\"}\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\tclassName='passwordResetLabel'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tcloseLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\topenResetPasswordForm();\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tВосстановить пароль\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\tclassName='passwordResetLabel'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tcloseLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\topenRegistrateForm();\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tЗарегистрироваться\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n});\r\n\r\nexport default LoginForm;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\n\r\n/**\r\n * КОмпонент формы авторизации\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst RegistrationForm = observer((props) => {\r\n\tconst { register, registrateState, user } = AuthStore;\r\n\tconst { RegistrateFormIsOpen, closeRegistrateForm } = PagesStore;\r\n\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [login, setLogin] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={RegistrateFormIsOpen} toggle={closeRegistrateForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='registrationBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!registrateState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t\t\t\t{registrateState}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success' hidden={user.email === \"\"}>\r\n\t\t\t\t\t\t\t\t\t{user.login}, добро пожаловать! Осталось только подтвердить вашу почту\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<h4>Регистрация</h4>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='loginInput'>Никнейм</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='loginInput' className='form-control' value={login} onChange={(event) => setLogin(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput'>Электронная почта</label>\r\n\t\t\t\t\t\t\t\t<input type='email' id='emailInput' className='form-control' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordInput'>Пароль</label>\r\n\t\t\t\t\t\t\t\t<input type='password' id='passwordInput' className='form-control' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='passwordConfirmInput'>Подтверждение пароля</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\t\tid='passwordConfirmInput'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tstyle={passwordConfirm === password ? { outlineColor: \"green\" } : { outlineColor: \"red\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={passwordConfirm}\r\n\t\t\t\t\t\t\t\t\tonChange={(event) => setPasswordConfirm(event.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn\r\n\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\tclassName='confirmButton'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={password !== passwordConfirm || login.length < 1 || email.length < 1 || password.length < 1}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => register(login, email, password)}>\r\n\t\t\t\t\t\t\t\t\t\t{registrateState !== \"pending\" ? \"Зарегистрироваться\" : \"Загрузка...\"}\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n});\r\n\r\nexport default RegistrationForm;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBModal, MDBModalBody, MDBContainer, MDBRow, MDBCol, MDBBtn } from \"mdbreact\";\r\n\r\n/**\r\n * КОмпонент формы сброса пароля\r\n * @param {number} Параметр, при изменении которого компонент открывается\r\n */\r\nconst ResetPasswordForm = observer((props) => {\r\n\tconst { resetPassword, resetPasswordState } = AuthStore;\r\n\tconst { ResetPasswordFormIsOpen, closeResetPasswordForm } = PagesStore;\r\n\r\n\tconst [email, setEmail] = useState(\"\");\r\n\r\n\treturn (\r\n\t\t<MDBModal isOpen={ResetPasswordFormIsOpen} toggle={closeResetPasswordForm} size='sm' centered>\r\n\t\t\t<MDBModalBody className='loginBody'>\r\n\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\tresetPassword(email);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<p className='h4 text-center mb-4'>Сбросить пароль</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-danger' hidden={!resetPasswordState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t\t\t\t{resetPasswordState}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='note note-success' hidden={resetPasswordState !== \"done\"}>\r\n\t\t\t\t\t\t\t\t\tНа вашу почту отправлено письмо\r\n\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t<label htmlFor='emailInput' className='grey-text'>\r\n\t\t\t\t\t\t\t\t\tПочта\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input type='text' id='emailInput' className='form-control' value={email} onChange={(event) => setEmail(event.target.value)} />\r\n\r\n\t\t\t\t\t\t\t\t<div className='text-center mt-4'>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn type='submit' className='confirmButton'>\r\n\t\t\t\t\t\t\t\t\t\t{resetPasswordState !== \"pending\" ? \"Сбросить\" : \"Загрузка...\"}\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t</MDBRow>\r\n\t\t\t\t</MDBContainer>\r\n\t\t\t</MDBModalBody>\r\n\t\t</MDBModal>\r\n\t);\r\n});\r\n\r\nexport default ResetPasswordForm;\r\n","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../store/AuthStore\";\r\nimport PagesStore from \"../store/PagesStore\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst HomePage = observer((props) => {\r\n\tlet history = useHistory();\r\n\tconst { user, loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg textureBG' />\r\n\t\t\t<div className='contentPage'>\r\n\t\t\t\t<div className='contentBody header'>\r\n\t\t\t\t\t<h2>Добро пожаловать на Interests!</h2>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<h3>Что это?</h3>\r\n\t\t\t\t\t<h5>Interests - сайт для отслеживания фильмов, сериалов и видеоигр. </h5>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<h3>Какой функционал у сайта?</h3>\r\n\t\t\t\t\t<h5>Здесь можно вести персональный список интересного вам контента, выставлять ему оценки и писать отзывы, а также отслеживать активность ваших друзей.</h5>\r\n\t\t\t\t\t<h5>\r\n\t\t\t\t\t\tВ{\" \"}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={\"/user/\" + user.id}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/user/\" + user.id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tпрофиле\r\n\t\t\t\t\t\t</a>{\" \"}\r\n\t\t\t\t\t\tсобраны все добавленные игры, фильмы и сериалы, а также ваша персональная статистика.\r\n\t\t\t\t\t</h5>\r\n\t\t\t\t\t<h5>\r\n\t\t\t\t\t\tC помощью <a href='/search/example'>поиска</a> можно найти интересущий вас тайтл или человека.\r\n\t\t\t\t\t</h5>\r\n\t\t\t\t\t<h5>\r\n\t\t\t\t\t\tВ <a href={\"/calendar/\"}>календаре</a> отображены все грядущие релизы из вашего списка. Вы можете подписаться на email уведомления о новых релизах в{\" \"}\r\n\t\t\t\t\t\t<a href={\"/settings/\"}>настройках</a>\r\n\t\t\t\t\t</h5>\r\n\t\t\t\t\t<h5>\r\n\t\t\t\t\t\tРаздел <a href={\"/unwatched/\"}>непросмотренное</a> предназначен для отслеживания непрсмотренных серий ваших сериалов.\r\n\t\t\t\t\t</h5>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<h3>Что такое статус контента</h3>\r\n\t\t\t\t\t<h5>\r\n\t\t\t\t\t\tНа странице фильма, сериала или игры есть блок кнопок, состоящий из различных статусов. При выборе любого статуса, кроме \"Не смотрел\" или \"Не играл\", тайтл добавляется к вам в\r\n\t\t\t\t\t\tпрофиль.\r\n\t\t\t\t\t</h5>\r\n\t\t\t\t\t<h5>\r\n\t\t\t\t\t\tВ зависимости от статуса, тайтл будет по разному восприниматься системой. Например, тайтлы со статусом \"Буду смотреть\" не учитываются при подсчете статистики. Или сериалы со\r\n\t\t\t\t\t\tстатусом \"Дропнул\" не будут выводиться в разделах Непросмотренное и Календарь.\r\n\t\t\t\t\t</h5>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<h3>Зачем нужна подписка на пользователя</h3>\r\n\t\t\t\t\t<h5>После подписки на пользователя вы будете видеть активность всех своих друзей в разделе Профиль, во вкладке Друзья.</h5>\r\n\t\t\t\t\t<h5>На странице любого тайтла будут отображены отзывы ваших друзей, если они оценили его ранее.</h5>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default HomePage;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport AuthStore from \"./AuthStore\";\r\nimport * as gameRequests from \"../services/gameRequests\";\r\n\r\nclass Game {\r\n\tgame = {};\r\n\tgameState = \"done\";\r\n\r\n\tuserInfo = { status: null, review: \"\", score: 0, spent_time: 0 };\r\n\tfriendsInfo = [];\r\n\tuserInfoState = \"done\";\r\n\r\n\tsetStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestGame = async (id) => {\r\n\t\tthis.gameState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tgameRequests.getGame(localStorage.getItem(\"token\"), id).then(this.requestGameSuccess, this.requestGameFailure);\r\n\t};\r\n\trequestGameSuccess = (result) => {\r\n\t\tthis.game = result;\r\n\t\tthis.gameState = \"done\";\r\n\t};\r\n\trequestGameFailure = (error) => {\r\n\t\tthis.gameState = \"error: \" + error.response.statusText;\r\n\t};\r\n\r\n\trequestUserInfo = async (slug) => {\r\n\t\tthis.userInfoState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tgameRequests.getGameUserInfo(localStorage.getItem(\"token\"), slug).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\r\n\t};\r\n\trequestUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetGameStatus = async (userInfo) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\tthis.setStatusState = \"pending\";\r\n\t\t\tgameRequests.setGameStatus(localStorage.getItem(\"token\"), this.game.slug, userInfo).then(this.setGameStatusSuccess, this.setGameStatusFailure);\r\n\t\t}\r\n\t};\r\n\tsetGameStatusSuccess = (result) => {\r\n\t\tthis.setStatusState = \"done\";\r\n\t};\r\n\tsetGameStatusFailure = (error) => {\r\n\t\tthis.setStatusState = \"error: \" + error;\r\n\t};\r\n\r\n\tget anyError() {\r\n\t\tif (this.gameState.startsWith(\"error:\")) return this.gameState;\r\n\t\tif (this.userInfoState.startsWith(\"error:\")) return this.userInfoState;\r\n\t\tif (this.setStatusState.startsWith(\"error:\")) return this.setStatusState;\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nconst GameStore = new Game();\r\n//export default remotedev(GameStore, { name: \"Game\" });\r\nexport default GameStore;\r\n","import React from \"react\";\r\n\r\nfunction StatusButtonGroup({ statuses, activeColor, onChangeStatus, userStatus }) {\r\n\treturn (\r\n\t\t<div className='contentStatuses'>\r\n\t\t\t{statuses.map((status, counter) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={\"contentStatus\" + (userStatus === status ? \" active\" : \"\")}\r\n\t\t\t\t\tkey={status}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonChangeStatus(status);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{status}\r\n\t\t\t\t</button>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default StatusButtonGroup;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction FriendsActivityRow({ info }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className='fActivityBlock'>\r\n\t\t\t<h5 className='fActivityUser'>\r\n\t\t\t\t<a\r\n\t\t\t\t\thref={window.location.origin + \"/user/\" + info.user.id}\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\thistory.push(\"/user/\" + info.user.id);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{info.user.username}\r\n\t\t\t\t</a>\r\n\t\t\t</h5>\r\n\t\t\t<div className='fActivityInfo'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t\tinitialRating={info.score}\r\n\t\t\t\t\tclassName='fActivityInfoText'\r\n\t\t\t\t\treadonly={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<p className='fActivityInfoText'>Статус: {info.status} </p>\r\n\t\t\t\t<p className='fActivityInfoText' hidden={!info.spent_time}>\r\n\t\t\t\t\tВремя проходения: {info.spent_time} {intToHours(info.spent_time)}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className='fActivityInfoText' hidden={info.review === \"\"}>\r\n\t\t\t\t\tОтзыв: {info.review}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default FriendsActivityRow;\r\n","import React from \"react\";\r\nimport FriendsActivityRow from \"./FriendsActivityRow\";\r\n\r\nfunction FriendsActivity({ info }) {\r\n\treturn <div>{typeof info !== \"undefined\" ? info?.map((friendInfo) => <FriendsActivityRow info={friendInfo} key={friendInfo.user.id} />) : \"\"}</div>;\r\n}\r\n\r\nexport default FriendsActivity;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction TimeToBeat({ hltbInfo }) {\r\n\treturn (\r\n\t\t<div hidden={!hltbInfo || hltbInfo === \"0 часов\" || (hltbInfo?.gameplay_main < 0 && hltbInfo?.gameplay_main_extra < 0 && hltbInfo?.gameplay_completionist < 0)}>\r\n\t\t\t<p style={{ display: \"inline\" }}>Время прохождения: </p>\r\n\t\t\t<div hidden={hltbInfo?.gameplay_main === -1} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='light-green-text' title={\"Главный сюжет\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo?.gameplay_main ? hltbInfo?.gameplay_main : hltbInfo} {hltbInfo?.gameplay_main_unit}\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t</div>{\" \"}\r\n\t\t\t<p style={{ display: \"inline\" }}> </p>\r\n\t\t\t<div hidden={hltbInfo?.gameplay_main_extra === -1} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='yellow-text' title={\"Главный сюжет + побочные задания\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo?.gameplay_main_extra} {hltbInfo?.gameplay_main_extra_unit}\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t</div>{\" \"}\r\n\t\t\t<p style={{ display: \"inline\" }}> </p>\r\n\t\t\t<div hidden={!hltbInfo || hltbInfo?.gameplay_completionist === -1} style={{ display: \"inline\" }}>\r\n\t\t\t\t<MDBIcon far icon='clock' className='red-text' title={\"Полное прохождение\"} />\r\n\t\t\t\t<span className='hs' />\r\n\t\t\t\t{hltbInfo?.gameplay_completionist} {hltbInfo?.gameplay_completionist_unit}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TimeToBeat;\r\n","import React from \"react\";\r\n\r\nfunction ScoreBlock({ score, text, className }) {\r\n\tfunction getColor(score) {\r\n\t\tswitch (true) {\r\n\t\t\tcase score >= 80:\r\n\t\t\t\treturn \"green\";\r\n\t\t\tcase score >= 60 && score < 80:\r\n\t\t\t\treturn \"yellow\";\r\n\t\t\tcase score < 60:\r\n\t\t\t\treturn \"red\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"green\";\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div hidden={!score} className={className}>\r\n\t\t\t<div className={\"metacritic \" + getColor(score)}>\r\n\t\t\t\t<p>{score}</p>\r\n\t\t\t</div>\r\n\t\t\t<p className='metacriticText'>{text}</p>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ScoreBlock;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nimport Rating from \"react-rating\";\r\n\r\nfunction RatingBlock({ initialRating, readonly, onChange, size }) {\r\n\treturn (\r\n\t\t<Rating\r\n\t\t\tstop={10}\r\n\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: size }} />}\r\n\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: size }} title={n} />\r\n\t\t\t))}\r\n\t\t\tinitialRating={initialRating}\r\n\t\t\treadonly={readonly}\r\n\t\t\tonChange={onChange}\r\n\t\t\tstyle={{ marginBottom: \"10px\" }}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default RatingBlock;\r\n","import React from \"react\";\r\n\r\nfunction InputNumber({ value, max, min, onChange, id, dataList }) {\r\n\treturn (\r\n\t\t<div className='customNUD' id={id}>\r\n\t\t\t<button\r\n\t\t\t\tclassName='minusButton'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (!min || parseFloat(value) > min + 1) onChange(parseFloat(value) - 1);\r\n\t\t\t\t}}>\r\n\t\t\t\t-\r\n\t\t\t</button>\r\n\t\t\t<input\r\n\t\t\t\ttype='number'\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tmax={max ? max : \"\"}\r\n\t\t\t\tmin={min ? min : \"\"}\r\n\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\tif ((!min || event.target.value > min) && (!max || event.target.value < max)) onChange(parseFloat(event.target.value));\r\n\t\t\t\t}}\r\n\t\t\t\tstyle={{ width: `${value.toString().length * 15}px` }}\r\n\t\t\t/>\r\n\t\t\t<button\r\n\t\t\t\tclassName='plusButton'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (!max || value < max - 1) onChange(parseFloat(value) + 1);\r\n\t\t\t\t}}>\r\n\t\t\t\t+\r\n\t\t\t</button>\r\n\t\t\t<div className='dataList'>\r\n\t\t\t\t{dataList?.map((data, counter) => (\r\n\t\t\t\t\t<div key={counter} onClick={() => onChange(parseFloat(data))}>\r\n\t\t\t\t\t\t{data}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default InputNumber;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport GameStore from \"../../store/GameStore\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport TimeToBeat from \"./TimeToBeat\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\nimport Rating from \"../Common/Rating\";\r\nimport InputNumber from \"../Common/InputNumber\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst GamePage = observer((props) => {\r\n\tconst { game, gameState, requestGame, setGameStatus, userInfo, friendsInfo, userInfoState, requestUserInfo, anyError } = GameStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [spentTime, setSpentTime] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не играл\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetClearUI();\r\n\t\t\trequestGame(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestGame]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, loggedIn]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = game.name;\r\n\t}, [game]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetSpentTime(userInfo.spent_time);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetClearUI();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (anyError) toast.error(anyError);\r\n\t}, [anyError]);\r\n\r\n\tfunction setClearUI() {\r\n\t\tsetReview(\"\");\r\n\t\tsetSpentTime(\"\");\r\n\t\tsetUserStatus(\"Не играл\");\r\n\t\tsetUserRate(0);\r\n\t}\r\n\r\n\tfunction strToFloat(text) {\r\n\t\tlet cleanStr = text;\r\n\t\tif (cleanStr && cleanStr !== -1)\r\n\t\t\tif (cleanStr.indexOf(\"½\") + 1) return parseFloat(cleanStr) + 0.5;\r\n\t\t\telse return parseFloat(cleanStr);\r\n\t}\r\n\r\n\tfunction hltbToDatalist(hltbInfo) {\r\n\t\tlet newData = [];\r\n\t\tif (!(!hltbInfo || hltbInfo === \"0 часов\" || hltbInfo?.gameplay_main === -1)) newData.push(strToFloat(hltbInfo?.gameplay_main ? hltbInfo?.gameplay_main : hltbInfo));\r\n\t\tif (hltbInfo?.gameplay_main_extra !== -1) newData.push(strToFloat(hltbInfo?.gameplay_main_extra));\r\n\t\tif (hltbInfo?.gameplay_completionist !== -1) newData.push(strToFloat(hltbInfo?.gameplay_completionist));\r\n\r\n\t\treturn newData;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${game.background})` }} />\r\n\t\t\t<LoadingOverlay active={gameState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='contentPage'>\r\n\t\t\t\t\t<div className='contentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock widePoster'>\r\n\t\t\t\t\t\t\t<img src={game.poster} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='infoBlock tightInfo'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{game.name}</h1>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p>Разработчики: {game.developers}</p>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {game.release_date}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {game.genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Платформы: {game.platforms}</p>\r\n\t\t\t\t\t\t\t\t<TimeToBeat hltbInfo={game.hltb || game.playtime} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\tsetGameStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize='1.5rem'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не играл\", \"Буду играть\", \"Играю\", \"Дропнул\", \"Прошел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не играл\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={game.metacritic} text='Metascore' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{/* <video width='800' height='450' controls='controls' poster={game.rawg?.clip?.preview} src={game.rawg?.clip?.clip} type='video' /> */}\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: game.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзыв</h3>\r\n\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && gameState !== \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t<div className='reviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t\t<div className='reviewBlock'>\r\n\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' id='reviewInput' value={review} onChange={(event) => setReview(event.target.value)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className='spentTimeBlock'>\r\n\t\t\t\t\t\t\t\t\tВремя прохождения (часы)\r\n\t\t\t\t\t\t\t\t\t<InputNumber id='spentTimeInput' value={spentTime} min={0} max={100000} onChange={(value) => setSpentTime(value)} dataList={hltbToDatalist(game.hltb)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"saveReviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не играл\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetGameStatus({ review: review, spent_time: spentTime });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t<div className='additionalBody'></div>\r\n\t\t\t\t\t\t<div className='friendsBlock' hidden={!loggedIn | (friendsInfo?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default GamePage;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport AuthStore from \"./AuthStore\";\r\nimport * as movieRequests from \"../services/movieRequests\";\r\n\r\nclass Movie {\r\n\tmovie = { tmdb: { title: \"\", poster_path: \"\", developers: [{}] } };\r\n\tmovieState = \"done\";\r\n\r\n\tuserInfo = { status: null, review: \"\", score: 0, friends_info: [] };\r\n\tfriendsInfo = [];\r\n\tuserInfoState = \"done\";\r\n\r\n\tsetStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestMovie = async (id) => {\r\n\t\tthis.movieState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tmovieRequests.getMovie(localStorage.getItem(\"token\"), id).then(this.requestMovieSuccess, this.requestMovieFailure);\r\n\t};\r\n\trequestMovieSuccess = (result) => {\r\n\t\tthis.movie = result;\r\n\t\tthis.movieState = \"done\";\r\n\t};\r\n\trequestMovieFailure = (error) => {\r\n\t\tthis.movieState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUserInfo = async (id) => {\r\n\t\tthis.userInfoState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tmovieRequests.getMovieUserInfo(localStorage.getItem(\"token\"), id).then(this.requestUserInfoSuccess, this.requestUserInfoFailure);\r\n\t};\r\n\trequestUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetMovieStatus = async (userInfo) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\tthis.setStatusState = \"pending\";\r\n\t\t\tmovieRequests.setMovieStatus(localStorage.getItem(\"token\"), this.movie.id, userInfo).then(this.setMovieStatusSuccess, this.setMovieStatusFailure);\r\n\t\t}\r\n\t};\r\n\tsetMovieStatusSuccess = (result) => {\r\n\t\tthis.setStatusState = \"done\";\r\n\t};\r\n\tsetMovieStatusFailure = (error) => {\r\n\t\tthis.setStatusState = \"error: \" + error;\r\n\t};\r\n\r\n\tget anyError() {\r\n\t\tif (this.movieState.startsWith(\"error:\")) return this.movieState;\r\n\t\tif (this.userInfoState.startsWith(\"error:\")) return this.userInfoState;\r\n\t\tif (this.setStatusState.startsWith(\"error:\")) return this.setStatusState;\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nconst MovieStore = new Movie();\r\n//export default remotedev(MovieStore, { name: \"Movie\" });\r\nexport default MovieStore;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport AuthStore from \"./AuthStore\";\r\nimport * as userRequests from \"../services/userRequests\";\r\nimport * as showRequests from \"../services/showRequests\";\r\n\r\nclass CurrentUser {\r\n\tcalendar = {};\r\n\tsettings = {};\r\n\tunwatched = [];\r\n\tcalendarState = \"done\";\r\n\tsettingsState = \"done\";\r\n\tunwatchedState = \"done\";\r\n\tsaveSettingsState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestCalendar = async () => {\r\n\t\tif (AuthStore.checkAuthorization()) {\r\n\t\t\tthis.calendarState = \"pending\";\r\n\t\t\tuserRequests.getUserCalendar(localStorage.getItem(\"token\")).then(this.requestCalendarSuccess, this.requestCalendarFailure);\r\n\t\t}\r\n\t};\r\n\trequestCalendarSuccess = (result) => {\r\n\t\tthis.calendar = result;\r\n\t\tthis.calendarState = \"done\";\r\n\t};\r\n\trequestCalendarFailure = (error) => {\r\n\t\tthis.calendarState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSettings = async () => {\r\n\t\tif (AuthStore.checkAuthorization()) {\r\n\t\t\tthis.settingsState = \"pending\";\r\n\t\t\tuserRequests.getUserSettings(localStorage.getItem(\"token\")).then(this.requestSettingsSuccess, this.requestSettingsFailure);\r\n\t\t}\r\n\t};\r\n\trequestSettingsSuccess = (result) => {\r\n\t\tthis.settings = result;\r\n\t\tthis.settingsState = \"done\";\r\n\t};\r\n\trequestSettingsFailure = (error) => {\r\n\t\tthis.settingsState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUnwatched = async () => {\r\n\t\tif (AuthStore.checkAuthorization()) {\r\n\t\t\tthis.unwatchedState = \"pending\";\r\n\t\t\tshowRequests.getUnwatchedEpisodes(localStorage.getItem(\"token\")).then(this.requestUnwatchedSuccess, this.requestUnwatchedFailure);\r\n\t\t}\r\n\t};\r\n\trequestUnwatchedSuccess = (result) => {\r\n\t\tthis.unwatched = result;\r\n\t\tthis.unwatchedState = \"done\";\r\n\t};\r\n\trequestUnwatchedFailure = (error) => {\r\n\t\tthis.unwatchedState = \"error: \" + error;\r\n\t};\r\n\r\n\tpatchSettings = async (settings) => {\r\n\t\tif (AuthStore.checkAuthorization()) {\r\n\t\t\tthis.saveSettingsState = \"pending\";\r\n\t\t\tuserRequests.patchUserSettings(localStorage.getItem(\"token\"), settings).then(this.patchSettingsSuccess, this.patchSettingsFailure);\r\n\t\t}\r\n\t};\r\n\tpatchSettingsReset = () => {\r\n\t\tthis.saveSettingsState = \"done\";\r\n\t};\r\n\tpatchSettingsSuccess = (result) => {\r\n\t\tthis.saveSettingsState = \"saved\";\r\n\t\tthis.settings = result;\r\n\t\tsetTimeout(this.patchSettingsReset, 1000);\r\n\t};\r\n\tpatchSettingsFailure = (error) => {\r\n\t\tthis.saveSettingsState = \"error: \" + error;\r\n\t};\r\n}\r\n\r\nconst CurrentUserStore = new CurrentUser();\r\n//export default remotedev(CurrentUserStore, { name: \"CurrentUser\" });\r\nexport default CurrentUserStore;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport MovieStore from \"../../store/MovieStore\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\nimport CurrentUserStore from \"../../store/CurrentUserStore\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\nimport Rating from \"../Common/Rating\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst MoviePage = observer((props) => {\r\n\tconst { movie, movieState, requestMovie, setMovieStatus, userInfo, friendsInfo, userInfoState, requestUserInfo, anyError } = MovieStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { saveSettingsState } = CurrentUserStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestMovie(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestMovie]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = movie.name;\r\n\t}, [movie]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (anyError) toast.error(anyError);\r\n\t}, [anyError]);\r\n\tuseEffect(() => {\r\n\t\tif (saveSettingsState.startsWith(\"error:\")) toast.error(`Ошибка фона! ${saveSettingsState}`);\r\n\t\telse if (saveSettingsState === \"saved\") toast.success(`Фон установлен!`);\r\n\t}, [saveSettingsState]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${movie.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='contentPage'>\r\n\t\t\t\t\t<div className='contentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock tightPoster'>\r\n\t\t\t\t\t\t\t<img src={movie.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='infoBlock wideInfo'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{movie.name}</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{movie.original_name}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p>Дата релиза: {movie.release_date}</p>\r\n\t\t\t\t\t\t\t\t<p>Продолжительность (мин): {movie.runtime}</p>\r\n\t\t\t\t\t\t\t\t<p>Жанр: {movie.genres}</p>\r\n\t\t\t\t\t\t\t\t<p>Компания: {movie.production_companies}</p>\r\n\t\t\t\t\t\t\t\t<p>Слоган: {movie.tagline}</p>\r\n\t\t\t\t\t\t\t\t<p>В ролях: {movie.cast}</p>\r\n\t\t\t\t\t\t\t\t<p>Режиссер: {movie.directors}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize='1.5rem'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={movie.score} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: movie.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='reviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзыв</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !movieState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<div className='reviewBlock'>\r\n\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' id='reviewInput' value={review} onChange={(event) => setReview(event.target.value)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"saveReviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetMovieStatus({ review: review });\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='friendsBlock' hidden={!loggedIn | (friendsInfo?.length < 1)}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default MoviePage;\r\n","import { makeAutoObservable, runInAction } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport AuthStore from \"./AuthStore\";\r\nimport * as showRequests from \"../services/showRequests\";\r\n\r\nclass Show {\r\n\tshow = {};\r\n\tshowState = \"done\";\r\n\tuserInfo = { status: null, review: \"\", score: 0 };\r\n\tfriendsInfo = [];\r\n\tuserInfoState = \"done\";\r\n\r\n\tshowSeasons = {};\r\n\tshowSeasonsState = {};\r\n\tshowSeasonsUserInfo = {};\r\n\tshowSeasonsUserInfoState = {};\r\n\r\n\tsetStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\trequestShow = async (id) => {\r\n\t\tthis.showState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tshowRequests.getShow(localStorage.getItem(\"token\"), id).then(this.requestShowSuccess, this.requestShowFailure);\r\n\t};\r\n\trequestShowSuccess = (result) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = \"done\";\r\n\t};\r\n\trequestShowFailure = (error) => {\r\n\t\tthis.showState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeason = async (showID, seasonNumber) => {\r\n\t\tthis.showState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tshowRequests.getShowSeason(localStorage.getItem(\"token\"), showID, seasonNumber).then(this.requestSeasonSuccess, this.requestSeasonFailure);\r\n\t};\r\n\trequestSeasonSuccess = (result) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = \"done\";\r\n\t};\r\n\trequestSeasonFailure = (error) => {\r\n\t\tthis.showState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeasons = async (showID, seasonNumber) => {\r\n\t\tthis.showSeasonsState[seasonNumber] = \"pending\";\r\n\t\tthis.showSeasons[seasonNumber] = {};\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tshowRequests.getShowSeason(localStorage.getItem(\"token\"), showID, seasonNumber).then(\r\n\t\t\t(res) => this.requestSeasonsSuccess(res, seasonNumber),\r\n\t\t\t(res) => this.requestSeasonsFailure(res, seasonNumber)\r\n\t\t);\r\n\t};\r\n\trequestSeasonsSuccess = (result, seasonNumber) => {\r\n\t\tthis.showSeasons[seasonNumber] = result;\r\n\t\tthis.showSeasonsState[seasonNumber] = \"done\";\r\n\t};\r\n\trequestSeasonsFailure = (error, seasonNumber) => {\r\n\t\tthis.showSeasonsState[seasonNumber] = \"error: \" + error;\r\n\t};\r\n\r\n\trequestEpisode = async (showID, seasonNumber, episodeNumber) => {\r\n\t\tthis.showState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tshowRequests.getShowEpisode(localStorage.getItem(\"token\"), showID, seasonNumber, episodeNumber).then(this.requestEpisodeSuccess, this.requestEpisodeFailure);\r\n\t};\r\n\trequestEpisodeSuccess = (result) => {\r\n\t\tthis.show = result;\r\n\t\tthis.showState = \"done\";\r\n\t};\r\n\trequestEpisodeFailure = (error) => {\r\n\t\tthis.showState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestShowUserInfo = async (id) => {\r\n\t\tthis.userInfoState = \"pending\";\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\tshowRequests.getShowUserInfo(localStorage.getItem(\"token\"), id).then(this.requestShowUserInfoSuccess, this.requestShowUserInfoFailure);\r\n\t\t}\r\n\t};\r\n\trequestShowUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = result.user_info;\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestShowUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeasonUserInfo = async (showID, seasonID) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\trunInAction(() => (this.userInfoState = \"pending\"));\r\n\t\t\tshowRequests.getShowSeasonUserInfo(localStorage.getItem(\"token\"), showID, seasonID).then(this.requestSeasonUserInfoSuccess, this.requestSeasonUserInfoFailure);\r\n\t\t}\r\n\t};\r\n\trequestSeasonUserInfoSuccess = (result) => {\r\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info };\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t\tthis.userInfoState = \"done\";\r\n\t};\r\n\trequestSeasonUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestSeasonsUserInfo = async (showID, seasonID) => {\r\n\t\tthis.showSeasonsUserInfo[seasonID] = {};\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\trunInAction(() => (this.showSeasonsUserInfoState[seasonID] = \"pending\"));\r\n\t\t\tshowRequests.getShowSeasonUserInfo(localStorage.getItem(\"token\"), showID, seasonID).then(\r\n\t\t\t\t(res) => this.requestSeasonsUserInfoSuccess(res, seasonID),\r\n\t\t\t\t(res) => this.requestSeasonsUserInfoFailure(res, seasonID)\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\trequestSeasonsUserInfoSuccess = (result, seasonID) => {\r\n\t\tthis.showSeasonsUserInfoState[seasonID] = \"done\";\r\n\t\tthis.showSeasonsUserInfo[seasonID] = { ...result.user_info, user_watched_show: result.user_watched_show, episodes: result.episodes_user_info, friends_info: result.friends_info };\r\n\t};\r\n\trequestSeasonsUserInfoFailure = (error, seasonID) => {\r\n\t\tthis.showSeasonsUserInfoState[seasonID] = \"error: \" + error;\r\n\t};\r\n\r\n\trequestEpisodeUserInfo = async (showID, seasonID, episodeID) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\trunInAction(() => (this.userInfoState = \"pending\"));\r\n\t\t\tshowRequests.getShowEpisodeUserInfo(localStorage.getItem(\"token\"), showID, seasonID, episodeID).then(this.requestEpisodeUserInfoSuccess, this.requestEpisodeUserInfoFailure);\r\n\t\t}\r\n\t};\r\n\trequestEpisodeUserInfoSuccess = (result) => {\r\n\t\tthis.userInfoState = \"done\";\r\n\t\tthis.userInfo = { ...result.user_info, user_watched_show: result.user_watched_show };\r\n\t\tthis.friendsInfo = result.friends_info;\r\n\t};\r\n\trequestEpisodeUserInfoFailure = (error) => {\r\n\t\tthis.userInfoState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetShowStatus = async (userInfo) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\tthis.setStatusState = \"pending\";\r\n\t\t\tshowRequests.setShowStatus(localStorage.getItem(\"token\"), this.show.id, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\r\n\t\t}\r\n\t};\r\n\tsetShowStatusSuccess = (result) => {\r\n\t\tthis.setStatusState = \"done\";\r\n\t};\r\n\tsetShowStatusFailure = (error) => {\r\n\t\tthis.setStatusState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetSeasonStatus = async (userInfo, showID, seasonNumber) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\trunInAction(() => (this.setStatusState = \"pending\"));\r\n\t\t\tshowRequests.setShowSeasonStatus(localStorage.getItem(\"token\"), showID, seasonNumber, userInfo).then(this.setShowStatusSuccess, this.setShowStatusFailure);\r\n\t\t}\r\n\t};\r\n\r\n\tsetEpisodesStatus = async (episodesList, showID, seasonsToUpdate = []) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\trunInAction(() => (this.setStatusState = \"pending\"));\r\n\t\t\tshowRequests.setShowEpisodesStatus(localStorage.getItem(\"token\"), showID, episodesList).then((result) => {\r\n\t\t\t\tif (seasonsToUpdate) for (let season in seasonsToUpdate) this.requestSeasonsUserInfo(showID, seasonsToUpdate[season]);\r\n\t\t\t\tthis.setShowStatusSuccess();\r\n\t\t\t}, this.setShowStatusFailure);\r\n\t\t}\r\n\t};\r\n\r\n\tgetShowSeason = (seasonNumber) => {\r\n\t\treturn this.showSeasons[seasonNumber];\r\n\t};\r\n\r\n\tgetShowSeasonState = (seasonNumber) => {\r\n\t\treturn this.showSeasonsState[seasonNumber];\r\n\t};\r\n\r\n\tgetShowSeasonUserInfo = (seasonNumber) => {\r\n\t\treturn this.showSeasonsUserInfo[seasonNumber];\r\n\t};\r\n\r\n\tgetEpisodesUserInfo = (season, id) => {\r\n\t\tfor (let episodeNumber in this.showSeasonsUserInfo[season].episodes) {\r\n\t\t\tlet episode = this.showSeasonsUserInfo[season].episodes[episodeNumber];\r\n\t\t\tif (episode.tmdb_id === id) return episode;\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tget anySeasonLoading() {\r\n\t\tfor (let season in this.showSeasonsState) if (this.showSeasonsState[season] === \"pending\") return true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tget anyError() {\r\n\t\tif (this.showState.startsWith(\"error:\")) return this.gameState;\r\n\t\tif (this.userInfoState.startsWith(\"error:\")) return this.userInfoState;\r\n\t\tif (this.setStatusState.startsWith(\"error:\")) return this.setStatusState;\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nconst ShowStore = new Show();\r\n//export default remotedev(ShowStore, { name: \"Show\" });\r\nexport default ShowStore;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction DetailedEpisodeRow({ episode, showID, setEpisodeUserStatus, loggedIn, userInfo, checkAll, userWatchedShow, setSaveEpisodes }) {\r\n\tlet history = useHistory();\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [isChecked, setIsChecked] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUserRate(userInfo?.score);\r\n\t\tsetIsChecked(userInfo?.score > -1);\r\n\t}, [userInfo]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (checkAll === -1) {\r\n\t\t\t\tsetIsChecked(false);\r\n\t\t\t} else if (checkAll === 1) {\r\n\t\t\t\tsetIsChecked(true);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[checkAll]\r\n\t);\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date).toLocaleDateString(\"ru-RU\");\r\n\t\tif (newDate !== \"Invalid Date\") return newDate;\r\n\t\telse return \"TBA\";\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='episodeRow detailRow'>\r\n\t\t\t<div className='episodeRowCheckDate'>\r\n\t\t\t\t<div className='episodeRowCheck' hidden={!loggedIn || !userWatchedShow}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\tid={`cbEpisode${episode.id}`}\r\n\t\t\t\t\t\tchecked={isChecked}\r\n\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\t\t\tsetIsChecked(res.target.checked);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className='episodeRowDate'>{parseDate(episode.air_date)}</p>\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='episodeRowRate'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstart={-1}\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' />))}\r\n\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' title={n} />))}\r\n\t\t\t\t\treadonly={!loggedIn}\r\n\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\tsetIsChecked(score > -1);\r\n\t\t\t\t\t\tsetEpisodeUserStatus({ episodes: [{ tmdb_id: episode.id, score: score }] }, showID);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<a\r\n\t\t\t\tclassName='episodeRowName detailRow'\r\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + episode.season_number + \"/episode/\" + episode.episode_number);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={episode.name}>\r\n\t\t\t\tСерия {episode.episode_number} - {episode.name}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailedEpisodeRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport { computed } from \"mobx\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport DetailedEpisodeRow from \"./DetailedEpisodeRow\";\r\nimport Rating from \"react-rating\";\r\n\r\nconst SeasonBlock = observer(\r\n\t({\r\n\t\tshowID,\r\n\t\tseasonNumber,\r\n\t\t//onChangeStatus,\r\n\t\tuserWatchedShow,\r\n\t}) => {\r\n\t\tconst { loggedIn } = AuthStore;\r\n\t\tconst { openLoginForm, setSaveEpisodes } = PagesStore;\r\n\t\tconst { requestSeasons, requestSeasonsUserInfo, setEpisodesStatus, setSeasonStatus } = ShowStore;\r\n\t\tconst showSeason = computed(() => ShowStore.getShowSeason(seasonNumber)).get();\r\n\t\tconst showSeasonState = computed(() => ShowStore.getShowSeasonState(seasonNumber)).get();\r\n\t\tconst showUserInfo = computed(() => ShowStore.getShowSeasonUserInfo(seasonNumber)).get();\r\n\r\n\t\tlet history = useHistory();\r\n\t\tconst [isChecked, setIsChecked] = useState(0);\r\n\t\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\trequestSeasons(showID, seasonNumber);\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[showID, seasonNumber, requestSeasons]\r\n\t\t);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tif (loggedIn) requestSeasonsUserInfo(showID, seasonNumber);\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[loggedIn, showID, seasonNumber]\r\n\t\t);\r\n\r\n\t\tuseEffect(\r\n\t\t\t() => {\r\n\t\t\t\tif (showUserInfo?.score) {\r\n\t\t\t\t\tsetUserRate(showUserInfo.score);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\t[showUserInfo]\r\n\t\t);\r\n\r\n\t\tfunction getEpisodeByID(episodes, id) {\r\n\t\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<LoadingOverlay active={showSeasonState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div key={showSeason?.id} className='seasonBlock'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName='name'>\r\n\t\t\t\t\t\t<h5> {showSeason?.name} </h5>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<div hidden={!loggedIn || !userWatchedShow} className='name'>\r\n\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, showID, seasonNumber);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<details open={true} className='episodeRows'>\r\n\t\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t\t<div style={{ marginLeft: \"5px\" }} hidden={!loggedIn || !userWatchedShow}>\r\n\t\t\t\t\t\t\tВыбрать все&nbsp;\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\tchecked={isChecked > 0}\r\n\t\t\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul className='content'>\r\n\t\t\t\t\t\t\t{showSeason?.episodes\r\n\t\t\t\t\t\t\t\t?.map((episode, counter) => (\r\n\t\t\t\t\t\t\t\t\t<li className='episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t<DetailedEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\tshowID={showID}\r\n\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(showUserInfo?.episodes, episode?.id)}\r\n\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\r\n\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\r\n\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userWatchedShow}\r\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t.reverse()}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</details>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nexport default SeasonBlock;\r\n","import React from \"react\";\r\nimport { toJS } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\n\r\nimport SeasonBlock from \"./SeasonBlock\";\r\n\r\nconst SeasonsBlock = observer(({ showID, seasons, userWatchedShow }) => {\r\n\tconst { showSeasonsUserInfo, showSeasons, setEpisodesStatus, setStatusState, anySeasonLoading } = ShowStore;\r\n\tconst { saveEpisodesBlockIsOpen, setSaveEpisodes } = PagesStore;\r\n\tconst { loggedIn } = AuthStore;\r\n\r\n\tfunction getEpisodeByID(episodes, id) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t}\r\n\r\n\tfunction sendEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tlet seasons = [];\r\n\t\tfor (let season in showSeasons) {\r\n\t\t\tfor (let episode in showSeasons[season].episodes) {\r\n\t\t\t\tlet currentValue = getEpisodeByID(showSeasonsUserInfo[season].episodes, showSeasons[season].episodes[episode].id);\r\n\t\t\t\tlet cbValue = document.getElementById(`cbEpisode${showSeasons[season].episodes[episode].id}`).checked;\r\n\t\t\t\tlet currentStatus = currentValue?.score > -1;\r\n\t\t\t\tif (cbValue !== currentStatus) {\r\n\t\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: cbValue ? 0 : -1 });\r\n\t\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\tfunction sendAllEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tlet seasons = [];\r\n\t\tfor (let season in showSeasons) {\r\n\t\t\tconsole.log(toJS(showSeasons));\r\n\t\t\tif (showSeasons[season].name !== \"Спецматериалы\")\r\n\t\t\t\tfor (let episode in showSeasons[season].episodes) {\r\n\t\t\t\t\tepisodes.push({ tmdb_id: showSeasons[season].episodes[episode].id, score: 0 });\r\n\t\t\t\t\tif (seasons.indexOf(season) === -1) seasons.push(season);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, showID, seasons);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<LoadingOverlay active={setStatusState === \"pending\"} spinner text='Обновление...'>\r\n\t\t\t<button\r\n\t\t\t\tclassName={\"checkAllEpisodesButton\"}\r\n\t\t\t\thidden={!loggedIn | !userWatchedShow}\r\n\t\t\t\tdisabled={anySeasonLoading}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsendAllEpisodes();\r\n\t\t\t\t}}>\r\n\t\t\t\tПосмотрел весь сериал\r\n\t\t\t</button>\r\n\t\t\t{seasons?.map((season) => <SeasonBlock showID={showID} seasonNumber={season.season_number} key={season.season_number} userWatchedShow={userWatchedShow} />).reverse()}\r\n\t\t\t<div className='saveEpisodesHeader' hidden={!saveEpisodesBlockIsOpen}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='saveEpisodesButton'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsendEpisodes();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tСохранить\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</LoadingOverlay>\r\n\t);\r\n});\r\n\r\nexport default SeasonsBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\nimport CurrentUserStore from \"../../store/CurrentUserStore\";\r\n\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport StatusButtonGroup from \"../Common/StatusButtonGroup\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport SeasonsBlock from \"./SeasonsBlock\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ShowPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\tconst { saveSettingsState } = CurrentUserStore;\r\n\tconst { requestShow, show, showState, setShowStatus, requestShowUserInfo, userInfo, friendsInfo, userInfoState, anyError } = ShowStore;\r\n\r\n\tlet { id } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userStatus, setUserStatus] = useState(\"Не смотрел\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\trequestShow(id);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[id, requestShow]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestShowUserInfo(id);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, id]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.status) {\r\n\t\t\t\tsetReview(userInfo.review);\r\n\t\t\t\tsetUserStatus(userInfo.status);\r\n\t\t\t\tsetUserRate(userInfo.score);\r\n\t\t\t} else {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetUserStatus(\"Не смотрел\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (anyError) toast.error(anyError);\r\n\t}, [anyError]);\r\n\tuseEffect(() => {\r\n\t\tif (saveSettingsState.startsWith(\"error:\")) toast.error(`Ошибка фона! ${saveSettingsState}`);\r\n\t\telse if (saveSettingsState === \"saved\") toast.success(`Фон установлен!`);\r\n\t}, [saveSettingsState]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${show.backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='contentPage'>\r\n\t\t\t\t\t<div className='contentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock tightPoster'>\r\n\t\t\t\t\t\t\t<img src={show.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='infoBlock wideInfo'>\r\n\t\t\t\t\t\t\t<h1 className='header'>{show.name}</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{show.original_name}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.genres}>Жанр: {show.genres}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.production_companies}>Компания: {show.production_companies}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.first_air_date}>Дата выхода первой серии: {show.first_air_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.last_air_date}>Дата выхода последней серии: {show.last_air_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={show.episode_runtime === null}>Продолжительность (мин): {show.episode_run_time}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество сезонов: {show.seasons_count}</p>\r\n\t\t\t\t\t\t\t\t<p>Количество серий: {show.episodes_count}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.status}>Статус: {show.status}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\treadonly={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ score: score });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<StatusButtonGroup\r\n\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\tstatuses={[\"Не смотрел\", \"Буду смотреть\", \"Смотрю\", \"Дропнул\", \"Посмотрел\"]}\r\n\t\t\t\t\t\t\t\t\tactiveColor='#4527a0'\r\n\t\t\t\t\t\t\t\t\tuserStatus={userStatus}\r\n\t\t\t\t\t\t\t\t\tonChangeStatus={(status) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetUserStatus(status);\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ status: status });\r\n\t\t\t\t\t\t\t\t\t\t\tif (status === \"Не смотрел\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t<ScoreBlock score={show.score} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showSeasonsBody'>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Список серий</h3>\r\n\t\t\t\t\t\t\t<SeasonsBlock showID={show.id} seasons={show.seasons} userWatchedShow={userStatus !== \"Не смотрел\"} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='reviewBody' hidden={!loggedIn}>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"10px\" }}>Отзыв</h3>\r\n\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t<div className='reviewBlock'>\r\n\t\t\t\t\t\t\t\t\tВаш отзыв\r\n\t\t\t\t\t\t\t\t\t<textarea type='textarea' id='reviewInput' value={review} onChange={(event) => setReview(event.target.value)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={\"saveReviewButton\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={!loggedIn | (userStatus === \"Не смотрел\")}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowStatus({ review: review });\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='friendsBlock' hidden={friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ShowPage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { AreaChart, linearGradient, XAxis, Tooltip, YAxis, Area, ResponsiveContainer } from \"recharts\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport DetailedEpisodeRow from \"./DetailedEpisodeRow\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst SeasonPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { requestSeason, show, showState, setSeasonStatus, setEpisodesStatus, requestSeasonUserInfo, userInfo, userInfoState, friendsInfo, setStatusState } = ShowStore;\r\n\tconst { openLoginForm, setSaveEpisodes, saveEpisodesBlockIsOpen } = PagesStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { show_id, number } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(0);\r\n\tconst [chartData, setChartData] = useState([]);\r\n\tconst [isChecked, setIsChecked] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(0);\r\n\t\t\tsetIsChecked(0);\r\n\t\t\trequestSeason(show_id, number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, number, requestSeason]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestSeasonUserInfo(show_id, number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(0);\r\n\t\t\t\tsetIsChecked(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.show?.tmdb_name + \" - \" + show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (show.episodes)\r\n\t\t\tif (show.episodes.length > 0) {\r\n\t\t\t\tlet newData = [];\r\n\t\t\t\tfor (let episode in show.episodes) {\r\n\t\t\t\t\tif (show.episodes[episode].vote_average > 0) newData.push({ name: \"Ep \" + show.episodes[episode].episode_number, Оценка: show.episodes[episode].vote_average });\r\n\t\t\t\t}\r\n\t\t\t\tsetChartData(newData);\r\n\t\t\t}\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (userInfo?.score) setUserRate(userInfo.score);\r\n\t\t\telse setUserRate(0);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\r\n\t}, [showState]);\r\n\tuseEffect(() => {\r\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\r\n\t}, [userInfoState]);\r\n\tuseEffect(() => {\r\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\r\n\t}, [setStatusState]);\r\n\r\n\tfunction getEpisodeByID(episodes, id) {\r\n\t\tfor (let episode in episodes) if (episodes[episode].tmdb_id === id) return episodes[episode];\r\n\t}\r\n\r\n\tfunction sendEpisodes() {\r\n\t\tlet episodes = [];\r\n\t\tfor (let episode in userInfo.episodes) {\r\n\t\t\tlet currentValue = userInfo.episodes[episode];\r\n\t\t\tlet cbValue = document.getElementById(`cbEpisode${currentValue.tmdb_id}`).checked;\r\n\t\t\tlet currentStatus = currentValue?.score > -1;\r\n\t\t\tif (cbValue !== currentStatus) episodes.push({ tmdb_id: currentValue.tmdb_id, score: cbValue ? 0 : -1 });\r\n\t\t}\r\n\t\tsetEpisodesStatus({ episodes }, show_id);\r\n\t\trequestSeasonUserInfo(show_id, number);\r\n\t\tsetSaveEpisodes(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${show.show?.tmdb_backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='contentPage'>\r\n\t\t\t\t\t<div className='contentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock tightPoster'>\r\n\t\t\t\t\t\t\t<img src={show.poster_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='infoBlock wideInfo'>\r\n\t\t\t\t\t\t\t<h1 className='header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show.show?.id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show.show?.tmdb_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{show.show?.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + show.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{show.show?.tmdb_original_name + \" - Season \" + show.season_number}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.air_date}>Дата выхода: {show.air_date}</p>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.episodes}>Количество серий: {show.episodes?.length}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />}\r\n\t\t\t\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetSeasonStatus({ score: score }, show_id, show.season_number);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName={\"saveReviewButton\"}\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSeasonStatus({ review: document.getElementById(\"reviewInput\").value }, show_id, show.season_number);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='showSeasonsBody'>\r\n\t\t\t\t\t\t\t<h3 style={{ paddingTop: \"15px\" }}>Список серий</h3>\r\n\t\t\t\t\t\t\t<details open={false} className='episodeRows' style={{ marginBottom: \"15px\" }}>\r\n\t\t\t\t\t\t\t\t<summary>Развернуть</summary>\r\n\t\t\t\t\t\t\t\t<div style={{ marginLeft: \"5px\" }} hidden={!loggedIn || !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t\tВыбрать все&nbsp;\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\t\tchecked={isChecked > 0}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(res) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes(true);\r\n\t\t\t\t\t\t\t\t\t\t\tsetIsChecked(res.target.checked ? 1 : -1);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t{show.episodes\r\n\t\t\t\t\t\t\t\t\t\t? show.episodes.map((episode, counter) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li className='episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DetailedEpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowID={show_id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserInfo={getEpisodeByID(userInfo.episodes, episode.id)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodeUserStatus={setEpisodesStatus}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckAll={isChecked}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserWatchedShow={userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSaveEpisodes={setSaveEpisodes}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</details>\r\n\t\t\t\t\t\t\t<div hidden={!(chartData.length > 0)}>\r\n\t\t\t\t\t\t\t\t{document.body.clientHeight < document.body.clientWidth ? (\r\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={200}>\r\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t<XAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<YAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<ResponsiveContainer width='100%' height={chartData.length * 30}>\r\n\t\t\t\t\t\t\t\t\t\t<AreaChart data={chartData} margin={{ top: 10, right: 20, left: 0, bottom: 0 }} layout='vertical'>\r\n\t\t\t\t\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id='colorUv' x1='0' y1='0' x2='0' y2='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='5%' stopColor='#8884d8' stopOpacity={0.8} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset='95%' stopColor='#8884d8' stopOpacity={0} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t\t\t\t\t\t<YAxis dataKey='name' interval={0} tick={{ fill: \"rgb(238, 238, 238)\" }} type='category' />\r\n\t\t\t\t\t\t\t\t\t\t\t<XAxis tickLine={false} domain={[0, 10]} tick={{ fill: \"rgb(238, 238, 238)\" }} tickCount={2} type='number' />\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip contentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Area type='monotone' dataKey='Оценка' stroke='#8884d8' fillOpacity={1} fill='url(#colorUv)' />\r\n\t\t\t\t\t\t\t\t\t\t</AreaChart>\r\n\t\t\t\t\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='friendsBlock' hidden={friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t\t<div className='saveEpisodesHeader' hidden={!saveEpisodesBlockIsOpen}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='saveEpisodesButton'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsendEpisodes();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tСохранить\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SeasonPage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\nimport PagesStore from \"../../store/PagesStore\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport { MDBIcon, MDBInput } from \"mdbreact\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nimport Rating from \"react-rating\";\r\nimport FriendsActivity from \"../Common/FriendsActivity\";\r\nimport ScoreBlock from \"../Common/ScoreBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst EpisodePage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { openLoginForm } = PagesStore;\r\n\tconst { requestEpisode, show, showState, setEpisodesStatus, requestEpisodeUserInfo, userInfo, userInfoState, friendsInfo, setStatusState } = ShowStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { show_id, season_number, episode_number } = useParams();\r\n\tconst [review, setReview] = useState(\"\");\r\n\tconst [userRate, setUserRate] = useState(-1);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetReview(\"\");\r\n\t\t\tsetUserRate(-1);\r\n\t\t\trequestEpisode(show_id, season_number, episode_number);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show_id, season_number, episode_number, requestEpisode]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestEpisodeUserInfo(show_id, season_number, episode_number);\r\n\t\t\telse {\r\n\t\t\t\tsetReview(\"\");\r\n\t\t\t\tsetUserRate(-1);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn, show_id, season_number, episode_number]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = show.show?.tmdb_name + \" - \" + show.name;\r\n\t}, [show]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (userInfo?.review) setReview(userInfo.review);\r\n\t\t\telse setReview(\"\");\r\n\r\n\t\t\tif (userInfo?.score > -1) setUserRate(userInfo.score);\r\n\t\t\telse setUserRate(-1);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userInfo]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${showState}`);\r\n\t}, [showState]);\r\n\tuseEffect(() => {\r\n\t\tif (userInfoState.startsWith(\"error:\")) toast.error(`Ошибка загрузки пользовательской информации! ${userInfoState}`);\r\n\t}, [userInfoState]);\r\n\tuseEffect(() => {\r\n\t\tif (setStatusState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${setStatusState}`);\r\n\t}, [setStatusState]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' style={{ backgroundImage: `url(${show.show?.tmdb_backdrop_path})` }} />\r\n\t\t\t<LoadingOverlay active={showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='contentPage'>\r\n\t\t\t\t\t<div className='contentHeader'>\r\n\t\t\t\t\t\t<div className='posterBlock widePoster'>\r\n\t\t\t\t\t\t\t<img src={show.still_path} className='img-fluid' alt='' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='infoBlock tightInfo'>\r\n\t\t\t\t\t\t\t<h1 className='header'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{show.show?.tmdb_name}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t{\" - \" + show.name}\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h5 style={{ marginBottom: \"10px\", marginTop: \"-10px\" }}>{show.show?.tmdb_original_name + \" - Season \" + show.season_number + \" - Episode \" + show.episode_number}</h5>\r\n\t\t\t\t\t\t\t<div className='mainInfo'>\r\n\t\t\t\t\t\t\t\t<p hidden={!show.air_date}>Дата выхода: {show.air_date}</p>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show_id + \"/season/\" + season_number}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + show_id + \"/season/\" + season_number);\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tСезон: {show.season_number}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div hidden={!loggedIn | !userInfo?.user_watched_show}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userInfoState === \"pending\" && !showState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\tstart={-1}\r\n\t\t\t\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat(\r\n\t\t\t\t\t\t\t\t\t\t\t[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' style={{ fontSize: \"25px\" }} />)\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat(\r\n\t\t\t\t\t\t\t\t\t\t\t[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' style={{ fontSize: \"25px\" }} title={n} />)\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\tinitialRating={userRate}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserRate(score);\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show.id, score: score }] }, show_id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<MDBInput type='textarea' id='reviewInput' label='Ваш отзыв' value={review} onChange={(event) => setReview(event.target.value)} outline />\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName={\"saveReviewButton\"}\r\n\t\t\t\t\t\t\t\t\t\thidden={!loggedIn | !userInfo?.user_watched_show}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!loggedIn) {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenLoginForm();\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEpisodesStatus({ episodes: [{ tmdb_id: show.id, review: review }] }, show_id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<ScoreBlock score={show.score} text='TMDB score' className='scoreBlock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Описание</h3>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: show.overview }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='friendsBlock' hidden={friendsInfo.length < 1}>\r\n\t\t\t\t\t\t\t<h4>Отзывы друзей</h4>\r\n\t\t\t\t\t\t\t<FriendsActivity info={friendsInfo} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default EpisodePage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardGame({ game }) {\r\n\tlet history = useHistory();\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (game.released) {\r\n\t\t\tlet mas = game.released.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [game]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCard'>\r\n\t\t\t<div className='searchCardImage' style={{ backgroundImage: `url(${game.background_image})` }} />\r\n\t\t\t<div className='searchCardText'>\r\n\t\t\t\t<div className='searchCardName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.slug}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + game.slug);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={game.name}>\r\n\t\t\t\t\t\t<h4>{game.name}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n//onMouseDown={mouseDownHandler}\r\n\r\nexport default CardGame;\r\n","import React from \"react\";\r\nimport CardGame from \"./Cards/CardGame\";\r\n\r\nfunction GamesBlock({ games, gamesPage, onPaginate, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t<h3>Игры</h3>\r\n\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={gamesPage === 1}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(gamesPage - 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&lt;\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t\t{games.map((game) => (\r\n\t\t\t\t\t\t<CardGame game={game} key={game.id} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t\t{games.length < 1 ? \"Игры не найдены\" : \"\"}\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={games.length < 6}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(gamesPage + 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&gt;\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n//onMouseDown={mouseDownHandler}\r\n\r\nexport default GamesBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardMovie({ movie }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (movie.release_date) {\r\n\t\t\tlet mas = movie.release_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [movie]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCard'>\r\n\t\t\t<div className='searchCardImage' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + movie.poster_path})` }} />\r\n\t\t\t<div className='searchCardText'>\r\n\t\t\t\t<div className='searchCardName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={movie.title}>\r\n\t\t\t\t\t\t<h4>{movie.title}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CardMovie;\r\n","import React from \"react\";\r\nimport CardMovie from \"./Cards/CardMovie\";\r\n\r\nfunction MoviesBlock({ movies, moviesPage, onPaginate, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t<h3>Фильмы</h3>\r\n\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={moviesPage === 1}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(moviesPage - 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&lt;\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t\t{movies.map((movie) => (\r\n\t\t\t\t\t\t<CardMovie movie={movie} key={movie.id} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t\t{movies.length < 1 ? \"Фильмы не найдены\" : \"\"}\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={movies.length < 20}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(moviesPage + 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&gt;\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n//onMouseDown={mouseDownHandler}\r\n\r\nexport default MoviesBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardShow({ show }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst [date, setDate] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (show.first_air_date) {\r\n\t\t\tlet mas = show.first_air_date.split(\"-\");\r\n\t\t\tlet newDate = mas[2] + \".\" + mas[1] + \".\" + mas[0];\r\n\t\t\tsetDate(newDate);\r\n\t\t} else setDate(\"\");\r\n\t}, [show]);\r\n\r\n\treturn (\r\n\t\t<div className='searchCard'>\r\n\t\t\t<div className='searchCardImage' style={{ backgroundImage: `url(${\"http://image.tmdb.org/t/p/w600_and_h900_bestv2\" + show.poster_path})` }} />\r\n\t\t\t<div className='searchCardText'>\r\n\t\t\t\t<div className='searchCardName'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + show.id}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + show.id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttitle={show.name}>\r\n\t\t\t\t\t\t<h4>{show.name}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p>{date}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CardShow;\r\n","import React from \"react\";\r\nimport CardShow from \"./Cards/CardShow\";\r\n\r\nfunction ShowsBlock({ shows, showsPage, onPaginate, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t<h3>Сериалы</h3>\r\n\t\t\t<div className='reslutsBlock'>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={showsPage === 1}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(showsPage - 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&lt;\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className='searchCardsGroup'>\r\n\t\t\t\t\t{shows.map((show) => (\r\n\t\t\t\t\t\t<CardShow show={show} key={show.id} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t\t{shows.length < 1 ? \"Сериалы не найдены\" : \"\"}\r\n\t\t\t\t</div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='paginationButton'\r\n\t\t\t\t\tdisabled={shows.length < 20}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonPaginate(showsPage + 1);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t&gt;\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ShowsBlock;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction CardUser({ user }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<a\r\n\t\t\thref={window.location.origin + \"/user/\" + user.id}\r\n\t\t\tonClick={(e) => {\r\n\t\t\t\thistory.push(\"/user/\" + user.id);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}}\r\n\t\t\tclassName='cardUser'>\r\n\t\t\t<div className='cardUserImage' style={{ backgroundImage: `url(${\"https://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }} />\r\n\t\t\t<div className='cardUserText'>\r\n\t\t\t\t<h4>{user.username}</h4>\r\n\t\t\t</div>\r\n\t\t</a>\r\n\t);\r\n}\r\n\r\nexport default CardUser;\r\n","import React from \"react\";\r\n\r\nimport CardUser from \"../Common/CardUser\";\r\n\r\nfunction FriendBlock({ users }) {\r\n\treturn (\r\n\t\t<div className='friendsCards'>\r\n\t\t\t{users.map((user) => (\r\n\t\t\t\t<CardUser user={user} key={user.id} />\r\n\t\t\t))}\r\n\t\t\t{users.length < 1 ? \"Пользователи не найдены\" : \"\"}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FriendBlock;\r\n","import React from \"react\";\r\nimport FriendBlock from \"../../Common/FriendBlock\";\r\n\r\nfunction UsersBlock({ users, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t<h3>Пользователи</h3>\r\n\t\t\t<FriendBlock users={users} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UsersBlock;\r\n","import React from \"react\";\r\n\r\nfunction CategoriesTab({ categories, onChangeCategory, activeCategory, hidden, children }) {\r\n\treturn (\r\n\t\t<div hidden={hidden} className='categoriesTabs'>\r\n\t\t\t<div className='tabs'>\r\n\t\t\t\t{categories.map((category, counter) => (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={\"categoriesTab\" + (activeCategory === category ? \" active\" : \"\")}\r\n\t\t\t\t\t\tkey={counter}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tonChangeCategory(category);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{category}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='categoryContent'>{children}</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CategoriesTab;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport SearchStore from \"../../store/SearchStore\";\r\n\r\nimport { MDBIcon, MDBFormInline } from \"mdbreact\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport { toast } from \"react-toastify\";\r\nimport GamesBlock from \"./Blocks/GamesBlock\";\r\nimport MoviesBlock from \"./Blocks/MoviesBlock\";\r\nimport ShowsBlock from \"./Blocks/ShowsBlock\";\r\nimport UsersBlock from \"./Blocks/UsersBlock\";\r\nimport CategoriesTab from \"../Common/CategoriesTab\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst SearchPage = observer((props) => {\r\n\tconst { gamesState, searchGames, games, moviesState, searchMovies, movies, showsState, searchShows, shows, usersState, searchUsers, users } = SearchStore;\r\n\r\n\tlet history = useHistory();\r\n\tlet { query } = useParams();\r\n\tconst [queryText, setQueryText] = useState(\"\");\r\n\tconst [gamesPage, setGamesPage] = useState(1);\r\n\tconst [moviesPage, setMoviesPage] = useState(1);\r\n\tconst [showsPage, setShowsPage] = useState(1);\r\n\r\n\tconst [activeCategory, setActiveCategory] = useState(\"Всё\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Игры\") searchGames(query, 1, 6);\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Фильмы\") searchMovies(query, 1);\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Сериалы\") searchShows(query, 1);\r\n\t\t\tif (activeCategory === \"Всё\" || activeCategory === \"Пользователи\") searchUsers(query);\r\n\t\t\tsetQueryText(query);\r\n\t\t\tdocument.title = \"Поиск\";\r\n\t\t\tsetGamesPage(1);\r\n\t\t\tsetMoviesPage(1);\r\n\t\t\tsetShowsPage(1);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[query, searchGames, searchMovies, searchUsers, searchShows, activeCategory]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (gamesState.startsWith(\"error:\")) toast.error(`Ошибка поиска игр! ${gamesState}`);\r\n\t}, [gamesState]);\r\n\tuseEffect(() => {\r\n\t\tif (moviesState.startsWith(\"error:\")) toast.error(`Ошибка поиска фильмов! ${moviesState}`);\r\n\t}, [moviesState]);\r\n\tuseEffect(() => {\r\n\t\tif (showsState.startsWith(\"error:\")) toast.error(`Ошибка поиска серилов! ${showsState}`);\r\n\t}, [showsState]);\r\n\tuseEffect(() => {\r\n\t\tif (usersState.startsWith(\"error:\")) toast.error(`Ошибка поиска пользователей! ${usersState}`);\r\n\t}, [usersState]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' />\r\n\t\t\t<div className='contentPage'>\r\n\t\t\t\t<div className='contentBody header dark'>\r\n\t\t\t\t\t<h1>Поиск</h1>\r\n\t\t\t\t\t<MDBFormInline\r\n\t\t\t\t\t\tclassName='md-form'\r\n\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\thistory.push(\"/search/\" + document.getElementById(\"searchInput2\").value);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<MDBIcon icon='search' />\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName='form-control form-control-sm ml-3 w-50'\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tplaceholder='Найти'\r\n\t\t\t\t\t\t\taria-label='Search'\r\n\t\t\t\t\t\t\tid='searchInput2'\r\n\t\t\t\t\t\t\tvalue={queryText}\r\n\t\t\t\t\t\t\tonChange={(event) => setQueryText(event.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</MDBFormInline>\r\n\t\t\t\t\t<CategoriesTab\r\n\t\t\t\t\t\tcategories={[\"Всё\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Пользователи\"]}\r\n\t\t\t\t\t\tactiveCategory={activeCategory}\r\n\t\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<LoadingOverlay active={gamesState === \"pending\"} spinner text='Ищем игры...'>\r\n\t\t\t\t\t\t\t<GamesBlock\r\n\t\t\t\t\t\t\t\tgames={games}\r\n\t\t\t\t\t\t\t\tgamesPage={gamesPage}\r\n\t\t\t\t\t\t\t\tonPaginate={(page) => {\r\n\t\t\t\t\t\t\t\t\tsetGamesPage(page);\r\n\t\t\t\t\t\t\t\t\tsearchGames(query, page, 6);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\thidden={activeCategory !== \"Всё\" && activeCategory !== \"Игры\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={moviesState === \"pending\"} spinner text='Ищем фильмы...'>\r\n\t\t\t\t\t\t\t<MoviesBlock\r\n\t\t\t\t\t\t\t\tmovies={movies}\r\n\t\t\t\t\t\t\t\tmoviesPage={moviesPage}\r\n\t\t\t\t\t\t\t\tonPaginate={(page) => {\r\n\t\t\t\t\t\t\t\t\tsetMoviesPage(page);\r\n\t\t\t\t\t\t\t\t\tsearchMovies(query, page);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\thidden={activeCategory !== \"Всё\" && activeCategory !== \"Фильмы\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={showsState === \"pending\"} spinner text='Ищем сериалы...'>\r\n\t\t\t\t\t\t\t<ShowsBlock\r\n\t\t\t\t\t\t\t\tshows={shows}\r\n\t\t\t\t\t\t\t\tshowsPage={showsPage}\r\n\t\t\t\t\t\t\t\tonPaginate={(page) => {\r\n\t\t\t\t\t\t\t\t\tsetShowsPage(page);\r\n\t\t\t\t\t\t\t\t\tsearchShows(query, page);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\thidden={activeCategory !== \"Всё\" && activeCategory !== \"Сериалы\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\r\n\t\t\t\t\t\t<LoadingOverlay active={usersState === \"pending\"} spinner text='Ищем пользователей...'>\r\n\t\t\t\t\t\t\t<UsersBlock users={users} hidden={activeCategory !== \"Всё\" && activeCategory !== \"Пользователи\"} />\r\n\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t</CategoriesTab>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SearchPage;\r\n","import React, { useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AuthStore from \"../store/AuthStore\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ConfirmPage = observer((props) => {\r\n\tconst { confirmEmail, confirmEmailState } = AuthStore;\r\n\tlet history = useHistory();\r\n\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet uid64 = params.get(\"uid64\");\r\n\tlet token = params.get(\"token\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tconfirmEmail(uid64, token);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (confirmEmailState.startsWith(\"error\")) history.push(`/404page`);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[confirmEmailState]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='bg'>\r\n\t\t\t<div hidden={confirmEmailState !== \"done\"} className='confirmEmailSuccess'>\r\n\t\t\t\tВаша почта подтверждена!\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ConfirmPage;\r\n","import React, { useState } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../store/AuthStore\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst ConfirmPasswordPage = observer((props) => {\r\n\tconst { confirmPassword, confirmPasswordState } = AuthStore;\r\n\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n\r\n\tlet search = window.location.search;\r\n\tlet params = new URLSearchParams(search);\r\n\tlet token = params.get(\"token\");\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg' />\r\n\t\t\t<div className='contentPage'>\r\n\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t<form\r\n\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\tconfirmPassword(token, password);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName='confirmPasswordForm'>\r\n\t\t\t\t\t\t<p className='h4'>Обновить пароль</p>\r\n\t\t\t\t\t\t<p className='note note-danger' hidden={!confirmPasswordState.startsWith(\"error:\")}>\r\n\t\t\t\t\t\t\t{confirmPasswordState}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className='note note-success' hidden={confirmPasswordState !== \"done\"}>\r\n\t\t\t\t\t\t\tПароль обновлен!\r\n\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t<label htmlFor='passwordInput' className='confirmPasswordLabel'>\r\n\t\t\t\t\t\t\tНовый пароль\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<input type='password' id='passwordInput' className='confirmPasswordInput' value={password} onChange={(event) => setPassword(event.target.value)} />\r\n\t\t\t\t\t\t<br />\r\n\r\n\t\t\t\t\t\t<label htmlFor='passwordConfurmInput' className='confirmPasswordLabel'>\r\n\t\t\t\t\t\t\tПодтверждение пароля\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<input type='password' id='passwordConfurmInput' className='confirmPasswordInput' value={passwordConfirm} onChange={(event) => setPasswordConfirm(event.target.value)} />\r\n\t\t\t\t\t\t<br />\r\n\r\n\t\t\t\t\t\t<button type='submit' className='confirmPasswordButton' disabled={(password !== passwordConfirm) | (password.length < 1)}>\r\n\t\t\t\t\t\t\tОбновить\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ConfirmPasswordPage;\r\n","import { makeAutoObservable } from \"mobx\";\r\n//import remotedev from \"mobx-remotedev\";\r\nimport AuthStore from \"./AuthStore\";\r\nimport * as userRequests from \"../services/userRequests\";\r\nclass User {\r\n\tuser = {};\r\n\tuserLogs = {};\r\n\tuserFriendsLogs = { log: [] };\r\n\tuserState = \"done\";\r\n\tuserLogsState = \"done\";\r\n\tuserFriendsLogsState = \"done\";\r\n\tsetUserStatusState = \"done\";\r\n\r\n\tconstructor() {\r\n\t\tmakeAutoObservable(this);\r\n\t}\r\n\r\n\tget isCurrentUser() {\r\n\t\treturn AuthStore.loggedIn && parseInt(this.user.id) === parseInt(AuthStore.user.id);\r\n\t}\r\n\r\n\trequestUser = async (username) => {\r\n\t\tthis.userState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tuserRequests.getUserInfo(localStorage.getItem(\"token\"), username).then(this.requestUserSuccess, this.requestUserFailure);\r\n\t};\r\n\trequestUserSuccess = (result) => {\r\n\t\tthis.user = result;\r\n\t\tthis.userState = \"done\";\r\n\t};\r\n\trequestUserFailure = (error) => {\r\n\t\tthis.userState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUserLogs = async (userID, page, resultsOnPage, query, filters) => {\r\n\t\tthis.userLogsState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tuserRequests.getUserLog(localStorage.getItem(\"token\"), userID, page, resultsOnPage, query, filters).then(this.requestLogsSuccess, this.requestLogsFailure);\r\n\t};\r\n\trequestLogsSuccess = (result) => {\r\n\t\tthis.userLogs = result;\r\n\t\tthis.userLogsState = \"done\";\r\n\t};\r\n\trequestLogsFailure = (error) => {\r\n\t\tif (error.response.status === 403) this.userLogsState = \"forbidden\";\r\n\t\telse this.userLogsState = \"error: \" + error;\r\n\t};\r\n\tdeleteUserLog = async (logType, logID) => {\r\n\t\tthis.userLogsState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tuserRequests.deleteUserLog(localStorage.getItem(\"token\"), this.user.id, logType, logID).then(() => this.deleteUserLogSuccess(logType, logID), this.deleteUserLogFailure);\r\n\t};\r\n\tdeleteUserLogSuccess = (logType, logID) => {\r\n\t\tlet newLogs = this.userLogs.log.filter((log) => {\r\n\t\t\treturn !(log.id === logID && log.type === logType);\r\n\t\t});\r\n\t\tthis.userLogs = { ...this.userLogs, log: newLogs };\r\n\t\tthis.userLogsState = \"done\";\r\n\t};\r\n\tdeleteUserLogFailure = (error) => {\r\n\t\tif (error.response.status === 403) this.userLogsState = \"forbidden\";\r\n\t\telse this.userLogsState = \"error: \" + error;\r\n\t};\r\n\r\n\trequestUserFriendsLogs = async (userID, page, resultsOnPage, query, filters) => {\r\n\t\tthis.userFriendsLogsState = \"pending\";\r\n\t\tawait AuthStore.checkAuthorization();\r\n\t\tuserRequests.getUserFriendsLog(localStorage.getItem(\"token\"), userID, page, resultsOnPage, query, filters).then(this.requestFriendsLogsSuccess, this.requestFriendsLogsFailure);\r\n\t};\r\n\trequestFriendsLogsSuccess = (result) => {\r\n\t\tthis.userFriendsLogs = result;\r\n\t\tthis.userFriendsLogsState = \"done\";\r\n\t};\r\n\trequestFriendsLogsFailure = (error) => {\r\n\t\tthis.userFriendsLogsState = \"error: \" + error;\r\n\t};\r\n\r\n\tsetUserStatus = async (is_following, userID) => {\r\n\t\tif (await AuthStore.checkAuthorization()) {\r\n\t\t\tthis.setUserStatusState = \"pending\";\r\n\t\t\tuserRequests.setUserStatus(localStorage.getItem(\"token\"), is_following, userID).then(this.setUserStatusSuccess, this.setUserStatusFailure);\r\n\t\t}\r\n\t};\r\n\tsetUserStatusSuccess = (result) => {\r\n\t\tthis.user.is_followed = result.is_following;\r\n\t\tthis.setUserStatusState = \"done\";\r\n\t};\r\n\tsetUserStatusFailure = (error) => {\r\n\t\tthis.setUserStatusState = \"error: \" + error;\r\n\t};\r\n}\r\n\r\nconst UserStore = new User();\r\n//export default remotedev(UserStore, { name: \"User\" });\r\nexport default UserStore;\r\n","import React from \"react\";\r\nimport Select from \"react-select\";\r\n\r\nfunction SelectMulti({ placeholder, options, onChange, hidden }) {\r\n\treturn hidden ? \"\" : <Select className='react-select-container' classNamePrefix={\"multiselect\"} isMulti={true} placeholder={placeholder} onChange={onChange} options={options} hidden={hidden} />;\r\n}\r\n\r\nexport default SelectMulti;\r\n","import React from \"react\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction ItemRow({ data, fields }) {\r\n\treturn (\r\n\t\t<div className='itemBlock'>\r\n\t\t\t<div className='itemReview' style={{ display: data.review ? \"block\" : \"none\" }}>\r\n\t\t\t\tОтзыв\r\n\t\t\t\t<div className='itemReviewUser'>{data.review}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='itemRow'>\r\n\t\t\t\t<div className='itemRowLeft'>\r\n\t\t\t\t\t<div className='itemPoster' style={{ backgroundImage: `url(${data.poster})` }} />\r\n\t\t\t\t\t<div className='itemName'>\r\n\t\t\t\t\t\t<a href={data.link}> {data.name} </a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='itemRowRight'>\r\n\t\t\t\t\t<div className='itemStatus'>\r\n\t\t\t\t\t\tстатус\r\n\t\t\t\t\t\t<div className='itemStatusUser'>{data.status}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='itemScore'>\r\n\t\t\t\t\t\t<div>{data.score}/10</div>\r\n\t\t\t\t\t\t<MDBIcon icon='star' />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{fields.find(field => field.key === 'spent_time') === undefined ? (\r\n\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className='itemTime'>\r\n\t\t\t\t\t\t\t<div>{data.spent_time}</div>\r\n\t\t\t\t\t\t\t<MDBIcon icon='clock' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ItemRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { CSVLink } from \"react-csv\";\r\nimport InputNumber from \"../../Common/InputNumber\";\r\nimport SelectMulti from \"../../Common/SelectMulti\";\r\nimport ItemRow from \"./ItemRow\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport Pagination from \"rc-pagination\";\r\nimport useWindowDimensions from \"../../../hooks/useWindowDimensions\";\r\n\r\nfunction ItemBlock({ items, statuses, fields, name }) {\r\n\tconst [query, setQuery] = useState(\"\");\r\n\tconst [pageSize, setPageSize] = useState(10);\r\n\tconst [page, setPage] = useState(1);\r\n\tconst [filteredItems, setFilteresItems] = useState([]);\r\n\tconst [sortIsAsc, setSortIsAsc] = useState(false);\r\n\tconst [statusFilters, setStatusFilters] = useState([]);\r\n\tconst [collapse, setCollapse] = useState(true);\r\n\tconst { width } = useWindowDimensions();\r\n\r\n\tconst toggleCollapse = () => {\r\n\t\tsetCollapse(!collapse);\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetFilteresItems(items?.filter((item) => item.name.toLowerCase().includes(query.toLowerCase()) && (statusFilters.includes(item.status) || statusFilters.length < 1)));\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[items, page, pageSize, query, statusFilters]\r\n\t);\r\n\r\n\tfunction sortItems(field, isNumber) {\r\n\t\tlet newItems = items\r\n\t\t\t?.filter((item) => item.name.toLowerCase().includes(query.toLowerCase()) && (statusFilters.includes(item.status) || statusFilters.length < 1))\r\n\t\t\t.sort((a, b) => {\r\n\t\t\t\tif (isNumber ? parseFloat(a[field]) > parseFloat(b[field]) : a[field] > b[field]) {\r\n\t\t\t\t\treturn sortIsAsc ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t\tif (isNumber ? parseFloat(a[field]) < parseFloat(b[field]) : a[field] < b[field]) {\r\n\t\t\t\t\treturn sortIsAsc ? -1 : 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n\t\tsetFilteresItems(newItems);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='itemRowsHeader'>\r\n\t\t\t\t<div className='itemRowsHeaderLeft'>\r\n\t\t\t\t\t<div className='firstRow'>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tplaceholder='Поиск'\r\n\t\t\t\t\t\t\taria-label='Поиск'\r\n\t\t\t\t\t\t\tid='searchUserItemsInput'\r\n\t\t\t\t\t\t\tvalue={query}\r\n\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\tsetQuery(event.target.value);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button className='mobileOpenButton' onClick={toggleCollapse}>\r\n\t\t\t\t\t\t\t{collapse ? <MDBIcon icon='angle-down' /> : <MDBIcon icon='angle-up' />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='sortButtons' hidden={collapse && width <= 515}>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='sortRowsButton'\r\n\t\t\t\t\t\t\thidden={fields.find((field) => field.key === \"score\") === undefined}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsortItems(\"score\", true);\r\n\t\t\t\t\t\t\t\tsetSortIsAsc(!sortIsAsc);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='star' /> <MDBIcon icon='arrows-alt-v' />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='sortRowsButton'\r\n\t\t\t\t\t\t\thidden={fields.find((field) => field.key === \"spent_time\") === undefined}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsortItems(\"spent_time\", true);\r\n\t\t\t\t\t\t\t\tsetSortIsAsc(!sortIsAsc);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<MDBIcon icon='clock' /> <MDBIcon icon='arrows-alt-v' />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<SelectMulti\r\n\t\t\t\t\t\thidden={collapse && width <= 515}\r\n\t\t\t\t\t\tplaceholder={\"Cтатус\"}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tsetStatusFilters(e.map((obj) => obj.value));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\toptions={statuses}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='itemRowsHeaderRight' hidden={collapse && width <= 515}>\r\n\t\t\t\t\tЗаписей на странице\r\n\t\t\t\t\t<InputNumber value={pageSize} max={100} min={1} onChange={(value) => setPageSize(value)} dataList={[5, 10, 25, 50, 100]} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='itemRows'>\r\n\t\t\t\t{filteredItems?.slice((page - 1) * pageSize, page * pageSize).map((item, counter) => (\r\n\t\t\t\t\t<ItemRow data={item} fields={fields} key={counter} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='itemRowsFooter'>\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\ttotal={filteredItems?.length}\r\n\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\tsetPage(e);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tcurrent={page}\r\n\t\t\t\t/>\r\n\t\t\t\t<CSVLink data={items ? items : []} headers={fields} separator={\";\"} filename={`interests ${name}.csv`}>\r\n\t\t\t\t\tСкачать CSV\r\n\t\t\t\t</CSVLink>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ItemBlock;\r\n","import React from \"react\";\r\nimport ItemBlock from \"./ItemsBlock/ItemBlock\";\r\n\r\nfunction GameBlock({ games }) {\r\n\treturn (\r\n\t\t<ItemBlock\r\n\t\t\titems={games?.map((game) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlink: window.location.origin + \"/game/\" + game.game.rawg_slug,\r\n\t\t\t\t\tname: game.game.rawg_name,\r\n\t\t\t\t\tstatus: game.status,\r\n\t\t\t\t\tscore: game.score,\r\n\t\t\t\t\treview: game.review,\r\n\t\t\t\t\tspent_time: parseFloat(game.spent_time),\r\n\t\t\t\t\tposter: game.game.rawg_backdrop_path,\r\n\t\t\t\t};\r\n\t\t\t})}\r\n\t\t\tstatuses={[\r\n\t\t\t\t{ value: \"Буду играть\", label: \"Буду играть\" },\r\n\t\t\t\t{ value: \"Играю\", label: \"Играю\" },\r\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\r\n\t\t\t\t{ value: \"Прошел\", label: \"Прошел\" },\r\n\t\t\t]}\r\n\t\t\tfields={[\r\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\r\n\t\t\t\t{ label: \"Название\", key: \"name\" },\r\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\r\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\r\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\r\n\t\t\t\t{ label: \"Время прохождения\", key: \"spent_time\" },\r\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\r\n\t\t\t]}\r\n\t\t\tname={\"Игры\"}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default GameBlock;\r\n","import React from \"react\";\r\nimport ItemBlock from \"./ItemsBlock/ItemBlock\";\r\n\r\nfunction MovieBlock({ movies }) {\r\n\treturn (\r\n\t\t<ItemBlock\r\n\t\t\titems={movies?.map((movie) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlink: window.location.origin + \"/movie/\" + movie.movie.tmdb_id,\r\n\t\t\t\t\tname: movie.movie.tmdb_name,\r\n\t\t\t\t\tstatus: movie.status,\r\n\t\t\t\t\tscore: movie.score,\r\n\t\t\t\t\treview: movie.review,\r\n\t\t\t\t\tposter: movie.movie.tmdb_backdrop_path,\r\n\t\t\t\t};\r\n\t\t\t})}\r\n\t\t\tstatuses={[\r\n\t\t\t\t{ value: \"Буду смотреть\", label: \"Буду смотреть\" },\r\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\r\n\t\t\t\t{ value: \"Посмотрел\", label: \"Посмотрел\" },\r\n\t\t\t]}\r\n\t\t\tfields={[\r\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\r\n\t\t\t\t{ label: \"Название\", key: \"name\" },\r\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\r\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\r\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\r\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\r\n\t\t\t]}\r\n\t\t\tname={\"Фильмы\"}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default MovieBlock;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction LogRow({ log, showUsername, currentUser, onDeleteLog }) {\r\n\tlet history = useHistory();\r\n\r\n\tfunction translateActionType(action, actionResult) {\r\n\t\tswitch (action) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tswitch (actionResult) {\r\n\t\t\t\t\tcase \"0\":\r\n\t\t\t\t\t\treturn \"посмотрел(а)\";\r\n\t\t\t\t\tcase \"-1\":\r\n\t\t\t\t\t\treturn \"не смотрела(а)\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"оценил(а)\";\r\n\t\t\t\t}\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn \"изменил(а) статус\";\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn \"оставил(а) отзыв на\";\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn \"изменил(а) время прохождения\";\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\tif (actionResult > 0) return \"посмотрел(а) \" + actionResult + \" серий\";\r\n\t\t\t\telse return \"не смотрел(а) \" + actionResult * -1 + \" серий\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\tif (actionResult === \"True\") return \"подписан(а) на\";\r\n\t\t\t\telse return \"отписан(а) от\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn action;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction translateType(type, actionType) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"игру\";\r\n\t\t\t\telse return \"игры\";\r\n\t\t\tcase \"movie\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"фильм\";\r\n\t\t\t\telse return \"фильма\";\r\n\t\t\tcase \"show\":\r\n\t\t\t\tif (actionType === \"score\" || actionType === \"review\") return \"сериал\";\r\n\t\t\t\telse return \"сериала\";\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn \"пользователя\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn type;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction nameToLink(name, type, id) {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"game\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/game/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/game/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"movie\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/movie/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"show\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/show/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tcase \"season\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"episode\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id + \"/season/\" + id.season_number + \"/episode/\" + id.episode_number);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t[s{id.season_number}e{id.episode_number}] серию\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + id.show_id}\r\n\t\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/show/\" + id.show_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{name.parent_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tcase \"user\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={window.location.origin + \"/user/\" + id}\r\n\t\t\t\t\t\tclassName='logLink'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\thistory.push(\"/user/\" + id);\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\tdefault:\r\n\t\t\t\treturn name;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction userToLink(username, userID) {\r\n\t\treturn (\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + \"/user/\" + userID}\r\n\t\t\t\tclassName='logLink'\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/user/\" + userID);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}>\r\n\t\t\t\t{username}\r\n\t\t\t</a>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction actionResultToStr(actionType, actionResult, target) {\r\n\t\tswitch (actionType) {\r\n\t\t\tcase \"score\":\r\n\t\t\t\tif ((target !== \"episode\") | (actionResult > 0))\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\tstop={10}\r\n\t\t\t\t\t\t\temptySymbol={<MDBIcon far icon='star' size='1x' />}\r\n\t\t\t\t\t\t\tfullSymbol={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => (\r\n\t\t\t\t\t\t\t\t<MDBIcon icon='star' size='1x' title={n} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\tinitialRating={actionResult}\r\n\t\t\t\t\t\t\treadonly={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\telse return \"\";\r\n\t\t\tcase \"status\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"review\":\r\n\t\t\t\treturn '\"' + actionResult + '\"';\r\n\t\t\tcase \"spent_time\":\r\n\t\t\t\treturn actionResult + \" \" + intToHours(actionResult);\r\n\t\t\tcase \"episodes\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tcase \"is_following\":\r\n\t\t\t\treturn \"\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn actionResult;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\tlet options = { hour: \"numeric\", minute: \"numeric\" };\r\n\t\treturn newDate.toLocaleTimeString(\"ru-RU\", options);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='logRow'>\r\n\t\t\t{parseDate(log.created)}&thinsp;\r\n\t\t\t{showUsername ? userToLink(log.user, log.user_id) : \"\"}&thinsp;\r\n\t\t\t{translateActionType(log.action_type, log.action_result)}&thinsp;\r\n\t\t\t{translateType(log.type, log.action_type)}&thinsp;\r\n\t\t\t{nameToLink(log.target, log.type, log.target_id)}\r\n\t\t\t{(log.type === \"user\") | (log.action_type === \"episodes\") | (log.action_result === \"0\") | (log.action_result === \"-1\") ? \"\" : \":\"}&thinsp;\r\n\t\t\t{actionResultToStr(log.action_type, log.action_result, log.type)}\r\n\t\t\t<button\r\n\t\t\t\thidden={!currentUser || showUsername}\r\n\t\t\t\tclassName='deleteLogButton'\r\n\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\tonDeleteLog(log.type, log.id);\r\n\t\t\t\t}}>\r\n\t\t\t\tx\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction intToHours(number) {\r\n\tif (11 <= number && number <= 14) return \"часов\";\r\n\telse if (number % 10 === 1) return \"час\";\r\n\telse if (2 <= number % 10 && number % 10 <= 4) return \"часа\";\r\n\telse return \"часов\";\r\n}\r\n\r\nexport default LogRow;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Pagination from \"rc-pagination\";\r\nimport SelectMulti from \"../../Common/SelectMulti\";\r\nimport InputNumber from \"../../Common/InputNumber\";\r\nimport LogRow from \"./LogRow\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport useWindowDimensions from \"../../../hooks/useWindowDimensions\";\r\n\r\nfunction UserLogBlock({ userID, logs, showUsername, requestUserLogs, currentUser, onDeleteLog, logsType }) {\r\n\tconst [logsByDay, setLogsByDay] = useState([]);\r\n\tconst [currentPage, setCurrentPage] = useState(1);\r\n\tconst [pageSize, setPageSize] = useState(15);\r\n\tconst [query, setQuery] = useState(\"\");\r\n\tconst [filters, setFilters] = useState([]);\r\n\tconst [collapse, setCollapse] = useState(true);\r\n\tconst { width } = useWindowDimensions();\r\n\r\n\tconst toggleCollapse = () => {\r\n\t\tsetCollapse(!collapse);\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (logsType === \"user\" || (logsType === \"userFriends\" && currentUser)) requestUserLogs(userID, currentPage, pageSize, query, filters);\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[userID, currentPage, currentUser, logsType, pageSize, filters]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetLogsByDay(groupLogsByDay(logs.log));\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[logs]\r\n\t);\r\n\r\n\tfunction groupLogsByDay(logs) {\r\n\t\tlet newLogs = [];\r\n\r\n\t\tfor (let i in logs) {\r\n\t\t\tlet date = new Date(logs[i].created);\r\n\r\n\t\t\tif (newLogs.length === 0)\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t\telse if (date.getDay() === newLogs[newLogs.length - 1].date.getDay()) newLogs[newLogs.length - 1].logs.push(logs[i]);\r\n\t\t\telse\r\n\t\t\t\tnewLogs.push({\r\n\t\t\t\t\tdate: date,\r\n\t\t\t\t\tlogs: [logs[i]],\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn newLogs;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='logs'>\r\n\t\t\t<div className='logsHeader'>\r\n\t\t\t\t<div className='logsHeaderLeft'>\r\n\t\t\t\t\t<div className='firstRow'>\r\n\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\tonSubmit={(event) => {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\trequestUserLogs(userID, currentPage, pageSize, query, filters);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tplaceholder='Поиск'\r\n\t\t\t\t\t\t\t\taria-label='Поиск'\r\n\t\t\t\t\t\t\t\tclassName='searchUserLogsInput'\r\n\t\t\t\t\t\t\t\tvalue={query}\r\n\t\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\t\tsetQuery(event.target.value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<button className='mobileOpenButton' onClick={toggleCollapse}>\r\n\t\t\t\t\t\t\t{collapse ? <MDBIcon icon='angle-down' /> : <MDBIcon icon='angle-up' />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<SelectMulti\r\n\t\t\t\t\t\tplaceholder={\"Тип логов\"}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tsetFilters(e.map((obj) => obj.value));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t{ value: \"game\", label: \"Игры\" },\r\n\t\t\t\t\t\t\t{ value: \"movie\", label: \"Фильмы\" },\r\n\t\t\t\t\t\t\t{ value: \"show\", label: \"Сериал\" },\r\n\t\t\t\t\t\t\t{ value: \"user\", label: \"Пользователи\" },\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\thidden={collapse && width < 748}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='pageSizeBlock' hidden={collapse && width < 748}>\r\n\t\t\t\t\tЗаписей на странице\r\n\t\t\t\t\t<InputNumber value={pageSize} max={100} min={1} onChange={(value) => setPageSize(value)} dataList={[5, 10, 25, 50, 100]} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{logsByDay.map((dayLog, counter) => (\r\n\t\t\t\t<div key={counter} className='logDay'>\r\n\t\t\t\t\t<h5 className='logDate'>{dayLog.date.toLocaleDateString(\"ru-RU\")}</h5>\r\n\t\t\t\t\t<div className='logRows'>\r\n\t\t\t\t\t\t{dayLog.logs.map((log) => (\r\n\t\t\t\t\t\t\t<LogRow log={log} showUsername={showUsername} key={log.id + log.created} currentUser={currentUser} onDeleteLog={onDeleteLog} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t\t<Pagination\r\n\t\t\t\ttotal={logs.count}\r\n\t\t\t\tpageSize={pageSize}\r\n\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\tsetCurrentPage(e);\r\n\t\t\t\t}}\r\n\t\t\t\tcurrent={currentPage}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserLogBlock;\r\n","import React from \"react\";\r\nimport ItemBlock from \"./ItemsBlock/ItemBlock\";\r\n\r\nfunction ShowBlock({ shows }) {\r\n\treturn (\r\n\t\t<ItemBlock\r\n\t\t\titems={shows?.map((show) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlink: window.location.origin + \"/show/\" + show.show.tmdb_id,\r\n\t\t\t\t\tname: show.show.tmdb_name,\r\n\t\t\t\t\tstatus: show.status,\r\n\t\t\t\t\tscore: show.score,\r\n\t\t\t\t\treview: show.review,\r\n\t\t\t\t\tposter: show.show.tmdb_backdrop_path,\r\n\t\t\t\t\tspent_time: show.spent_time,\r\n\t\t\t\t};\r\n\t\t\t})}\r\n\t\t\tstatuses={[\r\n\t\t\t\t{ value: \"Буду смотреть\", label: \"Буду смотреть\" },\r\n\t\t\t\t{ value: \"Смотрю\", label: \"Смотрю\" },\r\n\t\t\t\t{ value: \"Дропнул\", label: \"Дропнул\" },\r\n\t\t\t\t{ value: \"Посмотрел\", label: \"Посмотрел\" },\r\n\t\t\t]}\r\n\t\t\tfields={[\r\n\t\t\t\t{ label: \"Ссылка\", key: \"link\" },\r\n\t\t\t\t{ label: \"Название\", key: \"name\" },\r\n\t\t\t\t{ label: \"Статус\", key: \"status\" },\r\n\t\t\t\t{ label: \"Оценка\", key: \"score\" },\r\n\t\t\t\t{ label: \"Отзыв\", key: \"review\" },\r\n\t\t\t\t{ label: \"Время просмотра\", key: \"spent_time\" },\r\n\t\t\t\t{ label: \"Картинка\", key: \"poster\" },\r\n\t\t\t]}\r\n\t\t\tname={\"Сериалы\"}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default ShowBlock;\r\n","export const COLORS = [\r\n\t\"rgb(43,206,72)\",\r\n\t\"rgb(240,163,255)\",\r\n\t\"rgb(0,117,220)\",\r\n\t\"rgb(153,63,0)\",\r\n\t\"rgb(76,0,92)\",\r\n\t\"rgb(225,225,225)\",\r\n\t\"rgb(0,92,49)\",\r\n\t\"rgb(255,204,153)\",\r\n\t\"rgb(128,128,128)\",\r\n\t\"rgb(148,255,181)\",\r\n\t\"rgb(143,124,0)\",\r\n\t\"rgb(157,204,0)\",\r\n\t\"rgb(194,0,136)\",\r\n\t\"rgb(0,51,128)\",\r\n\t\"rgb(255,164,5)\",\r\n\t\"rgb(255,168,187)\",\r\n\t\"rgb(66,102,0)\",\r\n\t\"rgb(255,0,16)\",\r\n\t\"rgb(94,241,242)\",\r\n\t\"rgb(0,153,143)\",\r\n\t\"rgb(224,255,102)\",\r\n\t\"rgb(116,10,255)\",\r\n\t\"rgb(153,0,0)\",\r\n\t\"rgb(255,255,128)\",\r\n\t\"rgb(255,255,0)\",\r\n\t\"rgb(255,80,)\",\r\n];\r\n","import React from \"react\";\r\nimport { Cell, BarChart, Bar, XAxis, YAxis, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nfunction ChartBlock({ chartData, hidden }) {\r\n\treturn (\r\n\t\t<div hidden={hidden}>\r\n\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (\r\n\t\t\t\t<BarChart width={document.body.clientWidth - 50} height={chartData.length * 40} data={chartData} margin={{ top: 5, right: 0, left: 45, bottom: 20 }} layout='vertical'>\r\n\t\t\t\t\t<YAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} tickMargin={0} type='category' />\r\n\t\t\t\t\t<XAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} type='number' />\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Bar>\r\n\t\t\t\t</BarChart>\r\n\t\t\t) : (\r\n\t\t\t\t<BarChart width={Math.min(chartData.length * 100, document.body.clientWidth - 50)} height={300} data={chartData} margin={{ top: 5, right: 10, left: 10, bottom: 20 }}>\r\n\t\t\t\t\t<XAxis dataKey='name' tickLine={false} tick={{ fill: \"rgb(238, 238, 238)\" }} interval={0} angle={-10} tickMargin={15} />\r\n\t\t\t\t\t<YAxis domain={[0, \"dataMax\"]} tick={{ fill: \"rgb(238, 238, 238)\" }} />\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\t\tcursor={false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Bar dataKey='Процент'>\r\n\t\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Bar>\r\n\t\t\t\t</BarChart>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ChartBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { PieChart, Pie, Legend, Cell, Tooltip } from \"recharts\";\r\nimport { COLORS } from \"./Colors\";\r\n\r\nfunction ChartBlock({ stats }) {\r\n\tconst [chartData, setChartData] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData([]);\r\n\t\tif (stats?.games) {\r\n\t\t\tlet newData = [];\r\n\t\t\tif (stats?.games?.total_spent_time > 0) newData.push({ name: \"Часов в играх\", value: stats?.games?.total_spent_time });\r\n\t\t\tif (stats?.movies?.total_spent_time > 0) newData.push({ name: \"Часов в фильмах\", value: stats?.movies?.total_spent_time });\r\n\t\t\tif (stats?.episodes?.total_spent_time > 0) newData.push({ name: \"Часов в сериалах\", value: stats?.episodes?.total_spent_time });\r\n\t\t\tsetChartData(newData);\r\n\t\t}\r\n\t}, [stats]);\r\n\r\n\treturn (\r\n\t\t<div hidden={chartData.length < 1}>\r\n\t\t\t<PieChart width={350} height={260} hidden={chartData.length < 1}>\r\n\t\t\t\t<Pie dataKey='value' data={chartData} cx='50%' cy='50%' outerRadius={80} fill='#8884d8' labelLine={true} label minAngle={5}>\r\n\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t<Cell fill={COLORS[index]} key={index} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Pie>\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t\titemStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\" }}\r\n\t\t\t\t\tcontentStyle={{ color: \"rgb(238, 238, 238)\", backgroundColor: \"rgb(30, 30, 30)\", borderRadius: \"10px\" }}\r\n\t\t\t\t\tcursor={false}\r\n\t\t\t\t/>\r\n\t\t\t\t<Legend verticalAlign='bottom' horizontalAlign='center' />\r\n\t\t\t</PieChart>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ChartBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport GenresChart from \"./GenresChart\";\r\nimport ChartBlock from \"./ChartBlock\";\r\n\r\nfunction StatisticsBlock({ stats }) {\r\n\tconst [gameChartData, setGameChartData] = useState([]);\r\n\tconst [movieChartData, setMovieChartData] = useState([]);\r\n\tconst [showChartData, setShowChartData] = useState([]);\r\n\r\n\tfunction getGenresChartData(genres) {\r\n\t\tif (genres) {\r\n\t\t\tlet newData = [];\r\n\t\t\tlet counter = 0;\r\n\t\t\tfor (let genre in genres.sort((a, b) => (a.spent_time_percent > b.spent_time_percent ? -1 : 1)))\r\n\t\t\t\tif (genres[genre].spent_time_percent > 2 && counter < 11) {\r\n\t\t\t\t\tnewData.push({ name: genres[genre].name, Процент: genres[genre].spent_time_percent });\r\n\t\t\t\t\tcounter++;\r\n\t\t\t\t}\r\n\t\t\treturn newData;\r\n\t\t}\r\n\t\treturn [];\r\n\t}\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsetMovieChartData(getGenresChartData(stats?.movies?.genres));\r\n\t\t\tsetGameChartData(getGenresChartData(stats?.games?.genres));\r\n\t\t\tsetShowChartData(getGenresChartData(stats?.episodes?.genres));\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[stats]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<ChartBlock stats={stats} />\r\n\t\t\t<div hidden={!stats?.games}>\r\n\t\t\t\t<h3>Игры</h3>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tИгр сыграно: {stats?.games?.count}, часов наиграно: {stats?.games?.total_spent_time}\r\n\t\t\t\t</p>\r\n\t\t\t\t<GenresChart chartData={gameChartData} hidden={gameChartData.length < 1} />\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!stats?.movies}>\r\n\t\t\t\t<h3>Фильмы</h3>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tФильмов посмотрено: {stats?.movies?.count}, часов просмотра: {stats?.movies?.total_spent_time}\r\n\t\t\t\t</p>\r\n\t\t\t\t<GenresChart chartData={movieChartData} hidden={movieChartData.length < 1} />\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!stats?.episodes}>\r\n\t\t\t\t<h3>Сериалы</h3>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tСерий сериалов посмотрено: {stats?.episodes?.count}, часов просмотра: {stats?.episodes?.total_spent_time}\r\n\t\t\t\t</p>\r\n\t\t\t\t<GenresChart chartData={showChartData} hidden={showChartData.length < 1} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default StatisticsBlock;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport UserStore from \"../../store/UserStore\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport GameBlock from \"./GameBlock\";\r\nimport FriendBlock from \"../Common/FriendBlock\";\r\nimport MovieBlock from \"./MovieBlock\";\r\nimport UserLogBlock from \"./Logs/UserLogBlock\";\r\nimport CategoriesTab from \"../Common/CategoriesTab\";\r\nimport ShowBlock from \"./ShowBlock\";\r\nimport StatisticsBlock from \"./Statistics/StatisticsBlock\";\r\n\r\n/**\r\n * Основная страница приложения\r\n */\r\nconst UserPage = observer((props) => {\r\n\tconst { currentUser } = AuthStore;\r\n\tconst {\r\n\t\tuser,\r\n\t\tuserState,\r\n\t\trequestUser,\r\n\t\tsetUserStatus,\r\n\t\trequestUserLogs,\r\n\t\tuserLogs,\r\n\t\tuserLogsState,\r\n\t\trequestUserFriendsLogs,\r\n\t\tuserFriendsLogs,\r\n\t\tuserFriendsLogsState,\r\n\t\tdeleteUserLog,\r\n\t\tisCurrentUser,\r\n\t} = UserStore;\r\n\r\n\tlet { userID, category } = useParams();\r\n\tconst [activeCategory, setActiveCategory] = useState(\"Лента\");\r\n\tconst [lastActivity, setLastActivity] = useState(\"\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\trequestUser(userID);\r\n\t\t\tsetActiveCategory(\"Лента\");\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[userID, requestUser]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (category) setActiveCategory(category);\r\n\t\t\telse setActiveCategory(\"Лента\");\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[category]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = \"Профиль \" + user.username;\r\n\t\tif (user.last_activity) {\r\n\t\t\tlet date = new Date(user.last_activity);\r\n\t\t\tlet options = { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", hour: \"numeric\", minute: \"numeric\" };\r\n\t\t\tsetLastActivity(date.toLocaleString(\"ru-RU\", options));\r\n\t\t} else setLastActivity(\"\");\r\n\t}, [user]);\r\n\r\n\treturn (\r\n\t\t<div className='contentPage'>\r\n\t\t\t<div className='bg' />\r\n\t\t\t<LoadingOverlay active={userState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t<div className='contentBody header dark'>\r\n\t\t\t\t\t<div className='userHeader'>\r\n\t\t\t\t\t\t<div className='userCard'>\r\n\t\t\t\t\t\t\t<div className='userAvatar' style={{ backgroundImage: `url(${\"http://upload.wikimedia.org/wikipedia/commons/f/f4/User_Avatar_2.png\"})` }} />\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h2>{user.username}</h2>\r\n\t\t\t\t\t\t\t\t<div hidden={!user.is_available} className='subtitle'>\r\n\t\t\t\t\t\t\t\t\tПоследняя активность {lastActivity}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\thidden={isCurrentUser || !user.is_available}\r\n\t\t\t\t\t\t\tclassName='addFriendButton'\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetUserStatus({ is_following: user.is_followed ? false : true }, user.id);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{user.is_followed ? \"Отписаться\" : \"Подписаться\"}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<CategoriesTab\r\n\t\t\t\t\t\tcategories={[\"Лента\", \"Игры\", \"Фильмы\", \"Сериалы\", \"Статистика\", \"Друзья\"]}\r\n\t\t\t\t\t\tactiveCategory={activeCategory}\r\n\t\t\t\t\t\tonChangeCategory={(category) => {\r\n\t\t\t\t\t\t\tsetActiveCategory(category);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Лента\"}>\r\n\t\t\t\t\t\t\t<div hidden={!user.is_available}>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userLogsState === \"pending\" && userState !== \"pending\"} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<UserLogBlock userID={userID} logs={userLogs} requestUserLogs={requestUserLogs} currentUser={isCurrentUser} onDeleteLog={deleteUserLog} logsType={\"user\"} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<h4 hidden={user.is_available || userState === \"pending\"}>\r\n\t\t\t\t\t\t\t\t<MDBIcon icon='lock' style={{ marginRight: \"1rem\" }} />\r\n\t\t\t\t\t\t\t\tПрофиль скрыт настройками приватности\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Игры\"}>\r\n\t\t\t\t\t\t\t<GameBlock games={user.games} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Фильмы\"}>\r\n\t\t\t\t\t\t\t<MovieBlock movies={user.movies} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Сериалы\"}>\r\n\t\t\t\t\t\t\t<ShowBlock shows={user.shows} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Статистика\"}>\r\n\t\t\t\t\t\t\t<StatisticsBlock stats={user.stats} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div hidden={activeCategory !== \"Друзья\"}>\r\n\t\t\t\t\t\t\t<FriendBlock users={user.followed_users ? user.followed_users : []} />\r\n\t\t\t\t\t\t\t<div hidden={currentUser.username !== user.username}>\r\n\t\t\t\t\t\t\t\t<h4>Активность друзей: </h4>\r\n\t\t\t\t\t\t\t\t<LoadingOverlay active={userFriendsLogsState === \"pending\" && userState !== \"pending\"} spinner text='Загрузка активности...'>\r\n\t\t\t\t\t\t\t\t\t<UserLogBlock userID={userID} logs={userFriendsLogs} requestUserLogs={requestUserFriendsLogs} currentUser={isCurrentUser} showUsername={true} logsType={\"userFriends\"} />\r\n\t\t\t\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</CategoriesTab>\r\n\t\t\t\t</div>\r\n\t\t\t</LoadingOverlay>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default UserPage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction DayInfo({ day, date }) {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<div className='dayInfoBlock'>\r\n\t\t\t<h3 className='dayInfoDate'>\r\n\t\t\t\t{date ? date.toLocaleDateString(\"ru-RU\", { year: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\", month: \"long\", day: \"numeric\", weekday: \"long\" }) : \"\"}\r\n\t\t\t</h3>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.games?.length > 0)}>\r\n\t\t\t\t<h3>Игры</h3>\r\n\t\t\t\t{day.games?.map((game) => (\r\n\t\t\t\t\t<div key={game.rawg_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{game.rawg_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.movies?.length > 0)}>\r\n\t\t\t\t<h3>Фильмы</h3>\r\n\t\t\t\t{day.movies?.map((movie) => (\r\n\t\t\t\t\t<div key={movie.tmdb_id}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{movie.tmdb_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='dayInfoCategory' hidden={!(day?.episodes?.length > 0)}>\r\n\t\t\t\t<h3>Сериалы</h3>\r\n\t\t\t\t{day.episodes?.map((episode) => (\r\n\t\t\t\t\t<div key={episode.tmdb_id}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DayInfo;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Timeline, TimelineEvent } from \"react-event-timeline\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction ReleasesList({ calendar }) {\r\n\tlet history = useHistory();\r\n\r\n\tconst myStyle = {\r\n\t\tbackgroundColor: \"#191A1B\",\r\n\t\tcolor: \"#F1F1FB\",\r\n\t\tborder: \"none\",\r\n\t};\r\n\r\n\tfunction getContentForDay(day) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{day.games?.map((game) => (\r\n\t\t\t\t\t<div key={game.rawg_id}>\r\n\t\t\t\t\t\tИгра{\" \"}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/game/\" + game.rawg_slug}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/game/\" + game.rawg_slug);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{game.rawg_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t{day.movies?.map((movie) => (\r\n\t\t\t\t\t<div key={movie.tmdb_id}>\r\n\t\t\t\t\t\tФильм{\" \"}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref={window.location.origin + \"/movie/\" + movie.tmdb_id}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thistory.push(\"/movie/\" + movie.tmdb_id);\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{movie.tmdb_name}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t{day.episodes?.map((episode) => (\r\n\t\t\t\t\t<div key={episode.tmdb_id}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id + \"/season/\" + episode.tmdb_season_number + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t[s{episode.tmdb_season_number}e{episode.tmdb_episode_number}] серия\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t&thinsp;сериала&thinsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={window.location.origin + \"/show/\" + episode.tmdb_show.tmdb_id}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/show/\" + episode.tmdb_show.tmdb_id);\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{episode.tmdb_show.tmdb_name}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction getIconForDay(day) {\r\n\t\tif ((day.games?.length > 0) & !(day.movies?.length > 0) & !(day.episodes?.length > 0)) return <MDBIcon icon='gamepad' />;\r\n\t\telse if ((day.movies?.length > 0) & !(day.games?.length > 0) & !(day.episodes?.length > 0)) return <MDBIcon icon='film' />;\r\n\t\telse if ((day.episodes?.length > 0) & !(day.movies?.length > 0) & !(day.games?.length > 0)) return <MDBIcon icon='tv' />;\r\n\t\telse return <MDBIcon icon='dice-d6' />;\r\n\t}\r\n\r\n\tfunction dateDiff(date) {\r\n\t\tlet now = new Date();\r\n\t\tlet time = date.getTime();\r\n\t\tlet timeNow = now.getTime();\r\n\t\tlet diff = (time - timeNow) / (24 * 3600 * 1000);\r\n\t\tif (diff < 1)\r\n\t\t\tif (now.getUTCDay() === date.getUTCDay()) return 0;\r\n\t\t\telse return 1;\r\n\t\treturn parseInt(diff) + 1;\r\n\t}\r\n\r\n\tfunction intToDays(number) {\r\n\t\tif (11 <= number && number <= 14) return \"дней\";\r\n\t\telse if (number % 10 === 1) return \"день\";\r\n\t\telse if (2 <= number % 10 && number % 10 <= 4) return \"дня\";\r\n\t\telse return \"дней\";\r\n\t}\r\n\r\n\tfunction remainedDays(date) {\r\n\t\tlet days = dateDiff(date);\r\n\t\tif (days > 0) return `${days} ${intToDays(days)}`;\r\n\t\telse return \"сегодня\";\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Timeline style={myStyle} lineColor='#A6A6AB'>\r\n\t\t\t{calendar?.map((day) => {\r\n\t\t\t\tlet date = new Date(day[0]);\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<TimelineEvent\r\n\t\t\t\t\t\ttitle={`${remainedDays(date)}, ${date.toLocaleDateString(\"ru-RU\", {\r\n\t\t\t\t\t\t\tyear: date.getFullYear() === new Date().getFullYear() ? undefined : \"numeric\",\r\n\t\t\t\t\t\t\tmonth: \"long\",\r\n\t\t\t\t\t\t\tday: \"numeric\",\r\n\t\t\t\t\t\t\tweekday: \"long\",\r\n\t\t\t\t\t\t})}`}\r\n\t\t\t\t\t\tkey={day[0]}\r\n\t\t\t\t\t\tclassName='timelineEvent'\r\n\t\t\t\t\t\ticon={getIconForDay(day[1])}\r\n\t\t\t\t\t\tcardHeaderStyle={myStyle}\r\n\t\t\t\t\t\ticonStyle={{ ...myStyle, fontSize: \"1.2rem\" }}\r\n\t\t\t\t\t\tbubbleStyle={myStyle}\r\n\t\t\t\t\t\tcontentStyle={{ ...myStyle, fontSize: \"1.1rem\", marginTop: \"0.2rem\", marginBottom: \"0.2rem\" }}\r\n\t\t\t\t\t\ttitleStyle={{ ...myStyle, fontSize: \"1.1rem\" }}\r\n\t\t\t\t\t\tsubtitleStyle={myStyle}>\r\n\t\t\t\t\t\t{getContentForDay(day[1])}\r\n\t\t\t\t\t</TimelineEvent>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</Timeline>\r\n\t);\r\n}\r\n\r\nexport default ReleasesList;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport CurrentUserStore from \"../../store/CurrentUserStore\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport Calendar from \"react-calendar\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport \"react-calendar/dist/Calendar.css\";\r\nimport DayInfo from \"./DayInfo\";\r\nimport ReleasesList from \"./ReleasesList\";\r\n\r\nconst CalendarPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { calendar, calendarState, requestCalendar } = CurrentUserStore;\r\n\r\n\tconst [value, onChange] = useState(new Date());\r\n\tconst [currentDay, setCurrentDay] = useState({});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (loggedIn) {\r\n\t\t\trequestCalendar();\r\n\t\t}\r\n\t}, [loggedIn, requestCalendar]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (calendarState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${calendarState}`);\r\n\t}, [calendarState]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (calendar) {\r\n\t\t\tif (formatDate(value) in calendar) setCurrentDay(calendar[formatDate(value)]);\r\n\t\t\telse setCurrentDay({});\r\n\t\t}\r\n\t}, [value, calendar]);\r\n\r\n\tfunction dateToTile({ activeStartDate, date, view }) {\r\n\t\tif (view === \"month\" && formatDate(date) in calendar) {\r\n\t\t\tlet day = calendar[formatDate(date)];\r\n\t\t\treturn (\r\n\t\t\t\t<div className='calendarDay'>\r\n\t\t\t\t\t<div className='calendarDayTile Games' hidden={!(day?.games?.length > 0)}>\r\n\t\t\t\t\t\t{day?.games?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='calendarDayTile Movies' hidden={!(day?.movies?.length > 0)}>\r\n\t\t\t\t\t\t{day?.movies?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='calendarDayTile Episodes' hidden={!(day?.episodes?.length > 0)}>\r\n\t\t\t\t\t\t{day?.episodes?.length}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg textureBG' />\r\n\t\t\t<div className='contentPage'>\r\n\t\t\t\t<div className='contentBody header'>\r\n\t\t\t\t\t<h1 className='calendarHeader'>Календарь релизов</h1>\r\n\t\t\t\t\t<LoadingOverlay active={calendarState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? <DayInfo day={currentDay} date={value} /> : \"\"}\r\n\t\t\t\t\t\t<Calendar className='calendar' onChange={onChange} value={value} defaultView='month' minDetail='decade' locale='ru-RU' minDate={new Date()} tileContent={dateToTile} />\r\n\t\t\t\t\t\t{/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? \"\" : <DayInfo day={currentDay} date={value} />}\r\n\t\t\t\t\t\t<ReleasesList calendar={Object.entries(calendar)} />\r\n\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default CalendarPage;\r\n\r\nfunction pad(number) {\r\n\tif (number < 10) {\r\n\t\treturn \"0\" + number;\r\n\t}\r\n\treturn number;\r\n}\r\nfunction formatDate(date) {\r\n\treturn date.getFullYear() + \"-\" + pad(date.getMonth() + 1) + \"-\" + pad(date.getDate());\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport CurrentUserStore from \"../../store/CurrentUserStore\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\n\r\nconst SettingsPage = observer((props) => {\r\n\tconst { loggedIn, user } = AuthStore;\r\n\tconst { settings, requestSettings, patchSettings, settingsState, saveSettingsState } = CurrentUserStore;\r\n\r\n\tconst [gameNotifInput, setGameNotifInput] = useState(false);\r\n\tconst [movieNotifInput, setMovieNotifInput] = useState(false);\r\n\tconst [showNotifInput, setShowNotifInput] = useState(false);\r\n\tconst [privacySelect, setPrivacySelect] = useState(\"Все\");\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestSettings();\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (saveSettingsState === \"saved\") toast.success(\"Настройки сохранены!\");\r\n\t\tif (saveSettingsState.startsWith(\"error:\")) toast.error(`Ошибка сохранения! ${saveSettingsState}`);\r\n\t}, [saveSettingsState]);\r\n\tuseEffect(() => {\r\n\t\tif (settingsState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${settingsState}`);\r\n\t}, [settingsState]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (settings.receive_games_releases) setGameNotifInput(settings.receive_games_releases);\r\n\t\t\tif (settings.receive_movies_releases) setMovieNotifInput(settings.receive_movies_releases);\r\n\t\t\tif (settings.receive_episodes_releases) setShowNotifInput(settings.receive_episodes_releases);\r\n\t\t\tif (settings.privacy) setPrivacySelect(settings.privacy);\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[settings]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg textureBG' />\r\n\t\t\t<div className='contentPage'>\r\n\t\t\t\t<div className='contentBody'>\r\n\t\t\t\t\t<h1 className='settingsHeader'>Настройки</h1>\r\n\r\n\t\t\t\t\t<LoadingOverlay active={settingsState === \"pending\" || saveSettingsState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>Подписка на почтовые уведомления:</h3>\r\n\t\t\t\t\t\t\t<div className='settingsRow' onClick={() => setGameNotifInput(!gameNotifInput)}>\r\n\t\t\t\t\t\t\t\t<input type='checkbox' className='settingsCheckbox' checked={gameNotifInput} onChange={(event) => setGameNotifInput(event.target.checked)} />\r\n\t\t\t\t\t\t\t\t{\" релиз новых игр\"}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='settingsRow' onClick={() => setMovieNotifInput(!movieNotifInput)}>\r\n\t\t\t\t\t\t\t\t<input type='checkbox' className='settingsCheckbox' checked={movieNotifInput} onChange={(event) => setMovieNotifInput(event.target.checked)} />\r\n\t\t\t\t\t\t\t\t{\" релиз новых фильмов\"}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='settingsRow' onClick={() => setShowNotifInput(!showNotifInput)}>\r\n\t\t\t\t\t\t\t\t<input type='checkbox' className='settingsCheckbox' checked={showNotifInput} onChange={(event) => setShowNotifInput(event.target.checked)} />\r\n\t\t\t\t\t\t\t\t{\" релиз новых серий сериалов\"}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<div className='settingsRow'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='privacySelect'>Кто может видеть мой профиль:</label>\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\tid='privacySelect'\r\n\t\t\t\t\t\t\t\t\tname='privacySelect'\r\n\t\t\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\t\t\tsetPrivacySelect(event.target.value);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tvalue={privacySelect}>\r\n\t\t\t\t\t\t\t\t\t<option value='Все'>Все</option>\r\n\t\t\t\t\t\t\t\t\t<option value='Никто'>Никто</option>\r\n\t\t\t\t\t\t\t\t\t<option value='Друзья'>Мои подписки</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='settingsRow' hidden={!(settings.privacy !== privacySelect && privacySelect === \"Никто\")}>\r\n\t\t\t\t\t\t\t\tВнимание! Полное закрытие профиля удалит вас из подписок других пользователей!\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='saveSettingsButton'\r\n\t\t\t\t\t\t\tdisabled={!loggedIn}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tpatchSettings({ receive_games_releases: gameNotifInput, receive_movies_releases: movieNotifInput, receive_episodes_releases: showNotifInput, privacy: privacySelect });\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tСохранить\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t\t<p>Ваша почта {user.email}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SettingsPage;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"react-rating\";\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nfunction DetailedEpisodeRow({ episode, showID, seasonNumber, setShowEpisodeUserStatus, loggedIn }) {\r\n\tlet history = useHistory();\r\n\r\n\tfunction parseDate(date) {\r\n\t\tlet newDate = new Date(date);\r\n\t\treturn newDate.toLocaleDateString(\"ru-RU\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='episodeRow detailRow'>\r\n\t\t\t<div className='episodeRowCheckDate'>\r\n\t\t\t\t<p className='episodeRowDate'>{parseDate(episode.tmdb_release_date)}</p>\r\n\t\t\t</div>\r\n\t\t\t<div hidden={!loggedIn} className='episodeRowRate'>\r\n\t\t\t\t<Rating\r\n\t\t\t\t\tstart={-1}\r\n\t\t\t\t\tstop={10}\r\n\t\t\t\t\temptySymbol={[<MDBIcon icon='eye-slash' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon far icon='star' size='1x' />))}\r\n\t\t\t\t\tfullSymbol={[<MDBIcon icon='eye' />].concat([1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((n) => <MDBIcon icon='star' size='1x' title={n} />))}\r\n\t\t\t\t\treadonly={!loggedIn}\r\n\t\t\t\t\tinitialRating={-1}\r\n\t\t\t\t\tonChange={(score) => {\r\n\t\t\t\t\t\tsetShowEpisodeUserStatus(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tepisodes: [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttmdb_id: episode.tmdb_id,\r\n\t\t\t\t\t\t\t\t\t\tscore: score,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tshowID\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<a\r\n\t\t\t\tclassName='episodeRowName episodeLink detailRow'\r\n\t\t\t\thref={window.location.origin + \"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + showID + \"/season/\" + seasonNumber + \"/episode/\" + episode.tmdb_episode_number);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}\r\n\t\t\t\ttitle={episode.tmdb_name}>\r\n\t\t\t\tСерия {episode.tmdb_episode_number} - {episode.tmdb_name}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailedEpisodeRow;\r\n","import React, { useEffect } from \"react\";\r\nimport EpisodeRow from \"./EpisodeRow\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction ShowBlock({ loggedIn, show, setShowEpisodeUserStatus }) {\r\n\tlet history = useHistory();\r\n\r\n\tuseEffect(\r\n\t\t() => {},\r\n\t\t// eslint-disable-next-line\r\n\t\t[show]\r\n\t);\r\n\r\n\tfunction getUserSeasonOpen(showID, seasonNumber) {\r\n\t\tlet localData = localStorage.getItem(`${showID}_${seasonNumber}`);\r\n\t\treturn localData ? localData === \"true\" : true;\r\n\t}\r\n\r\n\tfunction setUserSeasonOpen(showID, seasonNumber, isOpen) {\r\n\t\tlocalStorage.setItem(`${showID}_${seasonNumber}`, isOpen);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='unwatchedShowBlock'>\r\n\t\t\t<a\r\n\t\t\t\thref={window.location.origin + \"/show/\" + show.tmdb_id}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\thistory.push(\"/show/\" + show.tmdb_id);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}}>\r\n\t\t\t\t<h4>{show?.tmdb_name}</h4>\r\n\t\t\t</a>\r\n\r\n\t\t\t{show?.seasons.map((season, counter) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<details\r\n\t\t\t\t\t\topen={getUserSeasonOpen(show.tmdb_id, season.tmdb_season_number)}\r\n\t\t\t\t\t\tclassName='unwatchedSeasonBlock'\r\n\t\t\t\t\t\tkey={counter}\r\n\t\t\t\t\t\tonToggle={(e) => setUserSeasonOpen(show.tmdb_id, season.tmdb_season_number, e.target.open)}>\r\n\t\t\t\t\t\t<summary>{season.tmdb_name}</summary>\r\n\t\t\t\t\t\t<ul class='content'>\r\n\t\t\t\t\t\t\t{season.episodes.map((episode, counter) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<li className='episode' key={counter}>\r\n\t\t\t\t\t\t\t\t\t\t<EpisodeRow\r\n\t\t\t\t\t\t\t\t\t\t\tepisode={episode}\r\n\t\t\t\t\t\t\t\t\t\t\tshowID={show.tmdb_id}\r\n\t\t\t\t\t\t\t\t\t\t\tseasonNumber={season.tmdb_season_number}\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowEpisodeUserStatus={setShowEpisodeUserStatus}\r\n\t\t\t\t\t\t\t\t\t\t\tloggedIn={loggedIn}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</details>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ShowBlock;\r\n","import React, { useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"../../store/AuthStore\";\r\nimport CurrentUserStore from \"../../store/CurrentUserStore\";\r\nimport ShowStore from \"../../store/ShowStore\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport LoadingOverlay from \"react-loading-overlay\";\r\nimport ShowBlock from \"./ShowBlock\";\r\n\r\nconst UnwatchedPage = observer((props) => {\r\n\tconst { loggedIn } = AuthStore;\r\n\tconst { unwatched, requestUnwatched, unwatchedState } = CurrentUserStore;\r\n\tconst { setEpisodesStatus } = ShowStore;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (unwatchedState.startsWith(\"error:\")) toast.error(`Ошибка загрузки! ${unwatchedState}`);\r\n\t}, [unwatchedState]);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tif (loggedIn) requestUnwatched();\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[loggedIn]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='bg textureBG' />\r\n\t\t\t<div className='contentPage'>\r\n\t\t\t\t<div className='contentBody header'>\r\n\t\t\t\t\t<h1>Непросмотренные серии</h1>\r\n\t\t\t\t\t<LoadingOverlay active={unwatchedState === \"pending\"} spinner text='Загрузка...'>\r\n\t\t\t\t\t\t{unwatched.map((show) => (\r\n\t\t\t\t\t\t\t<ShowBlock show={show} setShowEpisodeUserStatus={setEpisodesStatus} loggedIn={loggedIn} key={show.id} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</LoadingOverlay>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default UnwatchedPage;\r\n","import React, { useEffect, useState } from \"react\";\r\n/**\r\n * Основная страница приложения\r\n */\r\nfunction NotFoundPage() {\r\n\tconst [angle, setAngle] = useState(0);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\twindow.requestAnimationFrame(() => setAngle(angle + 1));\r\n\t\t},\r\n\t\t// eslint-disable-next-line\r\n\t\t[angle]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='contentPage'>\r\n\t\t\t<div className='bg' />\r\n\t\t\t<div className='contentBody header'>\r\n\t\t\t\t<div className='notFound'>\r\n\t\t\t\t\t<p style={{ fontSize: \"3rem\" }}>Страница не найдена!</p>\r\n\t\t\t\t\t<div style={{ transform: `rotate(${angle}deg)` }}>\r\n\t\t\t\t\t\t<img src='images/wrongPage.png' alt='Картинка' style={{ width: \"500px\", maxWidth: \"80%\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default NotFoundPage;\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport HomePage from \"./components/HomePage\";\r\nimport GamePage from \"./components/Game/GamePage\";\r\nimport MoviePage from \"./components/Movie/MoviePage\";\r\nimport ShowPage from \"./components/Show/ShowPage\";\r\nimport SeasonPage from \"./components/Show/SeasonPage\";\r\nimport EpisodePage from \"./components/Show/EpisodePage\";\r\nimport SearchPage from \"./components/Search/SearchPage\";\r\nimport ConfirmPage from \"./components/ConfirmPage\";\r\nimport ConfirmPasswordPage from \"./components/ConfirmPasswordPage\";\r\nimport UserPage from \"./components/UserPage/UserPage\";\r\nimport CalendarPage from \"./components/Calendar/CalendarPage\";\r\nimport SettingsPage from \"./components/Settings/SettingsPage\";\r\nimport UnwatchedPage from \"./components/Unwatched/UnwatchedPage\";\r\nimport NotFoundPage from \"./components/NotFoundPage\";\r\n\r\nclass Routes extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route exact path='/' component={HomePage} />\r\n\t\t\t\t<Route exact path='/game/:id' component={GamePage} />\r\n\t\t\t\t<Route exact path='/movie/:id' component={MoviePage} />\r\n\t\t\t\t<Route exact path='/show/:id' component={ShowPage} />\r\n\t\t\t\t<Route exact path='/show/:show_id/season/:number' component={SeasonPage} />\r\n\t\t\t\t<Route exact path='/show/:show_id/season/:season_number/episode/:episode_number' component={EpisodePage} />\r\n\t\t\t\t<Route exact path='/search/:query' component={SearchPage} />\r\n\t\t\t\t<Route exact path='/confirm/' component={ConfirmPage} />\r\n\t\t\t\t<Route exact path='/confirm_password/' component={ConfirmPasswordPage} />\r\n\t\t\t\t<Route exact path='/user/:userID' component={UserPage} />\r\n\t\t\t\t<Route exact path='/user/:userID/:category' component={UserPage} />\r\n\t\t\t\t<Route exact path='/calendar' component={CalendarPage} />\r\n\t\t\t\t<Route exact path='/settings' component={SettingsPage} />\r\n\t\t\t\t<Route exact path='/unwatched' component={UnwatchedPage} />\r\n\t\t\t\t<Route component={NotFoundPage} />\r\n\t\t\t</Switch>\r\n\t\t);\r\n\t}\r\n}\r\n//\r\nexport default Routes;\r\n","import React, { useEffect } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { observer } from \"mobx-react\";\r\nimport AuthStore from \"./store/AuthStore\";\r\n\r\nimport Navbar from \"./components/Navbar\";\r\nimport Footer from \"./components/Footer\";\r\nimport Sidebar from \"./components/Sidebar\";\r\nimport LoginForm from \"./components/Modals/LoginForm\";\r\nimport RegistrationForm from \"./components/Modals/RegistrationForm\";\r\nimport ResetPasswordForm from \"./components/Modals/ResetPasswordForm\";\r\nimport { ToastContainer } from \"react-toastify\";\r\n\r\nimport Routes from \"./Routes\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst App = observer((props) => {\r\n\tconst { checkAuthorization } = AuthStore;\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tcheckAuthorization();\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className='mainDiv'>\r\n\t\t\t<Router>\r\n\t\t\t\t<Navbar />\r\n\t\t\t\t<Sidebar />\r\n\t\t\t\t<Routes />\r\n\t\t\t</Router>\r\n\t\t\t<Footer />\r\n\t\t\t<ToastContainer position='top-center' hideProgressBar newestOnTop closeOnClick autoClose={3000} />\r\n\t\t\t<LoginForm />\r\n\t\t\t<RegistrationForm />\r\n\t\t\t<ResetPasswordForm />\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === \"localhost\" ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === \"[::1]\" ||\r\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"load\", () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA\");\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then((registration) => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\"New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { \"Service-Worker\": \"script\" },\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get(\"content-type\");\r\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\"No internet connection found. App is running in offline mode.\");\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif (\"serviceWorker\" in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then((registration) => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\nimport \"mdbreact/dist/css/mdb.css\";\r\nimport \"./styles/css/main.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\nserviceWorker.register();\r\n"],"sourceRoot":""}