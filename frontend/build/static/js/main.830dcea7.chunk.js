(this.webpackJsonpinterests=this.webpackJsonpinterests||[]).push([[0],{135:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(10),o=n.n(c),s=(n(78),n(79),n(80),n(81),n(17)),u=n(11),l=n(62),i=n(63),m=n(72),p=n(71),g=n(8),E=n(20);n(39);var f=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0435\u0449\u0451 \u043d\u0435 \u0433\u043e\u0442\u043e\u0432\u0430"))},d=n(18),h=n(3),b=n(23),_=n.n(b),v=n(68),O=n(69),S=Object(O.a)({auth:{loggedIn:!1},user:{username:"",email:"",id:null},content:{game:{rawg:{name:"",background_image:"",background_image_additional:"",developers:[{}]},hltb:{game_image_url:""},user_info:{status:null,review:"",score:0,spent_time:0}}},searchContent:{games:[]},userPageContent:{},openedPages:{LoginForm:!1,RegistrateForm:!1},errors:{auth:!1,registrate:!1,gameRequest:!1,userPage:!1},isLoading:{contentGame:!1,searchGames:!1,userPageContent:!1}});function y(e){return e.get("auth").loggedIn}function I(e){return e.get("content").game}function T(e){return e.get("searchContent").games}function R(e){return e.get("errors").auth}function w(e){return e.get("errors").registrate}function N(e){return e.get("errors").gameRequest}function A(e){return e.get("user")}function k(e){return e.get("openedPages").LoginForm}function C(e){return e.get("openedPages").RegistrateForm}function x(e){return e.get("isLoading").contentGame}function j(e){return e.get("isLoading").searchGames}function G(e){return e.get("isLoading").userPageContent}function L(e){return e.get("userPageContent")}var U=n(4),F=n.n(U),B=n(9),M=n(16),P=n.n(M),D=n(29),H=n.n(D),q="http://35.193.124.214:8001/",z=q+"users/auth/login/",W=q+"users/auth/refresh-token/",X=q+"users/auth/signup/",J=q+"users/auth/confirmation/",Q=q+"games/game/",V=q+"users/user/",$={headers:{"Content-Type":"application/json;charset=UTF-8"}};function K(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(B.a)(F.a.mark((function e(t,n){var a,r,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.post(z,{username:t,password:n},$);case 3:return a=e.sent,r=H()(a.data.access),c={username:r.username,id:r.user_id,email:r.email},e.abrupt("return",{token:a.data.access,refreshToken:a.data.refresh,user:c});case 9:return e.prev=9,e.t0=e.catch(0),console.log("axios error: "+e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function Z(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(B.a)(F.a.mark((function e(t){var n,a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("undefined"!==typeof t&null!=t)){e.next=14;break}return e.prev=1,e.next=4,P.a.post(W,{refresh:t},$);case 4:return n=e.sent,a=H()(n.data.access),r={username:a.username,id:a.user_id,email:a.email},e.abrupt("return",{token:n.data.access,user:r});case 10:return e.prev=10,e.t0=e.catch(1),console.log("exios error: "+e.t0),e.abrupt("return",null);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function te(e,t,n){return ne.apply(this,arguments)}function ne(){return(ne=Object(B.a)(F.a.mark((function e(t,n,a){var r,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.post(X,{username:t,email:n,password:a},$);case 3:return r=e.sent,c=r.data,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(0),console.log("AXIOS ERROR: ",e.t0.response),e.abrupt("return",e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ae(e,t){return re.apply(this,arguments)}function re(){return(re=Object(B.a)(F.a.mark((function e(t,n){var a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t),console.log(n),e.next=5,P.a.get(J,{uid64:t,token:n},$);case 5:return a=e.sent,r=a.data,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),console.log("AXIOS ERROR: ",e.t0.response),e.abrupt("return",e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var ce={headers:{"Content-Type":"application/json;charset=UTF-8"}};function oe(e,t){return se.apply(this,arguments)}function se(){return(se=Object(B.a)(F.a.mark((function e(t,n){var a,r,c,o;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=9;break}return r="Bearer "+t,e.next=5,P.a.get(Q+n+"/",{headers:{Authorization:r}});case 5:c=e.sent,a=c.data,e.next=13;break;case 9:return e.next=11,P.a.get(Q+n+"/",ce);case 11:o=e.sent,a=o.data;case 13:return e.abrupt("return",a);case 16:return e.prev=16,e.t0=e.catch(0),console.log("AXIOS ERROR: ",e.t0),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function ue(e,t,n){return le.apply(this,arguments)}function le(){return(le=Object(B.a)(F.a.mark((function e(t,n,a){var r,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="Bearer "+t,console.log(a),e.next=5,P.a.put(Q+n+"/",a,{headers:{Authorization:r}});case 5:if(c=e.sent,console.log(c),204!==c.status&&200!==c.status&&201!==c.status){e.next=11;break}return e.abrupt("return",c.data);case 11:return e.abrupt("return",null);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.log("AXIOS ERROR: ",e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function ie(e,t){return me.apply(this,arguments)}function me(){return(me=Object(B.a)(F.a.mark((function e(t,n){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.get("http://35.193.124.214:8001/games/search/",{params:{query:t,page:n}},{headers:{"Content-Type":"application/json;charset=UTF-8"}});case 3:return a=e.sent,console.log(a),e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),console.log("AXIOS ERROR: ",e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function pe(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Object(B.a)(F.a.mark((function e(t,n){var a,r,c,o;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=9;break}return r="Bearer "+t,e.next=5,P.a.get(V+n+"/",{headers:{Authorization:r}});case 5:c=e.sent,a=c.data,e.next=13;break;case 9:return e.next=11,P.a.get(V+n+"/",ce);case 11:o=e.sent,a=o.data;case 13:return e.abrupt("return",a);case 16:return e.prev=16,e.t0=e.catch(0),console.log("AXIOS ERROR: ",e.t0),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function Ee(){return function(){var e=Object(B.a)(F.a.mark((function e(t){var n,a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===localStorage.getItem("token")|Date.now()-localStorage.getItem("tokenTime")>86e6)){e.next=16;break}return e.next=3,Z(localStorage.getItem("refreshToken"));case 3:if(null===(n=e.sent)){e.next=12;break}return t({type:"SET_AUTH",auth:{loggedIn:!0}}),t({type:"SET_USER",user:n.user}),localStorage.setItem("token",n.token),localStorage.setItem("tokenTime",Date.now()),e.abrupt("return",!0);case 12:return t(fe()),e.abrupt("return",!1);case 14:e.next=21;break;case 16:return a=H()(localStorage.getItem("token")),r={username:a.username,id:a.user_id,email:a.email},t({type:"SET_USER",user:r}),t({type:"SET_AUTH",auth:{loggedIn:!0}}),e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function fe(){return function(){var e=Object(B.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("refreshToken"),localStorage.removeItem("token"),localStorage.removeItem("tokenTime"),t({type:"SET_AUTH",auth:{loggedIn:!1}}),t({type:"SET_USER",user:{username:"",id:null,email:""}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}P.a.defaults.headers.common={"Content-Type":"application/json"};var de=function(e){var t=e.statuses,n=e.activeColor,c=e.onChangeStatus,o=e.userStatus,s=Object(a.useState)(""),u=Object(d.a)(s,2),l=u[0],i=u[1];return Object(a.useEffect)((function(){i(o||t[0])}),[t,o]),r.a.createElement("div",null,t.map((function(e){return r.a.createElement("button",{className:"contentStatuses",key:e,style:{backgroundColor:l===e?n:"#1d0d0d"},onClick:function(){c(e)&&i(e)}},e)})))};var he=Object(u.b)((function(e){return{loggedIn:y(e),requestError:N(e),game:I(e),gameIsLoading:x(e)}}),(function(e){return{requestGame:function(t){e(function(e){return function(){var t=Object(B.a)(F.a.mark((function t(n){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_IS_LOADING_CONTENT_GAME",isLoading:!0}),oe(localStorage.getItem("token"),e).then((function(e){console.log(e),null!=e?(n({type:"SET_CONTENT_GAME",game:e}),n({type:"SET_IS_LOADING_CONTENT_GAME",isLoading:!1})):(E.b.error("\u0418\u0433\u0440\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430!"),n({type:"GAME_REQUEST_ERROR",error:!0}),n({type:"SET_IS_LOADING_CONTENT_GAME",isLoading:!1}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},openLoginForm:function(){e({type:"SET_LOGINFORM",isOpen:!0})},setGameStatus:function(t){var n;e((n=t,function(){var e=Object(B.a)(F.a.mark((function e(t,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Ee());case 2:if(!e.sent){e.next=4;break}ue(localStorage.getItem("token"),I(a()).rawg.slug,n).then((function(e){e?t({type:"SET_CONTENT_GAME_USERINFO",user_info:e}):E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430")}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))}}}))((function(e){var t=e.requestGame,n=e.game,c=(e.requestError,e.loggedIn),o=e.openLoginForm,s=e.setGameStatus,u=e.gameIsLoading,l=Object(g.g)().id,i=Object(a.useState)(""),m=Object(d.a)(i,2),p=m[0],E=m[1],f=Object(a.useState)(""),b=Object(d.a)(f,2),O=b[0],S=b[1],y=Object(a.useState)(""),I=Object(d.a)(y,2),T=I[0],R=I[1],w=Object(a.useState)({ameplay_main_extra:-1,gameplay_main:-1,gameplay_comletionist:-1}),N=Object(d.a)(w,2),A=N[0],k=N[1],C=Object(a.useState)(!0),x=Object(d.a)(C,2);return x[0],x[1],Object(a.useEffect)((function(){t(l)}),[l,t,c]),Object(a.useEffect)((function(){if(n.rawg.genres){for(var e="",t=0;t<n.rawg.genres.length;t++)e+=n.rawg.genres[t].name,t!==n.rawg.genres.length-1&&(e+=", ");E(e)}n.rawg.metacritic?S(r.a.createElement("div",null,r.a.createElement("div",{className:"metacritic"},r.a.createElement("p",null,n.rawg.metacritic)),r.a.createElement("p",{className:"metacriticText"},"Metascore"))):S(""),n.hltb?k(n.hltb):k({gameplay_main_extra:-1,gameplay_main:-1,gameplay_comletionist:-1}),n.user_info&&R(n.user_info.review)}),[n]),r.a.createElement("div",null,r.a.createElement("div",{className:"bg",style:{backgroundImage:"url(".concat(n.rawg.background_image_additional?n.rawg.background_image_additional:n.rawg.background_image,")")}}),r.a.createElement(_.a,{active:u,spinner:!0,text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."},r.a.createElement(h.d,null,r.a.createElement(h.v,null,r.a.createElement(h.c,{md:"0.5"}),r.a.createElement(h.c,{className:"gameContentPage"},r.a.createElement(h.d,null,r.a.createElement(h.v,{className:"gameContentHeader rounded-top"},r.a.createElement(h.c,{size:"5"},r.a.createElement("img",{src:n.rawg.background_image,className:"img-fluid",alt:""})),r.a.createElement(h.c,{size:"6"},r.a.createElement("h1",null,n.rawg.name),r.a.createElement("p",{style:{marginBottom:"2px"}},"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a: ",n.rawg.developers[0].name),r.a.createElement("p",{style:{marginBottom:"2px"}},"\u0414\u0430\u0442\u0430 \u0440\u0435\u043b\u0438\u0437\u0430: ",n.rawg.released),r.a.createElement("p",{style:{marginBottom:"2px"}},"\u0416\u0430\u043d\u0440: ",p),r.a.createElement("p",{style:{marginBottom:"4px"},hidden:A.gameplay_main<0},r.a.createElement(h.j,{far:!0,icon:"clock"})," \u0412\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f: ",A.gameplay_main," ",A.gameplay_main_unit),r.a.createElement("br",null),r.a.createElement(v.a,{stop:10,emptySymbol:r.a.createElement(h.j,{far:!0,icon:"star",size:"1x",style:{fontSize:"25px"}}),fullSymbol:[1,2,3,4,5,6,7,8,9,10].map((function(e){return r.a.createElement(h.j,{icon:"star",size:"1x",style:{fontSize:"25px"},title:e})})),initialRating:n.user_info?n.user_info.score:0,readonly:!c|!n.user_info,onChange:function(e){c?s({score:e}):o()}})," ",r.a.createElement("br",null),r.a.createElement(de,{loggedIn:c,statuses:["\u041d\u0435 \u0438\u0433\u0440\u0430\u043b","\u0411\u0443\u0434\u0443 \u0438\u0433\u0440\u0430\u0442\u044c","\u0418\u0433\u0440\u0430\u044e","\u0414\u0440\u043e\u043f\u043d\u0443\u043b","\u041f\u0440\u043e\u0448\u0435\u043b"],activeColor:"#6c0aab",userStatus:n.user_info?n.user_info.status:"\u041d\u0435 \u0438\u0433\u0440\u0430\u043b",onChangeStatus:function(e){c?(console.log(" \u0412\u041e\u0422"),console.log(),s({status:e})):o()}})),r.a.createElement(h.c,{size:"1"},O)),r.a.createElement(h.v,{className:"gameContentBody"},r.a.createElement(h.c,null,r.a.createElement("h3",{style:{paddingTop:"15px"}},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:n.rawg.description}}))),r.a.createElement(h.v,null,r.a.createElement(h.c,{size:"6"},r.a.createElement("h3",{style:{paddingTop:"10px"}},"\u041e\u0442\u0437\u044b\u0432\u044b"),r.a.createElement(h.l,{type:"textarea",id:"reviewInput",label:"\u0412\u0430\u0448 \u043e\u0442\u0437\u044b\u0432",value:T,onChange:function(e){return R(e.target.value)},outline:!0}),r.a.createElement("button",{className:"savePreviewButton",disabled:!c|!n.user_info,onClick:function(){c?s({review:document.getElementById("reviewInput").value}):o()}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))),r.a.createElement(h.c,{md:"0.5"})))))}));var be=function(e){var t=e.game,n=Object(g.f)();return Object(a.useEffect)((function(){}),[t]),r.a.createElement("div",{className:"searchCardGame",style:{backgroundImage:"url(".concat(t.background_image,")")},onClick:function(){return n.push("/game/"+t.slug)}},r.a.createElement("h3",{className:"searchCardGame"},t.name))};var _e=Object(u.b)((function(e){return{loggedIn:y(e),searchIsLoading:j(e),games:T(e)}}),(function(e){return{openLoginForm:function(){e({type:"SET_LOGINFORM",isOpen:!0})},searchGame:function(t,n){e(function(e,t){return function(){var n=Object(B.a)(F.a.mark((function n(a){return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"SET_IS_LOADING_SEARCH_GAMES",isLoading:!0}),ie(e,t).then((function(e){e?a({type:"SET_SEARCH_CONTENT_GAMES",games:e}):E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0438\u0441\u043a\u0430"),a({type:"SET_IS_LOADING_SEARCH_GAMES",isLoading:!1})}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))((function(e){e.loggedIn,e.openLoginForm;var t=e.searchIsLoading,n=e.searchGame,c=e.games,o=Object(g.f)(),s=Object(g.g)().query,u=Object(a.useState)(""),l=Object(d.a)(u,2),i=l[0],m=l[1];return Object(a.useEffect)((function(){n(s,1)}),[s]),Object(a.useEffect)((function(){m(r.a.createElement("div",{className:"searchCardsGroup"},c.map((function(e){return r.a.createElement(be,{game:e,key:e.id})}))))}),[c]),r.a.createElement("div",{className:"bg searchBG"},r.a.createElement(_.a,{active:t,spinner:!0,text:"\u0418\u0449\u0435\u043c..."},r.a.createElement(h.d,null,r.a.createElement(h.v,null,r.a.createElement(h.c,{md:"0.5"}),r.a.createElement(h.c,{className:"searchPage"},r.a.createElement("h1",null,"\u041f\u043e\u0438\u0441\u043a"),r.a.createElement(h.i,{className:"md-form",onSubmit:function(e){return e.preventDefault(),o.push("/search/"+document.getElementById("searchInput2").value),!1}},r.a.createElement(h.j,{icon:"search"}),r.a.createElement("input",{className:"form-control form-control-sm ml-3 w-50",type:"text",placeholder:"\u041d\u0430\u0439\u0442\u0438","aria-label":"Search",id:"searchInput2"})),r.a.createElement("h1",null,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"),r.a.createElement("h3",null,"\u0418\u0433\u0440\u044b"),r.a.createElement("hr",{style:{color:"#6C0AAB",backgroundColor:"#6C0AAB",height:2.5,borderColor:"#6C0AAB"}}),i,r.a.createElement("h3",null,"\u0424\u0438\u043b\u044c\u043c\u044b"),r.a.createElement("hr",{style:{color:"#6C0AAB",backgroundColor:"#6C0AAB",height:2.5,borderColor:"#6C0AAB"}}),i,r.a.createElement("h3",null,"\u0421\u0435\u0440\u0438\u0430\u043b\u044b"),r.a.createElement("hr",{style:{color:"#6C0AAB",backgroundColor:"#6C0AAB",height:2.5,borderColor:"#6C0AAB"}}),i),r.a.createElement(h.c,{md:"0.5"})))))}));var ve=Object(u.b)((function(e){return{isOpen:k(e),authError:R(e)}}),(function(e){return{closeForm:function(){e({type:"SET_LOGINFORM",isOpen:!1})},logIn:function(t,n){e(function(e,t){return function(){var n=Object(B.a)(F.a.mark((function n(a){var r;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"AUTH_ERROR",error:!1}),n.prev=1,n.next=4,K(e,t);case 4:null!==(r=n.sent)?(localStorage.setItem("refreshToken",r.refreshToken),localStorage.setItem("token",r.token),localStorage.setItem("tokenTime",Date.now()),a({type:"SET_AUTH",auth:{loggedIn:!0}}),a({type:"SET_USER",user:r.user}),a({type:"SET_LOGINFORM",isOpen:!1})):a({type:"AUTH_ERROR",error:!0}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),console.error(n.t0),a({type:"AUTH_ERROR",error:!0});case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))((function(e){var t=e.isOpen,n=e.closeForm,a=e.logIn,c=e.authError;return r.a.createElement(h.m,{isOpen:t,toggle:n,size:"sm",centered:!0},r.a.createElement(h.n,null,r.a.createElement(h.d,null,r.a.createElement(h.v,null,r.a.createElement(h.c,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(document.getElementById("loginInput").value,document.getElementById("passwordInput").value)}},r.a.createElement("p",{className:"h4 text-center mb-4"},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("p",{className:"note note-danger",hidden:!c},"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"),r.a.createElement("label",{htmlFor:"loginInput",className:"grey-text"},"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement("input",{type:"text",id:"loginInput",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"passwordInput",className:"grey-text"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",id:"passwordInput",className:"form-control"}),r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(h.b,{style:{color:"white",backgroundColor:"#6C0AAB"},type:"submit"},"\u0412\u043e\u0439\u0442\u0438"))))))))}));var Oe=Object(u.b)((function(e){return{isOpen:C(e),registrateArror:w(e),user:A(e)}}),(function(e){return{closeForm:function(){e({type:"SET_REGISTRATEFORM",isOpen:!1})},registrate:function(t,n,a){e(function(e,t,n){return function(){var a=Object(B.a)(F.a.mark((function a(r){return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:te(e,t,n).then((function(e){if(console.log(e),400!=e.status)r({type:"SET_USER",user:{login:e.username,email:e.email}}),r({type:"REGISTRATE_ERROR",error:!1});else{for(var t in e.data)E.b.error(e.data[t][0]);r({type:"REGISTRATE_ERROR",error:!0})}}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,n,a))}}}))((function(e){var t=e.isOpen,n=e.closeForm,a=e.registrate,c=e.registrateArror,o=e.user;return r.a.createElement(h.m,{isOpen:t,toggle:n,size:"sm",centered:!0},r.a.createElement(h.n,null,r.a.createElement(h.d,null,r.a.createElement(h.v,null,r.a.createElement(h.c,null,r.a.createElement("form",null,r.a.createElement("p",{className:"h4 text-center mb-4"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("p",{className:"note note-danger",hidden:!c},"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438!"),r.a.createElement("p",{className:"note note-success",hidden:""===o.email},o.login,", \u0434\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c! \u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0432\u0430\u0448\u0443 \u043f\u043e\u0447\u0442\u0443: ",o.email),r.a.createElement("label",{htmlFor:"loginInput",className:"grey-text"},"\u041d\u0438\u043a\u043d\u0435\u0439\u043c"),r.a.createElement("input",{type:"text",id:"loginInput",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"emailInput",className:"grey-text"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430"),r.a.createElement("input",{type:"email",id:"emailInput",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"passwordInput",className:"grey-text"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",id:"passwordInput",className:"form-control"}),r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(h.b,{style:{color:"white",backgroundColor:"#6C0AAB"},type:"button",onClick:function(){return a(document.getElementById("loginInput").value,document.getElementById("emailInput").value,document.getElementById("passwordInput").value)}},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))))))}));var Se=Object(u.b)((function(e){return{loggedIn:y(e)}}),(function(e){return{confirmEmailRequest:function(t,n){e(function(e,t){return Object(B.a)(F.a.mark((function n(){return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:ae(e,t).then((function(e){console.log(e),400!=e.status?E.b.success("\u041f\u043e\u0447\u0442\u0430 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430!"):E.b.error(e.data)}));case 1:case"end":return n.stop()}}),n)})))}(t,n))}}}))((function(e){var t=e.confirmEmailRequest,n=window.location.search,c=new URLSearchParams(n),o=c.get("uid64"),s=c.get("token");return Object(a.useEffect)((function(){t(o,s)}),[]),r.a.createElement("div",null)}));var ye=Object(u.b)((function(e){return{loggedIn:y(e),userIsLoading:G(e),userInfo:L(e)}}),(function(e){return{openLoginForm:function(){e({type:"SET_LOGINFORM",isOpen:!0})},getUserInfo:function(t){e(function(e){return function(){var t=Object(B.a)(F.a.mark((function t(n){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_IS_LOADING_USER_PAGE_CONTENT",isLoading:!0}),pe(localStorage.getItem("token"),e).then((function(e){console.log(e),null!=e?(n({type:"SET_USER_PAGE_CONTENT",content:e}),n({type:"SET_IS_LOADING_USER_PAGE_CONTENT",isLoading:!1})):(E.b.error("\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d!"),n({type:"USER_PAGE_ERROR",error:!0}),n({type:"SET_IS_LOADING_USER_PAGE_CONTENT",isLoading:!1}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.userIsLoading,n=e.getUserInfo,c=e.userInfo,o=Object(g.f)(),s=Object(g.g)().user_id,u=Object(a.useState)(),l=Object(d.a)(u,2),i=l[0],m=l[1];return Object(a.useEffect)((function(){n(s)}),[s]),Object(a.useEffect)((function(){c&&c.games?m(c.games.map((function(e){return r.a.createElement("tr",{key:e.game.id},r.a.createElement("td",{onClick:function(){return o.push("/game/"+e.game.slug)},style:{cursor:"pointer"}},e.game.name),r.a.createElement("td",null,e.status),r.a.createElement("td",null,e.score),r.a.createElement("td",null,e.review),r.a.createElement("td",null,e.spent_time))}))):m(null)}),[c]),r.a.createElement("div",{className:"bg searchBG"},r.a.createElement(_.a,{active:t,spinner:!0,text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."},r.a.createElement(h.d,null,r.a.createElement(h.v,null,r.a.createElement(h.c,{md:"0.5"}),r.a.createElement(h.c,{className:"searchPage"},r.a.createElement("h1",null,"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435 ",c.username),r.a.createElement("h3",null,"\u0418\u0433\u0440\u044b"),r.a.createElement("hr",{style:{color:"#6C0AAB",backgroundColor:"#6C0AAB",height:2.5,borderColor:"#6C0AAB"}}),r.a.createElement(h.w,null,r.a.createElement(h.y,null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("th",null,"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement("th",null,"\u041e\u0446\u0435\u043d\u043a\u0430"),r.a.createElement("th",null,"\u041e\u0442\u0437\u044b\u0432"),r.a.createElement("th",null,"\u0412\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f"))),r.a.createElement(h.x,null,i))),r.a.createElement(h.c,{md:"0.5"})))))}));var Ie=Object(u.b)((function(e){return{loggedIn:y(e),user:A(e)}}),(function(e){return{onLoginClick:function(){e({type:"SET_LOGINFORM",isOpen:!0})},onLogoutClick:function(){e(fe())},onRegistrationClick:function(){e({type:"SET_REGISTRATEFORM",isOpen:!0})}}}))((function(e){var t=e.loggedIn,n=e.onLoginClick,a=e.onLogoutClick,c=e.onRegistrationClick,o=e.user,s=Object(g.f)();return r.a.createElement(h.q,{style:{backgroundColor:"#6C0AAB"},dark:!0,expand:"md",fixed:"top"},r.a.createElement(h.r,null,r.a.createElement("strong",{className:"white-text"},"Interests")),r.a.createElement(h.s,{left:!0}),r.a.createElement(h.s,{right:!0},r.a.createElement(h.o,null,r.a.createElement(h.i,{onSubmit:function(e){return e.preventDefault(),s.push("/search/"+document.getElementById("searchInput").value),!1}},r.a.createElement("div",{className:"md-form my-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"text",placeholder:"\u041d\u0430\u0439\u0442\u0438","aria-label":"\u041d\u0430\u0439\u0442\u0438",id:"searchInput"})))),r.a.createElement(h.o,{className:"font-weight-bold",hidden:t},r.a.createElement(h.p,{to:"#",onClick:n},r.a.createElement(h.j,{icon:"sign-in-alt"})," \u0412\u043e\u0439\u0442\u0438")),r.a.createElement(h.o,{className:"font-weight-bold",hidden:t},r.a.createElement(h.p,{to:"#",onClick:c},r.a.createElement(h.j,{icon:"user-plus"})," \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement(h.o,{hidden:!t,className:"font-weight-bold"},r.a.createElement(h.e,null,r.a.createElement(h.h,{nav:!0,caret:!0},r.a.createElement("span",{className:"mr-2"},o.username)),r.a.createElement(h.g,null,r.a.createElement(h.f,{href:"/user/"+o.id},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement(h.f,{onClick:a},r.a.createElement(h.j,{icon:"sign-out-alt"})," \u0412\u044b\u0439\u0442\u0438"))))))})),Te=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ie,null),r.a.createElement("div",{className:"navbar"}),r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",component:f}),r.a.createElement(g.a,{exact:!0,path:"/game/:id",component:he}),r.a.createElement(g.a,{exact:!0,path:"/search/:query",component:_e}),r.a.createElement(g.a,{exact:!0,path:"/confirm/",component:Se}),r.a.createElement(g.a,{exact:!0,path:"/user/:user_id",component:ye}),r.a.createElement(g.a,{render:function(){return r.a.createElement("h1",null,"Not Found")}})),r.a.createElement(E.a,{position:"top-center",hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0}),r.a.createElement(ve,null),r.a.createElement(Oe,null))}}]),n}(r.a.Component);var Re=Object(u.b)(null,(function(e){return{onLoad:function(){e(Ee())}}}))((function(e){var t=e.onLoad;return Object(a.useEffect)((function(){t()}),[]),r.a.createElement(s.a,null,r.a.createElement("div",{className:"flyout"},r.a.createElement("main",null,r.a.createElement(Te,null))))})),we=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ae=n(24),ke=n(70),Ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ae.c,xe=Object(Ae.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return e.setIn(["user"],t.user);case"SET_AUTH":return e.setIn(["auth"],t.auth);case"SET_CONTENT_GAME":return e.setIn(["content","game"],t.game);case"SET_SEARCH_CONTENT_GAMES":return e.setIn(["searchContent","games"],t.games);case"SET_CONTENT_GAME_USERINFO":return e.setIn(["content","game","user_info"],t.user_info);case"SET_CONTENT_GAME_USERINFO_STATUS":return e.setIn(["content","game","user_info","status"],t.status);case"SET_CONTENT_GAME_USERINFO_SCORE":return e.setIn(["content","game","user_info","score"],t.score);case"SET_USER_PAGE_CONTENT":return e.setIn(["userPageContent"],t.content);case"SET_LOGINFORM":return e.setIn(["openedPages","LoginForm"],t.isOpen);case"SET_REGISTRATEFORM":return e.setIn(["openedPages","RegistrateForm"],t.isOpen);case"AUTH_ERROR":return e.setIn(["errors","auth"],t.error);case"REGISTRATE_ERROR":return e.setIn(["errors","registrate"],t.error);case"GAME_REQUEST_ERROR":return e.setIn(["errors","gameRequest"],t.error);case"USER_PAGE_ERROR":return e.setIn(["errors","userPage"],t.error);case"SET_IS_LOADING_CONTENT_GAME":return e.setIn(["isLoading","contentGame"],t.isLoading);case"SET_IS_LOADING_SEARCH_GAMES":return e.setIn(["isLoading","searchGames"],t.isLoading);case"SET_IS_LOADING_USER_PAGE_CONTENT":return e.setIn(["isLoading","userPageContent"],t.isLoading);default:return e}}),Ce(Object(Ae.a)(ke.a)));o.a.render(r.a.createElement(u.a,{store:xe},r.a.createElement(Re,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");we?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ne(t,e)}))}}();t.default=xe},73:function(e,t,n){e.exports=n(135)},81:function(e,t,n){}},[[73,1,2]]]);
//# sourceMappingURL=main.830dcea7.chunk.js.map